{
  "description": "Test data for Tier System implementation",
  "testCases": [
    {
      "name": "Test 1: Import with Mixed Case Tier",
      "input": {
        "tier": "Higher"
      },
      "expected": {
        "tier": "higher"
      },
      "description": "Tier value should be normalized to lowercase"
    },
    {
      "name": "Test 2: CSV Import with Tier Column",
      "input": {
        "csv": "subject,unit,topic,question,answers,tier\nMaths,Unit 1,Algebra,What is 2+2?,4,higher\nMaths,Unit 1,Algebra,What is 1+1?,2,foundation\nMaths,Unit 1,Algebra,What is 3+3?,6,H\nMaths,Unit 1,Algebra,What is 4+4?,8,F"
      },
      "expected": {
        "prompts": [
          { "question": "What is 2+2?", "tier": "higher" },
          { "question": "What is 1+1?", "tier": "foundation" },
          { "question": "What is 3+3?", "tier": "higher" },
          { "question": "What is 4+4?", "tier": "foundation" }
        ]
      },
      "description": "CSV import should parse tier column and normalize values"
    },
    {
      "name": "Test 3: Single Prompt Tier Update",
      "action": "Update prompt tier from null to 'foundation'",
      "input": {
        "promptId": "uuid-123",
        "tier": "foundation"
      },
      "expected": {
        "success": true,
        "updatedCount": 1,
        "prompt": {
          "id": "uuid-123",
          "tier": "foundation"
        }
      },
      "description": "Single prompt tier update should work via admin UI"
    },
    {
      "name": "Test 4: Bulk Topic Assignment",
      "action": "Assign Higher tier to all prompts in Topic X",
      "input": {
        "topicId": "topic-uuid",
        "tier": "higher",
        "onlyNullTiers": false
      },
      "expected": {
        "success": true,
        "updatedCount": 25,
        "distribution": {
          "total": 25,
          "higher": 25,
          "foundation": 0,
          "unassigned": 0
        }
      },
      "description": "Bulk assignment should update all prompts in topic"
    },
    {
      "name": "Test 5: Tier Filtering",
      "action": "Select Tier=Higher in filter",
      "input": {
        "tierFilter": "higher"
      },
      "expected": {
        "prompts": [
          { "question": "Q1", "tier": "higher" },
          { "question": "Q2", "tier": "higher" },
          { "question": "Q3", "tier": "higher" }
        ],
        "count": 3
      },
      "description": "Tier filter should show only matching prompts"
    },
    {
      "name": "Test 6: Combined Paper + Tier Filter",
      "action": "Select Paper=1 and Tier=Foundation",
      "input": {
        "paperFilter": 1,
        "tierFilter": "foundation"
      },
      "expected": {
        "prompts": [
          { "question": "Q1", "paperId": "paper-1", "tier": "foundation" },
          { "question": "Q2", "paperId": "paper-1", "tier": "foundation" }
        ],
        "count": 2
      },
      "description": "Combined filters should work together"
    },
    {
      "name": "Test 7: Backwards Compatibility",
      "action": "Run quiz with mixed tier prompts",
      "input": {
        "prompts": [
          { "question": "Q1", "tier": null },
          { "question": "Q2", "tier": "higher" },
          { "question": "Q3", "tier": "foundation" }
        ],
        "tierFilter": "all"
      },
      "expected": {
        "success": true,
        "count": 3,
        "errors": []
      },
      "description": "Prompts with null tier should work with all tier filters"
    }
  ],
  "jsonImportExamples": [
    {
      "name": "Per-item tier assignment",
      "data": {
        "prompts": [
          {
            "subject": "Maths",
            "unit": "Unit 1",
            "topic": "Algebra",
            "question": "What is 2+2?",
            "answers": ["4"],
            "tier": "higher"
          },
          {
            "subject": "Maths",
            "unit": "Unit 1",
            "topic": "Algebra",
            "question": "What is 1+1?",
            "answers": ["2"],
            "tier": "foundation"
          }
        ]
      }
    },
    {
      "name": "Default tier for import",
      "data": {
        "defaultTier": "higher",
        "prompts": [
          {
            "subject": "Maths",
            "unit": "Unit 1",
            "topic": "Algebra",
            "question": "What is 2+2?",
            "answers": ["4"]
          },
          {
            "subject": "Maths",
            "unit": "Unit 1",
            "topic": "Algebra",
            "question": "What is 1+1?",
            "answers": ["2"],
            "tier": "foundation"
          }
        ]
      },
      "expected": {
        "prompts": [
          { "question": "What is 2+2?", "tier": "higher" },
          { "question": "What is 1+1?", "tier": "foundation" }
        ]
      }
    },
    {
      "name": "Alternative tier field names",
      "data": {
        "prompts": [
          {
            "subject": "Maths",
            "unit": "Unit 1",
            "topic": "Algebra",
            "question": "Q1",
            "answers": ["A"],
            "isHigher": true
          },
          {
            "subject": "Maths",
            "unit": "Unit 1",
            "topic": "Algebra",
            "question": "Q2",
            "answers": ["B"],
            "isFoundation": true
          },
          {
            "subject": "Maths",
            "unit": "Unit 1",
            "topic": "Algebra",
            "question": "Q3",
            "answers": ["C"],
            "level": "higher"
          }
        ]
      },
      "expected": {
        "prompts": [
          { "question": "Q1", "tier": "higher" },
          { "question": "Q2", "tier": "foundation" },
          { "question": "Q3", "tier": "higher" }
        ]
      }
    }
  ],
  "csvImportExamples": [
    {
      "name": "Basic tier column",
      "csv": "subject,examBoard,unit,topic,type,question,answers,tier\nMaths,GCSE,Unit 1,Algebra,short,What is 2+2?,4,higher\nMaths,GCSE,Unit 1,Algebra,short,What is 1+1?,2,foundation"
    },
    {
      "name": "Short form tier (H/F)",
      "csv": "subject,examBoard,unit,topic,type,question,answers,tier\nMaths,GCSE,Unit 1,Algebra,short,What is 2+2?,4,H\nMaths,GCSE,Unit 1,Algebra,short,What is 1+1?,2,F"
    },
    {
      "name": "Alternative field names",
      "csv": "subject,examBoard,unit,topic,type,question,answers,isHigher\nMaths,GCSE,Unit 1,Algebra,short,What is 2+2?,4,true\nMaths,GCSE,Unit 1,Algebra,short,What is 1+1?,2,false"
    }
  ],
  "quizSegregationExamples": [
    {
      "name": "Topic quiz with tier filter",
      "scope": "topic",
      "topicId": "topic-uuid",
      "filters": {
        "paperFilter": "all",
        "tierFilter": "higher"
      },
      "expected": "Only higher tier prompts from this topic"
    },
    {
      "name": "Unit quiz with paper + tier filter",
      "scope": "unit",
      "unitId": "unit-uuid",
      "filters": {
        "paperFilter": 1,
        "tierFilter": "foundation"
      },
      "expected": "Only Paper 1 + Foundation tier prompts from this unit"
    },
    {
      "name": "Paper master quiz with tier selector",
      "scope": "paper_master",
      "paperId": "paper-uuid",
      "options": [
        {
          "label": "Paper 1 (All tiers)",
          "tierFilter": "all"
        },
        {
          "label": "Paper 1 (Higher only)",
          "tierFilter": "higher"
        },
        {
          "label": "Paper 1 (Foundation only)",
          "tierFilter": "foundation"
        }
      ]
    },
    {
      "name": "Full subject quiz with tier options",
      "scope": "subject_master",
      "subjectId": "subject-uuid",
      "options": [
        {
          "label": "All tiers",
          "tierFilter": "all"
        },
        {
          "label": "Higher only",
          "tierFilter": "higher"
        },
        {
          "label": "Foundation only",
          "tierFilter": "foundation"
        }
      ]
    }
  ]
}
