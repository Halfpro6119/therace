var Lr=Object.defineProperty;var zr=(e,i,o)=>i in e?Lr(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o;var _r=(e,i,o)=>zr(e,typeof i!="symbol"?i+"":i,o);function _mergeNamespaces(e,i){for(var o=0;o<i.length;o++){const d=i[o];if(typeof d!="string"&&!Array.isArray(d)){for(const h in d)if(h!=="default"&&!(h in e)){const g=Object.getOwnPropertyDescriptor(d,h);g&&Object.defineProperty(e,h,g.get?g:{enumerable:!0,get:()=>d[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))d(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function o(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(h){if(h.ep)return;h.ep=!0;const g=o(h);fetch(h.href,g)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var i=e.default;if(typeof i=="function"){var o=function d(){return this instanceof d?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};o.prototype=i.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(d){var h=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(o,d,h.get?h:{enumerable:!0,get:function(){return e[d]}})}),o}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$1&&e[z$1]||e["@@iterator"],typeof e=="function"?e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(e,i,o){this.props=e,this.context=i,this.refs=D$1,this.updater=o||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,i){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,i,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(e,i,o){this.props=e,this.context=i,this.refs=D$1,this.updater=o||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(e,i,o){var d,h={},g=null,b=null;if(i!=null)for(d in i.ref!==void 0&&(b=i.ref),i.key!==void 0&&(g=""+i.key),i)J.call(i,d)&&!L$1.hasOwnProperty(d)&&(h[d]=i[d]);var j=arguments.length-2;if(j===1)h.children=o;else if(1<j){for(var _=Array(j),$=0;$<j;$++)_[$]=arguments[$+2];h.children=_}if(e&&e.defaultProps)for(d in j=e.defaultProps,j)h[d]===void 0&&(h[d]=j[d]);return{$$typeof:l$1,type:e,key:g,ref:b,props:h,_owner:K$1.current}}function N$1(e,i){return{$$typeof:l$1,type:e.type,key:i,ref:e.ref,props:e.props,_owner:e._owner}}function O$2(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape(e){var i={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return i[o]})}var P$2=/\/+/g;function Q$1(e,i){return typeof e=="object"&&e!==null&&e.key!=null?escape(""+e.key):i.toString(36)}function R$1(e,i,o,d,h){var g=typeof e;(g==="undefined"||g==="boolean")&&(e=null);var b=!1;if(e===null)b=!0;else switch(g){case"string":case"number":b=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:b=!0}}if(b)return b=e,h=h(b),e=d===""?"."+Q$1(b,0):d,I$1(h)?(o="",e!=null&&(o=e.replace(P$2,"$&/")+"/"),R$1(h,i,o,"",function($){return $})):h!=null&&(O$2(h)&&(h=N$1(h,o+(!h.key||b&&b.key===h.key?"":(""+h.key).replace(P$2,"$&/")+"/")+e)),i.push(h)),1;if(b=0,d=d===""?".":d+":",I$1(e))for(var j=0;j<e.length;j++){g=e[j];var _=d+Q$1(g,j);b+=R$1(g,i,o,_,h)}else if(_=A$1(e),typeof _=="function")for(e=_.call(e),j=0;!(g=e.next()).done;)g=g.value,_=d+Q$1(g,j++),b+=R$1(g,i,o,_,h);else if(g==="object")throw i=String(e),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return b}function S$1(e,i,o){if(e==null)return e;var d=[],h=0;return R$1(e,d,"","",function(g){return i.call(o,g,h++)}),d}function T$1(e){if(e._status===-1){var i=e._result;i=i(),i.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=i)}if(e._status===1)return e._result.default;throw e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(e,i,o){S$1(e,function(){i.apply(this,arguments)},o)},count:function(e){var i=0;return S$1(e,function(){i++}),i},toArray:function(e){return S$1(e,function(i){return i})||[]},only:function(e){if(!O$2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$2;react_production_min.cloneElement=function(e,i,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var d=C$1({},e.props),h=e.key,g=e.ref,b=e._owner;if(i!=null){if(i.ref!==void 0&&(g=i.ref,b=K$1.current),i.key!==void 0&&(h=""+i.key),e.type&&e.type.defaultProps)var j=e.type.defaultProps;for(_ in i)J.call(i,_)&&!L$1.hasOwnProperty(_)&&(d[_]=i[_]===void 0&&j!==void 0?j[_]:i[_])}var _=arguments.length-2;if(_===1)d.children=o;else if(1<_){j=Array(_);for(var $=0;$<_;$++)j[$]=arguments[$+2];d.children=j}return{$$typeof:l$1,type:e.type,key:h,ref:g,props:d,_owner:b}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$1;react_production_min.createFactory=function(e){var i=M$1.bind(null,e);return i.type=e,i};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$1,render:e}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(e){return{$$typeof:y$1,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,i){return{$$typeof:x$1,type:e,compare:i===void 0?null:i}};react_production_min.startTransition=function(e){var i=V$1.transition;V$1.transition={};try{e()}finally{V$1.transition=i}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(e,i){return U$1.current.useCallback(e,i)};react_production_min.useContext=function(e){return U$1.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$1.current.useDeferredValue(e)};react_production_min.useEffect=function(e,i){return U$1.current.useEffect(e,i)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(e,i,o){return U$1.current.useImperativeHandle(e,i,o)};react_production_min.useInsertionEffect=function(e,i){return U$1.current.useInsertionEffect(e,i)};react_production_min.useLayoutEffect=function(e,i){return U$1.current.useLayoutEffect(e,i)};react_production_min.useMemo=function(e,i){return U$1.current.useMemo(e,i)};react_production_min.useReducer=function(e,i,o){return U$1.current.useReducer(e,i,o)};react_production_min.useRef=function(e){return U$1.current.useRef(e)};react_production_min.useState=function(e){return U$1.current.useState(e)};react_production_min.useSyncExternalStore=function(e,i,o){return U$1.current.useSyncExternalStore(e,i,o)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React3=getDefaultExportFromCjs(reactExports),React$3=_mergeNamespaces({__proto__:null,default:React3},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k$1=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,i,o){var d,h={},g=null,b=null;o!==void 0&&(g=""+o),i.key!==void 0&&(g=""+i.key),i.ref!==void 0&&(b=i.ref);for(d in i)m$1.call(i,d)&&!p$1.hasOwnProperty(d)&&(h[d]=i[d]);if(e&&e.defaultProps)for(d in i=e.defaultProps,i)h[d]===void 0&&(h[d]=i[d]);return{$$typeof:k$1,type:e,key:g,ref:b,props:h,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function i(jt,Rt){var At=jt.length;jt.push(Rt);e:for(;0<At;){var Dt=At-1>>>1,Nt=jt[Dt];if(0<h(Nt,Rt))jt[Dt]=Rt,jt[At]=Nt,At=Dt;else break e}}function o(jt){return jt.length===0?null:jt[0]}function d(jt){if(jt.length===0)return null;var Rt=jt[0],At=jt.pop();if(At!==Rt){jt[0]=At;e:for(var Dt=0,Nt=jt.length,zt=Nt>>>1;Dt<zt;){var Vt=2*(Dt+1)-1,Gt=jt[Vt],Mt=Vt+1,Wt=jt[Mt];if(0>h(Gt,At))Mt<Nt&&0>h(Wt,Gt)?(jt[Dt]=Wt,jt[Mt]=At,Dt=Mt):(jt[Dt]=Gt,jt[Vt]=At,Dt=Vt);else if(Mt<Nt&&0>h(Wt,At))jt[Dt]=Wt,jt[Mt]=At,Dt=Mt;else break e}}return Rt}function h(jt,Rt){var At=jt.sortIndex-Rt.sortIndex;return At!==0?At:jt.id-Rt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var b=Date,j=b.now();e.unstable_now=function(){return b.now()-j}}var _=[],$=[],_e=1,et=null,tt=3,rt=!1,nt=!1,it=!1,st=typeof setTimeout=="function"?setTimeout:null,at=typeof clearTimeout=="function"?clearTimeout:null,ot=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function lt(jt){for(var Rt=o($);Rt!==null;){if(Rt.callback===null)d($);else if(Rt.startTime<=jt)d($),Rt.sortIndex=Rt.expirationTime,i(_,Rt);else break;Rt=o($)}}function ct(jt){if(it=!1,lt(jt),!nt)if(o(_)!==null)nt=!0,kt(ut);else{var Rt=o($);Rt!==null&&Et(ct,Rt.startTime-jt)}}function ut(jt,Rt){nt=!1,it&&(it=!1,at(xt),xt=-1),rt=!0;var At=tt;try{for(lt(Rt),et=o(_);et!==null&&(!(et.expirationTime>Rt)||jt&&!pt());){var Dt=et.callback;if(typeof Dt=="function"){et.callback=null,tt=et.priorityLevel;var Nt=Dt(et.expirationTime<=Rt);Rt=e.unstable_now(),typeof Nt=="function"?et.callback=Nt:et===o(_)&&d(_),lt(Rt)}else d(_);et=o(_)}if(et!==null)var zt=!0;else{var Vt=o($);Vt!==null&&Et(ct,Vt.startTime-Rt),zt=!1}return zt}finally{et=null,tt=At,rt=!1}}var dt=!1,mt=null,xt=-1,ft=5,gt=-1;function pt(){return!(e.unstable_now()-gt<ft)}function yt(){if(mt!==null){var jt=e.unstable_now();gt=jt;var Rt=!0;try{Rt=mt(!0,jt)}finally{Rt?bt():(dt=!1,mt=null)}}else dt=!1}var bt;if(typeof ot=="function")bt=function(){ot(yt)};else if(typeof MessageChannel<"u"){var St=new MessageChannel,wt=St.port2;St.port1.onmessage=yt,bt=function(){wt.postMessage(null)}}else bt=function(){st(yt,0)};function kt(jt){mt=jt,dt||(dt=!0,bt())}function Et(jt,Rt){xt=st(function(){jt(e.unstable_now())},Rt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(jt){jt.callback=null},e.unstable_continueExecution=function(){nt||rt||(nt=!0,kt(ut))},e.unstable_forceFrameRate=function(jt){0>jt||125<jt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ft=0<jt?Math.floor(1e3/jt):5},e.unstable_getCurrentPriorityLevel=function(){return tt},e.unstable_getFirstCallbackNode=function(){return o(_)},e.unstable_next=function(jt){switch(tt){case 1:case 2:case 3:var Rt=3;break;default:Rt=tt}var At=tt;tt=Rt;try{return jt()}finally{tt=At}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(jt,Rt){switch(jt){case 1:case 2:case 3:case 4:case 5:break;default:jt=3}var At=tt;tt=jt;try{return Rt()}finally{tt=At}},e.unstable_scheduleCallback=function(jt,Rt,At){var Dt=e.unstable_now();switch(typeof At=="object"&&At!==null?(At=At.delay,At=typeof At=="number"&&0<At?Dt+At:Dt):At=Dt,jt){case 1:var Nt=-1;break;case 2:Nt=250;break;case 5:Nt=1073741823;break;case 4:Nt=1e4;break;default:Nt=5e3}return Nt=At+Nt,jt={id:_e++,callback:Rt,priorityLevel:jt,startTime:At,expirationTime:Nt,sortIndex:-1},At>Dt?(jt.sortIndex=At,i($,jt),o(_)===null&&jt===o($)&&(it?(at(xt),xt=-1):it=!0,Et(ct,At-Dt))):(jt.sortIndex=Nt,i(_,jt),nt||rt||(nt=!0,kt(ut))),jt},e.unstable_shouldYield=pt,e.unstable_wrapCallback=function(jt){var Rt=tt;return function(){var At=tt;tt=Rt;try{return jt.apply(this,arguments)}finally{tt=At}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(e){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,i){ha(e,i),ha(e+"Capture",i)}function ha(e,i){for(ea[e]=i,e=0;e<i.length;e++)da.add(i[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return ja.call(ma,e)?!0:ja.call(la,e)?!1:ka$1.test(e)?ma[e]=!0:(la[e]=!0,!1)}function pa(e,i,o,d){if(o!==null&&o.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa(e,i,o,d){if(i===null||typeof i>"u"||pa(e,i,o,d))return!0;if(d)return!1;if(o!==null)switch(o.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function v(e,i,o,d,h,g,b){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=e,this.type=i,this.sanitizeURL=g,this.removeEmptyString=b}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new v(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0];z[i]=new v(i,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new v(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z[e]=new v(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z[e]=new v(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z[e]=new v(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var i=e.replace(ra,sa);z[i]=new v(i,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var i=e.replace(ra,sa);z[i]=new v(i,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(ra,sa);z[i]=new v(i,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta(e,i,o,d){var h=z.hasOwnProperty(i)?z[i]:null;(h!==null?h.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(qa(i,o,h,d)&&(o=null),d||h===null?oa(i)&&(o===null?e.removeAttribute(i):e.setAttribute(i,""+o)):h.mustUseProperty?e[h.propertyName]=o===null?h.type===3?!1:"":o:(i=h.attributeName,d=h.attributeNamespace,o===null?e.removeAttribute(i):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,d?e.setAttributeNS(d,i,o):e.setAttribute(i,o))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La;function Ma(e){if(La===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);La=i&&i[1]||""}return`
`+La+e}var Na=!1;function Oa(e,i){if(!e||Na)return"";Na=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch($){var d=$}Reflect.construct(e,[],i)}else{try{i.call()}catch($){d=$}e.call(i.prototype)}else{try{throw Error()}catch($){d=$}e()}}catch($){if($&&d&&typeof $.stack=="string"){for(var h=$.stack.split(`
`),g=d.stack.split(`
`),b=h.length-1,j=g.length-1;1<=b&&0<=j&&h[b]!==g[j];)j--;for(;1<=b&&0<=j;b--,j--)if(h[b]!==g[j]){if(b!==1||j!==1)do if(b--,j--,0>j||h[b]!==g[j]){var _=`
`+h[b].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=b&&0<=j);break}}}finally{Na=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return i=e.displayName||null,i!==null?i:Qa(e.type)||"Memo";case Ha:i=e._payload,e=e._init;try{return Qa(e(i))}catch{}}return null}function Ra(e){var i=e.type;switch(e.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=i.render,e=e.displayName||e.name||"",i.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(i);case 8:return i===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ua(e){var i=Ta(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),d=""+e[i];if(!e.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,g=o.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(b){d=""+b,g.call(this,b)}}),Object.defineProperty(e,i,{enumerable:o.enumerable}),{getValue:function(){return d},setValue:function(b){d=""+b},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var o=i.getValue(),d="";return e&&(d=Ta(e)?e.checked?"true":"false":e.value),e=d,e!==o?(i.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,i){var o=i.checked;return A({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function Za(e,i){var o=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;o=Sa(i.value!=null?i.value:o),e._wrapperState={initialChecked:d,initialValue:o,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ab(e,i){i=i.checked,i!=null&&ta(e,"checked",i,!1)}function bb(e,i){ab(e,i);var o=Sa(i.value),d=i.type;if(o!=null)d==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(d==="submit"||d==="reset"){e.removeAttribute("value");return}i.hasOwnProperty("value")?cb(e,i.type,o):i.hasOwnProperty("defaultValue")&&cb(e,i.type,Sa(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(e.defaultChecked=!!i.defaultChecked)}function db$1(e,i,o){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+e._wrapperState.initialValue,o||i===e.value||(e.value=i),e.defaultValue=i}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function cb(e,i,o){(i!=="number"||Xa(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var eb=Array.isArray;function fb(e,i,o,d){if(e=e.options,i){i={};for(var h=0;h<o.length;h++)i["$"+o[h]]=!0;for(o=0;o<e.length;o++)h=i.hasOwnProperty("$"+e[o].value),e[o].selected!==h&&(e[o].selected=h),h&&d&&(e[o].defaultSelected=!0)}else{for(o=""+Sa(o),i=null,h=0;h<e.length;h++){if(e[h].value===o){e[h].selected=!0,d&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function gb(e,i){if(i.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},i,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,i){var o=i.value;if(o==null){if(o=i.children,i=i.defaultValue,o!=null){if(i!=null)throw Error(p(92));if(eb(o)){if(1<o.length)throw Error(p(93));o=o[0]}i=o}i==null&&(i=""),o=i}e._wrapperState={initialValue:Sa(o)}}function ib(e,i){var o=Sa(i.value),d=Sa(i.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),i.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),d!=null&&(e.defaultValue=""+d)}function jb(e){var i=e.textContent;i===e._wrapperState.initialValue&&i!==""&&i!==null&&(e.value=i)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,i){return e==null||e==="http://www.w3.org/1999/xhtml"?kb(i):e==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,o,d,h){MSApp.execUnsafeLocalFunction(function(){return e(i,o,d,h)})}:e}(function(e,i){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=i;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;i.firstChild;)e.appendChild(i.firstChild)}});function ob(e,i){if(i){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=i;return}}e.textContent=i}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(e){qb.forEach(function(i){i=i+e.charAt(0).toUpperCase()+e.substring(1),pb[i]=pb[e]})});function rb(e,i,o){return i==null||typeof i=="boolean"||i===""?"":o||typeof i!="number"||i===0||pb.hasOwnProperty(e)&&pb[e]?(""+i).trim():i+"px"}function sb(e,i){e=e.style;for(var o in i)if(i.hasOwnProperty(o)){var d=o.indexOf("--")===0,h=rb(o,i[o],d);o==="float"&&(o="cssFloat"),d?e.setProperty(o,h):e[o]=h}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,i){if(i){if(tb[e]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(p(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(p(61))}if(i.style!=null&&typeof i.style!="object")throw Error(p(62))}}function vb(e,i){if(e.indexOf("-")===-1)return typeof i.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if(typeof yb!="function")throw Error(p(280));var i=e.stateNode;i&&(i=Db(i),yb(e.stateNode,e.type,i))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,i=Ab;if(Ab=zb=null,Bb(e),i)for(e=0;e<i.length;e++)Bb(i[e])}}function Gb(e,i){return e(i)}function Hb(){}var Ib=!1;function Jb(e,i,o){if(Ib)return e(i,o);Ib=!0;try{return Gb(e,i,o)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(e,i){var o=e.stateNode;if(o===null)return null;var d=Db(o);if(d===null)return null;o=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(e=e.type,d=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!d;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(p(231,i,typeof o));return o}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(e,i,o,d,h,g,b,j,_){var $=Array.prototype.slice.call(arguments,3);try{i.apply(o,$)}catch(_e){this.onError(_e)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,i,o,d,h,g,b,j,_){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,i,o,d,h,g,b,j,_){if(Tb.apply(this,arguments),Ob){if(Ob){var $=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=$)}}function Vb(e){var i=e,o=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(o=i.return),e=i.return;while(e)}return i.tag===3?o:null}function Wb(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p(188))}function Yb(e){var i=e.alternate;if(!i){if(i=Vb(e),i===null)throw Error(p(188));return i!==e?null:e}for(var o=e,d=i;;){var h=o.return;if(h===null)break;var g=h.alternate;if(g===null){if(d=h.return,d!==null){o=d;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===o)return Xb(h),e;if(g===d)return Xb(h),i;g=g.sibling}throw Error(p(188))}if(o.return!==d.return)o=h,d=g;else{for(var b=!1,j=h.child;j;){if(j===o){b=!0,o=h,d=g;break}if(j===d){b=!0,d=h,o=g;break}j=j.sibling}if(!b){for(j=g.child;j;){if(j===o){b=!0,o=g,d=h;break}if(j===d){b=!0,d=g,o=h;break}j=j.sibling}if(!b)throw Error(p(189))}}if(o.alternate!==d)throw Error(p(190))}if(o.tag!==3)throw Error(p(188));return o.stateNode.current===o?e:i}function Zb(e){return e=Yb(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var i=$b(e);if(i!==null)return i;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,e,void 0,(e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,i){var o=e.pendingLanes;if(o===0)return 0;var d=0,h=e.suspendedLanes,g=e.pingedLanes,b=o&268435455;if(b!==0){var j=b&~h;j!==0?d=tc(j):(g&=b,g!==0&&(d=tc(g)))}else b=o&~h,b!==0?d=tc(b):g!==0&&(d=tc(g));if(d===0)return 0;if(i!==0&&i!==d&&!(i&h)&&(h=d&-d,g=i&-i,h>=g||h===16&&(g&4194240)!==0))return i;if(d&4&&(d|=o&16),i=e.entangledLanes,i!==0)for(e=e.entanglements,i&=d;0<i;)o=31-oc(i),h=1<<o,d|=e[o],i&=~h;return d}function vc(e,i){switch(e){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(e,i){for(var o=e.suspendedLanes,d=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes;0<g;){var b=31-oc(g),j=1<<b,_=h[b];_===-1?(!(j&o)||j&d)&&(h[b]=vc(j,i)):_<=i&&(e.expiredLanes|=j),g&=~j}}function xc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function zc(e){for(var i=[],o=0;31>o;o++)i.push(e);return i}function Ac(e,i,o){e.pendingLanes|=i,i!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,i=31-oc(i),e[i]=o}function Bc(e,i){var o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;var d=e.eventTimes;for(e=e.expirationTimes;0<o;){var h=31-oc(o),g=1<<h;i[h]=0,d[h]=-1,e[h]=-1,o&=~g}}function Cc(e,i){var o=e.entangledLanes|=i;for(e=e.entanglements;o;){var d=31-oc(o),h=1<<d;h&i|e[d]&i&&(e[d]|=i),o&=~h}}var C=0;function Dc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,i){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(i.pointerId)}}function Tc(e,i,o,d,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:o,eventSystemFlags:d,nativeEvent:g,targetContainers:[h]},i!==null&&(i=Cb(i),i!==null&&Fc(i)),e):(e.eventSystemFlags|=d,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function Uc(e,i,o,d,h){switch(i){case"focusin":return Lc=Tc(Lc,e,i,o,d,h),!0;case"dragenter":return Mc=Tc(Mc,e,i,o,d,h),!0;case"mouseover":return Nc=Tc(Nc,e,i,o,d,h),!0;case"pointerover":var g=h.pointerId;return Oc.set(g,Tc(Oc.get(g)||null,e,i,o,d,h)),!0;case"gotpointercapture":return g=h.pointerId,Pc.set(g,Tc(Pc.get(g)||null,e,i,o,d,h)),!0}return!1}function Vc(e){var i=Wc(e.target);if(i!==null){var o=Vb(i);if(o!==null){if(i=o.tag,i===13){if(i=Wb(o),i!==null){e.blockedOn=i,Ic(e.priority,function(){Gc(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var o=Yc(e.domEventName,e.eventSystemFlags,i[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var d=new o.constructor(o.type,o);wb=d,o.target.dispatchEvent(d),wb=null}else return i=Cb(o),i!==null&&Fc(i),e.blockedOn=o,!1;i.shift()}return!0}function Zc(e,i,o){Xc(e)&&o.delete(i)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,i){e.blockedOn===i&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function i(h){return ad(h,e)}if(0<Kc.length){ad(Kc[0],e);for(var o=1;o<Kc.length;o++){var d=Kc[o];d.blockedOn===e&&(d.blockedOn=null)}}for(Lc!==null&&ad(Lc,e),Mc!==null&&ad(Mc,e),Nc!==null&&ad(Nc,e),Oc.forEach(i),Pc.forEach(i),o=0;o<Qc.length;o++)d=Qc[o],d.blockedOn===e&&(d.blockedOn=null);for(;0<Qc.length&&(o=Qc[0],o.blockedOn===null);)Vc(o),o.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,i,o,d){var h=C,g=cd.transition;cd.transition=null;try{C=1,fd(e,i,o,d)}finally{C=h,cd.transition=g}}function gd(e,i,o,d){var h=C,g=cd.transition;cd.transition=null;try{C=4,fd(e,i,o,d)}finally{C=h,cd.transition=g}}function fd(e,i,o,d){if(dd){var h=Yc(e,i,o,d);if(h===null)hd(e,i,d,id$2,o),Sc(e,d);else if(Uc(h,e,i,o,d))d.stopPropagation();else if(Sc(e,d),i&4&&-1<Rc.indexOf(e)){for(;h!==null;){var g=Cb(h);if(g!==null&&Ec(g),g=Yc(e,i,o,d),g===null&&hd(e,i,d,id$2,o),g===h)break;h=g}h!==null&&d.stopPropagation()}else hd(e,i,d,null,o)}}var id$2=null;function Yc(e,i,o,d){if(id$2=null,e=xb(d),e=Wc(e),e!==null)if(i=Vb(e),i===null)e=null;else if(o=i.tag,o===13){if(e=Wb(i),e!==null)return e;e=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null);return id$2=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,i=ld,o=i.length,d,h="value"in kd?kd.value:kd.textContent,g=h.length;for(e=0;e<o&&i[e]===h[e];e++);var b=o-e;for(d=1;d<=b&&i[o-d]===h[g-d];d++);return md=h.slice(e,1<d?1-d:void 0)}function od(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function i(o,d,h,g,b){this._reactName=o,this._targetInst=h,this.type=d,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(o=e[j],this[j]=o?o(g):g[j]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),i}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Od[e])?!!i[e]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(e){if(e.key){var i=Md[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(e,i){switch(e){case"keyup":return $d.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,i){switch(e){case"compositionend":return he(i);case"keypress":return i.which!==32?null:(fe=!0,ee);case"textInput":return e=i.data,e===ee&&fe?null:e;default:return null}}function ke(e,i){if(ie)return e==="compositionend"||!ae&&ge(e,i)?(e=nd(),md=ld=kd=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return de&&i.locale!=="ko"?null:i.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!le[e.type]:i==="textarea"}function ne(e,i,o,d){Eb(d),i=oe(i,"onChange"),0<i.length&&(o=new td("onChange","change",null,o,d),e.push({event:o,listeners:i}))}var pe=null,qe=null;function re$1(e){se(e,0)}function te(e){var i=ue(e);if(Wa(i))return e}function ve(e,i){if(e==="change")return i}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe)){var i=[];ne(i,qe,e,xb(e)),Jb(re$1,i)}}function Ce(e,i,o){e==="focusin"?(Ae(),pe=i,qe=o,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe)}function Ee(e,i){if(e==="click")return te(i)}function Fe(e,i){if(e==="input"||e==="change")return te(i)}function Ge(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,i){if(He(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var o=Object.keys(e),d=Object.keys(i);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var h=o[d];if(!ja.call(i,h)||!He(e[h],i[h]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,i){var o=Je(e);e=0;for(var d;o;){if(o.nodeType===3){if(d=e+o.textContent.length,e<=i&&d>=i)return{node:o,offset:i-e};e=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Je(o)}}function Le(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Le(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Me(){for(var e=window,i=Xa();i instanceof e.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)e=i.contentWindow;else break;i=Xa(e.document)}return i}function Ne(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function Oe(e){var i=Me(),o=e.focusedElem,d=e.selectionRange;if(i!==o&&o&&o.ownerDocument&&Le(o.ownerDocument.documentElement,o)){if(d!==null&&Ne(o)){if(i=d.start,e=d.end,e===void 0&&(e=i),"selectionStart"in o)o.selectionStart=i,o.selectionEnd=Math.min(e,o.value.length);else if(e=(i=o.ownerDocument||document)&&i.defaultView||window,e.getSelection){e=e.getSelection();var h=o.textContent.length,g=Math.min(d.start,h);d=d.end===void 0?g:Math.min(d.end,h),!e.extend&&g>d&&(h=d,d=g,g=h),h=Ke(o,g);var b=Ke(o,d);h&&b&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==b.node||e.focusOffset!==b.offset)&&(i=i.createRange(),i.setStart(h.node,h.offset),e.removeAllRanges(),g>d?(e.addRange(i),e.extend(b.node,b.offset)):(i.setEnd(b.node,b.offset),e.addRange(i)))}}for(i=[],e=o;e=e.parentNode;)e.nodeType===1&&i.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<i.length;o++)e=i[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(e,i,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Te||Qe==null||Qe!==Xa(d)||(d=Qe,"selectionStart"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,"onSelect"),0<d.length&&(i=new td("onSelect","select",null,i,o),e.push({event:i,listeners:d}),i.target=Qe)))}function Ve(e,i){var o={};return o[e.toLowerCase()]=i.toLowerCase(),o["Webkit"+e]="webkit"+i,o["Moz"+e]="moz"+i,o}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(e){if(Xe[e])return Xe[e];if(!We[e])return e;var i=We[e],o;for(o in i)if(i.hasOwnProperty(o)&&o in Ye)return Xe[e]=i[o];return e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,i){df.set(e,i),fa(i,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,i,o){var d=e.type||"unknown-event";e.currentTarget=o,Ub(d,i,void 0,e),e.currentTarget=null}function se(e,i){i=(i&4)!==0;for(var o=0;o<e.length;o++){var d=e[o],h=d.event;d=d.listeners;e:{var g=void 0;if(i)for(var b=d.length-1;0<=b;b--){var j=d[b],_=j.instance,$=j.currentTarget;if(j=j.listener,_!==g&&h.isPropagationStopped())break e;nf(h,j,$),g=_}else for(b=0;b<d.length;b++){if(j=d[b],_=j.instance,$=j.currentTarget,j=j.listener,_!==g&&h.isPropagationStopped())break e;nf(h,j,$),g=_}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D(e,i){var o=i[of];o===void 0&&(o=i[of]=new Set);var d=e+"__bubble";o.has(d)||(pf(i,e,2,!1),o.add(d))}function qf(e,i,o){var d=0;i&&(d|=4),pf(o,e,d,i)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach(function(o){o!=="selectionchange"&&(mf.has(o)||qf(o,!1,e),qf(o,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[rf]||(i[rf]=!0,qf("selectionchange",!1,i))}}function pf(e,i,o,d){switch(jd(i)){case 1:var h=ed;break;case 4:h=gd;break;default:h=fd}o=h.bind(null,i,o,e),h=void 0,!Lb||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),d?h!==void 0?e.addEventListener(i,o,{capture:!0,passive:h}):e.addEventListener(i,o,!0):h!==void 0?e.addEventListener(i,o,{passive:h}):e.addEventListener(i,o,!1)}function hd(e,i,o,d,h){var g=d;if(!(i&1)&&!(i&2)&&d!==null)e:for(;;){if(d===null)return;var b=d.tag;if(b===3||b===4){var j=d.stateNode.containerInfo;if(j===h||j.nodeType===8&&j.parentNode===h)break;if(b===4)for(b=d.return;b!==null;){var _=b.tag;if((_===3||_===4)&&(_=b.stateNode.containerInfo,_===h||_.nodeType===8&&_.parentNode===h))return;b=b.return}for(;j!==null;){if(b=Wc(j),b===null)return;if(_=b.tag,_===5||_===6){d=g=b;continue e}j=j.parentNode}}d=d.return}Jb(function(){var $=g,_e=xb(o),et=[];e:{var tt=df.get(e);if(tt!==void 0){var rt=td,nt=e;switch(e){case"keypress":if(od(o)===0)break e;case"keydown":case"keyup":rt=Rd;break;case"focusin":nt="focus",rt=Fd;break;case"focusout":nt="blur",rt=Fd;break;case"beforeblur":case"afterblur":rt=Fd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=Vd;break;case $e:case af:case bf:rt=Hd;break;case cf:rt=Xd;break;case"scroll":rt=vd;break;case"wheel":rt=Zd;break;case"copy":case"cut":case"paste":rt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=Td}var it=(i&4)!==0,st=!it&&e==="scroll",at=it?tt!==null?tt+"Capture":null:tt;it=[];for(var ot=$,lt;ot!==null;){lt=ot;var ct=lt.stateNode;if(lt.tag===5&&ct!==null&&(lt=ct,at!==null&&(ct=Kb(ot,at),ct!=null&&it.push(tf(ot,ct,lt)))),st)break;ot=ot.return}0<it.length&&(tt=new rt(tt,nt,null,o,_e),et.push({event:tt,listeners:it}))}}if(!(i&7)){e:{if(tt=e==="mouseover"||e==="pointerover",rt=e==="mouseout"||e==="pointerout",tt&&o!==wb&&(nt=o.relatedTarget||o.fromElement)&&(Wc(nt)||nt[uf]))break e;if((rt||tt)&&(tt=_e.window===_e?_e:(tt=_e.ownerDocument)?tt.defaultView||tt.parentWindow:window,rt?(nt=o.relatedTarget||o.toElement,rt=$,nt=nt?Wc(nt):null,nt!==null&&(st=Vb(nt),nt!==st||nt.tag!==5&&nt.tag!==6)&&(nt=null)):(rt=null,nt=$),rt!==nt)){if(it=Bd,ct="onMouseLeave",at="onMouseEnter",ot="mouse",(e==="pointerout"||e==="pointerover")&&(it=Td,ct="onPointerLeave",at="onPointerEnter",ot="pointer"),st=rt==null?tt:ue(rt),lt=nt==null?tt:ue(nt),tt=new it(ct,ot+"leave",rt,o,_e),tt.target=st,tt.relatedTarget=lt,ct=null,Wc(_e)===$&&(it=new it(at,ot+"enter",nt,o,_e),it.target=lt,it.relatedTarget=st,ct=it),st=ct,rt&&nt)t:{for(it=rt,at=nt,ot=0,lt=it;lt;lt=vf(lt))ot++;for(lt=0,ct=at;ct;ct=vf(ct))lt++;for(;0<ot-lt;)it=vf(it),ot--;for(;0<lt-ot;)at=vf(at),lt--;for(;ot--;){if(it===at||at!==null&&it===at.alternate)break t;it=vf(it),at=vf(at)}it=null}else it=null;rt!==null&&wf(et,tt,rt,it,!1),nt!==null&&st!==null&&wf(et,st,nt,it,!0)}}e:{if(tt=$?ue($):window,rt=tt.nodeName&&tt.nodeName.toLowerCase(),rt==="select"||rt==="input"&&tt.type==="file")var ut=ve;else if(me(tt))if(we)ut=Fe;else{ut=De;var dt=Ce}else(rt=tt.nodeName)&&rt.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&(ut=Ee);if(ut&&(ut=ut(e,$))){ne(et,ut,o,_e);break e}dt&&dt(e,tt,$),e==="focusout"&&(dt=tt._wrapperState)&&dt.controlled&&tt.type==="number"&&cb(tt,"number",tt.value)}switch(dt=$?ue($):window,e){case"focusin":(me(dt)||dt.contentEditable==="true")&&(Qe=dt,Re=$,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(et,o,_e);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(et,o,_e)}var mt;if(ae)e:{switch(e){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else ie?ge(e,o)&&(xt="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(xt="onCompositionStart");xt&&(de&&o.locale!=="ko"&&(ie||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&ie&&(mt=nd()):(kd=_e,ld="value"in kd?kd.value:kd.textContent,ie=!0)),dt=oe($,xt),0<dt.length&&(xt=new Ld(xt,e,null,o,_e),et.push({event:xt,listeners:dt}),mt?xt.data=mt:(mt=he(o),mt!==null&&(xt.data=mt)))),(mt=ce?je(e,o):ke(e,o))&&($=oe($,"onBeforeInput"),0<$.length&&(_e=new Ld("onBeforeInput","beforeinput",null,o,_e),et.push({event:_e,listeners:$}),_e.data=mt))}se(et,i)})}function tf(e,i,o){return{instance:e,listener:i,currentTarget:o}}function oe(e,i){for(var o=i+"Capture",d=[];e!==null;){var h=e,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=Kb(e,o),g!=null&&d.unshift(tf(e,g,h)),g=Kb(e,i),g!=null&&d.push(tf(e,g,h))),e=e.return}return d}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,i,o,d,h){for(var g=i._reactName,b=[];o!==null&&o!==d;){var j=o,_=j.alternate,$=j.stateNode;if(_!==null&&_===d)break;j.tag===5&&$!==null&&(j=$,h?(_=Kb(o,g),_!=null&&b.unshift(tf(o,_,j))):h||(_=Kb(o,g),_!=null&&b.push(tf(o,_,j)))),o=o.return}b.length!==0&&e.push({event:i,listeners:b})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,i,o){if(i=zf(i),zf(e)!==i&&o)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,i){var o=i,d=0;do{var h=o.nextSibling;if(e.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(d===0){e.removeChild(h),bd(i);return}d--}else o!=="$"&&o!=="$?"&&o!=="$!"||d++;o=h}while(o);bd(i)}function Lf(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return e;i--}else o==="/$"&&i++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var i=e[Of];if(i)return i;for(var o=e.parentNode;o;){if(i=o[uf]||o[Of]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(e=Mf(e);e!==null;){if(o=e[Of])return o;e=Mf(e)}return i}e=o,o=e.parentNode}return null}function Cb(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(e,i){Tf++,Sf[Tf]=e.current,e.current=i}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,i){var o=e.type.contextTypes;if(!o)return Vf;var d=e.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in o)h[g]=i[g];return d&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=h),h}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E(Wf),E(H)}function ag(e,i,o){if(H.current!==Vf)throw Error(p(168));G(H,i),G(Wf,o)}function bg(e,i,o){var d=e.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return o;d=d.getChildContext();for(var h in d)if(!(h in i))throw Error(p(108,Ra(e)||"Unknown",h));return A({},o,d)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,e),G(Wf,Wf.current),!0}function dg(e,i,o){var d=e.stateNode;if(!d)throw Error(p(169));o?(e=bg(e,i,Xf),d.__reactInternalMemoizedMergedChildContext=e,E(Wf),E(H),G(H,e)):E(Wf),G(Wf,o)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,i=C;try{var o=eg;for(C=1;e<o.length;e++){var d=o[e];do d=d(!0);while(d!==null)}eg=null,fg=!1}catch(h){throw eg!==null&&(eg=eg.slice(e+1)),ac(fc,jg),h}finally{C=i,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,i){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=i}function ug(e,i,o){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var d=rg;e=sg;var h=32-oc(d)-1;d&=~(1<<h),o+=1;var g=32-oc(i)+h;if(30<g){var b=h-h%5;g=(d&(1<<b)-1).toString(32),d>>=b,h-=b,rg=1<<32-oc(i)+h|o<<h|d,sg=g+e}else rg=1<<g|o<<h|d,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(e,i){var o=Bg(5,null,null,0);o.elementType="DELETED",o.stateNode=i,o.return=e,i=e.deletions,i===null?(e.deletions=[o],e.flags|=16):i.push(o)}function Cg(e,i){switch(e.tag){case 5:var o=e.type;return i=i.nodeType!==1||o.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(e.stateNode=i,xg=e,yg=Lf(i.firstChild),!0):!1;case 6:return i=e.pendingProps===""||i.nodeType!==3?null:i,i!==null?(e.stateNode=i,xg=e,yg=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(o=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:i,treeContext:o,retryLane:1073741824},o=Bg(18,null,null,0),o.stateNode=i,o.return=e,e.child=o,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I){var i=yg;if(i){var o=i;if(!Cg(e,i)){if(Dg(e))throw Error(p(418));i=Lf(o.nextSibling);var d=xg;i&&Cg(e,i)?Ag(d,o):(e.flags=e.flags&-4097|2,I=!1,xg=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I)return Fg(e),I=!0,!1;var i;if((i=e.tag!==3)&&!(i=e.tag!==5)&&(i=e.type,i=i!=="head"&&i!=="body"&&!Ef(e.type,e.memoizedProps)),i&&(i=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;i;)Ag(e,i),i=Lf(i.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(i===0){yg=Lf(e.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,i,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(p(309));var d=o.stateNode}if(!d)throw Error(p(147,e));var h=d,g=""+e;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(b){var j=h.refs;b===null?delete j[g]:j[g]=b},i._stringRef=g,i)}if(typeof e!="string")throw Error(p(284));if(!o._owner)throw Error(p(290,e))}return e}function Mg(e,i){throw e=Object.prototype.toString.call(i),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e))}function Ng(e){var i=e._init;return i(e._payload)}function Og(e){function i(at,ot){if(e){var lt=at.deletions;lt===null?(at.deletions=[ot],at.flags|=16):lt.push(ot)}}function o(at,ot){if(!e)return null;for(;ot!==null;)i(at,ot),ot=ot.sibling;return null}function d(at,ot){for(at=new Map;ot!==null;)ot.key!==null?at.set(ot.key,ot):at.set(ot.index,ot),ot=ot.sibling;return at}function h(at,ot){return at=Pg(at,ot),at.index=0,at.sibling=null,at}function g(at,ot,lt){return at.index=lt,e?(lt=at.alternate,lt!==null?(lt=lt.index,lt<ot?(at.flags|=2,ot):lt):(at.flags|=2,ot)):(at.flags|=1048576,ot)}function b(at){return e&&at.alternate===null&&(at.flags|=2),at}function j(at,ot,lt,ct){return ot===null||ot.tag!==6?(ot=Qg(lt,at.mode,ct),ot.return=at,ot):(ot=h(ot,lt),ot.return=at,ot)}function _(at,ot,lt,ct){var ut=lt.type;return ut===ya?_e(at,ot,lt.props.children,ct,lt.key):ot!==null&&(ot.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===Ha&&Ng(ut)===ot.type)?(ct=h(ot,lt.props),ct.ref=Lg(at,ot,lt),ct.return=at,ct):(ct=Rg(lt.type,lt.key,lt.props,null,at.mode,ct),ct.ref=Lg(at,ot,lt),ct.return=at,ct)}function $(at,ot,lt,ct){return ot===null||ot.tag!==4||ot.stateNode.containerInfo!==lt.containerInfo||ot.stateNode.implementation!==lt.implementation?(ot=Sg(lt,at.mode,ct),ot.return=at,ot):(ot=h(ot,lt.children||[]),ot.return=at,ot)}function _e(at,ot,lt,ct,ut){return ot===null||ot.tag!==7?(ot=Tg(lt,at.mode,ct,ut),ot.return=at,ot):(ot=h(ot,lt),ot.return=at,ot)}function et(at,ot,lt){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return ot=Qg(""+ot,at.mode,lt),ot.return=at,ot;if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case va:return lt=Rg(ot.type,ot.key,ot.props,null,at.mode,lt),lt.ref=Lg(at,null,ot),lt.return=at,lt;case wa:return ot=Sg(ot,at.mode,lt),ot.return=at,ot;case Ha:var ct=ot._init;return et(at,ct(ot._payload),lt)}if(eb(ot)||Ka(ot))return ot=Tg(ot,at.mode,lt,null),ot.return=at,ot;Mg(at,ot)}return null}function tt(at,ot,lt,ct){var ut=ot!==null?ot.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number")return ut!==null?null:j(at,ot,""+lt,ct);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case va:return lt.key===ut?_(at,ot,lt,ct):null;case wa:return lt.key===ut?$(at,ot,lt,ct):null;case Ha:return ut=lt._init,tt(at,ot,ut(lt._payload),ct)}if(eb(lt)||Ka(lt))return ut!==null?null:_e(at,ot,lt,ct,null);Mg(at,lt)}return null}function rt(at,ot,lt,ct,ut){if(typeof ct=="string"&&ct!==""||typeof ct=="number")return at=at.get(lt)||null,j(ot,at,""+ct,ut);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case va:return at=at.get(ct.key===null?lt:ct.key)||null,_(ot,at,ct,ut);case wa:return at=at.get(ct.key===null?lt:ct.key)||null,$(ot,at,ct,ut);case Ha:var dt=ct._init;return rt(at,ot,lt,dt(ct._payload),ut)}if(eb(ct)||Ka(ct))return at=at.get(lt)||null,_e(ot,at,ct,ut,null);Mg(ot,ct)}return null}function nt(at,ot,lt,ct){for(var ut=null,dt=null,mt=ot,xt=ot=0,ft=null;mt!==null&&xt<lt.length;xt++){mt.index>xt?(ft=mt,mt=null):ft=mt.sibling;var gt=tt(at,mt,lt[xt],ct);if(gt===null){mt===null&&(mt=ft);break}e&&mt&&gt.alternate===null&&i(at,mt),ot=g(gt,ot,xt),dt===null?ut=gt:dt.sibling=gt,dt=gt,mt=ft}if(xt===lt.length)return o(at,mt),I&&tg(at,xt),ut;if(mt===null){for(;xt<lt.length;xt++)mt=et(at,lt[xt],ct),mt!==null&&(ot=g(mt,ot,xt),dt===null?ut=mt:dt.sibling=mt,dt=mt);return I&&tg(at,xt),ut}for(mt=d(at,mt);xt<lt.length;xt++)ft=rt(mt,at,xt,lt[xt],ct),ft!==null&&(e&&ft.alternate!==null&&mt.delete(ft.key===null?xt:ft.key),ot=g(ft,ot,xt),dt===null?ut=ft:dt.sibling=ft,dt=ft);return e&&mt.forEach(function(pt){return i(at,pt)}),I&&tg(at,xt),ut}function it(at,ot,lt,ct){var ut=Ka(lt);if(typeof ut!="function")throw Error(p(150));if(lt=ut.call(lt),lt==null)throw Error(p(151));for(var dt=ut=null,mt=ot,xt=ot=0,ft=null,gt=lt.next();mt!==null&&!gt.done;xt++,gt=lt.next()){mt.index>xt?(ft=mt,mt=null):ft=mt.sibling;var pt=tt(at,mt,gt.value,ct);if(pt===null){mt===null&&(mt=ft);break}e&&mt&&pt.alternate===null&&i(at,mt),ot=g(pt,ot,xt),dt===null?ut=pt:dt.sibling=pt,dt=pt,mt=ft}if(gt.done)return o(at,mt),I&&tg(at,xt),ut;if(mt===null){for(;!gt.done;xt++,gt=lt.next())gt=et(at,gt.value,ct),gt!==null&&(ot=g(gt,ot,xt),dt===null?ut=gt:dt.sibling=gt,dt=gt);return I&&tg(at,xt),ut}for(mt=d(at,mt);!gt.done;xt++,gt=lt.next())gt=rt(mt,at,xt,gt.value,ct),gt!==null&&(e&&gt.alternate!==null&&mt.delete(gt.key===null?xt:gt.key),ot=g(gt,ot,xt),dt===null?ut=gt:dt.sibling=gt,dt=gt);return e&&mt.forEach(function(yt){return i(at,yt)}),I&&tg(at,xt),ut}function st(at,ot,lt,ct){if(typeof lt=="object"&&lt!==null&&lt.type===ya&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case va:e:{for(var ut=lt.key,dt=ot;dt!==null;){if(dt.key===ut){if(ut=lt.type,ut===ya){if(dt.tag===7){o(at,dt.sibling),ot=h(dt,lt.props.children),ot.return=at,at=ot;break e}}else if(dt.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===Ha&&Ng(ut)===dt.type){o(at,dt.sibling),ot=h(dt,lt.props),ot.ref=Lg(at,dt,lt),ot.return=at,at=ot;break e}o(at,dt);break}else i(at,dt);dt=dt.sibling}lt.type===ya?(ot=Tg(lt.props.children,at.mode,ct,lt.key),ot.return=at,at=ot):(ct=Rg(lt.type,lt.key,lt.props,null,at.mode,ct),ct.ref=Lg(at,ot,lt),ct.return=at,at=ct)}return b(at);case wa:e:{for(dt=lt.key;ot!==null;){if(ot.key===dt)if(ot.tag===4&&ot.stateNode.containerInfo===lt.containerInfo&&ot.stateNode.implementation===lt.implementation){o(at,ot.sibling),ot=h(ot,lt.children||[]),ot.return=at,at=ot;break e}else{o(at,ot);break}else i(at,ot);ot=ot.sibling}ot=Sg(lt,at.mode,ct),ot.return=at,at=ot}return b(at);case Ha:return dt=lt._init,st(at,ot,dt(lt._payload),ct)}if(eb(lt))return nt(at,ot,lt,ct);if(Ka(lt))return it(at,ot,lt,ct);Mg(at,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"?(lt=""+lt,ot!==null&&ot.tag===6?(o(at,ot.sibling),ot=h(ot,lt),ot.return=at,at=ot):(o(at,ot),ot=Qg(lt,at.mode,ct),ot.return=at,at=ot),b(at)):o(at,ot)}return st}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(e){var i=Wg.current;E(Wg),e._currentValue=i}function bh(e,i,o){for(;e!==null;){var d=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),e===o)break;e=e.return}}function ch(e,i){Xg=e,Zg=Yg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&i&&(dh=!0),e.firstContext=null)}function eh(e){var i=e._currentValue;if(Zg!==e)if(e={context:e,memoizedValue:i,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=e,Xg.dependencies={lanes:0,firstContext:e}}else Yg=Yg.next=e;return i}var fh=null;function gh(e){fh===null?fh=[e]:fh.push(e)}function hh(e,i,o,d){var h=i.interleaved;return h===null?(o.next=o,gh(i)):(o.next=h.next,h.next=o),i.interleaved=o,ih(e,d)}function ih(e,i){e.lanes|=i;var o=e.alternate;for(o!==null&&(o.lanes|=i),o=e,e=e.return;e!==null;)e.childLanes|=i,o=e.alternate,o!==null&&(o.childLanes|=i),o=e,e=e.return;return o.tag===3?o.stateNode:null}var jh=!1;function kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,i){return{eventTime:e,lane:i,tag:0,payload:null,callback:null,next:null}}function nh(e,i,o){var d=e.updateQueue;if(d===null)return null;if(d=d.shared,K&2){var h=d.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),d.pending=i,ih(e,o)}return h=d.interleaved,h===null?(i.next=i,gh(d)):(i.next=h.next,h.next=i),d.interleaved=i,ih(e,o)}function oh(e,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194240)!==0)){var d=i.lanes;d&=e.pendingLanes,o|=d,i.lanes=o,Cc(e,o)}}function ph(e,i){var o=e.updateQueue,d=e.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var h=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var b={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};g===null?h=g=b:g=g.next=b,o=o.next}while(o!==null);g===null?h=g=i:g=g.next=i}else h=g=i;o={baseState:d.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:d.shared,effects:d.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=i:e.next=i,o.lastBaseUpdate=i}function qh(e,i,o,d){var h=e.updateQueue;jh=!1;var g=h.firstBaseUpdate,b=h.lastBaseUpdate,j=h.shared.pending;if(j!==null){h.shared.pending=null;var _=j,$=_.next;_.next=null,b===null?g=$:b.next=$,b=_;var _e=e.alternate;_e!==null&&(_e=_e.updateQueue,j=_e.lastBaseUpdate,j!==b&&(j===null?_e.firstBaseUpdate=$:j.next=$,_e.lastBaseUpdate=_))}if(g!==null){var et=h.baseState;b=0,_e=$=_=null,j=g;do{var tt=j.lane,rt=j.eventTime;if((d&tt)===tt){_e!==null&&(_e=_e.next={eventTime:rt,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var nt=e,it=j;switch(tt=i,rt=o,it.tag){case 1:if(nt=it.payload,typeof nt=="function"){et=nt.call(rt,et,tt);break e}et=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=it.payload,tt=typeof nt=="function"?nt.call(rt,et,tt):nt,tt==null)break e;et=A({},et,tt);break e;case 2:jh=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,tt=h.effects,tt===null?h.effects=[j]:tt.push(j))}else rt={eventTime:rt,lane:tt,tag:j.tag,payload:j.payload,callback:j.callback,next:null},_e===null?($=_e=rt,_=et):_e=_e.next=rt,b|=tt;if(j=j.next,j===null){if(j=h.shared.pending,j===null)break;tt=j,j=tt.next,tt.next=null,h.lastBaseUpdate=tt,h.shared.pending=null}}while(!0);if(_e===null&&(_=et),h.baseState=_,h.firstBaseUpdate=$,h.lastBaseUpdate=_e,i=h.shared.interleaved,i!==null){h=i;do b|=h.lane,h=h.next;while(h!==i)}else g===null&&(h.shared.lanes=0);rh|=b,e.lanes=b,e.memoizedState=et}}function sh(e,i,o){if(e=i.effects,i.effects=null,e!==null)for(i=0;i<e.length;i++){var d=e[i],h=d.callback;if(h!==null){if(d.callback=null,d=o,typeof h!="function")throw Error(p(191,h));h.call(d)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(e){if(e===th)throw Error(p(174));return e}function yh(e,i){switch(G(wh,i),G(vh$1,e),G(uh,th),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:lb(null,"");break;default:e=e===8?i.parentNode:i,i=e.namespaceURI||null,e=e.tagName,i=lb(i,e)}E(uh),G(uh,i)}function zh(){E(uh),E(vh$1),E(wh)}function Ah(e){xh(wh.current);var i=xh(uh.current),o=lb(i,e.type);i!==o&&(G(vh$1,e),G(uh,o))}function Bh(e){vh$1.current===e&&(E(uh),E(vh$1))}var L=Uf(0);function Ch(e){for(var i=e;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Dh=[];function Eh(){for(var e=0;e<Dh.length;e++)Dh[e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p(321))}function Mh(e,i){if(i===null)return!1;for(var o=0;o<i.length&&o<e.length;o++)if(!He(e[o],i[o]))return!1;return!0}function Nh(e,i,o,d,h,g){if(Hh=g,M=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Fh.current=e===null||e.memoizedState===null?Oh:Ph,e=o(d,h),Jh){g=0;do{if(Jh=!1,Kh=0,25<=g)throw Error(p(301));g+=1,O$1=N=null,i.updateQueue=null,Fh.current=Qh,e=o(d,h)}while(Jh)}if(Fh.current=Rh,i=N!==null&&N.next!==null,Hh=0,O$1=N=M=null,Ih=!1,i)throw Error(p(300));return e}function Sh(){var e=Kh!==0;return Kh=0,e}function Th(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M.memoizedState=O$1=e:O$1=O$1.next=e,O$1}function Uh(){if(N===null){var e=M.alternate;e=e!==null?e.memoizedState:null}else e=N.next;var i=O$1===null?M.memoizedState:O$1.next;if(i!==null)O$1=i,N=e;else{if(e===null)throw Error(p(310));N=e,e={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O$1===null?M.memoizedState=O$1=e:O$1=O$1.next=e}return O$1}function Vh(e,i){return typeof i=="function"?i(e):i}function Wh(e){var i=Uh(),o=i.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=e;var d=N,h=d.baseQueue,g=o.pending;if(g!==null){if(h!==null){var b=h.next;h.next=g.next,g.next=b}d.baseQueue=h=g,o.pending=null}if(h!==null){g=h.next,d=d.baseState;var j=b=null,_=null,$=g;do{var _e=$.lane;if((Hh&_e)===_e)_!==null&&(_=_.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),d=$.hasEagerState?$.eagerState:e(d,$.action);else{var et={lane:_e,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};_===null?(j=_=et,b=d):_=_.next=et,M.lanes|=_e,rh|=_e}$=$.next}while($!==null&&$!==g);_===null?b=d:_.next=j,He(d,i.memoizedState)||(dh=!0),i.memoizedState=d,i.baseState=b,i.baseQueue=_,o.lastRenderedState=d}if(e=o.interleaved,e!==null){h=e;do g=h.lane,M.lanes|=g,rh|=g,h=h.next;while(h!==e)}else h===null&&(o.lanes=0);return[i.memoizedState,o.dispatch]}function Xh(e){var i=Uh(),o=i.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=e;var d=o.dispatch,h=o.pending,g=i.memoizedState;if(h!==null){o.pending=null;var b=h=h.next;do g=e(g,b.action),b=b.next;while(b!==h);He(g,i.memoizedState)||(dh=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,d]}function Yh(){}function Zh(e,i){var o=M,d=Uh(),h=i(),g=!He(d.memoizedState,h);if(g&&(d.memoizedState=h,dh=!0),d=d.queue,$h(ai.bind(null,o,d,e),[e]),d.getSnapshot!==i||g||O$1!==null&&O$1.memoizedState.tag&1){if(o.flags|=2048,bi(9,ci.bind(null,o,d,h,i),void 0,null),Q===null)throw Error(p(349));Hh&30||di(o,i,h)}return h}function di(e,i,o){e.flags|=16384,e={getSnapshot:i,value:o},i=M.updateQueue,i===null?(i={lastEffect:null,stores:null},M.updateQueue=i,i.stores=[e]):(o=i.stores,o===null?i.stores=[e]:o.push(e))}function ci(e,i,o,d){i.value=o,i.getSnapshot=d,ei(i)&&fi(e)}function ai(e,i,o){return o(function(){ei(i)&&fi(e)})}function ei(e){var i=e.getSnapshot;e=e.value;try{var o=i();return!He(e,o)}catch{return!0}}function fi(e){var i=ih(e,1);i!==null&&gi(i,e,1,-1)}function hi(e){var i=Th();return typeof e=="function"&&(e=e()),i.memoizedState=i.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:e},i.queue=e,e=e.dispatch=ii.bind(null,M,e),[i.memoizedState,e]}function bi(e,i,o,d){return e={tag:e,create:i,destroy:o,deps:d,next:null},i=M.updateQueue,i===null?(i={lastEffect:null,stores:null},M.updateQueue=i,i.lastEffect=e.next=e):(o=i.lastEffect,o===null?i.lastEffect=e.next=e:(d=o.next,o.next=e,e.next=d,i.lastEffect=e)),e}function ji(){return Uh().memoizedState}function ki(e,i,o,d){var h=Th();M.flags|=e,h.memoizedState=bi(1|i,o,void 0,d===void 0?null:d)}function li(e,i,o,d){var h=Uh();d=d===void 0?null:d;var g=void 0;if(N!==null){var b=N.memoizedState;if(g=b.destroy,d!==null&&Mh(d,b.deps)){h.memoizedState=bi(i,o,g,d);return}}M.flags|=e,h.memoizedState=bi(1|i,o,g,d)}function mi(e,i){return ki(8390656,8,e,i)}function $h(e,i){return li(2048,8,e,i)}function ni(e,i){return li(4,2,e,i)}function oi(e,i){return li(4,4,e,i)}function pi$2(e,i){if(typeof i=="function")return e=e(),i(e),function(){i(null)};if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function qi(e,i,o){return o=o!=null?o.concat([e]):null,li(4,4,pi$2.bind(null,i,e),o)}function ri(){}function si(e,i){var o=Uh();i=i===void 0?null:i;var d=o.memoizedState;return d!==null&&i!==null&&Mh(i,d[1])?d[0]:(o.memoizedState=[e,i],e)}function ti(e,i){var o=Uh();i=i===void 0?null:i;var d=o.memoizedState;return d!==null&&i!==null&&Mh(i,d[1])?d[0]:(e=e(),o.memoizedState=[e,i],e)}function ui(e,i,o){return Hh&21?(He(o,i)||(o=yc(),M.lanes|=o,rh|=o,e.baseState=!0),i):(e.baseState&&(e.baseState=!1,dh=!0),e.memoizedState=o)}function vi(e,i){var o=C;C=o!==0&&4>o?o:4,e(!0);var d=Gh.transition;Gh.transition={};try{e(!1),i()}finally{C=o,Gh.transition=d}}function wi(){return Uh().memoizedState}function xi(e,i,o){var d=yi(e);if(o={lane:d,action:o,hasEagerState:!1,eagerState:null,next:null},zi(e))Ai(i,o);else if(o=hh(e,i,o,d),o!==null){var h=R();gi(o,e,d,h),Bi(o,i,d)}}function ii(e,i,o){var d=yi(e),h={lane:d,action:o,hasEagerState:!1,eagerState:null,next:null};if(zi(e))Ai(i,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var b=i.lastRenderedState,j=g(b,o);if(h.hasEagerState=!0,h.eagerState=j,He(j,b)){var _=i.interleaved;_===null?(h.next=h,gh(i)):(h.next=_.next,_.next=h),i.interleaved=h;return}}catch{}finally{}o=hh(e,i,h,d),o!==null&&(h=R(),gi(o,e,d,h),Bi(o,i,d))}}function zi(e){var i=e.alternate;return e===M||i!==null&&i===M}function Ai(e,i){Jh=Ih=!0;var o=e.pending;o===null?i.next=i:(i.next=o.next,o.next=i),e.pending=i}function Bi(e,i,o){if(o&4194240){var d=i.lanes;d&=e.pendingLanes,o|=d,i.lanes=o,Cc(e,o)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(e,i){return Th().memoizedState=[e,i===void 0?null:i],e},useContext:eh,useEffect:mi,useImperativeHandle:function(e,i,o){return o=o!=null?o.concat([e]):null,ki(4194308,4,pi$2.bind(null,i,e),o)},useLayoutEffect:function(e,i){return ki(4194308,4,e,i)},useInsertionEffect:function(e,i){return ki(4,2,e,i)},useMemo:function(e,i){var o=Th();return i=i===void 0?null:i,e=e(),o.memoizedState=[e,i],e},useReducer:function(e,i,o){var d=Th();return i=o!==void 0?o(i):i,d.memoizedState=d.baseState=i,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},d.queue=e,e=e.dispatch=xi.bind(null,M,e),[d.memoizedState,e]},useRef:function(e){var i=Th();return e={current:e},i.memoizedState=e},useState:hi,useDebugValue:ri,useDeferredValue:function(e){return Th().memoizedState=e},useTransition:function(){var e=hi(!1),i=e[0];return e=vi.bind(null,e[1]),Th().memoizedState=e,[i,e]},useMutableSource:function(){},useSyncExternalStore:function(e,i,o){var d=M,h=Th();if(I){if(o===void 0)throw Error(p(407));o=o()}else{if(o=i(),Q===null)throw Error(p(349));Hh&30||di(d,i,o)}h.memoizedState=o;var g={value:o,getSnapshot:i};return h.queue=g,mi(ai.bind(null,d,g,e),[e]),d.flags|=2048,bi(9,ci.bind(null,d,g,o,i),void 0,null),o},useId:function(){var e=Th(),i=Q.identifierPrefix;if(I){var o=sg,d=rg;o=(d&~(1<<32-oc(d)-1)).toString(32)+o,i=":"+i+"R"+o,o=Kh++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=Lh++,i=":"+i+"r"+o.toString(32)+":";return e.memoizedState=i},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var i=Uh();return ui(i,N.memoizedState,e)},useTransition:function(){var e=Wh(Vh)[0],i=Uh().memoizedState;return[e,i]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var i=Uh();return N===null?i.memoizedState=e:ui(i,N.memoizedState,e)},useTransition:function(){var e=Xh(Vh)[0],i=Uh().memoizedState;return[e,i]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(e,i){if(e&&e.defaultProps){i=A({},i),e=e.defaultProps;for(var o in e)i[o]===void 0&&(i[o]=e[o]);return i}return i}function Di(e,i,o,d){i=e.memoizedState,o=o(d,i),o=o==null?i:A({},i,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,i,o){e=e._reactInternals;var d=R(),h=yi(e),g=mh(d,h);g.payload=i,o!=null&&(g.callback=o),i=nh(e,g,h),i!==null&&(gi(i,e,h,d),oh(i,e,h))},enqueueReplaceState:function(e,i,o){e=e._reactInternals;var d=R(),h=yi(e),g=mh(d,h);g.tag=1,g.payload=i,o!=null&&(g.callback=o),i=nh(e,g,h),i!==null&&(gi(i,e,h,d),oh(i,e,h))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var o=R(),d=yi(e),h=mh(o,d);h.tag=2,i!=null&&(h.callback=i),i=nh(e,h,d),i!==null&&(gi(i,e,d,o),oh(i,e,d))}};function Fi(e,i,o,d,h,g,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(d,g,b):i.prototype&&i.prototype.isPureReactComponent?!Ie(o,d)||!Ie(h,g):!0}function Gi(e,i,o){var d=!1,h=Vf,g=i.contextType;return typeof g=="object"&&g!==null?g=eh(g):(h=Zf(i)?Xf:H.current,d=i.contextTypes,g=(d=d!=null)?Yf(e,h):Vf),i=new i(o,g),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ei,e.stateNode=i,i._reactInternals=e,d&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=g),i}function Hi(e,i,o,d){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,d),i.state!==e&&Ei.enqueueReplaceState(i,i.state,null)}function Ii(e,i,o,d){var h=e.stateNode;h.props=o,h.state=e.memoizedState,h.refs={},kh(e);var g=i.contextType;typeof g=="object"&&g!==null?h.context=eh(g):(g=Zf(i)?Xf:H.current,h.context=Yf(e,g)),h.state=e.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Di(e,i,g,o),h.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(i=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),i!==h.state&&Ei.enqueueReplaceState(h,h.state,null),qh(e,o,h,d),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function Ji(e,i){try{var o="",d=i;do o+=Pa(d),d=d.return;while(d);var h=o}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:i,stack:h,digest:null}}function Ki(e,i,o){return{value:e,source:null,stack:o??null,digest:i??null}}function Li(e,i){try{console.error(i.value)}catch(o){setTimeout(function(){throw o})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(e,i,o){o=mh(-1,o),o.tag=3,o.payload={element:null};var d=i.value;return o.callback=function(){Oi||(Oi=!0,Pi=d),Li(e,i)},o}function Qi(e,i,o){o=mh(-1,o),o.tag=3;var d=e.type.getDerivedStateFromError;if(typeof d=="function"){var h=i.value;o.payload=function(){return d(h)},o.callback=function(){Li(e,i)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(o.callback=function(){Li(e,i),typeof d!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var b=i.stack;this.componentDidCatch(i.value,{componentStack:b!==null?b:""})}),o}function Si(e,i,o){var d=e.pingCache;if(d===null){d=e.pingCache=new Mi;var h=new Set;d.set(i,h)}else h=d.get(i),h===void 0&&(h=new Set,d.set(i,h));h.has(o)||(h.add(o),e=Ti.bind(null,e,i,o),i.then(e,e))}function Ui(e){do{var i;if((i=e.tag===13)&&(i=e.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return e;e=e.return}while(e!==null);return null}function Vi(e,i,o,d,h){return e.mode&1?(e.flags|=65536,e.lanes=h,e):(e===i?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(i=mh(-1,1),i.tag=2,nh(o,i,1))),o.lanes|=1),e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(e,i,o,d){i.child=e===null?Vg(i,null,o,d):Ug(i,e.child,o,d)}function Yi(e,i,o,d,h){o=o.render;var g=i.ref;return ch(i,h),d=Nh(e,i,o,d,g,h),o=Sh(),e!==null&&!dh?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~h,Zi(e,i,h)):(I&&o&&vg(i),i.flags|=1,Xi(e,i,d,h),i.child)}function $i(e,i,o,d,h){if(e===null){var g=o.type;return typeof g=="function"&&!aj(g)&&g.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(i.tag=15,i.type=g,bj(e,i,g,d,h)):(e=Rg(o.type,null,d,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!(e.lanes&h)){var b=g.memoizedProps;if(o=o.compare,o=o!==null?o:Ie,o(b,d)&&e.ref===i.ref)return Zi(e,i,h)}return i.flags|=1,e=Pg(g,d),e.ref=i.ref,e.return=i,i.child=e}function bj(e,i,o,d,h){if(e!==null){var g=e.memoizedProps;if(Ie(g,d)&&e.ref===i.ref)if(dh=!1,i.pendingProps=d=g,(e.lanes&h)!==0)e.flags&131072&&(dh=!0);else return i.lanes=e.lanes,Zi(e,i,h)}return cj(e,i,o,d,h)}function dj(e,i,o){var d=i.pendingProps,h=d.children,g=e!==null?e.memoizedState:null;if(d.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=o;else{if(!(o&1073741824))return e=g!==null?g.baseLanes|o:o,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:e,cachePool:null,transitions:null},i.updateQueue=null,G(ej,fj),fj|=e,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:o,G(ej,fj),fj|=d}else g!==null?(d=g.baseLanes|o,i.memoizedState=null):d=o,G(ej,fj),fj|=d;return Xi(e,i,h,o),i.child}function gj(e,i){var o=i.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(i.flags|=512,i.flags|=2097152)}function cj(e,i,o,d,h){var g=Zf(o)?Xf:H.current;return g=Yf(i,g),ch(i,h),o=Nh(e,i,o,d,g,h),d=Sh(),e!==null&&!dh?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~h,Zi(e,i,h)):(I&&d&&vg(i),i.flags|=1,Xi(e,i,o,h),i.child)}function hj(e,i,o,d,h){if(Zf(o)){var g=!0;cg(i)}else g=!1;if(ch(i,h),i.stateNode===null)ij(e,i),Gi(i,o,d),Ii(i,o,d,h),d=!0;else if(e===null){var b=i.stateNode,j=i.memoizedProps;b.props=j;var _=b.context,$=o.contextType;typeof $=="object"&&$!==null?$=eh($):($=Zf(o)?Xf:H.current,$=Yf(i,$));var _e=o.getDerivedStateFromProps,et=typeof _e=="function"||typeof b.getSnapshotBeforeUpdate=="function";et||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(j!==d||_!==$)&&Hi(i,b,d,$),jh=!1;var tt=i.memoizedState;b.state=tt,qh(i,d,b,h),_=i.memoizedState,j!==d||tt!==_||Wf.current||jh?(typeof _e=="function"&&(Di(i,o,_e,d),_=i.memoizedState),(j=jh||Fi(i,o,j,d,tt,_,$))?(et||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(i.flags|=4194308)):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=_),b.props=d,b.state=_,b.context=$,d=j):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{b=i.stateNode,lh(e,i),j=i.memoizedProps,$=i.type===i.elementType?j:Ci(i.type,j),b.props=$,et=i.pendingProps,tt=b.context,_=o.contextType,typeof _=="object"&&_!==null?_=eh(_):(_=Zf(o)?Xf:H.current,_=Yf(i,_));var rt=o.getDerivedStateFromProps;(_e=typeof rt=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(j!==et||tt!==_)&&Hi(i,b,d,_),jh=!1,tt=i.memoizedState,b.state=tt,qh(i,d,b,h);var nt=i.memoizedState;j!==et||tt!==nt||Wf.current||jh?(typeof rt=="function"&&(Di(i,o,rt,d),nt=i.memoizedState),($=jh||Fi(i,o,$,d,tt,nt,_)||!1)?(_e||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,nt,_),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,nt,_)),typeof b.componentDidUpdate=="function"&&(i.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof b.componentDidUpdate!="function"||j===e.memoizedProps&&tt===e.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&tt===e.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=nt),b.props=d,b.state=nt,b.context=_,d=$):(typeof b.componentDidUpdate!="function"||j===e.memoizedProps&&tt===e.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&tt===e.memoizedState||(i.flags|=1024),d=!1)}return jj(e,i,o,d,g,h)}function jj(e,i,o,d,h,g){gj(e,i);var b=(i.flags&128)!==0;if(!d&&!b)return h&&dg(i,o,!1),Zi(e,i,g);d=i.stateNode,Wi.current=i;var j=b&&typeof o.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,e!==null&&b?(i.child=Ug(i,e.child,null,g),i.child=Ug(i,null,j,g)):Xi(e,i,j,g),i.memoizedState=d.state,h&&dg(i,o,!0),i.child}function kj(e){var i=e.stateNode;i.pendingContext?ag(e,i.pendingContext,i.pendingContext!==i.context):i.context&&ag(e,i.context,!1),yh(e,i.containerInfo)}function lj(e,i,o,d,h){return Ig(),Jg(h),i.flags|=256,Xi(e,i,o,d),i.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(e){return{baseLanes:e,cachePool:null,transitions:null}}function oj(e,i,o){var d=i.pendingProps,h=L.current,g=!1,b=(i.flags&128)!==0,j;if((j=b)||(j=e!==null&&e.memoizedState===null?!1:(h&2)!==0),j?(g=!0,i.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),G(L,h&1),e===null)return Eg(i),e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(i.mode&1?e.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(b=d.children,e=d.fallback,g?(d=i.mode,g=i.child,b={mode:"hidden",children:b},!(d&1)&&g!==null?(g.childLanes=0,g.pendingProps=b):g=pj(b,d,0,null),e=Tg(e,d,o,null),g.return=i,e.return=i,g.sibling=e,i.child=g,i.child.memoizedState=nj(o),i.memoizedState=mj,e):qj(i,b));if(h=e.memoizedState,h!==null&&(j=h.dehydrated,j!==null))return rj(e,i,b,d,j,h,o);if(g){g=d.fallback,b=i.mode,h=e.child,j=h.sibling;var _={mode:"hidden",children:d.children};return!(b&1)&&i.child!==h?(d=i.child,d.childLanes=0,d.pendingProps=_,i.deletions=null):(d=Pg(h,_),d.subtreeFlags=h.subtreeFlags&14680064),j!==null?g=Pg(j,g):(g=Tg(g,b,o,null),g.flags|=2),g.return=i,d.return=i,d.sibling=g,i.child=d,d=g,g=i.child,b=e.child.memoizedState,b=b===null?nj(o):{baseLanes:b.baseLanes|o,cachePool:null,transitions:b.transitions},g.memoizedState=b,g.childLanes=e.childLanes&~o,i.memoizedState=mj,d}return g=e.child,e=g.sibling,d=Pg(g,{mode:"visible",children:d.children}),!(i.mode&1)&&(d.lanes=o),d.return=i,d.sibling=null,e!==null&&(o=i.deletions,o===null?(i.deletions=[e],i.flags|=16):o.push(e)),i.child=d,i.memoizedState=null,d}function qj(e,i){return i=pj({mode:"visible",children:i},e.mode,0,null),i.return=e,e.child=i}function sj(e,i,o,d){return d!==null&&Jg(d),Ug(i,e.child,null,o),e=qj(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function rj(e,i,o,d,h,g,b){if(o)return i.flags&256?(i.flags&=-257,d=Ki(Error(p(422))),sj(e,i,b,d)):i.memoizedState!==null?(i.child=e.child,i.flags|=128,null):(g=d.fallback,h=i.mode,d=pj({mode:"visible",children:d.children},h,0,null),g=Tg(g,h,b,null),g.flags|=2,d.return=i,g.return=i,d.sibling=g,i.child=d,i.mode&1&&Ug(i,e.child,null,b),i.child.memoizedState=nj(b),i.memoizedState=mj,g);if(!(i.mode&1))return sj(e,i,b,null);if(h.data==="$!"){if(d=h.nextSibling&&h.nextSibling.dataset,d)var j=d.dgst;return d=j,g=Error(p(419)),d=Ki(g,d,void 0),sj(e,i,b,d)}if(j=(b&e.childLanes)!==0,dh||j){if(d=Q,d!==null){switch(b&-b){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(d.suspendedLanes|b)?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,ih(e,h),gi(d,e,h,-1))}return tj(),d=Ki(Error(p(421))),sj(e,i,b,d)}return h.data==="$?"?(i.flags|=128,i.child=e.child,i=uj.bind(null,e),h._reactRetry=i,null):(e=g.treeContext,yg=Lf(h.nextSibling),xg=i,I=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=i),i=qj(i,d.children),i.flags|=4096,i)}function vj(e,i,o){e.lanes|=i;var d=e.alternate;d!==null&&(d.lanes|=i),bh(e.return,i,o)}function wj(e,i,o,d,h){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:h}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=o,g.tailMode=h)}function xj(e,i,o){var d=i.pendingProps,h=d.revealOrder,g=d.tail;if(Xi(e,i,d.children,o),d=L.current,d&2)d=d&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vj(e,o,i);else if(e.tag===19)vj(e,o,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}d&=1}if(G(L,d),!(i.mode&1))i.memoizedState=null;else switch(h){case"forwards":for(o=i.child,h=null;o!==null;)e=o.alternate,e!==null&&Ch(e)===null&&(h=o),o=o.sibling;o=h,o===null?(h=i.child,i.child=null):(h=o.sibling,o.sibling=null),wj(i,!1,h,o,g);break;case"backwards":for(o=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Ch(e)===null){i.child=h;break}e=h.sibling,h.sibling=o,o=h,h=e}wj(i,!0,o,null,g);break;case"together":wj(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ij(e,i){!(i.mode&1)&&e!==null&&(e.alternate=null,i.alternate=null,i.flags|=2)}function Zi(e,i,o){if(e!==null&&(i.dependencies=e.dependencies),rh|=i.lanes,!(o&i.childLanes))return null;if(e!==null&&i.child!==e.child)throw Error(p(153));if(i.child!==null){for(e=i.child,o=Pg(e,e.pendingProps),i.child=o,o.return=i;e.sibling!==null;)e=e.sibling,o=o.sibling=Pg(e,e.pendingProps),o.return=i;o.sibling=null}return i.child}function yj(e,i,o){switch(i.tag){case 3:kj(i),Ig();break;case 5:Ah(i);break;case 1:Zf(i.type)&&cg(i);break;case 4:yh(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,h=i.memoizedProps.value;G(Wg,d._currentValue),d._currentValue=h;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(G(L,L.current&1),i.flags|=128,null):o&i.child.childLanes?oj(e,i,o):(G(L,L.current&1),e=Zi(e,i,o),e!==null?e.sibling:null);G(L,L.current&1);break;case 19:if(d=(o&i.childLanes)!==0,e.flags&128){if(d)return xj(e,i,o);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),G(L,L.current),d)break;return null;case 22:case 23:return i.lanes=0,dj(e,i,o)}return Zi(e,i,o)}var zj,Aj,Bj,Cj;zj=function(e,i){for(var o=i.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Aj=function(){};Bj=function(e,i,o,d){var h=e.memoizedProps;if(h!==d){e=i.stateNode,xh(uh.current);var g=null;switch(o){case"input":h=Ya(e,h),d=Ya(e,d),g=[];break;case"select":h=A({},h,{value:void 0}),d=A({},d,{value:void 0}),g=[];break;case"textarea":h=gb(e,h),d=gb(e,d),g=[];break;default:typeof h.onClick!="function"&&typeof d.onClick=="function"&&(e.onclick=Bf)}ub(o,d);var b;o=null;for($ in h)if(!d.hasOwnProperty($)&&h.hasOwnProperty($)&&h[$]!=null)if($==="style"){var j=h[$];for(b in j)j.hasOwnProperty(b)&&(o||(o={}),o[b]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(ea.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in d){var _=d[$];if(j=h!=null?h[$]:void 0,d.hasOwnProperty($)&&_!==j&&(_!=null||j!=null))if($==="style")if(j){for(b in j)!j.hasOwnProperty(b)||_&&_.hasOwnProperty(b)||(o||(o={}),o[b]="");for(b in _)_.hasOwnProperty(b)&&j[b]!==_[b]&&(o||(o={}),o[b]=_[b])}else o||(g||(g=[]),g.push($,o)),o=_;else $==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,j=j?j.__html:void 0,_!=null&&j!==_&&(g=g||[]).push($,_)):$==="children"?typeof _!="string"&&typeof _!="number"||(g=g||[]).push($,""+_):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(ea.hasOwnProperty($)?(_!=null&&$==="onScroll"&&D("scroll",e),g||j===_||(g=[])):(g=g||[]).push($,_))}o&&(g=g||[]).push("style",o);var $=g;(i.updateQueue=$)&&(i.flags|=4)}};Cj=function(e,i,o,d){o!==d&&(i.flags|=4)};function Dj(e,i){if(!I)switch(e.tailMode){case"hidden":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:d.sibling=null}}function S(e){var i=e.alternate!==null&&e.alternate.child===e.child,o=0,d=0;if(i)for(var h=e.child;h!==null;)o|=h.lanes|h.childLanes,d|=h.subtreeFlags&14680064,d|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)o|=h.lanes|h.childLanes,d|=h.subtreeFlags,d|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=d,e.childLanes=o,i}function Ej(e,i,o){var d=i.pendingProps;switch(wg(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(i),null;case 1:return Zf(i.type)&&$f(),S(i),null;case 3:return d=i.stateNode,zh(),E(Wf),E(H),Eh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(e===null||e.child===null)&&(Gg(i)?i.flags|=4:e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(e,i),S(i),null;case 5:Bh(i);var h=xh(wh.current);if(o=i.type,e!==null&&i.stateNode!=null)Bj(e,i,o,d,h),e.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(p(166));return S(i),null}if(e=xh(uh.current),Gg(i)){d=i.stateNode,o=i.type;var g=i.memoizedProps;switch(d[Of]=i,d[Pf]=g,e=(i.mode&1)!==0,o){case"dialog":D("cancel",d),D("close",d);break;case"iframe":case"object":case"embed":D("load",d);break;case"video":case"audio":for(h=0;h<lf.length;h++)D(lf[h],d);break;case"source":D("error",d);break;case"img":case"image":case"link":D("error",d),D("load",d);break;case"details":D("toggle",d);break;case"input":Za(d,g),D("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},D("invalid",d);break;case"textarea":hb(d,g),D("invalid",d)}ub(o,g),h=null;for(var b in g)if(g.hasOwnProperty(b)){var j=g[b];b==="children"?typeof j=="string"?d.textContent!==j&&(g.suppressHydrationWarning!==!0&&Af(d.textContent,j,e),h=["children",j]):typeof j=="number"&&d.textContent!==""+j&&(g.suppressHydrationWarning!==!0&&Af(d.textContent,j,e),h=["children",""+j]):ea.hasOwnProperty(b)&&j!=null&&b==="onScroll"&&D("scroll",d)}switch(o){case"input":Va(d),db$1(d,g,!0);break;case"textarea":Va(d),jb(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Bf)}d=h,i.updateQueue=d,d!==null&&(i.flags|=4)}else{b=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=b.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof d.is=="string"?e=b.createElement(o,{is:d.is}):(e=b.createElement(o),o==="select"&&(b=e,d.multiple?b.multiple=!0:d.size&&(b.size=d.size))):e=b.createElementNS(e,o),e[Of]=i,e[Pf]=d,zj(e,i,!1,!1),i.stateNode=e;e:{switch(b=vb(o,d),o){case"dialog":D("cancel",e),D("close",e),h=d;break;case"iframe":case"object":case"embed":D("load",e),h=d;break;case"video":case"audio":for(h=0;h<lf.length;h++)D(lf[h],e);h=d;break;case"source":D("error",e),h=d;break;case"img":case"image":case"link":D("error",e),D("load",e),h=d;break;case"details":D("toggle",e),h=d;break;case"input":Za(e,d),h=Ya(e,d),D("invalid",e);break;case"option":h=d;break;case"select":e._wrapperState={wasMultiple:!!d.multiple},h=A({},d,{value:void 0}),D("invalid",e);break;case"textarea":hb(e,d),h=gb(e,d),D("invalid",e);break;default:h=d}ub(o,h),j=h;for(g in j)if(j.hasOwnProperty(g)){var _=j[g];g==="style"?sb(e,_):g==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&nb(e,_)):g==="children"?typeof _=="string"?(o!=="textarea"||_!=="")&&ob(e,_):typeof _=="number"&&ob(e,""+_):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(ea.hasOwnProperty(g)?_!=null&&g==="onScroll"&&D("scroll",e):_!=null&&ta(e,g,_,b))}switch(o){case"input":Va(e),db$1(e,d,!1);break;case"textarea":Va(e),jb(e);break;case"option":d.value!=null&&e.setAttribute("value",""+Sa(d.value));break;case"select":e.multiple=!!d.multiple,g=d.value,g!=null?fb(e,!!d.multiple,g,!1):d.defaultValue!=null&&fb(e,!!d.multiple,d.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Bf)}switch(o){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return S(i),null;case 6:if(e&&i.stateNode!=null)Cj(e,i,e.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(p(166));if(o=xh(wh.current),xh(uh.current),Gg(i)){if(d=i.stateNode,o=i.memoizedProps,d[Of]=i,(g=d.nodeValue!==o)&&(e=xg,e!==null))switch(e.tag){case 3:Af(d.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(d.nodeValue,o,(e.mode&1)!==0)}g&&(i.flags|=4)}else d=(o.nodeType===9?o:o.ownerDocument).createTextNode(d),d[Of]=i,i.stateNode=d}return S(i),null;case 13:if(E(L),d=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I&&yg!==null&&i.mode&1&&!(i.flags&128))Hg(),Ig(),i.flags|=98560,g=!1;else if(g=Gg(i),d!==null&&d.dehydrated!==null){if(e===null){if(!g)throw Error(p(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(p(317));g[Of]=i}else Ig(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;S(i),g=!1}else zg!==null&&(Fj(zg),zg=null),g=!0;if(!g)return i.flags&65536?i:null}return i.flags&128?(i.lanes=o,i):(d=d!==null,d!==(e!==null&&e.memoizedState!==null)&&d&&(i.child.flags|=8192,i.mode&1&&(e===null||L.current&1?T===0&&(T=3):tj())),i.updateQueue!==null&&(i.flags|=4),S(i),null);case 4:return zh(),Aj(e,i),e===null&&sf(i.stateNode.containerInfo),S(i),null;case 10:return ah(i.type._context),S(i),null;case 17:return Zf(i.type)&&$f(),S(i),null;case 19:if(E(L),g=i.memoizedState,g===null)return S(i),null;if(d=(i.flags&128)!==0,b=g.rendering,b===null)if(d)Dj(g,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(b=Ch(e),b!==null){for(i.flags|=128,Dj(g,!1),d=b.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=o,o=i.child;o!==null;)g=o,e=d,g.flags&=14680066,b=g.alternate,b===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=b.childLanes,g.lanes=b.lanes,g.child=b.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=b.memoizedProps,g.memoizedState=b.memoizedState,g.updateQueue=b.updateQueue,g.type=b.type,e=b.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return G(L,L.current&1|2),i.child}e=e.sibling}g.tail!==null&&B()>Gj&&(i.flags|=128,d=!0,Dj(g,!1),i.lanes=4194304)}else{if(!d)if(e=Ch(b),e!==null){if(i.flags|=128,d=!0,o=e.updateQueue,o!==null&&(i.updateQueue=o,i.flags|=4),Dj(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!I)return S(i),null}else 2*B()-g.renderingStartTime>Gj&&o!==1073741824&&(i.flags|=128,d=!0,Dj(g,!1),i.lanes=4194304);g.isBackwards?(b.sibling=i.child,i.child=b):(o=g.last,o!==null?o.sibling=b:i.child=b,g.last=b)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=B(),i.sibling=null,o=L.current,G(L,d?o&1|2:o&1),i):(S(i),null);case 22:case 23:return Hj(),d=i.memoizedState!==null,e!==null&&e.memoizedState!==null!==d&&(i.flags|=8192),d&&i.mode&1?fj&1073741824&&(S(i),i.subtreeFlags&6&&(i.flags|=8192)):S(i),null;case 24:return null;case 25:return null}throw Error(p(156,i.tag))}function Ij(e,i){switch(wg(i),i.tag){case 1:return Zf(i.type)&&$f(),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return zh(),E(Wf),E(H),Eh(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 5:return Bh(i),null;case 13:if(E(L),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(p(340));Ig()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(i.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(e,i){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(d){W(e,i,d)}else o.current=null}function Mj(e,i,o){try{o()}catch(d){W(e,i,d)}}var Nj=!1;function Oj(e,i){if(Cf=dd,e=Me(),Ne(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var h=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var b=0,j=-1,_=-1,$=0,_e=0,et=e,tt=null;t:for(;;){for(var rt;et!==o||h!==0&&et.nodeType!==3||(j=b+h),et!==g||d!==0&&et.nodeType!==3||(_=b+d),et.nodeType===3&&(b+=et.nodeValue.length),(rt=et.firstChild)!==null;)tt=et,et=rt;for(;;){if(et===e)break t;if(tt===o&&++$===h&&(j=b),tt===g&&++_e===d&&(_=b),(rt=et.nextSibling)!==null)break;et=tt,tt=et.parentNode}et=rt}o=j===-1||_===-1?null:{start:j,end:_}}else o=null}o=o||{start:0,end:0}}else o=null;for(Df={focusedElem:e,selectionRange:o},dd=!1,V=i;V!==null;)if(i=V,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,V=e;else for(;V!==null;){i=V;try{var nt=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(nt!==null){var it=nt.memoizedProps,st=nt.memoizedState,at=i.stateNode,ot=at.getSnapshotBeforeUpdate(i.elementType===i.type?it:Ci(i.type,it),st);at.__reactInternalSnapshotBeforeUpdate=ot}break;case 3:var lt=i.stateNode.containerInfo;lt.nodeType===1?lt.textContent="":lt.nodeType===9&&lt.documentElement&&lt.removeChild(lt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(ct){W(i,i.return,ct)}if(e=i.sibling,e!==null){e.return=i.return,V=e;break}V=i.return}return nt=Nj,Nj=!1,nt}function Pj(e,i,o){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var h=d=d.next;do{if((h.tag&e)===e){var g=h.destroy;h.destroy=void 0,g!==void 0&&Mj(i,o,g)}h=h.next}while(h!==d)}}function Qj(e,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var d=o.create;o.destroy=d()}o=o.next}while(o!==i)}}function Rj(e){var i=e.ref;if(i!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof i=="function"?i(e):i.current=e}}function Sj(e){var i=e.alternate;i!==null&&(e.alternate=null,Sj(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&(delete i[Of],delete i[Pf],delete i[of],delete i[Qf],delete i[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tj(e){return e.tag===5||e.tag===3||e.tag===4}function Uj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vj(e,i,o){var d=e.tag;if(d===5||d===6)e=e.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(e,i):o.insertBefore(e,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(e,o)):(i=o,i.appendChild(e)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Bf));else if(d!==4&&(e=e.child,e!==null))for(Vj(e,i,o),e=e.sibling;e!==null;)Vj(e,i,o),e=e.sibling}function Wj(e,i,o){var d=e.tag;if(d===5||d===6)e=e.stateNode,i?o.insertBefore(e,i):o.appendChild(e);else if(d!==4&&(e=e.child,e!==null))for(Wj(e,i,o),e=e.sibling;e!==null;)Wj(e,i,o),e=e.sibling}var X$1=null,Xj=!1;function Yj(e,i,o){for(o=o.child;o!==null;)Zj(e,i,o),o=o.sibling}function Zj(e,i,o){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,o)}catch{}switch(o.tag){case 5:U||Lj(o,i);case 6:var d=X$1,h=Xj;X$1=null,Yj(e,i,o),X$1=d,Xj=h,X$1!==null&&(Xj?(e=X$1,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):X$1.removeChild(o.stateNode));break;case 18:X$1!==null&&(Xj?(e=X$1,o=o.stateNode,e.nodeType===8?Kf(e.parentNode,o):e.nodeType===1&&Kf(e,o),bd(e)):Kf(X$1,o.stateNode));break;case 4:d=X$1,h=Xj,X$1=o.stateNode.containerInfo,Xj=!0,Yj(e,i,o),X$1=d,Xj=h;break;case 0:case 11:case 14:case 15:if(!U&&(d=o.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){h=d=d.next;do{var g=h,b=g.destroy;g=g.tag,b!==void 0&&(g&2||g&4)&&Mj(o,i,b),h=h.next}while(h!==d)}Yj(e,i,o);break;case 1:if(!U&&(Lj(o,i),d=o.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=o.memoizedProps,d.state=o.memoizedState,d.componentWillUnmount()}catch(j){W(o,i,j)}Yj(e,i,o);break;case 21:Yj(e,i,o);break;case 22:o.mode&1?(U=(d=U)||o.memoizedState!==null,Yj(e,i,o),U=d):Yj(e,i,o);break;default:Yj(e,i,o)}}function ak(e){var i=e.updateQueue;if(i!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new Kj),i.forEach(function(d){var h=bk.bind(null,e,d);o.has(d)||(o.add(d),d.then(h,h))})}}function ck(e,i){var o=i.deletions;if(o!==null)for(var d=0;d<o.length;d++){var h=o[d];try{var g=e,b=i,j=b;e:for(;j!==null;){switch(j.tag){case 5:X$1=j.stateNode,Xj=!1;break e;case 3:X$1=j.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=j.stateNode.containerInfo,Xj=!0;break e}j=j.return}if(X$1===null)throw Error(p(160));Zj(g,b,h),X$1=null,Xj=!1;var _=h.alternate;_!==null&&(_.return=null),h.return=null}catch($){W(h,i,$)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)dk(i,e),i=i.sibling}function dk(e,i){var o=e.alternate,d=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ck(i,e),ek(e),d&4){try{Pj(3,e,e.return),Qj(3,e)}catch(it){W(e,e.return,it)}try{Pj(5,e,e.return)}catch(it){W(e,e.return,it)}}break;case 1:ck(i,e),ek(e),d&512&&o!==null&&Lj(o,o.return);break;case 5:if(ck(i,e),ek(e),d&512&&o!==null&&Lj(o,o.return),e.flags&32){var h=e.stateNode;try{ob(h,"")}catch(it){W(e,e.return,it)}}if(d&4&&(h=e.stateNode,h!=null)){var g=e.memoizedProps,b=o!==null?o.memoizedProps:g,j=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{j==="input"&&g.type==="radio"&&g.name!=null&&ab(h,g),vb(j,b);var $=vb(j,g);for(b=0;b<_.length;b+=2){var _e=_[b],et=_[b+1];_e==="style"?sb(h,et):_e==="dangerouslySetInnerHTML"?nb(h,et):_e==="children"?ob(h,et):ta(h,_e,et,$)}switch(j){case"input":bb(h,g);break;case"textarea":ib(h,g);break;case"select":var tt=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var rt=g.value;rt!=null?fb(h,!!g.multiple,rt,!1):tt!==!!g.multiple&&(g.defaultValue!=null?fb(h,!!g.multiple,g.defaultValue,!0):fb(h,!!g.multiple,g.multiple?[]:"",!1))}h[Pf]=g}catch(it){W(e,e.return,it)}}break;case 6:if(ck(i,e),ek(e),d&4){if(e.stateNode===null)throw Error(p(162));h=e.stateNode,g=e.memoizedProps;try{h.nodeValue=g}catch(it){W(e,e.return,it)}}break;case 3:if(ck(i,e),ek(e),d&4&&o!==null&&o.memoizedState.isDehydrated)try{bd(i.containerInfo)}catch(it){W(e,e.return,it)}break;case 4:ck(i,e),ek(e);break;case 13:ck(i,e),ek(e),h=e.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(fk=B())),d&4&&ak(e);break;case 22:if(_e=o!==null&&o.memoizedState!==null,e.mode&1?(U=($=U)||_e,ck(i,e),U=$):ck(i,e),ek(e),d&8192){if($=e.memoizedState!==null,(e.stateNode.isHidden=$)&&!_e&&e.mode&1)for(V=e,_e=e.child;_e!==null;){for(et=V=_e;V!==null;){switch(tt=V,rt=tt.child,tt.tag){case 0:case 11:case 14:case 15:Pj(4,tt,tt.return);break;case 1:Lj(tt,tt.return);var nt=tt.stateNode;if(typeof nt.componentWillUnmount=="function"){d=tt,o=tt.return;try{i=d,nt.props=i.memoizedProps,nt.state=i.memoizedState,nt.componentWillUnmount()}catch(it){W(d,o,it)}}break;case 5:Lj(tt,tt.return);break;case 22:if(tt.memoizedState!==null){gk(et);continue}}rt!==null?(rt.return=tt,V=rt):gk(et)}_e=_e.sibling}e:for(_e=null,et=e;;){if(et.tag===5){if(_e===null){_e=et;try{h=et.stateNode,$?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(j=et.stateNode,_=et.memoizedProps.style,b=_!=null&&_.hasOwnProperty("display")?_.display:null,j.style.display=rb("display",b))}catch(it){W(e,e.return,it)}}}else if(et.tag===6){if(_e===null)try{et.stateNode.nodeValue=$?"":et.memoizedProps}catch(it){W(e,e.return,it)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===e)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===e)break e;for(;et.sibling===null;){if(et.return===null||et.return===e)break e;_e===et&&(_e=null),et=et.return}_e===et&&(_e=null),et.sibling.return=et.return,et=et.sibling}}break;case 19:ck(i,e),ek(e),d&4&&ak(e);break;case 21:break;default:ck(i,e),ek(e)}}function ek(e){var i=e.flags;if(i&2){try{e:{for(var o=e.return;o!==null;){if(Tj(o)){var d=o;break e}o=o.return}throw Error(p(160))}switch(d.tag){case 5:var h=d.stateNode;d.flags&32&&(ob(h,""),d.flags&=-33);var g=Uj(e);Wj(e,g,h);break;case 3:case 4:var b=d.stateNode.containerInfo,j=Uj(e);Vj(e,j,b);break;default:throw Error(p(161))}}catch(_){W(e,e.return,_)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function hk(e,i,o){V=e,ik(e)}function ik(e,i,o){for(var d=(e.mode&1)!==0;V!==null;){var h=V,g=h.child;if(h.tag===22&&d){var b=h.memoizedState!==null||Jj;if(!b){var j=h.alternate,_=j!==null&&j.memoizedState!==null||U;j=Jj;var $=U;if(Jj=b,(U=_)&&!$)for(V=h;V!==null;)b=V,_=b.child,b.tag===22&&b.memoizedState!==null?jk(h):_!==null?(_.return=b,V=_):jk(h);for(;g!==null;)V=g,ik(g),g=g.sibling;V=h,Jj=j,U=$}kk(e)}else h.subtreeFlags&8772&&g!==null?(g.return=h,V=g):kk(e)}}function kk(e){for(;V!==null;){var i=V;if(i.flags&8772){var o=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:U||Qj(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!U)if(o===null)d.componentDidMount();else{var h=i.elementType===i.type?o.memoizedProps:Ci(i.type,o.memoizedProps);d.componentDidUpdate(h,o.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&sh(i,g,d);break;case 3:var b=i.updateQueue;if(b!==null){if(o=null,i.child!==null)switch(i.child.tag){case 5:o=i.child.stateNode;break;case 1:o=i.child.stateNode}sh(i,b,o)}break;case 5:var j=i.stateNode;if(o===null&&i.flags&4){o=j;var _=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&o.focus();break;case"img":_.src&&(o.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var $=i.alternate;if($!==null){var _e=$.memoizedState;if(_e!==null){var et=_e.dehydrated;et!==null&&bd(et)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||i.flags&512&&Rj(i)}catch(tt){W(i,i.return,tt)}}if(i===e){V=null;break}if(o=i.sibling,o!==null){o.return=i.return,V=o;break}V=i.return}}function gk(e){for(;V!==null;){var i=V;if(i===e){V=null;break}var o=i.sibling;if(o!==null){o.return=i.return,V=o;break}V=i.return}}function jk(e){for(;V!==null;){var i=V;try{switch(i.tag){case 0:case 11:case 15:var o=i.return;try{Qj(4,i)}catch(_){W(i,o,_)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var h=i.return;try{d.componentDidMount()}catch(_){W(i,h,_)}}var g=i.return;try{Rj(i)}catch(_){W(i,g,_)}break;case 5:var b=i.return;try{Rj(i)}catch(_){W(i,b,_)}}}catch(_){W(i,i.return,_)}if(i===e){V=null;break}var j=i.sibling;if(j!==null){j.return=i.return,V=j;break}V=i.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(e){return e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function gi(e,i,o,d){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(e,o,d),(!(K&2)||e!==Q)&&(e===Q&&(!(K&2)&&(qk|=o),T===4&&Ck(e,Z)),Dk(e,d),o===1&&K===0&&!(i.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(e,i){var o=e.callbackNode;wc(e,i);var d=uc(e,e===Q?Z:0);if(d===0)o!==null&&bc(o),e.callbackNode=null,e.callbackPriority=0;else if(i=d&-d,e.callbackPriority!==i){if(o!=null&&bc(o),i===1)e.tag===0?ig(Ek.bind(null,e)):hg(Ek.bind(null,e)),Jf(function(){!(K&6)&&jg()}),o=null;else{switch(Dc(d)){case 1:o=fc;break;case 4:o=gc;break;case 16:o=hc;break;case 536870912:o=jc;break;default:o=hc}o=Fk(o,Gk.bind(null,e))}e.callbackPriority=i,e.callbackNode=o}}function Gk(e,i){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var o=e.callbackNode;if(Hk()&&e.callbackNode!==o)return null;var d=uc(e,e===Q?Z:0);if(d===0)return null;if(d&30||d&e.expiredLanes||i)i=Ik(e,d);else{i=d;var h=K;K|=2;var g=Jk();(Q!==e||Z!==i)&&(uk=null,Gj=B()+500,Kk(e,i));do try{Lk();break}catch(j){Mk(e,j)}while(!0);$g(),mk.current=g,K=h,Y!==null?i=0:(Q=null,Z=0,i=T)}if(i!==0){if(i===2&&(h=xc(e),h!==0&&(d=h,i=Nk(e,h))),i===1)throw o=pk,Kk(e,0),Ck(e,d),Dk(e,B()),o;if(i===6)Ck(e,d);else{if(h=e.current.alternate,!(d&30)&&!Ok(h)&&(i=Ik(e,d),i===2&&(g=xc(e),g!==0&&(d=g,i=Nk(e,g))),i===1))throw o=pk,Kk(e,0),Ck(e,d),Dk(e,B()),o;switch(e.finishedWork=h,e.finishedLanes=d,i){case 0:case 1:throw Error(p(345));case 2:Pk(e,tk,uk);break;case 3:if(Ck(e,d),(d&130023424)===d&&(i=fk+500-B(),10<i)){if(uc(e,0)!==0)break;if(h=e.suspendedLanes,(h&d)!==d){R(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),i);break}Pk(e,tk,uk);break;case 4:if(Ck(e,d),(d&4194240)===d)break;for(i=e.eventTimes,h=-1;0<d;){var b=31-oc(d);g=1<<b,b=i[b],b>h&&(h=b),d&=~g}if(d=h,d=B()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*lk(d/1960))-d,10<d){e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),d);break}Pk(e,tk,uk);break;case 5:Pk(e,tk,uk);break;default:throw Error(p(329))}}}return Dk(e,B()),e.callbackNode===o?Gk.bind(null,e):null}function Nk(e,i){var o=sk;return e.current.memoizedState.isDehydrated&&(Kk(e,i).flags|=256),e=Ik(e,i),e!==2&&(i=tk,tk=o,i!==null&&Fj(i)),e}function Fj(e){tk===null?tk=e:tk.push.apply(tk,e)}function Ok(e){for(var i=e;;){if(i.flags&16384){var o=i.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var d=0;d<o.length;d++){var h=o[d],g=h.getSnapshot;h=h.value;try{if(!He(g(),h))return!1}catch{return!1}}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ck(e,i){for(i&=~rk,i&=~qk,e.suspendedLanes|=i,e.pingedLanes&=~i,e=e.expirationTimes;0<i;){var o=31-oc(i),d=1<<o;e[o]=-1,i&=~d}}function Ek(e){if(K&6)throw Error(p(327));Hk();var i=uc(e,0);if(!(i&1))return Dk(e,B()),null;var o=Ik(e,i);if(e.tag!==0&&o===2){var d=xc(e);d!==0&&(i=d,o=Nk(e,d))}if(o===1)throw o=pk,Kk(e,0),Ck(e,i),Dk(e,B()),o;if(o===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=i,Pk(e,tk,uk),Dk(e,B()),null}function Qk(e,i){var o=K;K|=1;try{return e(i)}finally{K=o,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var i=K;K|=1;var o=ok.transition,d=C;try{if(ok.transition=null,C=1,e)return e()}finally{C=d,ok.transition=o,K=i,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(e,i){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,Gf(o)),Y!==null)for(o=Y.return;o!==null;){var d=o;switch(wg(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}o=o.return}if(Q=e,Y=e=Pg(e.current,null),Z=fj=i,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(i=0;i<fh.length;i++)if(o=fh[i],d=o.interleaved,d!==null){o.interleaved=null;var h=d.next,g=o.pending;if(g!==null){var b=g.next;g.next=h,d.next=b}o.pending=d}fh=null}return e}function Mk(e,i){do{var o=Y;try{if($g(),Fh.current=Rh,Ih){for(var d=M.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}Ih=!1}if(Hh=0,O$1=N=M=null,Jh=!1,Kh=0,nk.current=null,o===null||o.return===null){T=1,pk=i,Y=null;break}e:{var g=e,b=o.return,j=o,_=i;if(i=Z,j.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var $=_,_e=j,et=_e.tag;if(!(_e.mode&1)&&(et===0||et===11||et===15)){var tt=_e.alternate;tt?(_e.updateQueue=tt.updateQueue,_e.memoizedState=tt.memoizedState,_e.lanes=tt.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var rt=Ui(b);if(rt!==null){rt.flags&=-257,Vi(rt,b,j,g,i),rt.mode&1&&Si(g,$,i),i=rt,_=$;var nt=i.updateQueue;if(nt===null){var it=new Set;it.add(_),i.updateQueue=it}else nt.add(_);break e}else{if(!(i&1)){Si(g,$,i),tj();break e}_=Error(p(426))}}else if(I&&j.mode&1){var st=Ui(b);if(st!==null){!(st.flags&65536)&&(st.flags|=256),Vi(st,b,j,g,i),Jg(Ji(_,j));break e}}g=_=Ji(_,j),T!==4&&(T=2),sk===null?sk=[g]:sk.push(g),g=b;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var at=Ni(g,_,i);ph(g,at);break e;case 1:j=_;var ot=g.type,lt=g.stateNode;if(!(g.flags&128)&&(typeof ot.getDerivedStateFromError=="function"||lt!==null&&typeof lt.componentDidCatch=="function"&&(Ri===null||!Ri.has(lt)))){g.flags|=65536,i&=-i,g.lanes|=i;var ct=Qi(g,j,i);ph(g,ct);break e}}g=g.return}while(g!==null)}Sk(o)}catch(ut){i=ut,Y===o&&o!==null&&(Y=o=o.return);continue}break}while(!0)}function Jk(){var e=mk.current;return mk.current=Rh,e===null?Rh:e}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(e,i){var o=K;K|=2;var d=Jk();(Q!==e||Z!==i)&&(uk=null,Kk(e,i));do try{Tk();break}catch(h){Mk(e,h)}while(!0);if($g(),K=o,mk.current=d,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(e){var i=Vk(e.alternate,e,fj);e.memoizedProps=e.pendingProps,i===null?Sk(e):Y=i,nk.current=null}function Sk(e){var i=e;do{var o=i.alternate;if(e=i.return,i.flags&32768){if(o=Ij(o,i),o!==null){o.flags&=32767,Y=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(o=Ej(o,i,fj),o!==null){Y=o;return}if(i=i.sibling,i!==null){Y=i;return}Y=i=e}while(i!==null);T===0&&(T=5)}function Pk(e,i,o){var d=C,h=ok.transition;try{ok.transition=null,C=1,Wk(e,i,o,d)}finally{ok.transition=h,C=d}return null}function Wk(e,i,o,d){do Hk();while(wk!==null);if(K&6)throw Error(p(327));o=e.finishedWork;var h=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var g=o.lanes|o.childLanes;if(Bc(e,g),e===Q&&(Y=Q=null,Z=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),g=(o.flags&15990)!==0,o.subtreeFlags&15990||g){g=ok.transition,ok.transition=null;var b=C;C=1;var j=K;K|=4,nk.current=null,Oj(e,o),dk(o,e),Oe(Df),dd=!!Cf,Df=Cf=null,e.current=o,hk(o),dc(),K=j,C=b,ok.transition=g}else e.current=o;if(vk&&(vk=!1,wk=e,xk=h),g=e.pendingLanes,g===0&&(Ri=null),mc(o.stateNode),Dk(e,B()),i!==null)for(d=e.onRecoverableError,o=0;o<i.length;o++)h=i[o],d(h.value,{componentStack:h.stack,digest:h.digest});if(Oi)throw Oi=!1,e=Pi,Pi=null,e;return xk&1&&e.tag!==0&&Hk(),g=e.pendingLanes,g&1?e===zk?yk++:(yk=0,zk=e):yk=0,jg(),null}function Hk(){if(wk!==null){var e=Dc(xk),i=ok.transition,o=C;try{if(ok.transition=null,C=16>e?16:e,wk===null)var d=!1;else{if(e=wk,wk=null,xk=0,K&6)throw Error(p(331));var h=K;for(K|=4,V=e.current;V!==null;){var g=V,b=g.child;if(V.flags&16){var j=g.deletions;if(j!==null){for(var _=0;_<j.length;_++){var $=j[_];for(V=$;V!==null;){var _e=V;switch(_e.tag){case 0:case 11:case 15:Pj(8,_e,g)}var et=_e.child;if(et!==null)et.return=_e,V=et;else for(;V!==null;){_e=V;var tt=_e.sibling,rt=_e.return;if(Sj(_e),_e===$){V=null;break}if(tt!==null){tt.return=rt,V=tt;break}V=rt}}}var nt=g.alternate;if(nt!==null){var it=nt.child;if(it!==null){nt.child=null;do{var st=it.sibling;it.sibling=null,it=st}while(it!==null)}}V=g}}if(g.subtreeFlags&2064&&b!==null)b.return=g,V=b;else e:for(;V!==null;){if(g=V,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Pj(9,g,g.return)}var at=g.sibling;if(at!==null){at.return=g.return,V=at;break e}V=g.return}}var ot=e.current;for(V=ot;V!==null;){b=V;var lt=b.child;if(b.subtreeFlags&2064&&lt!==null)lt.return=b,V=lt;else e:for(b=ot;V!==null;){if(j=V,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Qj(9,j)}}catch(ut){W(j,j.return,ut)}if(j===b){V=null;break e}var ct=j.sibling;if(ct!==null){ct.return=j.return,V=ct;break e}V=j.return}}if(K=h,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,e)}catch{}d=!0}return d}finally{C=o,ok.transition=i}}return!1}function Xk(e,i,o){i=Ji(o,i),i=Ni(e,i,1),e=nh(e,i,1),i=R(),e!==null&&(Ac(e,1,i),Dk(e,i))}function W(e,i,o){if(e.tag===3)Xk(e,e,o);else for(;i!==null;){if(i.tag===3){Xk(i,e,o);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ri===null||!Ri.has(d))){e=Ji(o,e),e=Qi(i,e,1),i=nh(i,e,1),e=R(),i!==null&&(Ac(i,1,e),Dk(i,e));break}}i=i.return}}function Ti(e,i,o){var d=e.pingCache;d!==null&&d.delete(i),i=R(),e.pingedLanes|=e.suspendedLanes&o,Q===e&&(Z&o)===o&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(e,0):rk|=o),Dk(e,i)}function Yk(e,i){i===0&&(e.mode&1?(i=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):i=1);var o=R();e=ih(e,i),e!==null&&(Ac(e,i,o),Dk(e,o))}function uj(e){var i=e.memoizedState,o=0;i!==null&&(o=i.retryLane),Yk(e,o)}function bk(e,i){var o=0;switch(e.tag){case 13:var d=e.stateNode,h=e.memoizedState;h!==null&&(o=h.retryLane);break;case 19:d=e.stateNode;break;default:throw Error(p(314))}d!==null&&d.delete(i),Yk(e,o)}var Vk;Vk=function(e,i,o){if(e!==null)if(e.memoizedProps!==i.pendingProps||Wf.current)dh=!0;else{if(!(e.lanes&o)&&!(i.flags&128))return dh=!1,yj(e,i,o);dh=!!(e.flags&131072)}else dh=!1,I&&i.flags&1048576&&ug(i,ng,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;ij(e,i),e=i.pendingProps;var h=Yf(i,H.current);ch(i,o),h=Nh(null,i,d,e,h,o);var g=Sh();return i.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Zf(d)?(g=!0,cg(i)):g=!1,i.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,kh(i),h.updater=Ei,i.stateNode=h,h._reactInternals=i,Ii(i,d,e,o),i=jj(null,i,d,!0,g,o)):(i.tag=0,I&&g&&vg(i),Xi(null,i,h,o),i=i.child),i;case 16:d=i.elementType;e:{switch(ij(e,i),e=i.pendingProps,h=d._init,d=h(d._payload),i.type=d,h=i.tag=Zk(d),e=Ci(d,e),h){case 0:i=cj(null,i,d,e,o);break e;case 1:i=hj(null,i,d,e,o);break e;case 11:i=Yi(null,i,d,e,o);break e;case 14:i=$i(null,i,d,Ci(d.type,e),o);break e}throw Error(p(306,d,""))}return i;case 0:return d=i.type,h=i.pendingProps,h=i.elementType===d?h:Ci(d,h),cj(e,i,d,h,o);case 1:return d=i.type,h=i.pendingProps,h=i.elementType===d?h:Ci(d,h),hj(e,i,d,h,o);case 3:e:{if(kj(i),e===null)throw Error(p(387));d=i.pendingProps,g=i.memoizedState,h=g.element,lh(e,i),qh(i,d,null,o);var b=i.memoizedState;if(d=b.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){h=Ji(Error(p(423)),i),i=lj(e,i,d,o,h);break e}else if(d!==h){h=Ji(Error(p(424)),i),i=lj(e,i,d,o,h);break e}else for(yg=Lf(i.stateNode.containerInfo.firstChild),xg=i,I=!0,zg=null,o=Vg(i,null,d,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ig(),d===h){i=Zi(e,i,o);break e}Xi(e,i,d,o)}i=i.child}return i;case 5:return Ah(i),e===null&&Eg(i),d=i.type,h=i.pendingProps,g=e!==null?e.memoizedProps:null,b=h.children,Ef(d,h)?b=null:g!==null&&Ef(d,g)&&(i.flags|=32),gj(e,i),Xi(e,i,b,o),i.child;case 6:return e===null&&Eg(i),null;case 13:return oj(e,i,o);case 4:return yh(i,i.stateNode.containerInfo),d=i.pendingProps,e===null?i.child=Ug(i,null,d,o):Xi(e,i,d,o),i.child;case 11:return d=i.type,h=i.pendingProps,h=i.elementType===d?h:Ci(d,h),Yi(e,i,d,h,o);case 7:return Xi(e,i,i.pendingProps,o),i.child;case 8:return Xi(e,i,i.pendingProps.children,o),i.child;case 12:return Xi(e,i,i.pendingProps.children,o),i.child;case 10:e:{if(d=i.type._context,h=i.pendingProps,g=i.memoizedProps,b=h.value,G(Wg,d._currentValue),d._currentValue=b,g!==null)if(He(g.value,b)){if(g.children===h.children&&!Wf.current){i=Zi(e,i,o);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var j=g.dependencies;if(j!==null){b=g.child;for(var _=j.firstContext;_!==null;){if(_.context===d){if(g.tag===1){_=mh(-1,o&-o),_.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var _e=$.pending;_e===null?_.next=_:(_.next=_e.next,_e.next=_),$.pending=_}}g.lanes|=o,_=g.alternate,_!==null&&(_.lanes|=o),bh(g.return,o,i),j.lanes|=o;break}_=_.next}}else if(g.tag===10)b=g.type===i.type?null:g.child;else if(g.tag===18){if(b=g.return,b===null)throw Error(p(341));b.lanes|=o,j=b.alternate,j!==null&&(j.lanes|=o),bh(b,o,i),b=g.sibling}else b=g.child;if(b!==null)b.return=g;else for(b=g;b!==null;){if(b===i){b=null;break}if(g=b.sibling,g!==null){g.return=b.return,b=g;break}b=b.return}g=b}Xi(e,i,h.children,o),i=i.child}return i;case 9:return h=i.type,d=i.pendingProps.children,ch(i,o),h=eh(h),d=d(h),i.flags|=1,Xi(e,i,d,o),i.child;case 14:return d=i.type,h=Ci(d,i.pendingProps),h=Ci(d.type,h),$i(e,i,d,h,o);case 15:return bj(e,i,i.type,i.pendingProps,o);case 17:return d=i.type,h=i.pendingProps,h=i.elementType===d?h:Ci(d,h),ij(e,i),i.tag=1,Zf(d)?(e=!0,cg(i)):e=!1,ch(i,o),Gi(i,d,h),Ii(i,d,h,o),jj(null,i,d,!0,e,o);case 19:return xj(e,i,o);case 22:return dj(e,i,o)}throw Error(p(156,i.tag))};function Fk(e,i){return ac(e,i)}function $k(e,i,o,d){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,i,o,d){return new $k(e,i,o,d)}function aj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zk(e){if(typeof e=="function")return aj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ga)return 14}return 2}function Pg(e,i){var o=e.alternate;return o===null?(o=Bg(e.tag,i,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=i,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,i=e.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function Rg(e,i,o,d,h,g){var b=2;if(d=e,typeof e=="function")aj(e)&&(b=1);else if(typeof e=="string")b=5;else e:switch(e){case ya:return Tg(o.children,h,g,i);case za:b=8,h|=8;break;case Aa:return e=Bg(12,o,i,h|2),e.elementType=Aa,e.lanes=g,e;case Ea:return e=Bg(13,o,i,h),e.elementType=Ea,e.lanes=g,e;case Fa:return e=Bg(19,o,i,h),e.elementType=Fa,e.lanes=g,e;case Ia:return pj(o,h,g,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba:b=10;break e;case Ca:b=9;break e;case Da:b=11;break e;case Ga:b=14;break e;case Ha:b=16,d=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return i=Bg(b,o,i,h),i.elementType=e,i.type=d,i.lanes=g,i}function Tg(e,i,o,d){return e=Bg(7,e,d,i),e.lanes=o,e}function pj(e,i,o,d){return e=Bg(22,e,d,i),e.elementType=Ia,e.lanes=o,e.stateNode={isHidden:!1},e}function Qg(e,i,o){return e=Bg(6,e,null,i),e.lanes=o,e}function Sg(e,i,o){return i=Bg(4,e.children!==null?e.children:[],e.key,i),i.lanes=o,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function al(e,i,o,d,h){this.tag=i,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=d,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function bl(e,i,o,d,h,g,b,j,_){return e=new al(e,i,o,j,_),i===1?(i=1,g===!0&&(i|=8)):i=0,g=Bg(3,null,null,i),e.current=g,g.stateNode=e,g.memoizedState={element:d,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(g),e}function cl(e,i,o){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:d==null?null:""+d,children:e,containerInfo:i,implementation:o}}function dl(e){if(!e)return Vf;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(p(170));var i=e;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Zf(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(p(171))}if(e.tag===1){var o=e.type;if(Zf(o))return bg(e,o,i)}return i}function el(e,i,o,d,h,g,b,j,_){return e=bl(o,d,!0,e,h,g,b,j,_),e.context=dl(null),o=e.current,d=R(),h=yi(o),g=mh(d,h),g.callback=i??null,nh(o,g,h),e.current.lanes=h,Ac(e,h,d),Dk(e,d),e}function fl(e,i,o,d){var h=i.current,g=R(),b=yi(h);return o=dl(o),i.context===null?i.context=o:i.pendingContext=o,i=mh(g,b),i.payload={element:e},d=d===void 0?null:d,d!==null&&(i.callback=d),e=nh(h,i,b),e!==null&&(gi(e,h,b,g),oh(e,h,b)),b}function gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hl(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<i?o:i}}function il(e,i){hl(e,i),(e=e.alternate)&&hl(e,i)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(e){console.error(e)};function ll(e){this._internalRoot=e}ml.prototype.render=ll.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(p(409));fl(e,i,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Rk(function(){fl(null,e,null,null)}),i[uf]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var i=Hc();e={blockedOn:null,target:e,priority:i};for(var o=0;o<Qc.length&&i!==0&&i<Qc[o].priority;o++);Qc.splice(o,0,e),o===0&&Vc(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(e,i,o,d,h){if(h){if(typeof d=="function"){var g=d;d=function(){var $=gl(b);g.call($)}}var b=el(i,d,e,0,null,!1,!1,"",pl);return e._reactRootContainer=b,e[uf]=b.current,sf(e.nodeType===8?e.parentNode:e),Rk(),b}for(;h=e.lastChild;)e.removeChild(h);if(typeof d=="function"){var j=d;d=function(){var $=gl(_);j.call($)}}var _=bl(e,0,!1,null,null,!1,!1,"",pl);return e._reactRootContainer=_,e[uf]=_.current,sf(e.nodeType===8?e.parentNode:e),Rk(function(){fl(i,_,o,d)}),_}function rl(e,i,o,d,h){var g=o._reactRootContainer;if(g){var b=g;if(typeof h=="function"){var j=h;h=function(){var _=gl(b);j.call(_)}}fl(i,b,e,h)}else b=ql(o,i,e,h,d);return gl(b)}Ec=function(e){switch(e.tag){case 3:var i=e.stateNode;if(i.current.memoizedState.isDehydrated){var o=tc(i.pendingLanes);o!==0&&(Cc(i,o|1),Dk(i,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var d=ih(e,1);if(d!==null){var h=R();gi(d,e,1,h)}}),il(e,1)}};Fc=function(e){if(e.tag===13){var i=ih(e,134217728);if(i!==null){var o=R();gi(i,e,134217728,o)}il(e,134217728)}};Gc=function(e){if(e.tag===13){var i=yi(e),o=ih(e,i);if(o!==null){var d=R();gi(o,e,i,d)}il(e,i)}};Hc=function(){return C};Ic=function(e,i){var o=C;try{return C=e,i()}finally{C=o}};yb=function(e,i,o){switch(i){case"input":if(bb(e,o),i=o.name,o.type==="radio"&&i!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<o.length;i++){var d=o[i];if(d!==e&&d.form===e.form){var h=Db(d);if(!h)throw Error(p(90));Wa(d),bb(d,h)}}}break;case"textarea":ib(e,o);break;case"select":i=o.value,i!=null&&fb(e,!!o.multiple,i,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb(e),e===null?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(e,i){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(i))throw Error(p(200));return cl(e,i,null,o)};reactDom_production_min.createRoot=function(e,i){if(!nl(e))throw Error(p(299));var o=!1,d="",h=kl;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),i=bl(e,1,!1,null,null,o,!1,d,h),e[uf]=i.current,sf(e.nodeType===8?e.parentNode:e),new ll(i)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb(i),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Rk(e)};reactDom_production_min.hydrate=function(e,i,o){if(!ol(i))throw Error(p(200));return rl(null,e,i,!0,o)};reactDom_production_min.hydrateRoot=function(e,i,o){if(!nl(e))throw Error(p(405));var d=o!=null&&o.hydratedSources||null,h=!1,g="",b=kl;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(b=o.onRecoverableError)),i=el(i,null,e,1,o??null,h,!1,g,b),e[uf]=i.current,sf(e),d)for(e=0;e<d.length;e++)o=d[e],h=o._getVersion,h=h(o._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[o,h]:i.mutableSourceEagerHydrationData.push(o,h);return new ml(i)};reactDom_production_min.render=function(e,i,o){if(!ol(i))throw Error(p(200));return rl(null,e,i,!1,o)};reactDom_production_min.unmountComponentAtNode=function(e){if(!ol(e))throw Error(p(40));return e._reactRootContainer?(Rk(function(){rl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,i,o,d){if(!ol(o))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return rl(e,i,o,!1,d)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(e={}){function i(d,h){let{pathname:g,search:b,hash:j}=d.location;return createLocation("",{pathname:g,search:b,hash:j},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function o(d,h){return typeof h=="string"?h:createPath(h)}return getUrlBasedHistory(i,o,null,e)}function invariant$2(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function warning$1(e,i){if(!e){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(e,i){return{usr:e.state,key:e.key,idx:i}}function createLocation(e,i,o=null,d){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof i=="string"?parsePath(i):i,state:o,key:i&&i.key||d||createKey()}}function createPath({pathname:e="/",search:i="",hash:o=""}){return i&&i!=="?"&&(e+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(e+=o.charAt(0)==="#"?o:"#"+o),e}function parsePath(e){let i={};if(e){let o=e.indexOf("#");o>=0&&(i.hash=e.substring(o),e=e.substring(0,o));let d=e.indexOf("?");d>=0&&(i.search=e.substring(d),e=e.substring(0,d)),e&&(i.pathname=e)}return i}function getUrlBasedHistory(e,i,o,d={}){let{window:h=document.defaultView,v5Compat:g=!1}=d,b=h.history,j="POP",_=null,$=_e();$==null&&($=0,b.replaceState({...b.state,idx:$},""));function _e(){return(b.state||{idx:null}).idx}function et(){j="POP";let st=_e(),at=st==null?null:st-$;$=st,_&&_({action:j,location:it.location,delta:at})}function tt(st,at){j="PUSH";let ot=createLocation(it.location,st,at);$=_e()+1;let lt=getHistoryState(ot,$),ct=it.createHref(ot);try{b.pushState(lt,"",ct)}catch(ut){if(ut instanceof DOMException&&ut.name==="DataCloneError")throw ut;h.location.assign(ct)}g&&_&&_({action:j,location:it.location,delta:1})}function rt(st,at){j="REPLACE";let ot=createLocation(it.location,st,at);$=_e();let lt=getHistoryState(ot,$),ct=it.createHref(ot);b.replaceState(lt,"",ct),g&&_&&_({action:j,location:it.location,delta:0})}function nt(st){return createBrowserURLImpl(st)}let it={get action(){return j},get location(){return e(h,b)},listen(st){if(_)throw new Error("A history only accepts one active listener");return h.addEventListener(PopStateEventType,et),_=st,()=>{h.removeEventListener(PopStateEventType,et),_=null}},createHref(st){return i(h,st)},createURL:nt,encodeLocation(st){let at=nt(st);return{pathname:at.pathname,search:at.search,hash:at.hash}},push:tt,replace:rt,go(st){return b.go(st)}};return it}function createBrowserURLImpl(e,i=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$2(o,"No window.location.(origin|href) available to create URL");let d=typeof e=="string"?e:createPath(e);return d=d.replace(/ $/,"%20"),!i&&d.startsWith("//")&&(d=o+d),new URL(d,o)}function matchRoutes(e,i,o="/"){return matchRoutesImpl(e,i,o,!1)}function matchRoutesImpl(e,i,o,d){let h=typeof i=="string"?parsePath(i):i,g=stripBasename(h.pathname||"/",o);if(g==null)return null;let b=flattenRoutes(e);rankRouteBranches(b);let j=null;for(let _=0;j==null&&_<b.length;++_){let $=decodePath(g);j=matchRouteBranch(b[_],$,d)}return j}function flattenRoutes(e,i=[],o=[],d="",h=!1){let g=(b,j,_=h,$)=>{let _e={relativePath:$===void 0?b.path||"":$,caseSensitive:b.caseSensitive===!0,childrenIndex:j,route:b};if(_e.relativePath.startsWith("/")){if(!_e.relativePath.startsWith(d)&&_)return;invariant$2(_e.relativePath.startsWith(d),`Absolute route path "${_e.relativePath}" nested under path "${d}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_e.relativePath=_e.relativePath.slice(d.length)}let et=joinPaths([d,_e.relativePath]),tt=o.concat(_e);b.children&&b.children.length>0&&(invariant$2(b.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${et}".`),flattenRoutes(b.children,i,tt,et,_)),!(b.path==null&&!b.index)&&i.push({path:et,score:computeScore(et,b.index),routesMeta:tt})};return e.forEach((b,j)=>{var _;if(b.path===""||!((_=b.path)!=null&&_.includes("?")))g(b,j);else for(let $ of explodeOptionalSegments(b.path))g(b,j,!0,$)}),i}function explodeOptionalSegments(e){let i=e.split("/");if(i.length===0)return[];let[o,...d]=i,h=o.endsWith("?"),g=o.replace(/\?$/,"");if(d.length===0)return h?[g,""]:[g];let b=explodeOptionalSegments(d.join("/")),j=[];return j.push(...b.map(_=>_===""?g:[g,_].join("/"))),h&&j.push(...b),j.map(_=>e.startsWith("/")&&_===""?"/":_)}function rankRouteBranches(e){e.sort((i,o)=>i.score!==o.score?o.score-i.score:compareIndexes(i.routesMeta.map(d=>d.childrenIndex),o.routesMeta.map(d=>d.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,i){let o=e.split("/"),d=o.length;return o.some(isSplat)&&(d+=splatPenalty),i&&(d+=indexRouteValue),o.filter(h=>!isSplat(h)).reduce((h,g)=>h+(paramRe.test(g)?dynamicSegmentValue:g===""?emptySegmentValue:staticSegmentValue),d)}function compareIndexes(e,i){return e.length===i.length&&e.slice(0,-1).every((d,h)=>d===i[h])?e[e.length-1]-i[i.length-1]:0}function matchRouteBranch(e,i,o=!1){let{routesMeta:d}=e,h={},g="/",b=[];for(let j=0;j<d.length;++j){let _=d[j],$=j===d.length-1,_e=g==="/"?i:i.slice(g.length)||"/",et=matchPath({path:_.relativePath,caseSensitive:_.caseSensitive,end:$},_e),tt=_.route;if(!et&&$&&o&&!d[d.length-1].route.index&&(et=matchPath({path:_.relativePath,caseSensitive:_.caseSensitive,end:!1},_e)),!et)return null;Object.assign(h,et.params),b.push({params:h,pathname:joinPaths([g,et.pathname]),pathnameBase:normalizePathname(joinPaths([g,et.pathnameBase])),route:tt}),et.pathnameBase!=="/"&&(g=joinPaths([g,et.pathnameBase]))}return b}function matchPath(e,i){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[o,d]=compilePath(e.path,e.caseSensitive,e.end),h=i.match(o);if(!h)return null;let g=h[0],b=g.replace(/(.)\/+$/,"$1"),j=h.slice(1);return{params:d.reduce(($,{paramName:_e,isOptional:et},tt)=>{if(_e==="*"){let nt=j[tt]||"";b=g.slice(0,g.length-nt.length).replace(/(.)\/+$/,"$1")}const rt=j[tt];return et&&!rt?$[_e]=void 0:$[_e]=(rt||"").replace(/%2F/g,"/"),$},{}),pathname:g,pathnameBase:b,pattern:e}}function compilePath(e,i=!1,o=!0){warning$1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let d=[],h="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(b,j,_)=>(d.push({paramName:j,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(d.push({paramName:"*"}),h+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?h+="\\/*$":e!==""&&e!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,i?void 0:"i"),d]}function decodePath(e){try{return e.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return warning$1(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),e}}function stripBasename(e,i){if(i==="/")return e;if(!e.toLowerCase().startsWith(i.toLowerCase()))return null;let o=i.endsWith("/")?i.length-1:i.length,d=e.charAt(o);return d&&d!=="/"?null:e.slice(o)||"/"}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=e=>ABSOLUTE_URL_REGEX.test(e);function resolvePath(e,i="/"){let{pathname:o,search:d="",hash:h=""}=typeof e=="string"?parsePath(e):e,g;if(o)if(isAbsoluteUrl(o))g=o;else{if(o.includes("//")){let b=o;o=o.replace(/\/\/+/g,"/"),warning$1(!1,`Pathnames cannot have embedded double slashes - normalizing ${b} -> ${o}`)}o.startsWith("/")?g=resolvePathname(o.substring(1),"/"):g=resolvePathname(o,i)}else g=i;return{pathname:g,search:normalizeSearch(d),hash:normalizeHash(h)}}function resolvePathname(e,i){let o=i.replace(/\/+$/,"").split("/");return e.split("/").forEach(h=>{h===".."?o.length>1&&o.pop():h!=="."&&o.push(h)}),o.length>1?o.join("/"):"/"}function getInvalidPathError(e,i,o,d){return`Cannot include a '${e}' character in a manually specified \`to.${i}\` field [${JSON.stringify(d)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(e){return e.filter((i,o)=>o===0||i.route.path&&i.route.path.length>0)}function getResolveToMatches(e){let i=getPathContributingMatches(e);return i.map((o,d)=>d===i.length-1?o.pathname:o.pathnameBase)}function resolveTo(e,i,o,d=!1){let h;typeof e=="string"?h=parsePath(e):(h={...e},invariant$2(!h.pathname||!h.pathname.includes("?"),getInvalidPathError("?","pathname","search",h)),invariant$2(!h.pathname||!h.pathname.includes("#"),getInvalidPathError("#","pathname","hash",h)),invariant$2(!h.search||!h.search.includes("#"),getInvalidPathError("#","search","hash",h)));let g=e===""||h.pathname==="",b=g?"/":h.pathname,j;if(b==null)j=o;else{let et=i.length-1;if(!d&&b.startsWith("..")){let tt=b.split("/");for(;tt[0]==="..";)tt.shift(),et-=1;h.pathname=tt.join("/")}j=et>=0?i[et]:"/"}let _=resolvePath(h,j),$=b&&b!=="/"&&b.endsWith("/"),_e=(g||b===".")&&o.endsWith("/");return!_.pathname.endsWith("/")&&($||_e)&&(_.pathname+="/"),_}var joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,ErrorResponseImpl=class{constructor(e,i,o,d=!1){this.status=e,this.statusText=i||"",this.internal=d,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function getRoutePattern(e){return e.map(i=>i.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var isBrowser$3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function parseToInfo(e,i){let o=e;if(typeof o!="string"||!ABSOLUTE_URL_REGEX.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let d=o,h=!1;if(isBrowser$3)try{let g=new URL(window.location.href),b=o.startsWith("//")?new URL(g.protocol+o):new URL(o),j=stripBasename(b.pathname,i);b.origin===g.origin&&j!=null?o=j+b.search+b.hash:h=!0}catch{warning$1(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:d,isExternal:h,to:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var RSCRouterContext=reactExports.createContext(!1),ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";var ERROR_DIGEST_BASE="REACT_ROUTER_ERROR",ERROR_DIGEST_REDIRECT="REDIRECT",ERROR_DIGEST_ROUTE_ERROR_RESPONSE="ROUTE_ERROR_RESPONSE";function decodeRedirectErrorDigest(e){if(e.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_REDIRECT}:{`))try{let i=JSON.parse(e.slice(28));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.location=="string"&&typeof i.reloadDocument=="boolean"&&typeof i.replace=="boolean")return i}catch{}}function decodeRouteErrorResponseDigest(e){if(e.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_ROUTE_ERROR_RESPONSE}:{`))try{let i=JSON.parse(e.slice(40));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string")return new ErrorResponseImpl(i.status,i.statusText,i.data)}catch{}}function useHref(e,{relative:i}={}){invariant$2(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:d}=reactExports.useContext(NavigationContext),{hash:h,pathname:g,search:b}=useResolvedPath(e,{relative:i}),j=g;return o!=="/"&&(j=g==="/"?o:joinPaths([o,g])),d.createHref({pathname:j,search:b,hash:h})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$2(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$2(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$2(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let e=reactExports.useContext(DataRouterContext),{basename:i,navigator:o}=reactExports.useContext(NavigationContext),{matches:d}=reactExports.useContext(RouteContext),{pathname:h}=useLocation(),g=JSON.stringify(getResolveToMatches(d)),b=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{b.current=!0}),reactExports.useCallback((_,$={})=>{if(warning$1(b.current,navigateEffectWarning),!b.current)return;if(typeof _=="number"){o.go(_);return}let _e=resolveTo(_,JSON.parse(g),h,$.relative==="path");e==null&&i!=="/"&&(_e.pathname=_e.pathname==="/"?i:joinPaths([i,_e.pathname])),($.replace?o.replace:o.push)(_e,$.state,$)},[i,o,g,h,e])}var OutletContext=reactExports.createContext(null);function useOutlet(e){let i=reactExports.useContext(RouteContext).outlet;return reactExports.useMemo(()=>i&&reactExports.createElement(OutletContext.Provider,{value:e},i),[i,e])}function useParams(){let{matches:e}=reactExports.useContext(RouteContext),i=e[e.length-1];return i?i.params:{}}function useResolvedPath(e,{relative:i}={}){let{matches:o}=reactExports.useContext(RouteContext),{pathname:d}=useLocation(),h=JSON.stringify(getResolveToMatches(o));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(h),d,i==="path"),[e,h,d,i])}function useRoutes(e,i){return useRoutesImpl(e,i)}function useRoutesImpl(e,i,o,d,h){var ot;invariant$2(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:g}=reactExports.useContext(NavigationContext),{matches:b}=reactExports.useContext(RouteContext),j=b[b.length-1],_=j?j.params:{},$=j?j.pathname:"/",_e=j?j.pathnameBase:"/",et=j&&j.route;{let lt=et&&et.path||"";warningOnce($,!et||lt.endsWith("*")||lt.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${$}" (under <Route path="${lt}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${lt}"> to <Route path="${lt==="/"?"*":`${lt}/*`}">.`)}let tt=useLocation(),rt;if(i){let lt=typeof i=="string"?parsePath(i):i;invariant$2(_e==="/"||((ot=lt.pathname)==null?void 0:ot.startsWith(_e)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_e}" but pathname "${lt.pathname}" was given in the \`location\` prop.`),rt=lt}else rt=tt;let nt=rt.pathname||"/",it=nt;if(_e!=="/"){let lt=_e.replace(/^\//,"").split("/");it="/"+nt.replace(/^\//,"").split("/").slice(lt.length).join("/")}let st=matchRoutes(e,{pathname:it});warning$1(et||st!=null,`No routes matched location "${rt.pathname}${rt.search}${rt.hash}" `),warning$1(st==null||st[st.length-1].route.element!==void 0||st[st.length-1].route.Component!==void 0||st[st.length-1].route.lazy!==void 0,`Matched leaf route at location "${rt.pathname}${rt.search}${rt.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let at=_renderMatches(st&&st.map(lt=>Object.assign({},lt,{params:Object.assign({},_,lt.params),pathname:joinPaths([_e,g.encodeLocation?g.encodeLocation(lt.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:lt.pathname]),pathnameBase:lt.pathnameBase==="/"?_e:joinPaths([_e,g.encodeLocation?g.encodeLocation(lt.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:lt.pathnameBase])})),b,o,d,h);return i&&at?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...rt},navigationType:"POP"}},at):at}function DefaultErrorComponent(){let e=useRouteError(),i=isRouteErrorResponse(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),o=e instanceof Error?e.stack:null,d="rgba(200,200,200, 0.5)",h={padding:"0.5rem",backgroundColor:d},g={padding:"2px 4px",backgroundColor:d},b=null;return console.error("Error handled by React Router default ErrorBoundary:",e),b=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:g},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:g},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},i),o?reactExports.createElement("pre",{style:h},o):null,b)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,i){return i.location!==e.location||i.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:i.error,location:i.location,revalidation:e.revalidation||i.revalidation}}componentDidCatch(e,i){this.props.onError?this.props.onError(e,i):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const o=decodeRouteErrorResponseDigest(e.digest);o&&(e=o)}let i=e!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?reactExports.createElement(RSCErrorHandler,{error:e},i):i}};RenderErrorBoundary.contextType=RSCRouterContext;var errorRedirectHandledMap=new WeakMap;function RSCErrorHandler({children:e,error:i}){let{basename:o}=reactExports.useContext(NavigationContext);if(typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){let d=decodeRedirectErrorDigest(i.digest);if(d){let h=errorRedirectHandledMap.get(i);if(h)throw h;let g=parseToInfo(d.location,o);if(isBrowser$3&&!errorRedirectHandledMap.get(i))if(g.isExternal||d.reloadDocument)window.location.href=g.absoluteURL||g.to;else{const b=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(g.to,{replace:d.replace}));throw errorRedirectHandledMap.set(i,b),b}return reactExports.createElement("meta",{httpEquiv:"refresh",content:`0;url=${g.absoluteURL||g.to}`})}}return e}function RenderedRoute({routeContext:e,match:i,children:o}){let d=reactExports.useContext(DataRouterContext);return d&&d.static&&d.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=i.route.id),reactExports.createElement(RouteContext.Provider,{value:e},o)}function _renderMatches(e,i=[],o=null,d=null,h=null){if(e==null){if(!o)return null;if(o.errors)e=o.matches;else if(i.length===0&&!o.initialized&&o.matches.length>0)e=o.matches;else return null}let g=e,b=o==null?void 0:o.errors;if(b!=null){let _e=g.findIndex(et=>et.route.id&&(b==null?void 0:b[et.route.id])!==void 0);invariant$2(_e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(b).join(",")}`),g=g.slice(0,Math.min(g.length,_e+1))}let j=!1,_=-1;if(o)for(let _e=0;_e<g.length;_e++){let et=g[_e];if((et.route.HydrateFallback||et.route.hydrateFallbackElement)&&(_=_e),et.route.id){let{loaderData:tt,errors:rt}=o,nt=et.route.loader&&!tt.hasOwnProperty(et.route.id)&&(!rt||rt[et.route.id]===void 0);if(et.route.lazy||nt){j=!0,_>=0?g=g.slice(0,_+1):g=[g[0]];break}}}let $=o&&d?(_e,et)=>{var tt,rt;d(_e,{location:o.location,params:((rt=(tt=o.matches)==null?void 0:tt[0])==null?void 0:rt.params)??{},unstable_pattern:getRoutePattern(o.matches),errorInfo:et})}:void 0;return g.reduceRight((_e,et,tt)=>{let rt,nt=!1,it=null,st=null;o&&(rt=b&&et.route.id?b[et.route.id]:void 0,it=et.route.errorElement||defaultErrorElement,j&&(_<0&&tt===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),nt=!0,st=null):_===tt&&(nt=!0,st=et.route.hydrateFallbackElement||null)));let at=i.concat(g.slice(0,tt+1)),ot=()=>{let lt;return rt?lt=it:nt?lt=st:et.route.Component?lt=reactExports.createElement(et.route.Component,null):et.route.element?lt=et.route.element:lt=_e,reactExports.createElement(RenderedRoute,{match:et,routeContext:{outlet:_e,matches:at,isDataRoute:o!=null},children:lt})};return o&&(et.route.ErrorBoundary||et.route.errorElement||tt===0)?reactExports.createElement(RenderErrorBoundary,{location:o.location,revalidation:o.revalidation,component:it,error:rt,children:ot(),routeContext:{outlet:null,matches:at,isDataRoute:!0},onError:$}):ot()},null)}function getDataRouterConsoleError(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(e){let i=reactExports.useContext(DataRouterContext);return invariant$2(i,getDataRouterConsoleError(e)),i}function useDataRouterState(e){let i=reactExports.useContext(DataRouterStateContext);return invariant$2(i,getDataRouterConsoleError(e)),i}function useRouteContext(e){let i=reactExports.useContext(RouteContext);return invariant$2(i,getDataRouterConsoleError(e)),i}function useCurrentRouteId(e){let i=useRouteContext(e),o=i.matches[i.matches.length-1];return invariant$2(o.route.id,`${e} can only be used on routes that contain a unique "id"`),o.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var d;let e=reactExports.useContext(RouteErrorContext),i=useDataRouterState("useRouteError"),o=useCurrentRouteId("useRouteError");return e!==void 0?e:(d=i.errors)==null?void 0:d[o]}function useNavigateStable(){let{router:e}=useDataRouterContext("useNavigate"),i=useCurrentRouteId("useNavigate"),o=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{o.current=!0}),reactExports.useCallback(async(h,g={})=>{warning$1(o.current,navigateEffectWarning),o.current&&(typeof h=="number"?await e.navigate(h):await e.navigate(h,{fromRouteId:i,...g}))},[e,i])}var alreadyWarned={};function warningOnce(e,i,o){!i&&!alreadyWarned[e]&&(alreadyWarned[e]=!0,warning$1(!1,o))}reactExports.memo(DataRoutes);function DataRoutes({routes:e,future:i,state:o,onError:d}){return useRoutesImpl(e,void 0,o,d,i)}function Outlet(e){return useOutlet(e.context)}function Route(e){invariant$2(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:e="/",children:i=null,location:o,navigationType:d="POP",navigator:h,static:g=!1,unstable_useTransitions:b}){invariant$2(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let j=e.replace(/^\/*/,"/"),_=reactExports.useMemo(()=>({basename:j,navigator:h,static:g,unstable_useTransitions:b,future:{}}),[j,h,g,b]);typeof o=="string"&&(o=parsePath(o));let{pathname:$="/",search:_e="",hash:et="",state:tt=null,key:rt="default"}=o,nt=reactExports.useMemo(()=>{let it=stripBasename($,j);return it==null?null:{location:{pathname:it,search:_e,hash:et,state:tt,key:rt},navigationType:d}},[j,$,_e,et,tt,rt,d]);return warning$1(nt!=null,`<Router basename="${j}"> is not able to match the URL "${$}${_e}${et}" because it does not start with the basename, so the <Router> won't render anything.`),nt==null?null:reactExports.createElement(NavigationContext.Provider,{value:_},reactExports.createElement(LocationContext.Provider,{children:i,value:nt}))}function Routes({children:e,location:i}){return useRoutes(createRoutesFromChildren(e),i)}function createRoutesFromChildren(e,i=[]){let o=[];return reactExports.Children.forEach(e,(d,h)=>{if(!reactExports.isValidElement(d))return;let g=[...i,h];if(d.type===reactExports.Fragment){o.push.apply(o,createRoutesFromChildren(d.props.children,g));return}invariant$2(d.type===Route,`[${typeof d.type=="string"?d.type:d.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant$2(!d.props.index||!d.props.children,"An index route cannot have child routes.");let b={id:d.props.id||g.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,middleware:d.props.middleware,loader:d.props.loader,action:d.props.action,hydrateFallbackElement:d.props.hydrateFallbackElement,HydrateFallback:d.props.HydrateFallback,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.hasErrorBoundary===!0||d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(b.children=createRoutesFromChildren(d.props.children,g)),o.push(b)}),o}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function isButtonElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="button"}function isFormElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="form"}function isInputElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="input"}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,i){return e.button===0&&(!i||i==="_self")&&!isModifiedEvent(e)}function createSearchParams(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((i,o)=>{let d=e[o];return i.concat(Array.isArray(d)?d.map(h=>[o,h]):[[o,d]])},[]))}function getSearchParamsForLocation(e,i){let o=createSearchParams(e);return i&&i.forEach((d,h)=>{o.has(h)||i.getAll(h).forEach(g=>{o.append(h,g)})}),o}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(e){return e!=null&&!supportedFormEncTypes.has(e)?(warning$1(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):e}function getFormSubmissionInfo(e,i){let o,d,h,g,b;if(isFormElement(e)){let j=e.getAttribute("action");d=j?stripBasename(j,i):null,o=e.getAttribute("method")||defaultMethod,h=getFormEncType(e.getAttribute("enctype"))||defaultEncType,g=new FormData(e)}else if(isButtonElement(e)||isInputElement(e)&&(e.type==="submit"||e.type==="image")){let j=e.form;if(j==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let _=e.getAttribute("formaction")||j.getAttribute("action");if(d=_?stripBasename(_,i):null,o=e.getAttribute("formmethod")||j.getAttribute("method")||defaultMethod,h=getFormEncType(e.getAttribute("formenctype"))||getFormEncType(j.getAttribute("enctype"))||defaultEncType,g=new FormData(j,e),!isFormDataSubmitterSupported()){let{name:$,type:_e,value:et}=e;if(_e==="image"){let tt=$?`${$}.`:"";g.append(`${tt}x`,"0"),g.append(`${tt}y`,"0")}else $&&g.append($,et)}}else{if(isHtmlElement(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=defaultMethod,d=null,h=defaultEncType,b=e}return g&&h==="text/plain"&&(b=g,g=void 0),{action:d,method:o.toLowerCase(),encType:h,formData:g,body:b}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function singleFetchUrl(e,i,o,d){let h=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return o?h.pathname.endsWith("/")?h.pathname=`${h.pathname}_.${d}`:h.pathname=`${h.pathname}.${d}`:h.pathname==="/"?h.pathname=`_root.${d}`:i&&stripBasename(h.pathname,i)==="/"?h.pathname=`${i.replace(/\/$/,"")}/_root.${d}`:h.pathname=`${h.pathname.replace(/\/$/,"")}.${d}`,h}async function loadRouteModule(e,i){if(e.id in i)return i[e.id];try{let o=await import(e.module);return i[e.id]=o,o}catch(o){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function getKeyedPrefetchLinks(e,i,o){let d=await Promise.all(e.map(async h=>{let g=i.routes[h.route.id];if(g){let b=await loadRouteModule(g,o);return b.links?b.links():[]}return[]}));return dedupeLinkDescriptors(d.flat(1).filter(isHtmlLinkDescriptor).filter(h=>h.rel==="stylesheet"||h.rel==="preload").map(h=>h.rel==="stylesheet"?{...h,rel:"prefetch",as:"style"}:{...h,rel:"prefetch"}))}function getNewMatchesForLinks(e,i,o,d,h,g){let b=(_,$)=>o[$]?_.route.id!==o[$].route.id:!0,j=(_,$)=>{var _e;return o[$].pathname!==_.pathname||((_e=o[$].route.path)==null?void 0:_e.endsWith("*"))&&o[$].params["*"]!==_.params["*"]};return g==="assets"?i.filter((_,$)=>b(_,$)||j(_,$)):g==="data"?i.filter((_,$)=>{var et;let _e=d.routes[_.route.id];if(!_e||!_e.hasLoader)return!1;if(b(_,$)||j(_,$))return!0;if(_.route.shouldRevalidate){let tt=_.route.shouldRevalidate({currentUrl:new URL(h.pathname+h.search+h.hash,window.origin),currentParams:((et=o[0])==null?void 0:et.params)||{},nextUrl:new URL(e,window.origin),nextParams:_.params,defaultShouldRevalidate:!0});if(typeof tt=="boolean")return tt}return!0}):[]}function getModuleLinkHrefs(e,i,{includeHydrateFallback:o}={}){return dedupeHrefs(e.map(d=>{let h=i.routes[d.route.id];if(!h)return[];let g=[h.module];return h.clientActionModule&&(g=g.concat(h.clientActionModule)),h.clientLoaderModule&&(g=g.concat(h.clientLoaderModule)),o&&h.hydrateFallbackModule&&(g=g.concat(h.hydrateFallbackModule)),h.imports&&(g=g.concat(h.imports)),g}).flat(1))}function dedupeHrefs(e){return[...new Set(e)]}function sortKeys(e){let i={},o=Object.keys(e).sort();for(let d of o)i[d]=e[d];return i}function dedupeLinkDescriptors(e,i){let o=new Set;return new Set(i),e.reduce((d,h)=>{let g=JSON.stringify(sortKeys(h));return o.has(g)||(o.add(g),d.push({key:g,link:h})),d},[])}function useDataRouterContext2(){let e=reactExports.useContext(DataRouterContext);return invariant2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function useDataRouterStateContext(){let e=reactExports.useContext(DataRouterStateContext);return invariant2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let e=reactExports.useContext(FrameworkContext);return invariant2(e,"You must render this element inside a <HydratedRouter> element"),e}function usePrefetchBehavior(e,i){let o=reactExports.useContext(FrameworkContext),[d,h]=reactExports.useState(!1),[g,b]=reactExports.useState(!1),{onFocus:j,onBlur:_,onMouseEnter:$,onMouseLeave:_e,onTouchStart:et}=i,tt=reactExports.useRef(null);reactExports.useEffect(()=>{if(e==="render"&&b(!0),e==="viewport"){let it=at=>{at.forEach(ot=>{b(ot.isIntersecting)})},st=new IntersectionObserver(it,{threshold:.5});return tt.current&&st.observe(tt.current),()=>{st.disconnect()}}},[e]),reactExports.useEffect(()=>{if(d){let it=setTimeout(()=>{b(!0)},100);return()=>{clearTimeout(it)}}},[d]);let rt=()=>{h(!0)},nt=()=>{h(!1),b(!1)};return o?e!=="intent"?[g,tt,{}]:[g,tt,{onFocus:composeEventHandlers(j,rt),onBlur:composeEventHandlers(_,nt),onMouseEnter:composeEventHandlers($,rt),onMouseLeave:composeEventHandlers(_e,nt),onTouchStart:composeEventHandlers(et,rt)}]:[!1,tt,{}]}function composeEventHandlers(e,i){return o=>{e&&e(o),o.defaultPrevented||i(o)}}function PrefetchPageLinks({page:e,...i}){let{router:o}=useDataRouterContext2(),d=reactExports.useMemo(()=>matchRoutes(o.routes,e,o.basename),[o.routes,e,o.basename]);return d?reactExports.createElement(PrefetchPageLinksImpl,{page:e,matches:d,...i}):null}function useKeyedPrefetchLinks(e){let{manifest:i,routeModules:o}=useFrameworkContext(),[d,h]=reactExports.useState([]);return reactExports.useEffect(()=>{let g=!1;return getKeyedPrefetchLinks(e,i,o).then(b=>{g||h(b)}),()=>{g=!0}},[e,i,o]),d}function PrefetchPageLinksImpl({page:e,matches:i,...o}){let d=useLocation(),{future:h,manifest:g,routeModules:b}=useFrameworkContext(),{basename:j}=useDataRouterContext2(),{loaderData:_,matches:$}=useDataRouterStateContext(),_e=reactExports.useMemo(()=>getNewMatchesForLinks(e,i,$,g,d,"data"),[e,i,$,g,d]),et=reactExports.useMemo(()=>getNewMatchesForLinks(e,i,$,g,d,"assets"),[e,i,$,g,d]),tt=reactExports.useMemo(()=>{if(e===d.pathname+d.search+d.hash)return[];let it=new Set,st=!1;if(i.forEach(ot=>{var ct;let lt=g.routes[ot.route.id];!lt||!lt.hasLoader||(!_e.some(ut=>ut.route.id===ot.route.id)&&ot.route.id in _&&((ct=b[ot.route.id])!=null&&ct.shouldRevalidate)||lt.hasClientLoader?st=!0:it.add(ot.route.id))}),it.size===0)return[];let at=singleFetchUrl(e,j,h.unstable_trailingSlashAwareDataRequests,"data");return st&&it.size>0&&at.searchParams.set("_routes",i.filter(ot=>it.has(ot.route.id)).map(ot=>ot.route.id).join(",")),[at.pathname+at.search]},[j,h.unstable_trailingSlashAwareDataRequests,_,d,g,_e,i,e,b]),rt=reactExports.useMemo(()=>getModuleLinkHrefs(et,g),[et,g]),nt=useKeyedPrefetchLinks(et);return reactExports.createElement(reactExports.Fragment,null,tt.map(it=>reactExports.createElement("link",{key:it,rel:"prefetch",as:"fetch",href:it,...o})),rt.map(it=>reactExports.createElement("link",{key:it,rel:"modulepreload",href:it,...o})),nt.map(({key:it,link:st})=>reactExports.createElement("link",{key:it,nonce:o.nonce,...st})))}function mergeRefs(...e){return i=>{e.forEach(o=>{typeof o=="function"?o(i):o!=null&&(o.current=i)})}}var isBrowser2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser2&&(window.__reactRouterVersion="7.12.0")}catch{}function BrowserRouter({basename:e,children:i,unstable_useTransitions:o,window:d}){let h=reactExports.useRef();h.current==null&&(h.current=createBrowserHistory({window:d,v5Compat:!0}));let g=h.current,[b,j]=reactExports.useState({action:g.action,location:g.location}),_=reactExports.useCallback($=>{o===!1?j($):reactExports.startTransition(()=>j($))},[o]);return reactExports.useLayoutEffect(()=>g.listen(_),[g,_]),reactExports.createElement(Router,{basename:e,children:i,location:b.location,navigationType:b.action,navigator:g,unstable_useTransitions:o})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:i,discover:o="render",prefetch:d="none",relative:h,reloadDocument:g,replace:b,state:j,target:_,to:$,preventScrollReset:_e,viewTransition:et,unstable_defaultShouldRevalidate:tt,...rt},nt){let{basename:it,unstable_useTransitions:st}=reactExports.useContext(NavigationContext),at=typeof $=="string"&&ABSOLUTE_URL_REGEX2.test($),ot=parseToInfo($,it);$=ot.to;let lt=useHref($,{relative:h}),[ct,ut,dt]=usePrefetchBehavior(d,rt),mt=useLinkClickHandler($,{replace:b,state:j,target:_,preventScrollReset:_e,relative:h,viewTransition:et,unstable_defaultShouldRevalidate:tt,unstable_useTransitions:st});function xt(gt){i&&i(gt),gt.defaultPrevented||mt(gt)}let ft=reactExports.createElement("a",{...rt,...dt,href:ot.absoluteURL||lt,onClick:ot.isExternal||g?i:xt,ref:mergeRefs(nt,ut),target:_,"data-discover":!at&&o==="render"?"true":void 0});return ct&&!at?reactExports.createElement(reactExports.Fragment,null,ft,reactExports.createElement(PrefetchPageLinks,{page:lt})):ft});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":i="page",caseSensitive:o=!1,className:d="",end:h=!1,style:g,to:b,viewTransition:j,children:_,...$},_e){let et=useResolvedPath(b,{relative:$.relative}),tt=useLocation(),rt=reactExports.useContext(DataRouterStateContext),{navigator:nt,basename:it}=reactExports.useContext(NavigationContext),st=rt!=null&&useViewTransitionState(et)&&j===!0,at=nt.encodeLocation?nt.encodeLocation(et).pathname:et.pathname,ot=tt.pathname,lt=rt&&rt.navigation&&rt.navigation.location?rt.navigation.location.pathname:null;o||(ot=ot.toLowerCase(),lt=lt?lt.toLowerCase():null,at=at.toLowerCase()),lt&&it&&(lt=stripBasename(lt,it)||lt);const ct=at!=="/"&&at.endsWith("/")?at.length-1:at.length;let ut=ot===at||!h&&ot.startsWith(at)&&ot.charAt(ct)==="/",dt=lt!=null&&(lt===at||!h&&lt.startsWith(at)&&lt.charAt(at.length)==="/"),mt={isActive:ut,isPending:dt,isTransitioning:st},xt=ut?i:void 0,ft;typeof d=="function"?ft=d(mt):ft=[d,ut?"active":null,dt?"pending":null,st?"transitioning":null].filter(Boolean).join(" ");let gt=typeof g=="function"?g(mt):g;return reactExports.createElement(Link,{...$,"aria-current":xt,className:ft,ref:_e,style:gt,to:b,viewTransition:j},typeof _=="function"?_(mt):_)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:e="render",fetcherKey:i,navigate:o,reloadDocument:d,replace:h,state:g,method:b=defaultMethod,action:j,onSubmit:_,relative:$,preventScrollReset:_e,viewTransition:et,unstable_defaultShouldRevalidate:tt,...rt},nt)=>{let{unstable_useTransitions:it}=reactExports.useContext(NavigationContext),st=useSubmit(),at=useFormAction(j,{relative:$}),ot=b.toLowerCase()==="get"?"get":"post",lt=typeof j=="string"&&ABSOLUTE_URL_REGEX2.test(j),ct=ut=>{if(_&&_(ut),ut.defaultPrevented)return;ut.preventDefault();let dt=ut.nativeEvent.submitter,mt=(dt==null?void 0:dt.getAttribute("formmethod"))||b,xt=()=>st(dt||ut.currentTarget,{fetcherKey:i,method:mt,navigate:o,replace:h,state:g,relative:$,preventScrollReset:_e,viewTransition:et,unstable_defaultShouldRevalidate:tt});it&&o!==!1?reactExports.startTransition(()=>xt()):xt()};return reactExports.createElement("form",{ref:nt,method:ot,action:at,onSubmit:d?_:ct,...rt,"data-discover":!lt&&e==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(e){let i=reactExports.useContext(DataRouterContext);return invariant$2(i,getDataRouterConsoleError2(e)),i}function useLinkClickHandler(e,{target:i,replace:o,state:d,preventScrollReset:h,relative:g,viewTransition:b,unstable_defaultShouldRevalidate:j,unstable_useTransitions:_}={}){let $=useNavigate(),_e=useLocation(),et=useResolvedPath(e,{relative:g});return reactExports.useCallback(tt=>{if(shouldProcessLinkClick(tt,i)){tt.preventDefault();let rt=o!==void 0?o:createPath(_e)===createPath(et),nt=()=>$(e,{replace:rt,state:d,preventScrollReset:h,relative:g,viewTransition:b,unstable_defaultShouldRevalidate:j});_?reactExports.startTransition(()=>nt()):nt()}},[_e,$,et,o,d,i,e,h,g,b,j,_])}function useSearchParams(e){warning$1(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=reactExports.useRef(createSearchParams(e)),o=reactExports.useRef(!1),d=useLocation(),h=reactExports.useMemo(()=>getSearchParamsForLocation(d.search,o.current?null:i.current),[d.search]),g=useNavigate(),b=reactExports.useCallback((j,_)=>{const $=createSearchParams(typeof j=="function"?j(new URLSearchParams(h)):j);o.current=!0,g("?"+$,_)},[g,h]);return[h,b]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:e}=useDataRouterContext3("useSubmit"),{basename:i}=reactExports.useContext(NavigationContext),o=useRouteId(),d=e.fetch,h=e.navigate;return reactExports.useCallback(async(g,b={})=>{let{action:j,method:_,encType:$,formData:_e,body:et}=getFormSubmissionInfo(g,i);if(b.navigate===!1){let tt=b.fetcherKey||getUniqueFetcherId();await d(tt,o,b.action||j,{unstable_defaultShouldRevalidate:b.unstable_defaultShouldRevalidate,preventScrollReset:b.preventScrollReset,formData:_e,body:et,formMethod:b.method||_,formEncType:b.encType||$,flushSync:b.flushSync})}else await h(b.action||j,{unstable_defaultShouldRevalidate:b.unstable_defaultShouldRevalidate,preventScrollReset:b.preventScrollReset,formData:_e,body:et,formMethod:b.method||_,formEncType:b.encType||$,replace:b.replace,state:b.state,fromRouteId:o,flushSync:b.flushSync,viewTransition:b.viewTransition})},[d,h,i,o])}function useFormAction(e,{relative:i}={}){let{basename:o}=reactExports.useContext(NavigationContext),d=reactExports.useContext(RouteContext);invariant$2(d,"useFormAction must be used inside a RouteContext");let[h]=d.matches.slice(-1),g={...useResolvedPath(e||".",{relative:i})},b=useLocation();if(e==null){g.search=b.search;let j=new URLSearchParams(g.search),_=j.getAll("index");if(_.some(_e=>_e==="")){j.delete("index"),_.filter(et=>et).forEach(et=>j.append("index",et));let _e=j.toString();g.search=_e?`?${_e}`:""}}return(!e||e===".")&&h.route.index&&(g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(g.pathname=g.pathname==="/"?o:joinPaths([o,g.pathname])),createPath(g)}function useViewTransitionState(e,{relative:i}={}){let o=reactExports.useContext(ViewTransitionContext);invariant$2(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=useDataRouterContext3("useViewTransitionState"),h=useResolvedPath(e,{relative:i});if(!o.isTransitioning)return!1;let g=stripBasename(o.currentLocation.pathname,d)||o.currentLocation.pathname,b=stripBasename(o.nextLocation.pathname,d)||o.nextLocation.pathname;return matchPath(h.pathname,b)!=null||matchPath(h.pathname,g)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(e,i)=>{const o=reactExports.forwardRef(({color:d="currentColor",size:h=24,strokeWidth:g=2,absoluteStrokeWidth:b,className:j="",children:_,...$},_e)=>reactExports.createElement("svg",{ref:_e,...defaultAttributes,width:h,height:h,stroke:d,strokeWidth:b?Number(g)*24/Number(h):g,className:["lucide",`lucide-${toKebabCase(e)}`,j].join(" "),...$},[...i.map(([et,tt])=>reactExports.createElement(et,tt)),...Array.isArray(_)?_:[_]]));return o.displayName=`${e}`,o};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Activity=createLucideIcon("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AlertCircle=createLucideIcon("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AlertTriangle=createLucideIcon("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowLeft=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowUpToLine=createLucideIcon("ArrowUpToLine",[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Award=createLucideIcon("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BarChart3=createLucideIcon("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookOpen=createLucideIcon("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bookmark=createLucideIcon("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calculator$1=createLucideIcon("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calendar=createLucideIcon("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CheckCircle2=createLucideIcon("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CheckCircle=createLucideIcon("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Circle=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Compass=createLucideIcon("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Copy=createLucideIcon("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Crown=createLucideIcon("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Database=createLucideIcon("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Delete=createLucideIcon("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eraser=createLucideIcon("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EyeOff=createLucideIcon("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eye=createLucideIcon("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileJson=createLucideIcon("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileText=createLucideIcon("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Flag=createLucideIcon("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Flame=createLucideIcon("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FolderTree=createLucideIcon("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Grid2x2=createLucideIcon("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Grid3x3=createLucideIcon("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GripVertical=createLucideIcon("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Home=createLucideIcon("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Image$1=createLucideIcon("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Info=createLucideIcon("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Keyboard=createLucideIcon("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Layers=createLucideIcon("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Library=createLucideIcon("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lightbulb=createLucideIcon("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const List=createLucideIcon("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loader=createLucideIcon("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lock=createLucideIcon("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LogOut=createLucideIcon("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Maximize=createLucideIcon("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Minus=createLucideIcon("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moon=createLucideIcon("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MoreHorizontal=createLucideIcon("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MousePointer=createLucideIcon("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Navigation=createLucideIcon("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PanelsTopLeft=createLucideIcon("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PenTool=createLucideIcon("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pen=createLucideIcon("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pentagon=createLucideIcon("Pentagon",[["path",{d:"M3.5 8.7c-.7.5-1 1.4-.7 2.2l2.8 8.7c.3.8 1 1.4 1.9 1.4h9.1c.9 0 1.6-.6 1.9-1.4l2.8-8.7c.3-.8 0-1.7-.7-2.2l-7.4-5.3a2.1 2.1 0 0 0-2.4 0Z",key:"hsj90r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PlayCircle=createLucideIcon("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Play=createLucideIcon("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Redo2=createLucideIcon("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13",key:"19mnr4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Redo=createLucideIcon("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RefreshCw=createLucideIcon("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RotateCcw=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Save=createLucideIcon("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Share2=createLucideIcon("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Shield=createLucideIcon("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sparkles=createLucideIcon("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SquarePen=createLucideIcon("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Square=createLucideIcon("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Star=createLucideIcon("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sun=createLucideIcon("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tag=createLucideIcon("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Target=createLucideIcon("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TrendingDown=createLucideIcon("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TrendingUp=createLucideIcon("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trophy=createLucideIcon("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Type=createLucideIcon("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Undo2=createLucideIcon("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Undo=createLucideIcon("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Volume2=createLucideIcon("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VolumeX=createLucideIcon("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wrench=createLucideIcon("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XCircle=createLucideIcon("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zap=createLucideIcon("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZoomIn=createLucideIcon("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZoomOut=createLucideIcon("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),LayoutGroupContext=reactExports.createContext({});function useConstant(e){const i=reactExports.useRef(null);return i.current===null&&(i.current=e()),i.current}const isBrowser$2=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser$2?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(e,i){e.indexOf(i)===-1&&e.push(i)}function removeItem(e,i){const o=e.indexOf(i);o>-1&&e.splice(o,1)}const clamp=(e,i,o)=>o>i?i:o<e?e:o;function formatErrorMessage(e,i){return i?`${e}. For more information and steps for solving, visit https://motion.dev/troubleshooting/${i}`:e}let warning=()=>{},invariant$1=()=>{};typeof process<"u";const MotionGlobalConfig={},isNumericalString=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function isObject$1(e){return typeof e=="object"&&e!==null}const isZeroValueString=e=>/^0[^.\s]+$/u.test(e);function memo(e){let i;return()=>(i===void 0&&(i=e()),i)}const noop$6=e=>e,combineFunctions=(e,i)=>o=>i(e(o)),pipe=(...e)=>e.reduce(combineFunctions),progress=(e,i,o)=>{const d=i-e;return d===0?1:(o-e)/d};class SubscriptionManager{constructor(){this.subscriptions=[]}add(i){return addUniqueItem(this.subscriptions,i),()=>removeItem(this.subscriptions,i)}notify(i,o,d){const h=this.subscriptions.length;if(h)if(h===1)this.subscriptions[0](i,o,d);else for(let g=0;g<h;g++){const b=this.subscriptions[g];b&&b(i,o,d)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=e=>e*1e3,millisecondsToSeconds=e=>e/1e3;function velocityPerSecond(e,i){return i?e*(1e3/i):0}const calcBezier=(e,i,o)=>(((1-3*o+3*i)*e+(3*o-6*i))*e+3*i)*e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(e,i,o,d,h){let g,b,j=0;do b=i+(o-i)/2,g=calcBezier(b,d,h)-e,g>0?o=b:i=b;while(Math.abs(g)>subdivisionPrecision&&++j<subdivisionMaxIterations);return b}function cubicBezier$1(e,i,o,d){if(e===i&&o===d)return noop$6;const h=g=>binarySubdivide(g,0,1,e,o);return g=>g===0||g===1?g:calcBezier(h(g),i,d)}const mirrorEasing=e=>i=>i<=.5?e(2*i)/2:(2-e(2*(1-i)))/2,reverseEasing=e=>i=>1-e(1-i),backOut=cubicBezier$1(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=e=>(e*=2)<1?.5*backIn(e):.5*(2-Math.pow(2,-10*(e-1))),circIn=e=>1-Math.sin(Math.acos(e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier$1(.42,0,1,1),easeOut=cubicBezier$1(0,0,.58,1),easeInOut=cubicBezier$1(.42,0,.58,1),isEasingArray=e=>Array.isArray(e)&&typeof e[0]!="number",isBezierDefinition=e=>Array.isArray(e)&&typeof e[0]=="number",easingLookup={linear:noop$6,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=e=>typeof e=="string",easingDefinitionToFunction=e=>{if(isBezierDefinition(e)){invariant$1(e.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[i,o,d,h]=e;return cubicBezier$1(i,o,d,h)}else if(isValidEasing(e))return invariant$1(easingLookup[e]!==void 0,`Invalid easing type '${e}'`,"invalid-easing-type"),easingLookup[e];return e},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],statsBuffer={value:null,addProjectionMetrics:null};function createRenderStep(e,i){let o=new Set,d=new Set,h=!1,g=!1;const b=new WeakSet;let j={delta:0,timestamp:0,isProcessing:!1},_=0;function $(et){b.has(et)&&(_e.schedule(et),e()),_++,et(j)}const _e={schedule:(et,tt=!1,rt=!1)=>{const it=rt&&h?o:d;return tt&&b.add(et),it.has(et)||it.add(et),et},cancel:et=>{d.delete(et),b.delete(et)},process:et=>{if(j=et,h){g=!0;return}h=!0,[o,d]=[d,o],o.forEach($),i&&statsBuffer.value&&statsBuffer.value.frameloop[i].push(_),_=0,o.clear(),h=!1,g&&(g=!1,_e.process(et))}};return _e}const maxElapsed=40;function createRenderBatcher(e,i){let o=!1,d=!0;const h={delta:0,timestamp:0,isProcessing:!1},g=()=>o=!0,b=stepsOrder.reduce((lt,ct)=>(lt[ct]=createRenderStep(g,i?ct:void 0),lt),{}),{setup:j,read:_,resolveKeyframes:$,preUpdate:_e,update:et,preRender:tt,render:rt,postRender:nt}=b,it=()=>{const lt=MotionGlobalConfig.useManualTiming?h.timestamp:performance.now();o=!1,MotionGlobalConfig.useManualTiming||(h.delta=d?1e3/60:Math.max(Math.min(lt-h.timestamp,maxElapsed),1)),h.timestamp=lt,h.isProcessing=!0,j.process(h),_.process(h),$.process(h),_e.process(h),et.process(h),tt.process(h),rt.process(h),nt.process(h),h.isProcessing=!1,o&&i&&(d=!1,e(it))},st=()=>{o=!0,d=!0,h.isProcessing||e(it)};return{schedule:stepsOrder.reduce((lt,ct)=>{const ut=b[ct];return lt[ct]=(dt,mt=!1,xt=!1)=>(o||st(),ut.schedule(dt,mt,xt)),lt},{}),cancel:lt=>{for(let ct=0;ct<stepsOrder.length;ct++)b[stepsOrder[ct]].cancel(lt)},state:h,steps:b}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$6,!0);let now;function clearTime(){now=void 0}const time$1={now:()=>(now===void 0&&time$1.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:e=>{now=e,queueMicrotask(clearTime)}},checkStringStartsWith=e=>i=>typeof i=="string"&&i.startsWith(e),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=e=>startsAsVariableToken(e)?singleCssVariableRegex.test(e.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function containsCSSVariable(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const number$3={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},alpha$1={...number$3,transform:e=>clamp(0,1,e)},scale={...number$3,default:1},sanitize=e=>Math.round(e*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish$1(e){return e==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(e,i)=>o=>!!(typeof o=="string"&&singleColorRegex.test(o)&&o.startsWith(e)||i&&!isNullish$1(o)&&Object.prototype.hasOwnProperty.call(o,i)),splitColor=(e,i,o)=>d=>{if(typeof d!="string")return d;const[h,g,b,j]=d.match(floatRegex);return{[e]:parseFloat(h),[i]:parseFloat(g),[o]:parseFloat(b),alpha:j!==void 0?parseFloat(j):1}},clampRgbUnit=e=>clamp(0,255,e),rgbUnit={...number$3,transform:e=>Math.round(clampRgbUnit(e))},rgba$1={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:e,green:i,blue:o,alpha:d=1})=>"rgba("+rgbUnit.transform(e)+", "+rgbUnit.transform(i)+", "+rgbUnit.transform(o)+", "+sanitize(alpha$1.transform(d))+")"};function parseHex(e){let i="",o="",d="",h="";return e.length>5?(i=e.substring(1,3),o=e.substring(3,5),d=e.substring(5,7),h=e.substring(7,9)):(i=e.substring(1,2),o=e.substring(2,3),d=e.substring(3,4),h=e.substring(4,5),i+=i,o+=o,d+=d,h+=h),{red:parseInt(i,16),green:parseInt(o,16),blue:parseInt(d,16),alpha:h?parseInt(h,16)/255:1}}const hex$1={test:isColorString("#"),parse:parseHex,transform:rgba$1.transform},createUnitType=e=>({test:i=>typeof i=="string"&&i.endsWith(e)&&i.split(" ").length===1,parse:parseFloat,transform:i=>`${i}${e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:e=>percent.parse(e)/100,transform:e=>percent.transform(e*100)},hsla$1={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:e,saturation:i,lightness:o,alpha:d=1})=>"hsla("+Math.round(e)+", "+percent.transform(sanitize(i))+", "+percent.transform(sanitize(o))+", "+sanitize(alpha$1.transform(d))+")"},color$1={test:e=>rgba$1.test(e)||hex$1.test(e)||hsla$1.test(e),parse:e=>rgba$1.test(e)?rgba$1.parse(e):hsla$1.test(e)?hsla$1.parse(e):hex$1.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?rgba$1.transform(e):hsla$1.transform(e),getAnimatableNone:e=>{const i=color$1.parse(e);return i.alpha=0,color$1.transform(i)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(e){var i,o;return isNaN(e)&&typeof e=="string"&&(((i=e.match(floatRegex))==null?void 0:i.length)||0)+(((o=e.match(colorRegex))==null?void 0:o.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(e){const i=e.toString(),o=[],d={color:[],number:[],var:[]},h=[];let g=0;const j=i.replace(complexRegex,_=>(color$1.test(_)?(d.color.push(g),h.push(COLOR_TOKEN),o.push(color$1.parse(_))):_.startsWith(VAR_FUNCTION_TOKEN)?(d.var.push(g),h.push(VAR_TOKEN),o.push(_)):(d.number.push(g),h.push(NUMBER_TOKEN),o.push(parseFloat(_))),++g,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:o,split:j,indexes:d,types:h}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{split:i,types:o}=analyseComplexValue(e),d=i.length;return h=>{let g="";for(let b=0;b<d;b++)if(g+=i[b],h[b]!==void 0){const j=o[b];j===NUMBER_TOKEN?g+=sanitize(h[b]):j===COLOR_TOKEN?g+=color$1.transform(h[b]):g+=h[b]}return g}}const convertNumbersToZero=e=>typeof e=="number"?0:color$1.test(e)?color$1.getAnimatableNone(e):e;function getAnimatableNone$1(e){const i=parseComplexValue(e);return createTransformer(e)(i.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(e,i,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?e+(i-e)*6*o:o<1/2?i:o<2/3?e+(i-e)*(2/3-o)*6:e}function hslaToRgba({hue:e,saturation:i,lightness:o,alpha:d}){e/=360,i/=100,o/=100;let h=0,g=0,b=0;if(!i)h=g=b=o;else{const j=o<.5?o*(1+i):o+i-o*i,_=2*o-j;h=hueToRgb(_,j,e+1/3),g=hueToRgb(_,j,e),b=hueToRgb(_,j,e-1/3)}return{red:Math.round(h*255),green:Math.round(g*255),blue:Math.round(b*255),alpha:d}}function mixImmediate(e,i){return o=>o>0?i:e}const mixNumber$1=(e,i,o)=>e+(i-e)*o,mixLinearColor=(e,i,o)=>{const d=e*e,h=o*(i*i-d)+d;return h<0?0:Math.sqrt(h)},colorTypes=[hex$1,rgba$1,hsla$1],getColorType=e=>colorTypes.find(i=>i.test(e));function asRGBA(e){const i=getColorType(e);if(warning(!!i,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!i)return!1;let o=i.parse(e);return i===hsla$1&&(o=hslaToRgba(o)),o}const mixColor=(e,i)=>{const o=asRGBA(e),d=asRGBA(i);if(!o||!d)return mixImmediate(e,i);const h={...o};return g=>(h.red=mixLinearColor(o.red,d.red,g),h.green=mixLinearColor(o.green,d.green,g),h.blue=mixLinearColor(o.blue,d.blue,g),h.alpha=mixNumber$1(o.alpha,d.alpha,g),rgba$1.transform(h))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(e,i){return invisibleValues.has(e)?o=>o<=0?e:i:o=>o>=1?i:e}function mixNumber(e,i){return o=>mixNumber$1(e,i,o)}function getMixer(e){return typeof e=="number"?mixNumber:typeof e=="string"?isCSSVariableToken(e)?mixImmediate:color$1.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:typeof e=="object"?color$1.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,i){const o=[...e],d=o.length,h=e.map((g,b)=>getMixer(g)(g,i[b]));return g=>{for(let b=0;b<d;b++)o[b]=h[b](g);return o}}function mixObject(e,i){const o={...e,...i},d={};for(const h in o)e[h]!==void 0&&i[h]!==void 0&&(d[h]=getMixer(e[h])(e[h],i[h]));return h=>{for(const g in d)o[g]=d[g](h);return o}}function matchOrder(e,i){const o=[],d={color:0,var:0,number:0};for(let h=0;h<i.values.length;h++){const g=i.types[h],b=e.indexes[g][d[g]],j=e.values[b]??0;o[h]=j,d[g]++}return o}const mixComplex=(e,i)=>{const o=complex.createTransformer(i),d=analyseComplexValue(e),h=analyseComplexValue(i);return d.indexes.var.length===h.indexes.var.length&&d.indexes.color.length===h.indexes.color.length&&d.indexes.number.length>=h.indexes.number.length?invisibleValues.has(e)&&!h.values.length||invisibleValues.has(i)&&!d.values.length?mixVisibility(e,i):pipe(mixArray(matchOrder(d,h),h.values),o):(warning(!0,`Complex values '${e}' and '${i}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),mixImmediate(e,i))};function mix(e,i,o){return typeof e=="number"&&typeof i=="number"&&typeof o=="number"?mixNumber$1(e,i,o):getMixer(e)(e,i)}const frameloopDriver=e=>{const i=({timestamp:o})=>e(o);return{start:(o=!0)=>frame.update(i,o),stop:()=>cancelFrame(i),now:()=>frameData.isProcessing?frameData.timestamp:time$1.now()}},generateLinearEasing=(e,i,o=10)=>{let d="";const h=Math.max(Math.round(i/o),2);for(let g=0;g<h;g++)d+=Math.round(e(g/(h-1))*1e4)/1e4+", ";return`linear(${d.substring(0,d.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(e){let i=0;const o=50;let d=e.next(i);for(;!d.done&&i<maxGeneratorDuration;)i+=o,d=e.next(i);return i>=maxGeneratorDuration?1/0:i}function createGeneratorEasing(e,i=100,o){const d=o({...e,keyframes:[0,i]}),h=Math.min(calcGeneratorDuration(d),maxGeneratorDuration);return{type:"keyframes",ease:g=>d.next(h*g).value/i,duration:millisecondsToSeconds(h)}}const velocitySampleDuration=5;function calcGeneratorVelocity(e,i,o){const d=Math.max(i-velocitySampleDuration,0);return velocityPerSecond(o-e(d),i-d)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:e=springDefaults.duration,bounce:i=springDefaults.bounce,velocity:o=springDefaults.velocity,mass:d=springDefaults.mass}){let h,g;warning(e<=secondsToMilliseconds(springDefaults.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let b=1-i;b=clamp(springDefaults.minDamping,springDefaults.maxDamping,b),e=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(e)),b<1?(h=$=>{const _e=$*b,et=_e*e,tt=_e-o,rt=calcAngularFreq($,b),nt=Math.exp(-et);return safeMin-tt/rt*nt},g=$=>{const et=$*b*e,tt=et*o+o,rt=Math.pow(b,2)*Math.pow($,2)*e,nt=Math.exp(-et),it=calcAngularFreq(Math.pow($,2),b);return(-h($)+safeMin>0?-1:1)*((tt-rt)*nt)/it}):(h=$=>{const _e=Math.exp(-$*e),et=($-o)*e+1;return-safeMin+_e*et},g=$=>{const _e=Math.exp(-$*e),et=(o-$)*(e*e);return _e*et});const j=5/e,_=approximateRoot(h,g,j);if(e=secondsToMilliseconds(e),isNaN(_))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:e};{const $=Math.pow(_,2)*d;return{stiffness:$,damping:b*2*Math.sqrt(d*$),duration:e}}}const rootIterations=12;function approximateRoot(e,i,o){let d=o;for(let h=1;h<rootIterations;h++)d=d-e(d)/i(d);return d}function calcAngularFreq(e,i){return e*Math.sqrt(1-i*i)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(e,i){return i.some(o=>e[o]!==void 0)}function getSpringOptions(e){let i={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys))if(e.visualDuration){const o=e.visualDuration,d=2*Math.PI/(o*1.2),h=d*d,g=2*clamp(.05,1,1-(e.bounce||0))*Math.sqrt(h);i={...i,mass:springDefaults.mass,stiffness:h,damping:g}}else{const o=findSpring(e);i={...i,...o,mass:springDefaults.mass},i.isResolvedFromDuration=!0}return i}function spring(e=springDefaults.visualDuration,i=springDefaults.bounce){const o=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:i}:e;let{restSpeed:d,restDelta:h}=o;const g=o.keyframes[0],b=o.keyframes[o.keyframes.length-1],j={done:!1,value:g},{stiffness:_,damping:$,mass:_e,duration:et,velocity:tt,isResolvedFromDuration:rt}=getSpringOptions({...o,velocity:-millisecondsToSeconds(o.velocity||0)}),nt=tt||0,it=$/(2*Math.sqrt(_*_e)),st=b-g,at=millisecondsToSeconds(Math.sqrt(_/_e)),ot=Math.abs(st)<5;d||(d=ot?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),h||(h=ot?springDefaults.restDelta.granular:springDefaults.restDelta.default);let lt;if(it<1){const ut=calcAngularFreq(at,it);lt=dt=>{const mt=Math.exp(-it*at*dt);return b-mt*((nt+it*at*st)/ut*Math.sin(ut*dt)+st*Math.cos(ut*dt))}}else if(it===1)lt=ut=>b-Math.exp(-at*ut)*(st+(nt+at*st)*ut);else{const ut=at*Math.sqrt(it*it-1);lt=dt=>{const mt=Math.exp(-it*at*dt),xt=Math.min(ut*dt,300);return b-mt*((nt+it*at*st)*Math.sinh(xt)+ut*st*Math.cosh(xt))/ut}}const ct={calculatedDuration:rt&&et||null,next:ut=>{const dt=lt(ut);if(rt)j.done=ut>=et;else{let mt=ut===0?nt:0;it<1&&(mt=ut===0?secondsToMilliseconds(nt):calcGeneratorVelocity(lt,ut,dt));const xt=Math.abs(mt)<=d,ft=Math.abs(b-dt)<=h;j.done=xt&&ft}return j.value=j.done?b:dt,j},toString:()=>{const ut=Math.min(calcGeneratorDuration(ct),maxGeneratorDuration),dt=generateLinearEasing(mt=>ct.next(ut*mt).value,ut,30);return ut+"ms "+dt},toTransition:()=>{}};return ct}spring.applyToOptions=e=>{const i=createGeneratorEasing(e,100,spring);return e.ease=i.ease,e.duration=secondsToMilliseconds(i.duration),e.type="keyframes",e};function inertia({keyframes:e,velocity:i=0,power:o=.8,timeConstant:d=325,bounceDamping:h=10,bounceStiffness:g=500,modifyTarget:b,min:j,max:_,restDelta:$=.5,restSpeed:_e}){const et=e[0],tt={done:!1,value:et},rt=xt=>j!==void 0&&xt<j||_!==void 0&&xt>_,nt=xt=>j===void 0?_:_===void 0||Math.abs(j-xt)<Math.abs(_-xt)?j:_;let it=o*i;const st=et+it,at=b===void 0?st:b(st);at!==st&&(it=at-et);const ot=xt=>-it*Math.exp(-xt/d),lt=xt=>at+ot(xt),ct=xt=>{const ft=ot(xt),gt=lt(xt);tt.done=Math.abs(ft)<=$,tt.value=tt.done?at:gt};let ut,dt;const mt=xt=>{rt(tt.value)&&(ut=xt,dt=spring({keyframes:[tt.value,nt(tt.value)],velocity:calcGeneratorVelocity(lt,xt,tt.value),damping:h,stiffness:g,restDelta:$,restSpeed:_e}))};return mt(0),{calculatedDuration:null,next:xt=>{let ft=!1;return!dt&&ut===void 0&&(ft=!0,ct(xt),mt(xt)),ut!==void 0&&xt>=ut?dt.next(xt-ut):(!ft&&ct(xt),tt)}}}function createMixers(e,i,o){const d=[],h=o||MotionGlobalConfig.mix||mix,g=e.length-1;for(let b=0;b<g;b++){let j=h(e[b],e[b+1]);if(i){const _=Array.isArray(i)?i[b]||noop$6:i;j=pipe(_,j)}d.push(j)}return d}function interpolate$2(e,i,{clamp:o=!0,ease:d,mixer:h}={}){const g=e.length;if(invariant$1(g===i.length,"Both input and output ranges must be the same length","range-length"),g===1)return()=>i[0];if(g===2&&i[0]===i[1])return()=>i[1];const b=e[0]===e[1];e[0]>e[g-1]&&(e=[...e].reverse(),i=[...i].reverse());const j=createMixers(i,d,h),_=j.length,$=_e=>{if(b&&_e<e[0])return i[0];let et=0;if(_>1)for(;et<e.length-2&&!(_e<e[et+1]);et++);const tt=progress(e[et],e[et+1],_e);return j[et](tt)};return o?_e=>$(clamp(e[0],e[g-1],_e)):$}function fillOffset(e,i){const o=e[e.length-1];for(let d=1;d<=i;d++){const h=progress(0,i,d);e.push(mixNumber$1(o,1,h))}}function defaultOffset(e){const i=[0];return fillOffset(i,e.length-1),i}function convertOffsetToTimes(e,i){return e.map(o=>o*i)}function defaultEasing(e,i){return e.map(()=>i||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:i,times:o,ease:d="easeInOut"}){const h=isEasingArray(d)?d.map(easingDefinitionToFunction):easingDefinitionToFunction(d),g={done:!1,value:i[0]},b=convertOffsetToTimes(o&&o.length===i.length?o:defaultOffset(i),e),j=interpolate$2(b,i,{ease:Array.isArray(h)?h:defaultEasing(i,h)});return{calculatedDuration:e,next:_=>(g.value=j(_),g.done=_>=e,g)}}const isNotNull$1=e=>e!==null;function getFinalKeyframe$1(e,{repeat:i,repeatType:o="loop"},d,h=1){const g=e.filter(isNotNull$1),j=h<0||i&&o!=="loop"&&i%2===1?0:g.length-1;return!j||d===void 0?g[j]:d}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(e){typeof e.type=="string"&&(e.type=transitionTypeMap[e.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(i=>{this.resolve=i})}notifyFinished(){this.resolve()}then(i,o){return this.finished.then(i,o)}}const percentToProgress=e=>e/100;class JSAnimation extends WithPromise{constructor(i){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var d,h;const{motionValue:o}=this.options;o&&o.updatedAt!==time$1.now()&&this.tick(time$1.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(h=(d=this.options).onStop)==null||h.call(d))},this.options=i,this.initAnimation(),this.play(),i.autoplay===!1&&this.pause()}initAnimation(){const{options:i}=this;replaceTransitionType(i);const{type:o=keyframes,repeat:d=0,repeatDelay:h=0,repeatType:g,velocity:b=0}=i;let{keyframes:j}=i;const _=o||keyframes;_!==keyframes&&typeof j[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(j[0],j[1])),j=[0,100]);const $=_({...i,keyframes:j});g==="mirror"&&(this.mirroredGenerator=_({...i,keyframes:[...j].reverse(),velocity:-b})),$.calculatedDuration===null&&($.calculatedDuration=calcGeneratorDuration($));const{calculatedDuration:_e}=$;this.calculatedDuration=_e,this.resolvedDuration=_e+h,this.totalDuration=this.resolvedDuration*(d+1)-h,this.generator=$}updateTime(i){const o=Math.round(i-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=o}tick(i,o=!1){const{generator:d,totalDuration:h,mixKeyframes:g,mirroredGenerator:b,resolvedDuration:j,calculatedDuration:_}=this;if(this.startTime===null)return d.next(0);const{delay:$=0,keyframes:_e,repeat:et,repeatType:tt,repeatDelay:rt,type:nt,onUpdate:it,finalKeyframe:st}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,i):this.speed<0&&(this.startTime=Math.min(i-h/this.speed,this.startTime)),o?this.currentTime=i:this.updateTime(i);const at=this.currentTime-$*(this.playbackSpeed>=0?1:-1),ot=this.playbackSpeed>=0?at<0:at>h;this.currentTime=Math.max(at,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let lt=this.currentTime,ct=d;if(et){const xt=Math.min(this.currentTime,h)/j;let ft=Math.floor(xt),gt=xt%1;!gt&&xt>=1&&(gt=1),gt===1&&ft--,ft=Math.min(ft,et+1),!!(ft%2)&&(tt==="reverse"?(gt=1-gt,rt&&(gt-=rt/j)):tt==="mirror"&&(ct=b)),lt=clamp(0,1,gt)*j}const ut=ot?{done:!1,value:_e[0]}:ct.next(lt);g&&(ut.value=g(ut.value));let{done:dt}=ut;!ot&&_!==null&&(dt=this.playbackSpeed>=0?this.currentTime>=h:this.currentTime<=0);const mt=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&dt);return mt&&nt!==inertia&&(ut.value=getFinalKeyframe$1(_e,this.options,st,this.speed)),it&&it(ut.value),mt&&this.finish(),ut}then(i,o){return this.finished.then(i,o)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get iterationDuration(){const{delay:i=0}=this.options||{};return this.duration+millisecondsToSeconds(i)}get time(){return millisecondsToSeconds(this.currentTime)}set time(i){var o;i=secondsToMilliseconds(i),this.currentTime=i,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=i:this.driver&&(this.startTime=this.driver.now()-i/this.playbackSpeed),(o=this.driver)==null||o.start(!1)}get speed(){return this.playbackSpeed}set speed(i){this.updateTime(time$1.now());const o=this.playbackSpeed!==i;this.playbackSpeed=i,o&&(this.time=millisecondsToSeconds(this.currentTime))}play(){var h,g;if(this.isStopped)return;const{driver:i=frameloopDriver,startTime:o}=this.options;this.driver||(this.driver=i(b=>this.tick(b))),(g=(h=this.options).onPlay)==null||g.call(h);const d=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=d):this.holdTime!==null?this.startTime=d-this.holdTime:this.startTime||(this.startTime=o??d),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time$1.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var i,o;this.notifyFinished(),this.teardown(),this.state="finished",(o=(i=this.options).onComplete)==null||o.call(i)}cancel(){var i,o;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(o=(i=this.options).onCancel)==null||o.call(i)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(i){return this.startTime=0,this.tick(i,!0)}attachTimeline(i){var o;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(o=this.driver)==null||o.stop(),i.observe(this)}}function fillWildcards(e){for(let i=1;i<e.length;i++)e[i]??(e[i]=e[i-1])}const radToDeg=e=>e*180/Math.PI,rotate=e=>{const i=radToDeg(Math.atan2(e[1],e[0]));return rebaseAngle(i)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate,rotateZ:rotate,skewX:e=>radToDeg(Math.atan(e[1])),skewY:e=>radToDeg(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},rebaseAngle=e=>(e=e%360,e<0&&(e+=360),e),rotateZ=rotate,scaleX=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),scaleY=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:e=>(scaleX(e)+scaleY(e))/2,rotateX:e=>rebaseAngle(radToDeg(Math.atan2(e[6],e[5]))),rotateY:e=>rebaseAngle(radToDeg(Math.atan2(-e[2],e[0]))),rotateZ,rotate:rotateZ,skewX:e=>radToDeg(Math.atan(e[4])),skewY:e=>radToDeg(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function defaultTransformValue(e){return e.includes("scale")?1:0}function parseValueFromTransform(e,i){if(!e||e==="none")return defaultTransformValue(i);const o=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let d,h;if(o)d=matrix3dParsers,h=o;else{const j=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);d=matrix2dParsers,h=j}if(!h)return defaultTransformValue(i);const g=d[i],b=h[1].split(",").map(convertTransformToNumber);return typeof g=="function"?g(b):b[g]}const readTransformValue=(e,i)=>{const{transform:o="none"}=getComputedStyle(e);return parseValueFromTransform(o,i)};function convertTransformToNumber(e){return parseFloat(e.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=e=>e===number$3||e===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(e=>!transformKeys.has(e));function removeNonTranslationalTransform(e){const i=[];return nonTranslationalTransformKeys.forEach(o=>{const d=e.getValue(o);d!==void 0&&(i.push([o,d.get()]),d.set(o.startsWith("scale")?1:0))}),i}const positionalValues={width:({x:e},{paddingLeft:i="0",paddingRight:o="0"})=>e.max-e.min-parseFloat(i)-parseFloat(o),height:({y:e},{paddingTop:i="0",paddingBottom:o="0"})=>e.max-e.min-parseFloat(i)-parseFloat(o),top:(e,{top:i})=>parseFloat(i),left:(e,{left:i})=>parseFloat(i),bottom:({y:e},{top:i})=>parseFloat(i)+(e.max-e.min),right:({x:e},{left:i})=>parseFloat(i)+(e.max-e.min),x:(e,{transform:i})=>parseValueFromTransform(i,"x"),y:(e,{transform:i})=>parseValueFromTransform(i,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const e=Array.from(toResolve).filter(d=>d.needsMeasurement),i=new Set(e.map(d=>d.element)),o=new Map;i.forEach(d=>{const h=removeNonTranslationalTransform(d);h.length&&(o.set(d,h),d.render())}),e.forEach(d=>d.measureInitialState()),i.forEach(d=>{d.render();const h=o.get(d);h&&h.forEach(([g,b])=>{var j;(j=d.getValue(g))==null||j.set(b)})}),e.forEach(d=>d.measureEndState()),e.forEach(d=>{d.suspendedScrollY!==void 0&&window.scrollTo(0,d.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(e=>e.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(i,o,d,h,g,b=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...i],this.onComplete=o,this.name=d,this.motionValue=h,this.element=g,this.isAsync=b}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:i,name:o,element:d,motionValue:h}=this;if(i[0]===null){const g=h==null?void 0:h.get(),b=i[i.length-1];if(g!==void 0)i[0]=g;else if(d&&o){const j=d.readValue(o,b);j!=null&&(i[0]=j)}i[0]===void 0&&(i[0]=b),h&&g===void 0&&h.set(i[0])}fillWildcards(i)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(i=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,i),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=e=>e.startsWith("--");function setStyle(e,i,o){isCSSVar(i)?e.style.setProperty(i,o):e.style[i]=o}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(e,i){const o=memo(e);return()=>supportsFlags[i]??o()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([e,i,o,d])=>`cubic-bezier(${e}, ${i}, ${o}, ${d})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,i){if(e)return typeof e=="function"?supportsLinearEasing()?generateLinearEasing(e,i):"ease-out":isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(o=>mapEasingToNativeEasing(o,i)||supportedWaapiEasing.easeOut):supportedWaapiEasing[e]}function startWaapiAnimation(e,i,o,{delay:d=0,duration:h=300,repeat:g=0,repeatType:b="loop",ease:j="easeOut",times:_}={},$=void 0){const _e={[i]:o};_&&(_e.offset=_);const et=mapEasingToNativeEasing(j,h);Array.isArray(et)&&(_e.easing=et);const tt={delay:d,duration:h,easing:Array.isArray(et)?"linear":et,fill:"both",iterations:g+1,direction:b==="reverse"?"alternate":"normal"};return $&&(tt.pseudoElement=$),e.animate(_e,tt)}function isGenerator(e){return typeof e=="function"&&"applyToOptions"in e}function applyGeneratorOptions({type:e,...i}){return isGenerator(e)&&supportsLinearEasing()?e.applyToOptions(i):(i.duration??(i.duration=300),i.ease??(i.ease="easeOut"),i)}class NativeAnimation extends WithPromise{constructor(i){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!i)return;const{element:o,name:d,keyframes:h,pseudoElement:g,allowFlatten:b=!1,finalKeyframe:j,onComplete:_}=i;this.isPseudoElement=!!g,this.allowFlatten=b,this.options=i,invariant$1(typeof i.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const $=applyGeneratorOptions(i);this.animation=startWaapiAnimation(o,d,h,$,g),$.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!g){const _e=getFinalKeyframe$1(h,this.options,j,this.speed);this.updateMotionValue?this.updateMotionValue(_e):setStyle(o,d,_e),this.animation.cancel()}_==null||_(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var i,o;(o=(i=this.animation).finish)==null||o.call(i)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:i}=this;i==="idle"||i==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var i,o;this.isPseudoElement||(o=(i=this.animation).commitStyles)==null||o.call(i)}get duration(){var o,d;const i=((d=(o=this.animation.effect)==null?void 0:o.getComputedTiming)==null?void 0:d.call(o).duration)||0;return millisecondsToSeconds(Number(i))}get iterationDuration(){const{delay:i=0}=this.options||{};return this.duration+millisecondsToSeconds(i)}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(i){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(i)}get speed(){return this.animation.playbackRate}set speed(i){i<0&&(this.finishedTime=null),this.animation.playbackRate=i}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(i){this.manualStartTime=this.animation.startTime=i}attachTimeline({timeline:i,observe:o}){var d;return this.allowFlatten&&((d=this.animation.effect)==null||d.updateTiming({easing:"linear"})),this.animation.onfinish=null,i&&supportsScrollTimeline()?(this.animation.timeline=i,noop$6):o(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(e){return e in unsupportedEasingFunctions}function replaceStringEasing(e){typeof e.ease=="string"&&isUnsupportedEase(e.ease)&&(e.ease=unsupportedEasingFunctions[e.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(i){replaceStringEasing(i),replaceTransitionType(i),super(i),i.startTime!==void 0&&(this.startTime=i.startTime),this.options=i}updateMotionValue(i){const{motionValue:o,onUpdate:d,onComplete:h,element:g,...b}=this.options;if(!o)return;if(i!==void 0){o.set(i);return}const j=new JSAnimation({...b,autoplay:!1}),_=Math.max(sampleDelta,time$1.now()-this.startTime),$=clamp(0,sampleDelta,_-sampleDelta);o.setWithVelocity(j.sample(Math.max(0,_-$)).value,j.sample(_).value,$),j.stop()}}const isAnimatable=(e,i)=>i==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(complex.test(e)||e==="0")&&!e.startsWith("url("));function hasKeyframesChanged(e){const i=e[0];if(e.length===1)return!0;for(let o=0;o<e.length;o++)if(e[o]!==i)return!0}function canAnimate(e,i,o,d){const h=e[0];if(h===null)return!1;if(i==="display"||i==="visibility")return!0;const g=e[e.length-1],b=isAnimatable(h,i),j=isAnimatable(g,i);return warning(b===j,`You are trying to animate ${i} from "${h}" to "${g}". "${b?g:h}" is not an animatable value.`,"value-not-animatable"),!b||!j?!1:hasKeyframesChanged(e)||(o==="spring"||isGenerator(o))&&d}function makeAnimationInstant(e){e.duration=0,e.type="keyframes"}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(e){var _e;const{motionValue:i,name:o,repeatDelay:d,repeatType:h,damping:g,type:b}=e;if(!(((_e=i==null?void 0:i.owner)==null?void 0:_e.current)instanceof HTMLElement))return!1;const{onUpdate:_,transformTemplate:$}=i.owner.getProps();return supportsWaapi()&&o&&acceleratedValues.has(o)&&(o!=="transform"||!$)&&!_&&!d&&h!=="mirror"&&g!==0&&b!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:i=!0,delay:o=0,type:d="keyframes",repeat:h=0,repeatDelay:g=0,repeatType:b="loop",keyframes:j,name:_,motionValue:$,element:_e,...et}){var nt;super(),this.stop=()=>{var it,st;this._animation&&(this._animation.stop(),(it=this.stopTimeline)==null||it.call(this)),(st=this.keyframeResolver)==null||st.cancel()},this.createdAt=time$1.now();const tt={autoplay:i,delay:o,type:d,repeat:h,repeatDelay:g,repeatType:b,name:_,motionValue:$,element:_e,...et},rt=(_e==null?void 0:_e.KeyframeResolver)||KeyframeResolver;this.keyframeResolver=new rt(j,(it,st,at)=>this.onKeyframesResolved(it,st,tt,!at),_,$,_e),(nt=this.keyframeResolver)==null||nt.scheduleResolve()}onKeyframesResolved(i,o,d,h){this.keyframeResolver=void 0;const{name:g,type:b,velocity:j,delay:_,isHandoff:$,onUpdate:_e}=d;this.resolvedAt=time$1.now(),canAnimate(i,g,b,j)||((MotionGlobalConfig.instantAnimations||!_)&&(_e==null||_e(getFinalKeyframe$1(i,d,o))),i[0]=i[i.length-1],makeAnimationInstant(d),d.repeat=0);const tt={startTime:h?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:o,...d,keyframes:i},rt=!$&&supportsBrowserAnimation(tt)?new NativeAnimationExtended({...tt,element:tt.motionValue.owner.current}):new JSAnimation(tt);rt.finished.then(()=>this.notifyFinished()).catch(noop$6),this.pendingTimeline&&(this.stopTimeline=rt.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=rt}get finished(){return this._animation?this.animation.finished:this._finished}then(i,o){return this.finished.finally(i).then(()=>{})}get animation(){var i;return this._animation||((i=this.keyframeResolver)==null||i.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(i){this.animation.time=i}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(i){this.animation.speed=i}get startTime(){return this.animation.startTime}attachTimeline(i){return this._animation?this.stopTimeline=this.animation.attachTimeline(i):this.pendingTimeline=i,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var i;this._animation&&this.animation.cancel(),(i=this.keyframeResolver)==null||i.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(e){const i=splitCSSVariableRegex.exec(e);if(!i)return[,];const[,o,d,h]=i;return[`--${o??d}`,h]}const maxDepth=4;function getVariableValue(e,i,o=1){invariant$1(o<=maxDepth,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[d,h]=parseCSSVariable(e);if(!d)return;const g=window.getComputedStyle(i).getPropertyValue(d);if(g){const b=g.trim();return isNumericalString(b)?parseFloat(b):b}return isCSSVariableToken(h)?getVariableValue(h,i,o+1):h}function getValueTransition(e,i){return(e==null?void 0:e[i])??(e==null?void 0:e.default)??e}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(e,{keyframes:i})=>i.length>2?keyframesTransition:transformProps.has(e)?e.startsWith("scale")?criticallyDampedSpring(i[1]):underDampedSpring:ease;function isTransitionDefined({when:e,delay:i,delayChildren:o,staggerChildren:d,staggerDirection:h,repeat:g,repeatType:b,repeatDelay:j,from:_,elapsed:$,..._e}){return!!Object.keys(_e).length}const isNotNull=e=>e!==null;function getFinalKeyframe(e,{repeat:i,repeatType:o="loop"},d){const h=e.filter(isNotNull),g=i&&o!=="loop"&&i%2===1?0:h.length-1;return!g||d===void 0?h[g]:d}function calcChildStagger(e,i,o,d=0,h=1){const g=Array.from(e).sort(($,_e)=>$.sortNodePosition(_e)).indexOf(i),b=e.size,j=(b-1)*d;return typeof o=="function"?o(g,b):h===1?g*d:j-g*d}const animateMotionValue=(e,i,o,d={},h,g)=>b=>{const j=getValueTransition(d,e)||{},_=j.delay||d.delay||0;let{elapsed:$=0}=d;$=$-secondsToMilliseconds(_);const _e={keyframes:Array.isArray(o)?o:[null,o],ease:"easeOut",velocity:i.getVelocity(),...j,delay:-$,onUpdate:tt=>{i.set(tt),j.onUpdate&&j.onUpdate(tt)},onComplete:()=>{b(),j.onComplete&&j.onComplete()},name:e,motionValue:i,element:g?void 0:h};isTransitionDefined(j)||Object.assign(_e,getDefaultTransition(e,_e)),_e.duration&&(_e.duration=secondsToMilliseconds(_e.duration)),_e.repeatDelay&&(_e.repeatDelay=secondsToMilliseconds(_e.repeatDelay)),_e.from!==void 0&&(_e.keyframes[0]=_e.from);let et=!1;if((_e.type===!1||_e.duration===0&&!_e.repeatDelay)&&(makeAnimationInstant(_e),_e.delay===0&&(et=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(et=!0,makeAnimationInstant(_e),_e.delay=0),_e.allowFlatten=!j.type&&!j.ease,et&&!g&&i.get()!==void 0){const tt=getFinalKeyframe(_e.keyframes,j);if(tt!==void 0){frame.update(()=>{_e.onUpdate(tt),_e.onComplete()});return}}return j.isSync?new JSAnimation(_e):new AsyncMotionValueAnimation(_e)},positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),MAX_VELOCITY_DELTA=30,isFloat=e=>!isNaN(parseFloat(e));class MotionValue{constructor(i,o={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=d=>{var g;const h=time$1.now();if(this.updatedAt!==h&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(d),this.current!==this.prev&&((g=this.events.change)==null||g.notify(this.current),this.dependents))for(const b of this.dependents)b.dirty()},this.hasAnimated=!1,this.setCurrent(i),this.owner=o.owner}setCurrent(i){this.current=i,this.updatedAt=time$1.now(),this.canTrackVelocity===null&&i!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(i=this.current){this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt}onChange(i){return this.on("change",i)}on(i,o){this.events[i]||(this.events[i]=new SubscriptionManager);const d=this.events[i].add(o);return i==="change"?()=>{d(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:d}clearListeners(){for(const i in this.events)this.events[i].clear()}attach(i,o){this.passiveEffect=i,this.stopPassiveEffect=o}set(i){this.passiveEffect?this.passiveEffect(i,this.updateAndNotify):this.updateAndNotify(i)}setWithVelocity(i,o,d){this.set(o),this.prev=void 0,this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt-d}jump(i,o=!0){this.updateAndNotify(i),this.prev=i,this.prevUpdatedAt=this.prevFrameValue=void 0,o&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var i;(i=this.events.change)==null||i.notify(this.current)}addDependent(i){this.dependents||(this.dependents=new Set),this.dependents.add(i)}removeDependent(i){this.dependents&&this.dependents.delete(i)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const i=time$1.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||i-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const o=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),o)}start(i){return this.stop(),new Promise(o=>{this.hasAnimated=!0,this.animation=i(o),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var i,o;(i=this.dependents)==null||i.clear(),(o=this.events.destroy)==null||o.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(e,i){return new MotionValue(e,i)}function getValueState(e){const i=[{},{}];return e==null||e.values.forEach((o,d)=>{i[0][d]=o.get(),i[1][d]=o.getVelocity()}),i}function resolveVariantFromProps(e,i,o,d){if(typeof i=="function"){const[h,g]=getValueState(d);i=i(o!==void 0?o:e.custom,h,g)}if(typeof i=="string"&&(i=e.variants&&e.variants[i]),typeof i=="function"){const[h,g]=getValueState(d);i=i(o!==void 0?o:e.custom,h,g)}return i}function resolveVariant(e,i,o){const d=e.getProps();return resolveVariantFromProps(d,i,o!==void 0?o:d.custom,e)}const isKeyframesTarget=e=>Array.isArray(e);function setMotionValue(e,i,o){e.hasValue(i)?e.getValue(i).set(o):e.addValue(i,motionValue(o))}function resolveFinalValueInKeyframes(e){return isKeyframesTarget(e)?e[e.length-1]||0:e}function setTarget(e,i){const o=resolveVariant(e,i);let{transitionEnd:d={},transition:h={},...g}=o||{};g={...g,...d};for(const b in g){const j=resolveFinalValueInKeyframes(g[b]);setMotionValue(e,b,j)}}const isMotionValue=e=>!!(e&&e.getVelocity);function isWillChangeMotionValue(e){return!!(isMotionValue(e)&&e.add)}function addValueToWillChange(e,i){const o=e.getValue("willChange");if(isWillChangeMotionValue(o))return o.add(i);if(!o&&MotionGlobalConfig.WillChange){const d=new MotionGlobalConfig.WillChange("auto");e.addValue("willChange",d),d.add(i)}}function camelToDash(e){return e.replace(/([A-Z])/g,i=>`-${i.toLowerCase()}`)}const optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(e){return e.props[optimizedAppearDataAttribute]}function shouldBlockAnimation({protectedKeys:e,needsAnimating:i},o){const d=e.hasOwnProperty(o)&&i[o]!==!0;return i[o]=!1,d}function animateTarget(e,i,{delay:o=0,transitionOverride:d,type:h}={}){let{transition:g=e.getDefaultTransition(),transitionEnd:b,...j}=i;d&&(g=d);const _=[],$=h&&e.animationState&&e.animationState.getState()[h];for(const _e in j){const et=e.getValue(_e,e.latestValues[_e]??null),tt=j[_e];if(tt===void 0||$&&shouldBlockAnimation($,_e))continue;const rt={delay:o,...getValueTransition(g||{},_e)},nt=et.get();if(nt!==void 0&&!et.isAnimating&&!Array.isArray(tt)&&tt===nt&&!rt.velocity)continue;let it=!1;if(window.MotionHandoffAnimation){const at=getOptimisedAppearId(e);if(at){const ot=window.MotionHandoffAnimation(at,_e,frame);ot!==null&&(rt.startTime=ot,it=!0)}}addValueToWillChange(e,_e),et.start(animateMotionValue(_e,et,tt,e.shouldReduceMotion&&positionalKeys.has(_e)?{type:!1}:rt,e,it));const st=et.animation;st&&_.push(st)}return b&&Promise.all(_).then(()=>{frame.update(()=>{b&&setTarget(e,b)})}),_}function animateVariant(e,i,o={}){var _;const d=resolveVariant(e,i,o.type==="exit"?(_=e.presenceContext)==null?void 0:_.custom:void 0);let{transition:h=e.getDefaultTransition()||{}}=d||{};o.transitionOverride&&(h=o.transitionOverride);const g=d?()=>Promise.all(animateTarget(e,d,o)):()=>Promise.resolve(),b=e.variantChildren&&e.variantChildren.size?($=0)=>{const{delayChildren:_e=0,staggerChildren:et,staggerDirection:tt}=h;return animateChildren(e,i,$,_e,et,tt,o)}:()=>Promise.resolve(),{when:j}=h;if(j){const[$,_e]=j==="beforeChildren"?[g,b]:[b,g];return $().then(()=>_e())}else return Promise.all([g(),b(o.delay)])}function animateChildren(e,i,o=0,d=0,h=0,g=1,b){const j=[];for(const _ of e.variantChildren)_.notify("AnimationStart",i),j.push(animateVariant(_,i,{...b,delay:o+(typeof d=="function"?0:d)+calcChildStagger(e.variantChildren,_,d,h,g)}).then(()=>_.notify("AnimationComplete",i)));return Promise.all(j)}function animateVisualElement(e,i,o={}){e.notify("AnimationStart",i);let d;if(Array.isArray(i)){const h=i.map(g=>animateVariant(e,g,o));d=Promise.all(h)}else if(typeof i=="string")d=animateVariant(e,i,o);else{const h=typeof i=="function"?resolveVariant(e,i,o.custom):i;d=Promise.all(animateTarget(e,h,o))}return d.then(()=>{e.notify("AnimationComplete",i)})}const auto={test:e=>e==="auto",parse:e=>e},testValueType=e=>i=>i.test(e),dimensionValueTypes=[number$3,px,percent,degrees,vw,vh,auto],findDimensionValueType=e=>dimensionValueTypes.find(testValueType(e));function isNone(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||isZeroValueString(e):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){const[i,o]=e.slice(0,-1).split("(");if(i==="drop-shadow")return e;const[d]=o.match(floatRegex)||[];if(!d)return e;const h=o.replace(d,"");let g=maxDefaults.has(i)?1:0;return d!==o&&(g*=100),i+"("+g+h+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:e=>{const i=e.match(functionRegex);return i?i.map(applyDefaultFilter).join(" "):e}},int={...number$3,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha$1,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,inset:px,insetBlock:px,insetBlockStart:px,insetBlockEnd:px,insetInline:px,insetInlineStart:px,insetInlineEnd:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,paddingBlock:px,paddingBlockStart:px,paddingBlockEnd:px,paddingInline:px,paddingInlineStart:px,paddingInlineEnd:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,marginBlock:px,marginBlockStart:px,marginBlockEnd:px,marginInline:px,marginInlineStart:px,marginInlineEnd:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha$1,strokeOpacity:alpha$1,numOctaves:int},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter,WebkitFilter:filter},getDefaultValueType=e=>defaultValueTypes[e];function getAnimatableNone(e,i){let o=getDefaultValueType(e);return o!==filter&&(o=complex),o.getAnimatableNone?o.getAnimatableNone(i):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(e,i,o){let d=0,h;for(;d<e.length&&!h;){const g=e[d];typeof g=="string"&&!invalidTemplates.has(g)&&analyseComplexValue(g).values.length&&(h=e[d]),d++}if(h&&o)for(const g of i)e[g]=getAnimatableNone(o,h)}class DOMKeyframesResolver extends KeyframeResolver{constructor(i,o,d,h,g){super(i,o,d,h,g,!0)}readKeyframes(){const{unresolvedKeyframes:i,element:o,name:d}=this;if(!o||!o.current)return;super.readKeyframes();for(let _e=0;_e<i.length;_e++){let et=i[_e];if(typeof et=="string"&&(et=et.trim(),isCSSVariableToken(et))){const tt=getVariableValue(et,o.current);tt!==void 0&&(i[_e]=tt),_e===i.length-1&&(this.finalKeyframe=et)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(d)||i.length!==2)return;const[h,g]=i,b=findDimensionValueType(h),j=findDimensionValueType(g),_=containsCSSVariable(h),$=containsCSSVariable(g);if(_!==$&&positionalValues[d]){this.needsMeasurement=!0;return}if(b!==j)if(isNumOrPxType(b)&&isNumOrPxType(j))for(let _e=0;_e<i.length;_e++){const et=i[_e];typeof et=="string"&&(i[_e]=parseFloat(et))}else positionalValues[d]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:i,name:o}=this,d=[];for(let h=0;h<i.length;h++)(i[h]===null||isNone(i[h]))&&d.push(h);d.length&&makeNoneKeyframesAnimatable(i,d,o)}measureInitialState(){const{element:i,unresolvedKeyframes:o,name:d}=this;if(!i||!i.current)return;d==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[d](i.measureViewportBox(),window.getComputedStyle(i.current)),o[0]=this.measuredOrigin;const h=o[o.length-1];h!==void 0&&i.getValue(d,h).jump(h,!1)}measureEndState(){var j;const{element:i,name:o,unresolvedKeyframes:d}=this;if(!i||!i.current)return;const h=i.getValue(o);h&&h.jump(this.measuredOrigin,!1);const g=d.length-1,b=d[g];d[g]=positionalValues[o](i.measureViewportBox(),window.getComputedStyle(i.current)),b!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=b),(j=this.removedTransforms)!=null&&j.length&&this.removedTransforms.forEach(([_,$])=>{i.getValue(_).set($)}),this.resolveNoneKeyframes()}}function resolveElements(e,i,o){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const h=document.querySelectorAll(e);return h?Array.from(h):[]}return Array.from(e)}const getValueAsType=(e,i)=>i&&typeof e=="number"?i.transform(e):e;function isHTMLElement(e){return isObject$1(e)&&"offsetHeight"in e}const{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(e){return e==="x"||e==="y"?isDragging[e]?null:(isDragging[e]=!0,()=>{isDragging[e]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(e,i){const o=resolveElements(e),d=new AbortController,h={passive:!0,...i,signal:d.signal};return[o,h,()=>d.abort()]}function isValidHover(e){return!(e.pointerType==="touch"||isDragActive())}function hover(e,i,o={}){const[d,h,g]=setupGesture(e,o),b=j=>{if(!isValidHover(j))return;const{target:_}=j,$=i(_,j);if(typeof $!="function"||!_)return;const _e=et=>{isValidHover(et)&&($(et),_.removeEventListener("pointerleave",_e))};_.addEventListener("pointerleave",_e,h)};return d.forEach(j=>{j.addEventListener("pointerenter",b,h)}),g}const isNodeOrChild=(e,i)=>i?e===i?!0:isNodeOrChild(e,i.parentElement):!1,isPrimaryPointer=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,interactiveElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(e){return interactiveElements.has(e.tagName)||e.isContentEditable===!0}const isPressing=new WeakSet;function filterEvents(e){return i=>{i.key==="Enter"&&e(i)}}function firePointerEvent(e,i){e.dispatchEvent(new PointerEvent("pointer"+i,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(e,i)=>{const o=e.currentTarget;if(!o)return;const d=filterEvents(()=>{if(isPressing.has(o))return;firePointerEvent(o,"down");const h=filterEvents(()=>{firePointerEvent(o,"up")}),g=()=>firePointerEvent(o,"cancel");o.addEventListener("keyup",h,i),o.addEventListener("blur",g,i)});o.addEventListener("keydown",d,i),o.addEventListener("blur",()=>o.removeEventListener("keydown",d),i)};function isValidPressEvent(e){return isPrimaryPointer(e)&&!isDragActive()}function press(e,i,o={}){const[d,h,g]=setupGesture(e,o),b=j=>{const _=j.currentTarget;if(!isValidPressEvent(j))return;isPressing.add(_);const $=i(_,j),_e=(rt,nt)=>{window.removeEventListener("pointerup",et),window.removeEventListener("pointercancel",tt),isPressing.has(_)&&isPressing.delete(_),isValidPressEvent(rt)&&typeof $=="function"&&$(rt,{success:nt})},et=rt=>{_e(rt,_===window||_===document||o.useGlobalTarget||isNodeOrChild(_,rt.target))},tt=rt=>{_e(rt,!1)};window.addEventListener("pointerup",et,h),window.addEventListener("pointercancel",tt,h)};return d.forEach(j=>{(o.useGlobalTarget?window:j).addEventListener("pointerdown",b,h),isHTMLElement(j)&&(j.addEventListener("focus",$=>enableKeyboardPress($,h)),!isElementKeyboardAccessible(j)&&!j.hasAttribute("tabindex")&&(j.tabIndex=0))}),g}function isSVGElement(e){return isObject$1(e)&&"ownerSVGElement"in e}function isSVGSVGElement(e){return isSVGElement(e)&&e.tagName==="svg"}const valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=e=>valueTypes.find(testValueType(e)),createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1},isBrowser$1=typeof window<"u";function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),i=()=>prefersReducedMotion.current=e.matches;e.addEventListener("change",i),i()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function isAnimationControls(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function isVariantLabel(e){return typeof e=="string"||Array.isArray(e)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(i=>isVariantLabel(e[i]))}function isVariantNode(e){return!!(isControllingVariants(e)||e.variants)}function updateMotionValuesFromProps(e,i,o){for(const d in i){const h=i[d],g=o[d];if(isMotionValue(h))e.addValue(d,h);else if(isMotionValue(g))e.addValue(d,motionValue(h,{owner:e}));else if(g!==h)if(e.hasValue(d)){const b=e.getValue(d);b.liveStyle===!0?b.jump(h):b.hasAnimated||b.set(h)}else{const b=e.getStaticValue(d);e.addValue(d,motionValue(b!==void 0?b:h,{owner:e}))}}for(const d in o)i[d]===void 0&&e.removeValue(d);return i}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let featureDefinitions={};function setFeatureDefinitions(e){featureDefinitions=e}function getFeatureDefinitions(){return featureDefinitions}class VisualElement{scrapeMotionValuesFromProps(i,o,d){return{}}constructor({parent:i,props:o,presenceContext:d,reducedMotionConfig:h,blockInitialAnimation:g,visualState:b},j={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const tt=time$1.now();this.renderScheduledAt<tt&&(this.renderScheduledAt=tt,frame.render(this.render,!1,!0))};const{latestValues:_,renderState:$}=b;this.latestValues=_,this.baseTarget={..._},this.initialValues=o.initial?{..._}:{},this.renderState=$,this.parent=i,this.props=o,this.presenceContext=d,this.depth=i?i.depth+1:0,this.reducedMotionConfig=h,this.options=j,this.blockInitialAnimation=!!g,this.isControllingVariants=isControllingVariants(o),this.isVariantNode=isVariantNode(o),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(i&&i.current);const{willChange:_e,...et}=this.scrapeMotionValuesFromProps(o,{},this);for(const tt in et){const rt=et[tt];_[tt]!==void 0&&isMotionValue(rt)&&rt.set(_[tt])}}mount(i){var o;this.current=i,visualElementStore.set(i,this),this.projection&&!this.projection.instance&&this.projection.mount(i),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((d,h)=>this.bindToMotionValue(h,d)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=prefersReducedMotion.current),(o=this.parent)==null||o.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var i;this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(o=>o()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(i=this.parent)==null||i.removeChild(this);for(const o in this.events)this.events[o].clear();for(const o in this.features){const d=this.features[o];d&&(d.unmount(),d.isMounted=!1)}this.current=null}addChild(i){this.children.add(i),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(i)}removeChild(i){this.children.delete(i),this.enteringChildren&&this.enteringChildren.delete(i)}bindToMotionValue(i,o){this.valueSubscriptions.has(i)&&this.valueSubscriptions.get(i)();const d=transformProps.has(i);d&&this.onBindTransform&&this.onBindTransform();const h=o.on("change",b=>{this.latestValues[i]=b,this.props.onUpdate&&frame.preRender(this.notifyUpdate),d&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let g;typeof window<"u"&&window.MotionCheckAppearSync&&(g=window.MotionCheckAppearSync(this,i,o)),this.valueSubscriptions.set(i,()=>{h(),g&&g(),o.owner&&o.stop()})}sortNodePosition(i){return!this.current||!this.sortInstanceNodePosition||this.type!==i.type?0:this.sortInstanceNodePosition(this.current,i.current)}updateFeatures(){let i="animation";for(i in featureDefinitions){const o=featureDefinitions[i];if(!o)continue;const{isEnabled:d,Feature:h}=o;if(!this.features[i]&&h&&d(this.props)&&(this.features[i]=new h(this)),this.features[i]){const g=this.features[i];g.isMounted?g.update():(g.mount(),g.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(i){return this.latestValues[i]}setStaticValue(i,o){this.latestValues[i]=o}update(i,o){(i.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=i,this.prevPresenceContext=this.presenceContext,this.presenceContext=o;for(let d=0;d<propEventHandlers.length;d++){const h=propEventHandlers[d];this.propEventSubscriptions[h]&&(this.propEventSubscriptions[h](),delete this.propEventSubscriptions[h]);const g="on"+h,b=i[g];b&&(this.propEventSubscriptions[h]=this.on(h,b))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(i,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(i){return this.props.variants?this.props.variants[i]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(i){const o=this.getClosestVariantNode();if(o)return o.variantChildren&&o.variantChildren.add(i),()=>o.variantChildren.delete(i)}addValue(i,o){const d=this.values.get(i);o!==d&&(d&&this.removeValue(i),this.bindToMotionValue(i,o),this.values.set(i,o),this.latestValues[i]=o.get())}removeValue(i){this.values.delete(i);const o=this.valueSubscriptions.get(i);o&&(o(),this.valueSubscriptions.delete(i)),delete this.latestValues[i],this.removeValueFromRenderState(i,this.renderState)}hasValue(i){return this.values.has(i)}getValue(i,o){if(this.props.values&&this.props.values[i])return this.props.values[i];let d=this.values.get(i);return d===void 0&&o!==void 0&&(d=motionValue(o===null?void 0:o,{owner:this}),this.addValue(i,d)),d}readValue(i,o){let d=this.latestValues[i]!==void 0||!this.current?this.latestValues[i]:this.getBaseTargetFromProps(this.props,i)??this.readValueFromInstance(this.current,i,this.options);return d!=null&&(typeof d=="string"&&(isNumericalString(d)||isZeroValueString(d))?d=parseFloat(d):!findValueType(d)&&complex.test(o)&&(d=getAnimatableNone(i,o)),this.setBaseTarget(i,isMotionValue(d)?d.get():d)),isMotionValue(d)?d.get():d}setBaseTarget(i,o){this.baseTarget[i]=o}getBaseTarget(i){var g;const{initial:o}=this.props;let d;if(typeof o=="string"||typeof o=="object"){const b=resolveVariantFromProps(this.props,o,(g=this.presenceContext)==null?void 0:g.custom);b&&(d=b[i])}if(o&&d!==void 0)return d;const h=this.getBaseTargetFromProps(this.props,i);return h!==void 0&&!isMotionValue(h)?h:this.initialValues[i]!==void 0&&d===void 0?void 0:this.baseTarget[i]}on(i,o){return this.events[i]||(this.events[i]=new SubscriptionManager),this.events[i].add(o)}notify(i,...o){this.events[i]&&this.events[i].notify(...o)}scheduleRenderMicrotask(){microtask.render(this.render)}}class Feature{constructor(i){this.isMounted=!1,this.node=i}update(){}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(i,o){return i.compareDocumentPosition(o)&2?1:-1}getBaseTargetFromProps(i,o){const d=i.style;return d?d[o]:void 0}removeValueFromRenderState(i,{vars:o,style:d}){delete o[i],delete d[i]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:i}=this.props;isMotionValue(i)&&(this.childSubscription=i.on("change",o=>{this.current&&(this.current.textContent=`${o}`)}))}}function convertBoundingBoxToBox({top:e,left:i,right:o,bottom:d}){return{x:{min:i,max:o},y:{min:e,max:d}}}function convertBoxToBoundingBox({x:e,y:i}){return{top:i.min,right:e.max,bottom:i.max,left:e.min}}function transformBoxPoints(e,i){if(!i)return e;const o=i({x:e.left,y:e.top}),d=i({x:e.right,y:e.bottom});return{top:o.y,left:o.x,bottom:d.y,right:d.x}}function isIdentityScale(e){return e===void 0||e===1}function hasScale({scale:e,scaleX:i,scaleY:o}){return!isIdentityScale(e)||!isIdentityScale(i)||!isIdentityScale(o)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&e!=="0%"}function scalePoint(e,i,o){const d=e-o,h=i*d;return o+h}function applyPointDelta(e,i,o,d,h){return h!==void 0&&(e=scalePoint(e,h,d)),scalePoint(e,o,d)+i}function applyAxisDelta(e,i=0,o=1,d,h){e.min=applyPointDelta(e.min,i,o,d,h),e.max=applyPointDelta(e.max,i,o,d,h)}function applyBoxDelta(e,{x:i,y:o}){applyAxisDelta(e.x,i.translate,i.scale,i.originPoint),applyAxisDelta(e.y,o.translate,o.scale,o.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(e,i,o,d=!1){const h=o.length;if(!h)return;i.x=i.y=1;let g,b;for(let j=0;j<h;j++){g=o[j],b=g.projectionDelta;const{visualElement:_}=g.options;_&&_.props.style&&_.props.style.display==="contents"||(d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&transformBox(e,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),b&&(i.x*=b.x.scale,i.y*=b.y.scale,applyBoxDelta(e,b)),d&&hasTransform(g.latestValues)&&transformBox(e,g.latestValues))}i.x<TREE_SCALE_SNAP_MAX&&i.x>TREE_SCALE_SNAP_MIN&&(i.x=1),i.y<TREE_SCALE_SNAP_MAX&&i.y>TREE_SCALE_SNAP_MIN&&(i.y=1)}function translateAxis(e,i){e.min=e.min+i,e.max=e.max+i}function transformAxis(e,i,o,d,h=.5){const g=mixNumber$1(e.min,e.max,h);applyAxisDelta(e,i,o,g,d)}function transformBox(e,i){transformAxis(e.x,i.x,i.scaleX,i.scale,i.originX),transformAxis(e.y,i.y,i.scaleY,i.scale,i.originY)}function measureViewportBox(e,i){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),i))}function measurePageBox(e,i,o){const d=measureViewportBox(e,o),{scroll:h}=i;return h&&(translateAxis(d.x,h.offset.x),translateAxis(d.y,h.offset.y)),d}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(e,i,o){let d="",h=!0;for(let g=0;g<numTransforms;g++){const b=transformPropOrder[g],j=e[b];if(j===void 0)continue;let _=!0;if(typeof j=="number"?_=j===(b.startsWith("scale")?1:0):_=parseFloat(j)===0,!_||o){const $=getValueAsType(j,numberValueTypes[b]);if(!_){h=!1;const _e=translateAlias[b]||b;d+=`${_e}(${$}) `}o&&(i[b]=$)}}return d=d.trim(),o?d=o(i,h?"":d):h&&(d="none"),d}function buildHTMLStyles(e,i,o){const{style:d,vars:h,transformOrigin:g}=e;let b=!1,j=!1;for(const _ in i){const $=i[_];if(transformProps.has(_)){b=!0;continue}else if(isCSSVariableName(_)){h[_]=$;continue}else{const _e=getValueAsType($,numberValueTypes[_]);_.startsWith("origin")?(j=!0,g[_]=_e):d[_]=_e}}if(i.transform||(b||o?d.transform=buildTransform(i,e.transform,o):d.transform&&(d.transform="none")),j){const{originX:_="50%",originY:$="50%",originZ:_e=0}=g;d.transformOrigin=`${_} ${$} ${_e}`}}function renderHTML(e,{style:i,vars:o},d,h){const g=e.style;let b;for(b in i)g[b]=i[b];h==null||h.applyProjectionStyles(g,d);for(b in o)g.setProperty(b,o[b])}function pixelsToPercent(e,i){return i.max===i.min?0:e/(i.max-i.min)*100}const correctBorderRadius={correct:(e,i)=>{if(!i.target)return e;if(typeof e=="string")if(px.test(e))e=parseFloat(e);else return e;const o=pixelsToPercent(e,i.target.x),d=pixelsToPercent(e,i.target.y);return`${o}% ${d}%`}},correctBoxShadow={correct:(e,{treeScale:i,projectionDelta:o})=>{const d=e,h=complex.parse(e);if(h.length>5)return d;const g=complex.createTransformer(e),b=typeof h[0]!="number"?1:0,j=o.x.scale*i.x,_=o.y.scale*i.y;h[0+b]/=j,h[1+b]/=_;const $=mixNumber$1(j,_,.5);return typeof h[2+b]=="number"&&(h[2+b]/=$),typeof h[3+b]=="number"&&(h[3+b]/=$),g(h)}},scaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function isForcedMotionValue(e,{layout:i,layoutId:o}){return transformProps.has(e)||e.startsWith("origin")||(i||o!==void 0)&&(!!scaleCorrectors[e]||e==="opacity")}function scrapeMotionValuesFromProps$1(e,i,o){var b;const d=e.style,h=i==null?void 0:i.style,g={};if(!d)return g;for(const j in d)(isMotionValue(d[j])||h&&isMotionValue(h[j])||isForcedMotionValue(j,e)||((b=o==null?void 0:o.getValue(j))==null?void 0:b.liveStyle)!==void 0)&&(g[j]=d[j]);return g}function getComputedStyle$1(e){return window.getComputedStyle(e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(i,o){var d;if(transformProps.has(o))return(d=this.projection)!=null&&d.isProjecting?defaultTransformValue(o):readTransformValue(i,o);{const h=getComputedStyle$1(i),g=(isCSSVariableName(o)?h.getPropertyValue(o):h[o])||0;return typeof g=="string"?g.trim():g}}measureInstanceViewportBox(i,{transformPagePoint:o}){return measureViewportBox(i,o)}build(i,o,d){buildHTMLStyles(i,o,d.transformTemplate)}scrapeMotionValuesFromProps(i,o,d){return scrapeMotionValuesFromProps$1(i,o,d)}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(e,i,o=1,d=0,h=!0){e.pathLength=1;const g=h?dashKeys:camelKeys;e[g.offset]=px.transform(-d);const b=px.transform(i),j=px.transform(o);e[g.array]=`${b} ${j}`}const cssMotionPathProperties=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function buildSVGAttrs(e,{attrX:i,attrY:o,attrScale:d,pathLength:h,pathSpacing:g=1,pathOffset:b=0,...j},_,$,_e){if(buildHTMLStyles(e,j,$),_){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:et,style:tt}=e;et.transform&&(tt.transform=et.transform,delete et.transform),(tt.transform||et.transformOrigin)&&(tt.transformOrigin=et.transformOrigin??"50% 50%",delete et.transformOrigin),tt.transform&&(tt.transformBox=(_e==null?void 0:_e.transformBox)??"fill-box",delete et.transformBox);for(const rt of cssMotionPathProperties)et[rt]!==void 0&&(tt[rt]=et[rt],delete et[rt]);i!==void 0&&(et.x=i),o!==void 0&&(et.y=o),d!==void 0&&(et.scale=d),h!==void 0&&buildSVGPath(et,h,g,b,!1)}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),isSVGTag=e=>typeof e=="string"&&e.toLowerCase()==="svg";function renderSVG(e,i,o,d){renderHTML(e,i,void 0,d);for(const h in i.attrs)e.setAttribute(camelCaseAttributes.has(h)?h:camelToDash(h),i.attrs[h])}function scrapeMotionValuesFromProps(e,i,o){const d=scrapeMotionValuesFromProps$1(e,i,o);for(const h in e)if(isMotionValue(e[h])||isMotionValue(i[h])){const g=transformPropOrder.indexOf(h)!==-1?"attr"+h.charAt(0).toUpperCase()+h.substring(1):h;d[g]=e[h]}return d}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(i,o){return i[o]}readValueFromInstance(i,o){if(transformProps.has(o)){const d=getDefaultValueType(o);return d&&d.default||0}return o=camelCaseAttributes.has(o)?o:camelToDash(o),i.getAttribute(o)}scrapeMotionValuesFromProps(i,o,d){return scrapeMotionValuesFromProps(i,o,d)}build(i,o,d){buildSVGAttrs(i,o,this.isSVGTag,d.transformTemplate,d.style)}renderInstance(i,o,d,h){renderSVG(i,o,d,h)}mount(i){this.isSVGTag=isSVGTag(i.tagName),super.mount(i)}}const numVariantProps=variantProps.length;function getVariantContext(e){if(!e)return;if(!e.isControllingVariants){const o=e.parent?getVariantContext(e.parent)||{}:{};return e.props.initial!==void 0&&(o.initial=e.props.initial),o}const i={};for(let o=0;o<numVariantProps;o++){const d=variantProps[o],h=e.props[d];(isVariantLabel(h)||h===!1)&&(i[d]=h)}return i}function shallowCompare(e,i){if(!Array.isArray(i))return!1;const o=i.length;if(o!==e.length)return!1;for(let d=0;d<o;d++)if(i[d]!==e[d])return!1;return!0}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function createAnimateFunction(e){return i=>Promise.all(i.map(({animation:o,options:d})=>animateVisualElement(e,o,d)))}function createAnimationState(e){let i=createAnimateFunction(e),o=createState(),d=!0;const h=_=>($,_e)=>{var tt;const et=resolveVariant(e,_e,_==="exit"?(tt=e.presenceContext)==null?void 0:tt.custom:void 0);if(et){const{transition:rt,transitionEnd:nt,...it}=et;$={...$,...it,...nt}}return $};function g(_){i=_(e)}function b(_){const{props:$}=e,_e=getVariantContext(e.parent)||{},et=[],tt=new Set;let rt={},nt=1/0;for(let st=0;st<numAnimationTypes;st++){const at=reversePriorityOrder[st],ot=o[at],lt=$[at]!==void 0?$[at]:_e[at],ct=isVariantLabel(lt),ut=at===_?ot.isActive:null;ut===!1&&(nt=st);let dt=lt===_e[at]&&lt!==$[at]&&ct;if(dt&&d&&e.manuallyAnimateOnMount&&(dt=!1),ot.protectedKeys={...rt},!ot.isActive&&ut===null||!lt&&!ot.prevProp||isAnimationControls(lt)||typeof lt=="boolean")continue;const mt=checkVariantsDidChange(ot.prevProp,lt);let xt=mt||at===_&&ot.isActive&&!dt&&ct||st>nt&&ct,ft=!1;const gt=Array.isArray(lt)?lt:[lt];let pt=gt.reduce(h(at),{});ut===!1&&(pt={});const{prevResolvedValues:yt={}}=ot,bt={...yt,...pt},St=Et=>{xt=!0,tt.has(Et)&&(ft=!0,tt.delete(Et)),ot.needsAnimating[Et]=!0;const jt=e.getValue(Et);jt&&(jt.liveStyle=!1)};for(const Et in bt){const jt=pt[Et],Rt=yt[Et];if(rt.hasOwnProperty(Et))continue;let At=!1;isKeyframesTarget(jt)&&isKeyframesTarget(Rt)?At=!shallowCompare(jt,Rt):At=jt!==Rt,At?jt!=null?St(Et):tt.add(Et):jt!==void 0&&tt.has(Et)?St(Et):ot.protectedKeys[Et]=!0}ot.prevProp=lt,ot.prevResolvedValues=pt,ot.isActive&&(rt={...rt,...pt}),d&&e.blockInitialAnimation&&(xt=!1);const wt=dt&&mt;xt&&(!wt||ft)&&et.push(...gt.map(Et=>{const jt={type:at};if(typeof Et=="string"&&d&&!wt&&e.manuallyAnimateOnMount&&e.parent){const{parent:Rt}=e,At=resolveVariant(Rt,Et);if(Rt.enteringChildren&&At){const{delayChildren:Dt}=At.transition||{};jt.delay=calcChildStagger(Rt.enteringChildren,e,Dt)}}return{animation:Et,options:jt}}))}if(tt.size){const st={};if(typeof $.initial!="boolean"){const at=resolveVariant(e,Array.isArray($.initial)?$.initial[0]:$.initial);at&&at.transition&&(st.transition=at.transition)}tt.forEach(at=>{const ot=e.getBaseTarget(at),lt=e.getValue(at);lt&&(lt.liveStyle=!0),st[at]=ot??null}),et.push({animation:st})}let it=!!et.length;return d&&($.initial===!1||$.initial===$.animate)&&!e.manuallyAnimateOnMount&&(it=!1),d=!1,it?i(et):Promise.resolve()}function j(_,$){var et;if(o[_].isActive===$)return Promise.resolve();(et=e.variantChildren)==null||et.forEach(tt=>{var rt;return(rt=tt.animationState)==null?void 0:rt.setActive(_,$)}),o[_].isActive=$;const _e=b(_);for(const tt in o)o[tt].protectedKeys={};return _e}return{animateChanges:b,setActive:j,setAnimateFunction:g,getState:()=>o,reset:()=>{o=createState()}}}function checkVariantsDidChange(e,i){return typeof i=="string"?i!==e:Array.isArray(i)?!shallowCompare(i,e):!1}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(e){return e.max-e.min}function isNear(e,i,o){return Math.abs(e-i)<=o}function calcAxisDelta(e,i,o,d=.5){e.origin=d,e.originPoint=mixNumber$1(i.min,i.max,e.origin),e.scale=calcLength(o)/calcLength(i),e.translate=mixNumber$1(o.min,o.max,e.origin)-e.originPoint,(e.scale>=SCALE_MIN&&e.scale<=SCALE_MAX||isNaN(e.scale))&&(e.scale=1),(e.translate>=TRANSLATE_MIN&&e.translate<=TRANSLATE_MAX||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,i,o,d){calcAxisDelta(e.x,i.x,o.x,d?d.originX:void 0),calcAxisDelta(e.y,i.y,o.y,d?d.originY:void 0)}function calcRelativeAxis(e,i,o){e.min=o.min+i.min,e.max=e.min+calcLength(i)}function calcRelativeBox(e,i,o){calcRelativeAxis(e.x,i.x,o.x),calcRelativeAxis(e.y,i.y,o.y)}function calcRelativeAxisPosition(e,i,o){e.min=i.min-o.min,e.max=e.min+calcLength(i)}function calcRelativePosition(e,i,o){calcRelativeAxisPosition(e.x,i.x,o.x),calcRelativeAxisPosition(e.y,i.y,o.y)}function removePointDelta(e,i,o,d,h){return e-=i,e=scalePoint(e,1/o,d),h!==void 0&&(e=scalePoint(e,1/h,d)),e}function removeAxisDelta(e,i=0,o=1,d=.5,h,g=e,b=e){if(percent.test(i)&&(i=parseFloat(i),i=mixNumber$1(b.min,b.max,i/100)-b.min),typeof i!="number")return;let j=mixNumber$1(g.min,g.max,d);e===g&&(j-=i),e.min=removePointDelta(e.min,i,o,j,h),e.max=removePointDelta(e.max,i,o,j,h)}function removeAxisTransforms(e,i,[o,d,h],g,b){removeAxisDelta(e,i[o],i[d],i[h],i.scale,g,b)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(e,i,o,d){removeAxisTransforms(e.x,i,xKeys,o?o.x:void 0,d?d.x:void 0),removeAxisTransforms(e.y,i,yKeys,o?o.y:void 0,d?d.y:void 0)}function copyAxisInto(e,i){e.min=i.min,e.max=i.max}function copyBoxInto(e,i){copyAxisInto(e.x,i.x),copyAxisInto(e.y,i.y)}function copyAxisDeltaInto(e,i){e.translate=i.translate,e.scale=i.scale,e.originPoint=i.originPoint,e.origin=i.origin}function isAxisDeltaZero(e){return e.translate===0&&e.scale===1}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function axisEquals(e,i){return e.min===i.min&&e.max===i.max}function boxEquals(e,i){return axisEquals(e.x,i.x)&&axisEquals(e.y,i.y)}function axisEqualsRounded(e,i){return Math.round(e.min)===Math.round(i.min)&&Math.round(e.max)===Math.round(i.max)}function boxEqualsRounded(e,i){return axisEqualsRounded(e.x,i.x)&&axisEqualsRounded(e.y,i.y)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}function axisDeltaEquals(e,i){return e.translate===i.translate&&e.scale===i.scale&&e.originPoint===i.originPoint}function eachAxis(e){return[e("x"),e("y")]}function buildProjectionTransform(e,i,o){let d="";const h=e.x.translate/i.x,g=e.y.translate/i.y,b=(o==null?void 0:o.z)||0;if((h||g||b)&&(d=`translate3d(${h}px, ${g}px, ${b}px) `),(i.x!==1||i.y!==1)&&(d+=`scale(${1/i.x}, ${1/i.y}) `),o){const{transformPerspective:$,rotate:_e,rotateX:et,rotateY:tt,skewX:rt,skewY:nt}=o;$&&(d=`perspective(${$}px) ${d}`),_e&&(d+=`rotate(${_e}deg) `),et&&(d+=`rotateX(${et}deg) `),tt&&(d+=`rotateY(${tt}deg) `),rt&&(d+=`skewX(${rt}deg) `),nt&&(d+=`skewY(${nt}deg) `)}const j=e.x.scale*i.x,_=e.y.scale*i.y;return(j!==1||_!==1)&&(d+=`scale(${j}, ${_})`),d||"none"}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=e=>typeof e=="string"?parseFloat(e):e,isPx=e=>typeof e=="number"||px.test(e);function mixValues(e,i,o,d,h,g){h?(e.opacity=mixNumber$1(0,o.opacity??1,easeCrossfadeIn(d)),e.opacityExit=mixNumber$1(i.opacity??1,0,easeCrossfadeOut(d))):g&&(e.opacity=mixNumber$1(i.opacity??1,o.opacity??1,d));for(let b=0;b<numBorders;b++){const j=`border${borders[b]}Radius`;let _=getRadius(i,j),$=getRadius(o,j);if(_===void 0&&$===void 0)continue;_||(_=0),$||($=0),_===0||$===0||isPx(_)===isPx($)?(e[j]=Math.max(mixNumber$1(asNumber(_),asNumber($),d),0),(percent.test($)||percent.test(_))&&(e[j]+="%")):e[j]=$}(i.rotate||o.rotate)&&(e.rotate=mixNumber$1(i.rotate||0,o.rotate||0,d))}function getRadius(e,i){return e[i]!==void 0?e[i]:e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$6);function compress(e,i,o){return d=>d<e?0:d>i?1:o(progress(e,i,d))}function delay(e,i){const o=time$1.now(),d=({timestamp:h})=>{const g=h-o;g>=i&&(cancelFrame(d),e(g-i))};return frame.setup(d,!0),()=>cancelFrame(d)}function addDomEvent(e,i,o,d={passive:!0}){return e.addEventListener(i,o,d),()=>e.removeEventListener(i,o)}function resolveMotionValue(e){return isMotionValue(e)?e.get():e}function animateSingleValue(e,i,o){const d=isMotionValue(e)?e:motionValue(e);return d.start(animateMotionValue("",d,i,o)),d.animation}const compareByDepth=(e,i)=>e.depth-i.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(i){addUniqueItem(this.children,i),this.isDirty=!0}remove(i){removeItem(this.children,i),this.isDirty=!0}forEach(i){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(i)}}class NodeStack{constructor(){this.members=[]}add(i){addUniqueItem(this.members,i),i.scheduleRender()}remove(i){if(removeItem(this.members,i),i===this.prevLead&&(this.prevLead=void 0),i===this.lead){const o=this.members[this.members.length-1];o&&this.promote(o)}}relegate(i){const o=this.members.findIndex(h=>i===h);if(o===0)return!1;let d;for(let h=o;h>=0;h--){const g=this.members[h];if(g.isPresent!==!1){d=g;break}}return d?(this.promote(d),!0):!1}promote(i,o){const d=this.lead;if(i!==d&&(this.prevLead=d,this.lead=i,i.show(),d)){d.instance&&d.scheduleRender(),i.scheduleRender(),i.resumeFrom=d,o&&(i.resumeFrom.preserveOpacity=!0),d.snapshot&&(i.snapshot=d.snapshot,i.snapshot.latestValues=d.animationValues||d.latestValues),i.root&&i.root.isUpdating&&(i.isLayoutDirty=!0);const{crossfade:h}=i.options;h===!1&&d.hide()}}exitAnimationComplete(){this.members.forEach(i=>{const{options:o,resumingFrom:d}=i;o.onExitComplete&&o.onExitComplete(),d&&d.options.onExitComplete&&d.options.onExitComplete()})}scheduleRender(){this.members.forEach(i=>{i.instance&&i.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1},transformAxes=["","X","Y","Z"],animationTarget=1e3;let id$1=0;function resetDistortingTransform(e,i,o,d){const{latestValues:h}=i;h[e]&&(o[e]=h[e],i.setStaticValue(e,0),d&&(d[e]=0))}function cancelTreeOptimisedTransformAnimations(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:i}=e.options;if(!i)return;const o=getOptimisedAppearId(i);if(window.MotionHasOptimisedAnimation(o,"transform")){const{layout:h,layoutId:g}=e.options;window.MotionCancelOptimisedAnimation(o,"transform",frame,!(h||g))}const{parent:d}=e;d&&!d.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(d)}function createProjectionNode$1({attachResizeListener:e,defaultParent:i,measureScroll:o,checkIsScrollRoot:d,resetTransform:h}){return class{constructor(b={},j=i==null?void 0:i()){this.id=id$1++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=b,this.root=j?j.root||j:this,this.path=j?[...j.path,j]:[],this.parent=j,this.depth=j?j.depth+1:0;for(let _=0;_<this.path.length;_++)this.path[_].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(b,j){return this.eventHandlers.has(b)||this.eventHandlers.set(b,new SubscriptionManager),this.eventHandlers.get(b).add(j)}notifyListeners(b,...j){const _=this.eventHandlers.get(b);_&&_.notify(...j)}hasListeners(b){return this.eventHandlers.has(b)}mount(b){if(this.instance)return;this.isSVG=isSVGElement(b)&&!isSVGSVGElement(b),this.instance=b;const{layoutId:j,layout:_,visualElement:$}=this.options;if($&&!$.current&&$.mount(b),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(_||j)&&(this.isLayoutDirty=!0),e){let _e,et=0;const tt=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{et=window.innerWidth}),e(b,()=>{const rt=window.innerWidth;rt!==et&&(et=rt,this.root.updateBlockedByResize=!0,_e&&_e(),_e=delay(tt,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}j&&this.root.registerSharedNode(j,this),this.options.animate!==!1&&$&&(j||_)&&this.addEventListener("didUpdate",({delta:_e,hasLayoutChanged:et,hasRelativeLayoutChanged:tt,layout:rt})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const nt=this.options.transition||$.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:it,onLayoutAnimationComplete:st}=$.getProps(),at=!this.targetLayout||!boxEqualsRounded(this.targetLayout,rt),ot=!et&&tt;if(this.options.layoutRoot||this.resumeFrom||ot||et&&(at||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const lt={...getValueTransition(nt,"layout"),onPlay:it,onComplete:st};($.shouldReduceMotion||this.options.layoutRoot)&&(lt.delay=0,lt.type=!1),this.startAnimation(lt),this.setAnimationOrigin(_e,ot)}else et||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=rt})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const b=this.getStack();b&&b.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:b}=this.options;return b&&b.getProps().transformTemplate}willUpdate(b=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let _e=0;_e<this.path.length;_e++){const et=this.path[_e];et.shouldResetTransform=!0,et.updateScroll("snapshot"),et.options.layoutRoot&&et.willUpdate(!1)}const{layoutId:j,layout:_}=this.options;if(j===void 0&&!_)return;const $=this.getTransformTemplate();this.prevTransformTemplateValue=$?$(this.latestValues,""):void 0,this.updateSnapshot(),b&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const j=time$1.now();frameData.delta=clamp(0,1e3/60,j-frameData.timestamp),frameData.timestamp=j,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let _=0;_<this.path.length;_++)this.path[_].updateScroll();const b=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:j}=this.options;j&&j.notify("LayoutMeasure",this.layout.layoutBox,b?b.layoutBox:void 0)}updateScroll(b="measure"){let j=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===b&&(j=!1),j&&this.instance){const _=d(this.instance);this.scroll={animationId:this.root.animationId,phase:b,isRoot:_,offset:o(this.instance),wasRoot:this.scroll?this.scroll.isRoot:_}}}resetTransform(){if(!h)return;const b=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,j=this.projectionDelta&&!isDeltaZero(this.projectionDelta),_=this.getTransformTemplate(),$=_?_(this.latestValues,""):void 0,_e=$!==this.prevTransformTemplateValue;b&&this.instance&&(j||hasTransform(this.latestValues)||_e)&&(h(this.instance,$),this.shouldResetTransform=!1,this.scheduleRender())}measure(b=!0){const j=this.measurePageBox();let _=this.removeElementScroll(j);return b&&(_=this.removeTransform(_)),roundBox(_),{animationId:this.root.animationId,measuredBox:j,layoutBox:_,latestValues:{},source:this.id}}measurePageBox(){var $;const{visualElement:b}=this.options;if(!b)return createBox();const j=b.measureViewportBox();if(!((($=this.scroll)==null?void 0:$.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:_e}=this.root;_e&&(translateAxis(j.x,_e.offset.x),translateAxis(j.y,_e.offset.y))}return j}removeElementScroll(b){var _;const j=createBox();if(copyBoxInto(j,b),(_=this.scroll)!=null&&_.wasRoot)return j;for(let $=0;$<this.path.length;$++){const _e=this.path[$],{scroll:et,options:tt}=_e;_e!==this.root&&et&&tt.layoutScroll&&(et.wasRoot&&copyBoxInto(j,b),translateAxis(j.x,et.offset.x),translateAxis(j.y,et.offset.y))}return j}applyTransform(b,j=!1){const _=createBox();copyBoxInto(_,b);for(let $=0;$<this.path.length;$++){const _e=this.path[$];!j&&_e.options.layoutScroll&&_e.scroll&&_e!==_e.root&&transformBox(_,{x:-_e.scroll.offset.x,y:-_e.scroll.offset.y}),hasTransform(_e.latestValues)&&transformBox(_,_e.latestValues)}return hasTransform(this.latestValues)&&transformBox(_,this.latestValues),_}removeTransform(b){const j=createBox();copyBoxInto(j,b);for(let _=0;_<this.path.length;_++){const $=this.path[_];if(!$.instance||!hasTransform($.latestValues))continue;hasScale($.latestValues)&&$.updateSnapshot();const _e=createBox(),et=$.measurePageBox();copyBoxInto(_e,et),removeBoxTransforms(j,$.latestValues,$.snapshot?$.snapshot.layoutBox:void 0,_e)}return hasTransform(this.latestValues)&&removeBoxTransforms(j,this.latestValues),j}setTargetDelta(b){this.targetDelta=b,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(b){this.options={...this.options,...b,crossfade:b.crossfade!==void 0?b.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(b=!1){var rt;const j=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=j.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=j.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=j.isSharedProjectionDirty);const _=!!this.resumingFrom||this!==j;if(!(b||_&&this.isSharedProjectionDirty||this.isProjectionDirty||(rt=this.parent)!=null&&rt.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_e,layoutId:et}=this.options;if(!this.layout||!(_e||et))return;this.resolvedRelativeTargetAt=frameData.timestamp;const tt=this.getClosestProjectingParent();tt&&this.linkedParentVersion!==tt.layoutVersion&&!tt.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(tt&&tt.layout?this.createRelativeTarget(tt,this.layout.layoutBox,tt.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,tt&&!!tt.resumingFrom==!!this.resumingFrom&&!tt.options.layoutScroll&&tt.target&&this.animationProgress!==1?this.createRelativeTarget(tt,this.target,tt.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(b,j,_){this.relativeParent=b,this.linkedParentVersion=b.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,j,_),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var nt;const b=this.getLead(),j=!!this.resumingFrom||this!==b;let _=!0;if((this.isProjectionDirty||(nt=this.parent)!=null&&nt.isProjectionDirty)&&(_=!1),j&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(_=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(_=!1),_)return;const{layout:$,layoutId:_e}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!($||_e))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const et=this.treeScale.x,tt=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,j),b.layout&&!b.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(b.target=b.layout.layoutBox,b.targetWithTransforms=createBox());const{target:rt}=b;if(!rt){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,rt,this.latestValues),(this.treeScale.x!==et||this.treeScale.y!==tt||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",rt))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(b=!0){var j;if((j=this.options.visualElement)==null||j.scheduleRender(),b){const _=this.getStack();_&&_.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(b,j=!1){const _=this.snapshot,$=_?_.latestValues:{},_e={...this.latestValues},et=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!j;const tt=createBox(),rt=_?_.source:void 0,nt=this.layout?this.layout.source:void 0,it=rt!==nt,st=this.getStack(),at=!st||st.members.length<=1,ot=!!(it&&!at&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let lt;this.mixTargetDelta=ct=>{const ut=ct/1e3;mixAxisDelta(et.x,b.x,ut),mixAxisDelta(et.y,b.y,ut),this.setTargetDelta(et),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(tt,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,tt,ut),lt&&boxEquals(this.relativeTarget,lt)&&(this.isProjectionDirty=!1),lt||(lt=createBox()),copyBoxInto(lt,this.relativeTarget)),it&&(this.animationValues=_e,mixValues(_e,$,this.latestValues,ut,ot,at)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ut},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(b){var j,_,$;this.notifyListeners("animationStart"),(j=this.currentAnimation)==null||j.stop(),($=(_=this.resumingFrom)==null?void 0:_.currentAnimation)==null||$.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...b,velocity:0,isSync:!0,onUpdate:_e=>{this.mixTargetDelta(_e),b.onUpdate&&b.onUpdate(_e)},onStop:()=>{},onComplete:()=>{b.onComplete&&b.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const b=this.getStack();b&&b.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const b=this.getLead();let{targetWithTransforms:j,target:_,layout:$,latestValues:_e}=b;if(!(!j||!_||!$)){if(this!==b&&this.layout&&$&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,$.layoutBox)){_=this.target||createBox();const et=calcLength(this.layout.layoutBox.x);_.x.min=b.target.x.min,_.x.max=_.x.min+et;const tt=calcLength(this.layout.layoutBox.y);_.y.min=b.target.y.min,_.y.max=_.y.min+tt}copyBoxInto(j,_),transformBox(j,_e),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,j,_e)}}registerSharedNode(b,j){this.sharedNodes.has(b)||this.sharedNodes.set(b,new NodeStack),this.sharedNodes.get(b).add(j);const $=j.options.initialPromotionConfig;j.promote({transition:$?$.transition:void 0,preserveFollowOpacity:$&&$.shouldPreserveFollowOpacity?$.shouldPreserveFollowOpacity(j):void 0})}isLead(){const b=this.getStack();return b?b.lead===this:!0}getLead(){var j;const{layoutId:b}=this.options;return b?((j=this.getStack())==null?void 0:j.lead)||this:this}getPrevLead(){var j;const{layoutId:b}=this.options;return b?(j=this.getStack())==null?void 0:j.prevLead:void 0}getStack(){const{layoutId:b}=this.options;if(b)return this.root.sharedNodes.get(b)}promote({needsReset:b,transition:j,preserveFollowOpacity:_}={}){const $=this.getStack();$&&$.promote(this,_),b&&(this.projectionDelta=void 0,this.needsReset=!0),j&&this.setOptions({transition:j})}relegate(){const b=this.getStack();return b?b.relegate(this):!1}resetSkewAndRotation(){const{visualElement:b}=this.options;if(!b)return;let j=!1;const{latestValues:_}=b;if((_.z||_.rotate||_.rotateX||_.rotateY||_.rotateZ||_.skewX||_.skewY)&&(j=!0),!j)return;const $={};_.z&&resetDistortingTransform("z",b,$,this.animationValues);for(let _e=0;_e<transformAxes.length;_e++)resetDistortingTransform(`rotate${transformAxes[_e]}`,b,$,this.animationValues),resetDistortingTransform(`skew${transformAxes[_e]}`,b,$,this.animationValues);b.render();for(const _e in $)b.setStaticValue(_e,$[_e]),this.animationValues&&(this.animationValues[_e]=$[_e]);b.scheduleRender()}applyProjectionStyles(b,j){if(!this.instance||this.isSVG)return;if(!this.isVisible){b.visibility="hidden";return}const _=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,b.visibility="",b.opacity="",b.pointerEvents=resolveMotionValue(j==null?void 0:j.pointerEvents)||"",b.transform=_?_(this.latestValues,""):"none";return}const $=this.getLead();if(!this.projectionDelta||!this.layout||!$.target){this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=resolveMotionValue(j==null?void 0:j.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(b.transform=_?_({},""):"none",this.hasProjected=!1);return}b.visibility="";const _e=$.animationValues||$.latestValues;this.applyTransformsToTarget();let et=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,_e);_&&(et=_(_e,et)),b.transform=et;const{x:tt,y:rt}=this.projectionDelta;b.transformOrigin=`${tt.origin*100}% ${rt.origin*100}% 0`,$.animationValues?b.opacity=$===this?_e.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:_e.opacityExit:b.opacity=$===this?_e.opacity!==void 0?_e.opacity:"":_e.opacityExit!==void 0?_e.opacityExit:0;for(const nt in scaleCorrectors){if(_e[nt]===void 0)continue;const{correct:it,applyTo:st,isCSSVariable:at}=scaleCorrectors[nt],ot=et==="none"?_e[nt]:it(_e[nt],$);if(st){const lt=st.length;for(let ct=0;ct<lt;ct++)b[st[ct]]=ot}else at?this.options.visualElement.renderState.vars[nt]=ot:b[nt]=ot}this.options.layoutId&&(b.pointerEvents=$===this?resolveMotionValue(j==null?void 0:j.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(b=>{var j;return(j=b.currentAnimation)==null?void 0:j.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){var o;const i=((o=e.resumeFrom)==null?void 0:o.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){const{layoutBox:d,measuredBox:h}=e.layout,{animationType:g}=e.options,b=i.source!==e.layout.source;g==="size"?eachAxis(et=>{const tt=b?i.measuredBox[et]:i.layoutBox[et],rt=calcLength(tt);tt.min=d[et].min,tt.max=tt.min+rt}):shouldAnimatePositionOnly(g,i.layoutBox,d)&&eachAxis(et=>{const tt=b?i.measuredBox[et]:i.layoutBox[et],rt=calcLength(d[et]);tt.max=tt.min+rt,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[et].max=e.relativeTarget[et].min+rt)});const j=createDelta();calcBoxDelta(j,d,i.layoutBox);const _=createDelta();b?calcBoxDelta(_,e.applyTransform(h,!0),i.measuredBox):calcBoxDelta(_,d,i.layoutBox);const $=!isDeltaZero(j);let _e=!1;if(!e.resumeFrom){const et=e.getClosestProjectingParent();if(et&&!et.resumeFrom){const{snapshot:tt,layout:rt}=et;if(tt&&rt){const nt=createBox();calcRelativePosition(nt,i.layoutBox,tt.layoutBox);const it=createBox();calcRelativePosition(it,d,rt.layoutBox),boxEqualsRounded(nt,it)||(_e=!0),et.options.layoutRoot&&(e.relativeTarget=it,e.relativeTargetOrigin=nt,e.relativeParent=et)}}}e.notifyListeners("didUpdate",{layout:d,snapshot:i,delta:_,layoutDelta:j,hasLayoutChanged:$,hasRelativeLayoutChanged:_e})}else if(e.isLead()){const{onExitComplete:d}=e.options;d&&d()}e.options.transition=void 0}function propagateDirtyNodes(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:i}=e.options;i&&i.getProps().onBeforeLayoutMeasure&&i.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetSkewAndRotation(e){e.resetSkewAndRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,i,o){e.translate=mixNumber$1(i.translate,0,o),e.scale=mixNumber$1(i.scale,1,o),e.origin=i.origin,e.originPoint=i.originPoint}function mixAxis(e,i,o,d){e.min=mixNumber$1(i.min,o.min,d),e.max=mixNumber$1(i.max,o.max,d)}function mixBox(e,i,o,d){mixAxis(e.x,i.x,o.x,d),mixAxis(e.y,i.y,o.y,d)}function hasOpacityCrossfade(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$6;function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,i,o){return e==="position"||e==="preserve-aspect"&&!isNear(aspectRatio(i),aspectRatio(o),.2)}function checkNodeWasScrollRoot(e){var i;return e!==e.root&&((i=e.scroll)==null?void 0:i.wasRoot)}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(e,i)=>addDomEvent(e,"resize",i),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const e=new DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),rootProjectionNode.current=e}return rootProjectionNode.current},resetTransform:(e,i)=>{e.style.transform=i!==void 0?i:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),MotionConfigContext=reactExports.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function setRef(e,i){if(typeof e=="function")return e(i);e!=null&&(e.current=i)}function composeRefs(...e){return i=>{let o=!1;const d=e.map(h=>{const g=setRef(h,i);return!o&&typeof g=="function"&&(o=!0),g});if(o)return()=>{for(let h=0;h<d.length;h++){const g=d[h];typeof g=="function"?g():setRef(e[h],null)}}}}function useComposedRefs(...e){return reactExports.useCallback(composeRefs(...e),e)}class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(i){const o=this.props.childRef.current;if(o&&i.isPresent&&!this.props.isPresent){const d=o.offsetParent,h=isHTMLElement(d)&&d.offsetWidth||0,g=this.props.sizeRef.current;g.height=o.offsetHeight||0,g.width=o.offsetWidth||0,g.top=o.offsetTop,g.left=o.offsetLeft,g.right=h-g.width-g.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:e,isPresent:i,anchorX:o,root:d}){var _e;const h=reactExports.useId(),g=reactExports.useRef(null),b=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:j}=reactExports.useContext(MotionConfigContext),_=((_e=e.props)==null?void 0:_e.ref)??(e==null?void 0:e.ref),$=useComposedRefs(g,_);return reactExports.useInsertionEffect(()=>{const{width:et,height:tt,top:rt,left:nt,right:it}=b.current;if(i||!g.current||!et||!tt)return;const st=o==="left"?`left: ${nt}`:`right: ${it}`;g.current.dataset.motionPopId=h;const at=document.createElement("style");j&&(at.nonce=j);const ot=d??document.head;return ot.appendChild(at),at.sheet&&at.sheet.insertRule(`
          [data-motion-pop-id="${h}"] {
            position: absolute !important;
            width: ${et}px !important;
            height: ${tt}px !important;
            ${st}px !important;
            top: ${rt}px !important;
          }
        `),()=>{ot.contains(at)&&ot.removeChild(at)}},[i]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:i,childRef:g,sizeRef:b,children:reactExports.cloneElement(e,{ref:$})})}const PresenceChild=({children:e,initial:i,isPresent:o,onExitComplete:d,custom:h,presenceAffectsLayout:g,mode:b,anchorX:j,root:_})=>{const $=useConstant(newChildrenMap),_e=reactExports.useId();let et=!0,tt=reactExports.useMemo(()=>(et=!1,{id:_e,initial:i,isPresent:o,custom:h,onExitComplete:rt=>{$.set(rt,!0);for(const nt of $.values())if(!nt)return;d&&d()},register:rt=>($.set(rt,!1),()=>$.delete(rt))}),[o,$,d]);return g&&et&&(tt={...tt}),reactExports.useMemo(()=>{$.forEach((rt,nt)=>$.set(nt,!1))},[o]),reactExports.useEffect(()=>{!o&&!$.size&&d&&d()},[o]),b==="popLayout"&&(e=jsxRuntimeExports.jsx(PopChild,{isPresent:o,anchorX:j,root:_,children:e})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:tt,children:e})};function newChildrenMap(){return new Map}function usePresence(e=!0){const i=reactExports.useContext(PresenceContext);if(i===null)return[!0,null];const{isPresent:o,onExitComplete:d,register:h}=i,g=reactExports.useId();reactExports.useEffect(()=>{if(e)return h(g)},[e]);const b=reactExports.useCallback(()=>e&&d&&d(g),[g,d,e]);return!o&&d?[!1,b]:[!0]}const getChildKey=e=>e.key||"";function onlyElements(e){const i=[];return reactExports.Children.forEach(e,o=>{reactExports.isValidElement(o)&&i.push(o)}),i}const AnimatePresence=({children:e,custom:i,initial:o=!0,onExitComplete:d,presenceAffectsLayout:h=!0,mode:g="sync",propagate:b=!1,anchorX:j="left",root:_})=>{const[$,_e]=usePresence(b),et=reactExports.useMemo(()=>onlyElements(e),[e]),tt=b&&!$?[]:et.map(getChildKey),rt=reactExports.useRef(!0),nt=reactExports.useRef(et),it=useConstant(()=>new Map),st=reactExports.useRef(new Set),[at,ot]=reactExports.useState(et),[lt,ct]=reactExports.useState(et);useIsomorphicLayoutEffect$1(()=>{rt.current=!1,nt.current=et;for(let mt=0;mt<lt.length;mt++){const xt=getChildKey(lt[mt]);tt.includes(xt)?(it.delete(xt),st.current.delete(xt)):it.get(xt)!==!0&&it.set(xt,!1)}},[lt,tt.length,tt.join("-")]);const ut=[];if(et!==at){let mt=[...et];for(let xt=0;xt<lt.length;xt++){const ft=lt[xt],gt=getChildKey(ft);tt.includes(gt)||(mt.splice(xt,0,ft),ut.push(ft))}return g==="wait"&&ut.length&&(mt=ut),ct(onlyElements(mt)),ot(et),null}const{forceRender:dt}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:lt.map(mt=>{const xt=getChildKey(mt),ft=b&&!$?!1:et===lt||tt.includes(xt),gt=()=>{if(st.current.has(xt))return;if(st.current.add(xt),it.has(xt))it.set(xt,!0);else return;let pt=!0;it.forEach(yt=>{yt||(pt=!1)}),pt&&(dt==null||dt(),ct(nt.current),b&&(_e==null||_e()),d&&d())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:ft,initial:!rt.current||o?void 0:!1,custom:i,presenceAffectsLayout:h,mode:g,root:_,onExitComplete:ft?void 0:gt,anchorX:j,children:mt},xt)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let isInitialized=!1;function initFeatureDefinitions(){if(isInitialized)return;const e={};for(const i in featureProps)e[i]={isEnabled:o=>featureProps[i].some(d=>!!o[d])};setFeatureDefinitions(e),isInitialized=!0}function getInitializedFeatureDefinitions(){return initFeatureDefinitions(),getFeatureDefinitions()}function loadFeatures(e){const i=getInitializedFeatureDefinitions();for(const o in e)i[o]={...i[o],...e[o]};setFeatureDefinitions(i)}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}let shouldForward=e=>!isValidMotionProp(e);function loadExternalIsValidProp(e){typeof e=="function"&&(shouldForward=i=>i.startsWith("on")?!isValidMotionProp(i):e(i))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(e,i,o){const d={};for(const h in e)h==="values"&&typeof e.values=="object"||(shouldForward(h)||o===!0&&isValidMotionProp(h)||!i&&!isValidMotionProp(h)||e.draggable&&h.startsWith("onDrag"))&&(d[h]=e[h]);return d}const MotionContext=reactExports.createContext({});function getCurrentTreeVariants(e,i){if(isControllingVariants(e)){const{initial:o,animate:d}=e;return{initial:o===!1||isVariantLabel(o)?o:void 0,animate:isVariantLabel(d)?d:void 0}}return e.inherit!==!1?i:{}}function useCreateMotionContext(e){const{initial:i,animate:o}=getCurrentTreeVariants(e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:i,animate:o}),[variantLabelsAsDependency(i),variantLabelsAsDependency(o)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(e,i,o){for(const d in i)!isMotionValue(i[d])&&!isForcedMotionValue(d,o)&&(e[d]=i[d])}function useInitialMotionValues({transformTemplate:e},i){return reactExports.useMemo(()=>{const o=createHtmlRenderState();return buildHTMLStyles(o,i,e),Object.assign({},o.vars,o.style)},[i])}function useStyle(e,i){const o=e.style||{},d={};return copyRawValuesOnly(d,o,e),Object.assign(d,useInitialMotionValues(e,i)),d}function useHTMLProps(e,i){const o={},d=useStyle(e,i);return e.drag&&e.dragListener!==!1&&(o.draggable=!1,d.userSelect=d.WebkitUserSelect=d.WebkitTouchCallout="none",d.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(o.tabIndex=0),o.style=d,o}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}});function useSVGProps(e,i,o,d){const h=reactExports.useMemo(()=>{const g=createSvgRenderState();return buildSVGAttrs(g,i,isSVGTag(d),e.transformTemplate,e.style),{...g.attrs,style:{...g.style}}},[i]);if(e.style){const g={};copyRawValuesOnly(g,e.style,e),h.style={...g,...h.style}}return h}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(e){return typeof e!="string"||e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/u.test(e))}function useRender(e,i,o,{latestValues:d},h,g=!1,b){const _=(b??isSVGComponent(e)?useSVGProps:useHTMLProps)(i,d,h,e),$=filterProps(i,typeof e=="string",g),_e=e!==reactExports.Fragment?{...$,..._,ref:o}:{},{children:et}=i,tt=reactExports.useMemo(()=>isMotionValue(et)?et.get():et,[et]);return reactExports.createElement(e,{..._e,children:tt})}function makeState({scrapeMotionValuesFromProps:e,createRenderState:i},o,d,h){return{latestValues:makeLatestValues(o,d,h,e),renderState:i()}}function makeLatestValues(e,i,o,d){const h={},g=d(e,{});for(const tt in g)h[tt]=resolveMotionValue(g[tt]);let{initial:b,animate:j}=e;const _=isControllingVariants(e),$=isVariantNode(e);i&&$&&!_&&e.inherit!==!1&&(b===void 0&&(b=i.initial),j===void 0&&(j=i.animate));let _e=o?o.initial===!1:!1;_e=_e||b===!1;const et=_e?j:b;if(et&&typeof et!="boolean"&&!isAnimationControls(et)){const tt=Array.isArray(et)?et:[et];for(let rt=0;rt<tt.length;rt++){const nt=resolveVariantFromProps(e,tt[rt]);if(nt){const{transitionEnd:it,transition:st,...at}=nt;for(const ot in at){let lt=at[ot];if(Array.isArray(lt)){const ct=_e?lt.length-1:0;lt=lt[ct]}lt!==null&&(h[ot]=lt)}for(const ot in it)h[ot]=it[ot]}}}return h}const makeUseVisualState=e=>(i,o)=>{const d=reactExports.useContext(MotionContext),h=reactExports.useContext(PresenceContext),g=()=>makeState(e,i,d,h);return o?g():useConstant(g)},useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState}),useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function useMotionRef(e,i,o){const d=reactExports.useRef(o);reactExports.useInsertionEffect(()=>{d.current=o});const h=reactExports.useRef(null);return reactExports.useCallback(g=>{var j;g&&((j=e.onMount)==null||j.call(e,g)),i&&(g?i.mount(g):i.unmount());const b=d.current;if(typeof b=="function")if(g){const _=b(g);typeof _=="function"&&(h.current=_)}else h.current?(h.current(),h.current=null):b(g);else b&&(b.current=g)},[i])}const SwitchLayoutGroupContext=reactExports.createContext({});function isRefObject(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function useVisualElement(e,i,o,d,h,g){var st,at;const{visualElement:b}=reactExports.useContext(MotionContext),j=reactExports.useContext(LazyContext),_=reactExports.useContext(PresenceContext),$=reactExports.useContext(MotionConfigContext).reducedMotion,_e=reactExports.useRef(null);d=d||j.renderer,!_e.current&&d&&(_e.current=d(e,{visualState:i,parent:b,props:o,presenceContext:_,blockInitialAnimation:_?_.initial===!1:!1,reducedMotionConfig:$,isSVG:g}));const et=_e.current,tt=reactExports.useContext(SwitchLayoutGroupContext);et&&!et.projection&&h&&(et.type==="html"||et.type==="svg")&&createProjectionNode(_e.current,o,h,tt);const rt=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{et&&rt.current&&et.update(o,_)});const nt=o[optimizedAppearDataAttribute],it=reactExports.useRef(!!nt&&!((st=window.MotionHandoffIsComplete)!=null&&st.call(window,nt))&&((at=window.MotionHasOptimisedAnimation)==null?void 0:at.call(window,nt)));return useIsomorphicLayoutEffect$1(()=>{et&&(rt.current=!0,window.MotionIsMounted=!0,et.updateFeatures(),et.scheduleRenderMicrotask(),it.current&&et.animationState&&et.animationState.animateChanges())}),reactExports.useEffect(()=>{et&&(!it.current&&et.animationState&&et.animationState.animateChanges(),it.current&&(queueMicrotask(()=>{var ot;(ot=window.MotionHandoffMarkAsComplete)==null||ot.call(window,nt)}),it.current=!1),et.enteringChildren=void 0)}),et}function createProjectionNode(e,i,o,d){const{layoutId:h,layout:g,drag:b,dragConstraints:j,layoutScroll:_,layoutRoot:$,layoutCrossfade:_e}=i;e.projection=new o(e.latestValues,i["data-framer-portal-id"]?void 0:getClosestProjectingNode(e.parent)),e.projection.setOptions({layoutId:h,layout:g,alwaysMeasureLayout:!!b||j&&isRefObject(j),visualElement:e,animationType:typeof g=="string"?g:"both",initialPromotionConfig:d,crossfade:_e,layoutScroll:_,layoutRoot:$})}function getClosestProjectingNode(e){if(e)return e.options.allowProjection!==!1?e.projection:getClosestProjectingNode(e.parent)}function createMotionComponent(e,{forwardMotionProps:i=!1,type:o}={},d,h){d&&loadFeatures(d);const g=o?o==="svg":isSVGComponent(e),b=g?useSVGVisualState:useHTMLVisualState;function j($,_e){let et;const tt={...reactExports.useContext(MotionConfigContext),...$,layoutId:useLayoutId($)},{isStatic:rt}=tt,nt=useCreateMotionContext($),it=b($,rt);if(!rt&&isBrowser$2){useStrictMode();const st=getProjectionFunctionality(tt);et=st.MeasureLayout,nt.visualElement=useVisualElement(e,it,tt,h,st.ProjectionNode,g)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:nt,children:[et&&nt.visualElement?jsxRuntimeExports.jsx(et,{visualElement:nt.visualElement,...tt}):null,useRender(e,$,useMotionRef(it,nt.visualElement,_e),it,rt,i,g)]})}j.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const _=reactExports.forwardRef(j);return _[motionComponentSymbol]=e,_}function useLayoutId({layoutId:e}){const i=reactExports.useContext(LayoutGroupContext).id;return i&&e!==void 0?i+"-"+e:e}function useStrictMode(e,i){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(e){const i=getInitializedFeatureDefinitions(),{drag:o,layout:d}=i;if(!o&&!d)return{};const h={...o,...d};return{MeasureLayout:o!=null&&o.isEnabled(e)||d!=null&&d.isEnabled(e)?h.MeasureLayout:void 0,ProjectionNode:h.ProjectionNode}}function createMotionProxy(e,i){if(typeof Proxy>"u")return createMotionComponent;const o=new Map,d=(g,b)=>createMotionComponent(g,b,e,i),h=(g,b)=>d(g,b);return new Proxy(h,{get:(g,b)=>b==="create"?d:(o.has(b)||o.set(b,createMotionComponent(b,void 0,e,i)),o.get(b))})}const createDomVisualElement=(e,i)=>i.isSVG??isSVGComponent(e)?new SVGVisualElement(i):new HTMLVisualElement(i,{allowProjection:e!==reactExports.Fragment});class AnimationFeature extends Feature{constructor(i){super(i),i.animationState||(i.animationState=createAnimationState(i))}updateAnimationControlsSubscription(){const{animate:i}=this.node.getProps();isAnimationControls(i)&&(this.unmountControls=i.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:i}=this.node.getProps(),{animate:o}=this.node.prevProps||{};i!==o&&this.updateAnimationControlsSubscription()}unmount(){var i;this.node.animationState.reset(),(i=this.unmountControls)==null||i.call(this)}}let id=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id++}update(){if(!this.node.presenceContext)return;const{isPresent:i,onExitComplete:o}=this.node.presenceContext,{isPresent:d}=this.node.prevPresenceContext||{};if(!this.node.animationState||i===d)return;const h=this.node.animationState.setActive("exit",!i);o&&!i&&h.then(()=>{o(this.id)})}mount(){const{register:i,onExitComplete:o}=this.node.presenceContext||{};o&&o(this.id),i&&(this.unmount=i(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function extractEventInfo(e){return{point:{x:e.pageX,y:e.pageY}}}const addPointerInfo=e=>i=>isPrimaryPointer(i)&&e(i,extractEventInfo(i));function addPointerEvent(e,i,o,d){return addDomEvent(e,i,addPointerInfo(o),d)}const getContextWindow=({current:e})=>e?e.ownerDocument.defaultView:null,distance=(e,i)=>Math.abs(e-i);function distance2D(e,i){const o=distance(e.x,i.x),d=distance(e.y,i.y);return Math.sqrt(o**2+d**2)}const overflowStyles=new Set(["auto","scroll"]);class PanSession{constructor(i,o,{transformPagePoint:d,contextWindow:h=window,dragSnapToOrigin:g=!1,distanceThreshold:b=3,element:j}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=rt=>{this.handleScroll(rt.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const rt=getPanInfo(this.lastMoveEventInfo,this.history),nt=this.startEvent!==null,it=distance2D(rt.offset,{x:0,y:0})>=this.distanceThreshold;if(!nt&&!it)return;const{point:st}=rt,{timestamp:at}=frameData;this.history.push({...st,timestamp:at});const{onStart:ot,onMove:lt}=this.handlers;nt||(ot&&ot(this.lastMoveEvent,rt),this.startEvent=this.lastMoveEvent),lt&&lt(this.lastMoveEvent,rt)},this.handlePointerMove=(rt,nt)=>{this.lastMoveEvent=rt,this.lastMoveEventInfo=transformPoint(nt,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(rt,nt)=>{this.end();const{onEnd:it,onSessionEnd:st,resumeAnimation:at}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&at&&at(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const ot=getPanInfo(rt.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(nt,this.transformPagePoint),this.history);this.startEvent&&it&&it(rt,ot),st&&st(rt,ot)},!isPrimaryPointer(i))return;this.dragSnapToOrigin=g,this.handlers=o,this.transformPagePoint=d,this.distanceThreshold=b,this.contextWindow=h||window;const _=extractEventInfo(i),$=transformPoint(_,this.transformPagePoint),{point:_e}=$,{timestamp:et}=frameData;this.history=[{..._e,timestamp:et}];const{onSessionStart:tt}=o;tt&&tt(i,getPanInfo($,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp)),j&&this.startScrollTracking(j)}startScrollTracking(i){let o=i.parentElement;for(;o;){const d=getComputedStyle(o);(overflowStyles.has(d.overflowX)||overflowStyles.has(d.overflowY))&&this.scrollPositions.set(o,{x:o.scrollLeft,y:o.scrollTop}),o=o.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(i){const o=this.scrollPositions.get(i);if(!o)return;const d=i===window,h=d?{x:window.scrollX,y:window.scrollY}:{x:i.scrollLeft,y:i.scrollTop},g={x:h.x-o.x,y:h.y-o.y};g.x===0&&g.y===0||(d?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=g.x,this.lastMoveEventInfo.point.y+=g.y):this.history.length>0&&(this.history[0].x-=g.x,this.history[0].y-=g.y),this.scrollPositions.set(i,h),frame.update(this.updatePoint,!0))}updateHandlers(i){this.handlers=i}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),cancelFrame(this.updatePoint)}}function transformPoint(e,i){return i?{point:i(e.point)}:e}function subtractPoint(e,i){return{x:e.x-i.x,y:e.y-i.y}}function getPanInfo({point:e},i){return{point:e,delta:subtractPoint(e,lastDevicePoint(i)),offset:subtractPoint(e,startDevicePoint(i)),velocity:getVelocity(i,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,i){if(e.length<2)return{x:0,y:0};let o=e.length-1,d=null;const h=lastDevicePoint(e);for(;o>=0&&(d=e[o],!(h.timestamp-d.timestamp>secondsToMilliseconds(i)));)o--;if(!d)return{x:0,y:0};const g=millisecondsToSeconds(h.timestamp-d.timestamp);if(g===0)return{x:0,y:0};const b={x:(h.x-d.x)/g,y:(h.y-d.y)/g};return b.x===1/0&&(b.x=0),b.y===1/0&&(b.y=0),b}function applyConstraints(e,{min:i,max:o},d){return i!==void 0&&e<i?e=d?mixNumber$1(i,e,d.min):Math.max(e,i):o!==void 0&&e>o&&(e=d?mixNumber$1(o,e,d.max):Math.min(e,o)),e}function calcRelativeAxisConstraints(e,i,o){return{min:i!==void 0?e.min+i:void 0,max:o!==void 0?e.max+o-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:i,left:o,bottom:d,right:h}){return{x:calcRelativeAxisConstraints(e.x,o,h),y:calcRelativeAxisConstraints(e.y,i,d)}}function calcViewportAxisConstraints(e,i){let o=i.min-e.min,d=i.max-e.max;return i.max-i.min<e.max-e.min&&([o,d]=[d,o]),{min:o,max:d}}function calcViewportConstraints(e,i){return{x:calcViewportAxisConstraints(e.x,i.x),y:calcViewportAxisConstraints(e.y,i.y)}}function calcOrigin(e,i){let o=.5;const d=calcLength(e),h=calcLength(i);return h>d?o=progress(i.min,i.max-d,e.min):d>h&&(o=progress(e.min,e.max-h,i.min)),clamp(0,1,o)}function rebaseAxisConstraints(e,i){const o={};return i.min!==void 0&&(o.min=i.min-e.min),i.max!==void 0&&(o.max=i.max-e.min),o}const defaultElastic=.35;function resolveDragElastic(e=defaultElastic){return e===!1?e=0:e===!0&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,i,o){return{min:resolvePointElastic(e,i),max:resolvePointElastic(e,o)}}function resolvePointElastic(e,i){return typeof e=="number"?e:e[i]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(i){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=i}start(i,{snapToCursor:o=!1,distanceThreshold:d}={}){const{presenceContext:h}=this.visualElement;if(h&&h.isPresent===!1)return;const g=et=>{o?(this.stopAnimation(),this.snapToCursor(extractEventInfo(et).point)):this.pauseAnimation()},b=(et,tt)=>{this.stopAnimation();const{drag:rt,dragPropagation:nt,onDragStart:it}=this.getProps();if(rt&&!nt&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(rt),!this.openDragLock))return;this.latestPointerEvent=et,this.latestPanInfo=tt,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(at=>{let ot=this.getAxisMotionValue(at).get()||0;if(percent.test(ot)){const{projection:lt}=this.visualElement;if(lt&&lt.layout){const ct=lt.layout.layoutBox[at];ct&&(ot=calcLength(ct)*(parseFloat(ot)/100))}}this.originPoint[at]=ot}),it&&frame.postRender(()=>it(et,tt)),addValueToWillChange(this.visualElement,"transform");const{animationState:st}=this.visualElement;st&&st.setActive("whileDrag",!0)},j=(et,tt)=>{this.latestPointerEvent=et,this.latestPanInfo=tt;const{dragPropagation:rt,dragDirectionLock:nt,onDirectionLock:it,onDrag:st}=this.getProps();if(!rt&&!this.openDragLock)return;const{offset:at}=tt;if(nt&&this.currentDirection===null){this.currentDirection=getCurrentDirection(at),this.currentDirection!==null&&it&&it(this.currentDirection);return}this.updateAxis("x",tt.point,at),this.updateAxis("y",tt.point,at),this.visualElement.render(),st&&st(et,tt)},_=(et,tt)=>{this.latestPointerEvent=et,this.latestPanInfo=tt,this.stop(et,tt),this.latestPointerEvent=null,this.latestPanInfo=null},$=()=>eachAxis(et=>{var tt;return this.getAnimationState(et)==="paused"&&((tt=this.getAxisMotionValue(et).animation)==null?void 0:tt.play())}),{dragSnapToOrigin:_e}=this.getProps();this.panSession=new PanSession(i,{onSessionStart:g,onStart:b,onMove:j,onSessionEnd:_,resumeAnimation:$},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:_e,distanceThreshold:d,contextWindow:getContextWindow(this.visualElement),element:this.visualElement.current})}stop(i,o){const d=i||this.latestPointerEvent,h=o||this.latestPanInfo,g=this.isDragging;if(this.cancel(),!g||!h||!d)return;const{velocity:b}=h;this.startAnimation(b);const{onDragEnd:j}=this.getProps();j&&frame.postRender(()=>j(d,h))}cancel(){this.isDragging=!1;const{projection:i,animationState:o}=this.visualElement;i&&(i.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:d}=this.getProps();!d&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),o&&o.setActive("whileDrag",!1)}updateAxis(i,o,d){const{drag:h}=this.getProps();if(!d||!shouldDrag(i,h,this.currentDirection))return;const g=this.getAxisMotionValue(i);let b=this.originPoint[i]+d[i];this.constraints&&this.constraints[i]&&(b=applyConstraints(b,this.constraints[i],this.elastic[i])),g.set(b)}resolveConstraints(){var g;const{dragConstraints:i,dragElastic:o}=this.getProps(),d=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(g=this.visualElement.projection)==null?void 0:g.layout,h=this.constraints;i&&isRefObject(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&d?this.constraints=calcRelativeConstraints(d.layoutBox,i):this.constraints=!1,this.elastic=resolveDragElastic(o),h!==this.constraints&&d&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(b=>{this.constraints!==!1&&this.getAxisMotionValue(b)&&(this.constraints[b]=rebaseAxisConstraints(d.layoutBox[b],this.constraints[b]))})}resolveRefConstraints(){const{dragConstraints:i,onMeasureDragConstraints:o}=this.getProps();if(!i||!isRefObject(i))return!1;const d=i.current;invariant$1(d!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:h}=this.visualElement;if(!h||!h.layout)return!1;const g=measurePageBox(d,h.root,this.visualElement.getTransformPagePoint());let b=calcViewportConstraints(h.layout.layoutBox,g);if(o){const j=o(convertBoxToBoundingBox(b));this.hasMutatedConstraints=!!j,j&&(b=convertBoundingBoxToBox(j))}return b}startAnimation(i){const{drag:o,dragMomentum:d,dragElastic:h,dragTransition:g,dragSnapToOrigin:b,onDragTransitionEnd:j}=this.getProps(),_=this.constraints||{},$=eachAxis(_e=>{if(!shouldDrag(_e,o,this.currentDirection))return;let et=_&&_[_e]||{};b&&(et={min:0,max:0});const tt=h?200:1e6,rt=h?40:1e7,nt={type:"inertia",velocity:d?i[_e]:0,bounceStiffness:tt,bounceDamping:rt,timeConstant:750,restDelta:1,restSpeed:10,...g,...et};return this.startAxisValueAnimation(_e,nt)});return Promise.all($).then(j)}startAxisValueAnimation(i,o){const d=this.getAxisMotionValue(i);return addValueToWillChange(this.visualElement,i),d.start(animateMotionValue(i,d,0,o,this.visualElement,!1))}stopAnimation(){eachAxis(i=>this.getAxisMotionValue(i).stop())}pauseAnimation(){eachAxis(i=>{var o;return(o=this.getAxisMotionValue(i).animation)==null?void 0:o.pause()})}getAnimationState(i){var o;return(o=this.getAxisMotionValue(i).animation)==null?void 0:o.state}getAxisMotionValue(i){const o=`_drag${i.toUpperCase()}`,d=this.visualElement.getProps(),h=d[o];return h||this.visualElement.getValue(i,(d.initial?d.initial[i]:void 0)||0)}snapToCursor(i){eachAxis(o=>{const{drag:d}=this.getProps();if(!shouldDrag(o,d,this.currentDirection))return;const{projection:h}=this.visualElement,g=this.getAxisMotionValue(o);if(h&&h.layout){const{min:b,max:j}=h.layout.layoutBox[o],_=g.get()||0;g.set(i[o]-mixNumber$1(b,j,.5)+_)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:i,dragConstraints:o}=this.getProps(),{projection:d}=this.visualElement;if(!isRefObject(o)||!d||!this.constraints)return;this.stopAnimation();const h={x:0,y:0};eachAxis(b=>{const j=this.getAxisMotionValue(b);if(j&&this.constraints!==!1){const _=j.get();h[b]=calcOrigin({min:_,max:_},this.constraints[b])}});const{transformTemplate:g}=this.visualElement.getProps();this.visualElement.current.style.transform=g?g({},""):"none",d.root&&d.root.updateScroll(),d.updateLayout(),this.resolveConstraints(),eachAxis(b=>{if(!shouldDrag(b,i,null))return;const j=this.getAxisMotionValue(b),{min:_,max:$}=this.constraints[b];j.set(mixNumber$1(_,$,h[b]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const i=this.visualElement.current,o=addPointerEvent(i,"pointerdown",_=>{const{drag:$,dragListener:_e=!0}=this.getProps();$&&_e&&!isElementKeyboardAccessible(_.target)&&this.start(_)}),d=()=>{const{dragConstraints:_}=this.getProps();isRefObject(_)&&_.current&&(this.constraints=this.resolveRefConstraints())},{projection:h}=this.visualElement,g=h.addEventListener("measure",d);h&&!h.layout&&(h.root&&h.root.updateScroll(),h.updateLayout()),frame.read(d);const b=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),j=h.addEventListener("didUpdate",({delta:_,hasLayoutChanged:$})=>{this.isDragging&&$&&(eachAxis(_e=>{const et=this.getAxisMotionValue(_e);et&&(this.originPoint[_e]+=_[_e].translate,et.set(et.get()+_[_e].translate))}),this.visualElement.render())});return()=>{b(),o(),g(),j&&j()}}getProps(){const i=this.visualElement.getProps(),{drag:o=!1,dragDirectionLock:d=!1,dragPropagation:h=!1,dragConstraints:g=!1,dragElastic:b=defaultElastic,dragMomentum:j=!0}=i;return{...i,drag:o,dragDirectionLock:d,dragPropagation:h,dragConstraints:g,dragElastic:b,dragMomentum:j}}}function shouldDrag(e,i,o){return(i===!0||i===e)&&(o===null||o===e)}function getCurrentDirection(e,i=10){let o=null;return Math.abs(e.y)>i?o="y":Math.abs(e.x)>i&&(o="x"),o}class DragGesture extends Feature{constructor(i){super(i),this.removeGroupControls=noop$6,this.removeListeners=noop$6,this.controls=new VisualElementDragControls(i)}mount(){const{dragControls:i}=this.node.getProps();i&&(this.removeGroupControls=i.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$6}update(){const{dragControls:i}=this.node.getProps(),{dragControls:o}=this.node.prevProps||{};i!==o&&(this.removeGroupControls(),i&&(this.removeGroupControls=i.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=e=>(i,o)=>{e&&frame.postRender(()=>e(i,o))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$6}onPointerDown(i){this.session=new PanSession(i,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:i,onPanStart:o,onPan:d,onPanEnd:h}=this.node.getProps();return{onSessionStart:asyncHandler(i),onStart:asyncHandler(o),onMove:d,onEnd:(g,b)=>{delete this.session,h&&frame.postRender(()=>h(g,b))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",i=>this.onPointerDown(i))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:i,layoutGroup:o,switchLayoutGroup:d,layoutId:h}=this.props,{projection:g}=i;g&&(o.group&&o.group.add(g),d&&d.register&&h&&d.register(g),hasTakenAnySnapshot&&g.root.didUpdate(),g.addEventListener("animationComplete",()=>{this.safeToRemove()}),g.setOptions({...g.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(i){const{layoutDependency:o,visualElement:d,drag:h,isPresent:g}=this.props,{projection:b}=d;return b&&(b.isPresent=g,hasTakenAnySnapshot=!0,h||i.layoutDependency!==o||o===void 0||i.isPresent!==g?b.willUpdate():this.safeToRemove(),i.isPresent!==g&&(g?b.promote():b.relegate()||frame.postRender(()=>{const j=b.getStack();(!j||!j.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:i}=this.props.visualElement;i&&(i.root.didUpdate(),microtask.postRender(()=>{!i.currentAnimation&&i.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:i,layoutGroup:o,switchLayoutGroup:d}=this.props,{projection:h}=i;hasTakenAnySnapshot=!0,h&&(h.scheduleCheckAfterUnmount(),o&&o.group&&o.group.remove(h),d&&d.deregister&&d.deregister(h))}safeToRemove(){const{safeToRemove:i}=this.props;i&&i()}render(){return null}}function MeasureLayout(e){const[i,o]=usePresence(),d=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...e,layoutGroup:d,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:i,safeToRemove:o})}const drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(e,i,o){const{props:d}=e;e.animationState&&d.whileHover&&e.animationState.setActive("whileHover",o==="Start");const h="onHover"+o,g=d[h];g&&frame.postRender(()=>g(i,extractEventInfo(i)))}class HoverGesture extends Feature{mount(){const{current:i}=this.node;i&&(this.unmount=hover(i,(o,d)=>(handleHoverEvent(this.node,d,"Start"),h=>handleHoverEvent(this.node,h,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let i=!1;try{i=this.node.current.matches(":focus-visible")}catch{i=!0}!i||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(e,i,o){const{props:d}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&d.whileTap&&e.animationState.setActive("whileTap",o==="Start");const h="onTap"+(o==="End"?"":o),g=d[h];g&&frame.postRender(()=>g(i,extractEventInfo(i)))}class PressGesture extends Feature{mount(){const{current:i}=this.node;i&&(this.unmount=press(i,(o,d)=>(handlePressEvent(this.node,d,"Start"),(h,{success:g})=>handlePressEvent(this.node,h,g?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const i=observerCallbacks.get(e.target);i&&i(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...i}){const o=e||document;observers.has(o)||observers.set(o,{});const d=observers.get(o),h=JSON.stringify(i);return d[h]||(d[h]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...i})),d[h]}function observeIntersection(e,i,o){const d=initIntersectionObserver(i);return observerCallbacks.set(e,o),d.observe(e),()=>{observerCallbacks.delete(e),d.unobserve(e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:i={}}=this.node.getProps(),{root:o,margin:d,amount:h="some",once:g}=i,b={root:o?o.current:void 0,rootMargin:d,threshold:typeof h=="number"?h:thresholdNames[h]},j=_=>{const{isIntersecting:$}=_;if(this.isInView===$||(this.isInView=$,g&&!$&&this.hasEnteredView))return;$&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",$);const{onViewportEnter:_e,onViewportLeave:et}=this.node.getProps(),tt=$?_e:et;tt&&tt(_)};return observeIntersection(this.node.current,b,j)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:i,prevProps:o}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(i,o))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:e={}},{viewport:i={}}={}){return o=>e[o]!==i[o]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);function StreakFlame({streak:e,size:i="md",showIntensity:o=!0}){const h={sm:{icon:16,text:"text-sm"},md:{icon:20,text:"text-base"},lg:{icon:24,text:"text-lg"}}[i],b=e===0?0:e<=3?1:e<=7?2:e<=20?3:4,_={0:{fill:"rgb(var(--muted))",color:"rgb(var(--muted))",glow:!1,animation:!1},1:{fill:"rgb(var(--warning))",color:"rgb(var(--warning))",glow:!1,animation:!1},2:{fill:"rgb(var(--warning))",color:"rgb(var(--warning))",glow:!0,animation:!1},3:{fill:"rgb(var(--warning))",color:"rgb(var(--warning))",glow:!0,animation:!0},4:{fill:"url(#flame-gradient)",color:"rgb(var(--warning))",glow:!0,animation:!0}}[b];return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[b===4&&jsxRuntimeExports.jsx("svg",{width:"0",height:"0",children:jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"flame-gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"rgb(251, 146, 60)"}),jsxRuntimeExports.jsx("stop",{offset:"50%",stopColor:"rgb(249, 115, 22)"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"rgb(234, 88, 12)"})]})})}),o&&_.glow&&jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.3,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 -m-2 rounded-full blur-md",style:{background:"rgb(var(--warning) / 0.4)"}}),b===4&&o&&jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.5,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 -m-4 rounded-full blur-lg",style:{background:"var(--gradient-elite)",opacity:.3}}),jsxRuntimeExports.jsx(motion.div,{animate:_.animation&&o?{scale:[1,1.1,1],rotate:[0,5,-5,0]}:{},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:jsxRuntimeExports.jsx(Flame,{size:h.icon,className:"relative z-10 transition-all",style:{fill:_.fill,color:_.color}})})]}),jsxRuntimeExports.jsx("span",{className:`font-bold stat-number ${h.text}`,style:{color:_.color},children:e})]})}const STORAGE_KEYS={ATTEMPTS:"grade9sprint_attempts",MASTERY:"grade9sprint_mastery",STREAK:"grade9sprint_streak",PROFILE:"grade9sprint_profile",THEME:"grade9sprint_theme",SAVED_QUIZZES:"grade9sprint_saved_quizzes"};function finalizeAttempt(e){return Object.freeze({...e,correctPromptIds:Object.freeze([...e.correctPromptIds]),missedPromptIds:Object.freeze([...e.missedPromptIds])})}const storage={getAttempts:()=>{const e=localStorage.getItem(STORAGE_KEYS.ATTEMPTS);return e?JSON.parse(e):[]},getAttemptsByQuizId:e=>storage.getAttempts().filter(o=>o.quizId===e),saveAttempt:e=>{const i=storage.getAttempts();if(i.findIndex(h=>h.id===e.id)>=0){console.warn(`Attempt ${e.id} already exists, skipping duplicate save`);return}const d=finalizeAttempt(e);i.push(d),localStorage.setItem(STORAGE_KEYS.ATTEMPTS,JSON.stringify(i))},getAttemptById:e=>storage.getAttempts().find(o=>o.id===e),getMasteryStates:()=>{const e=localStorage.getItem(STORAGE_KEYS.MASTERY);return e?JSON.parse(e):{}},getMasteryState:e=>storage.getMasteryStates()[e],updateMasteryState:e=>{const i=storage.getMasteryStates();i[e.quizId]=e,localStorage.setItem(STORAGE_KEYS.MASTERY,JSON.stringify(i))},getStreak:()=>{const e=localStorage.getItem(STORAGE_KEYS.STREAK);return e?JSON.parse(e):{currentStreakDays:0,lastActiveDate:"",bestStreakDays:0}},updateStreak:()=>{const e=storage.getStreak(),i=new Date().toDateString(),o=e.lastActiveDate?new Date(e.lastActiveDate).toDateString():"";if(o===i)return;const d=new Date;d.setDate(d.getDate()-1);const h=d.toDateString();o===h?e.currentStreakDays+=1:o!==i&&(e.currentStreakDays=1),e.lastActiveDate=i,e.bestStreakDays=Math.max(e.bestStreakDays,e.currentStreakDays),localStorage.setItem(STORAGE_KEYS.STREAK,JSON.stringify(e))},getProfile:()=>{const e=localStorage.getItem(STORAGE_KEYS.PROFILE);return e?JSON.parse(e):{xpTotal:0,level:1,badges:[],totalQuizzes:0,totalTimeMinutes:0,masteredCount:0,grade9SpeedCount:0}},updateProfile:e=>{const o={...storage.getProfile(),...e};o.level=Math.floor(o.xpTotal/1e3)+1,localStorage.setItem(STORAGE_KEYS.PROFILE,JSON.stringify(o))},addXP:e=>{const i=storage.getProfile();storage.updateProfile({xpTotal:i.xpTotal+e})},addBadge:e=>{const i=storage.getProfile();i.badges.includes(e)||(i.badges.push(e),storage.updateProfile({badges:i.badges}))},getTheme:()=>localStorage.getItem(STORAGE_KEYS.THEME)||"dark",setTheme:e=>{localStorage.setItem(STORAGE_KEYS.THEME,e)},getSavedQuizzes:()=>{const e=localStorage.getItem(STORAGE_KEYS.SAVED_QUIZZES);return e?JSON.parse(e):[]},saveQuiz:e=>{const i=storage.getSavedQuizzes();i.includes(e)||(i.push(e),localStorage.setItem(STORAGE_KEYS.SAVED_QUIZZES,JSON.stringify(i)))},unsaveQuiz:e=>{const o=storage.getSavedQuizzes().filter(d=>d!==e);localStorage.setItem(STORAGE_KEYS.SAVED_QUIZZES,JSON.stringify(o))},isQuizSaved:e=>storage.getSavedQuizzes().includes(e),getAllMasteryStates:()=>storage.getMasteryStates(),resetAll:()=>{Object.values(STORAGE_KEYS).forEach(e=>{e!==STORAGE_KEYS.THEME&&localStorage.removeItem(e)})}},calculateMasteryLevel=(e,i,o,d=!1)=>d||e<85?{level:1,label:"Learning",color:"text-orange-500"}:e===100?i<=o?{level:4,label:"Grade 9 Speed",color:"text-purple-500"}:{level:3,label:"Mastered",color:"text-green-500"}:{level:2,label:"Secure",color:"text-yellow-500"};function AppShell({children:e}){const i=useNavigate(),o=useLocation(),[d,h]=reactExports.useState(storage.getTheme()),g=storage.getStreak(),b=storage.getProfile();reactExports.useEffect(()=>{d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),storage.setTheme(d)},[d]);const j=()=>{h(d==="dark"?"light":"dark")},_=[{icon:Home,label:"Home",path:"/"},{icon:Compass,label:"Discover",path:"/discover"},{icon:BookOpen,label:"Subjects",path:"/subjects"},{icon:Trophy,label:"Leaderboard",path:"/leaderboard"},{icon:User,label:"Profile",path:"/profile"}],$=_e=>_e==="/"?o.pathname==="/":o.pathname.startsWith(_e);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen",style:{background:"rgb(var(--bg))"},children:[jsxRuntimeExports.jsx("header",{className:"fixed top-0 left-0 right-0 h-16 z-40 glass border-b",style:{borderColor:"rgb(var(--border))"},children:jsxRuntimeExports.jsxs("div",{className:"h-full px-4 lg:pl-72 flex items-center justify-between max-w-[2000px] mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-4",children:jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-gradient tracking-tight",children:"Grade9 Sprint"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>i("/quiz/daily-challenge-1"),className:"hidden sm:flex items-center gap-2 btn-primary text-sm px-4 py-2",children:[jsxRuntimeExports.jsx(Zap,{size:16}),jsxRuntimeExports.jsx("span",{children:"Daily Challenge"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg",style:{background:"rgb(var(--surface-2))"},children:jsxRuntimeExports.jsx(StreakFlame,{streak:g.currentStreakDays,size:"sm"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg font-semibold text-sm text-white",style:{background:"var(--gradient-primary)"},children:[jsxRuntimeExports.jsxs("span",{children:["Lv ",b.level]}),jsxRuntimeExports.jsx("span",{className:"opacity-75",children:""}),jsxRuntimeExports.jsxs("span",{children:[b.xpTotal," XP"]})]}),jsxRuntimeExports.jsx("button",{onClick:j,className:"p-2 rounded-lg transition-all hover:scale-105",style:{background:"rgb(var(--surface-2))",color:"rgb(var(--text))"},"aria-label":"Toggle theme",children:d==="dark"?jsxRuntimeExports.jsx(Sun,{size:20}):jsxRuntimeExports.jsx(Moon,{size:20})})]})]})}),jsxRuntimeExports.jsx("aside",{className:"hidden lg:block fixed left-0 top-16 bottom-0 w-64 z-30 border-r",style:{background:"rgb(var(--surface))",borderColor:"rgb(var(--border))"},children:jsxRuntimeExports.jsx("nav",{className:"p-4 space-y-1",children:_.map(_e=>{const et=_e.icon,tt=$(_e.path);return jsxRuntimeExports.jsxs(motion.button,{onClick:()=>i(_e.path),whileHover:{x:4},whileTap:{scale:.98},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold transition-all relative overflow-hidden",style:{color:tt?"white":"rgb(var(--text))"},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 rounded-xl",style:{background:"var(--gradient-primary)"},initial:{opacity:0},animate:{opacity:tt?1:0},transition:{duration:.2,ease:"easeOut"}}),jsxRuntimeExports.jsx(et,{size:20,className:"relative z-10"}),jsxRuntimeExports.jsx("span",{className:"relative z-10",children:_e.label})]},_e.path)})})}),jsxRuntimeExports.jsx("main",{className:"pt-16 lg:pl-64 min-h-screen",children:jsxRuntimeExports.jsx("div",{className:"p-4 md:p-6 lg:p-8 max-w-[2000px] mx-auto",children:e})}),jsxRuntimeExports.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-40 glass border-t pb-safe",style:{borderColor:"rgb(var(--border))"},children:jsxRuntimeExports.jsx("div",{className:"h-16 grid grid-cols-5 gap-1 px-2",children:_.map(_e=>{const et=_e.icon,tt=$(_e.path);return jsxRuntimeExports.jsxs(motion.button,{onClick:()=>i(_e.path),whileTap:{scale:.95},className:"flex flex-col items-center justify-center gap-1 rounded-lg transition-all",style:{color:tt?"rgb(var(--accent))":"rgb(var(--text-secondary))"},children:[jsxRuntimeExports.jsx(et,{size:22,strokeWidth:tt?2.5:2}),jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold",children:_e.label})]},_e.path)})})}),jsxRuntimeExports.jsx("div",{className:"lg:hidden h-16"})]})}const scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(i,o,d){let h=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),j=(b==null?void 0:b.nonce)||(b==null?void 0:b.getAttribute("nonce"));h=Promise.allSettled(o.map(_=>{if(_=assetsURL(_),_ in seen)return;seen[_]=!0;const $=_.endsWith(".css"),_e=$?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${_e}`))return;const et=document.createElement("link");if(et.rel=$?"stylesheet":scriptRel,$||(et.as="script"),et.crossOrigin="",et.href=_,j&&et.setAttribute("nonce",j),document.head.appendChild(et),$)return new Promise((tt,rt)=>{et.addEventListener("load",tt),et.addEventListener("error",()=>rt(new Error(`Unable to preload CSS for ${_}`)))})}))}function g(b){const j=new Event("vite:preloadError",{cancelable:!0});if(j.payload=b,window.dispatchEvent(j),!j.defaultPrevented)throw b}return h.then(b=>{for(const j of b||[])j.status==="rejected"&&g(j.reason);return i().catch(g)})},resolveFetch$3=e=>{let i;return e?i=e:typeof fetch>"u"?i=(...o)=>__vitePreload(async()=>{const{default:d}=await Promise.resolve().then(()=>browser);return{default:d}},[]).then(({default:d})=>d(...o)):i=fetch,(...o)=>i(...o)};class FunctionsError extends Error{constructor(i,o="FunctionsError",d){super(i),this.name=o,this.context=d}}class FunctionsFetchError extends FunctionsError{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}}class FunctionsRelayError extends FunctionsError{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}}class FunctionsHttpError extends FunctionsError{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}}var FunctionRegion;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));var __awaiter$7=function(e,i,o,d){function h(g){return g instanceof o?g:new o(function(b){b(g)})}return new(o||(o=Promise))(function(g,b){function j(_e){try{$(d.next(_e))}catch(et){b(et)}}function _(_e){try{$(d.throw(_e))}catch(et){b(et)}}function $(_e){_e.done?g(_e.value):h(_e.value).then(j,_)}$((d=d.apply(e,i||[])).next())})};class FunctionsClient{constructor(i,{headers:o={},customFetch:d,region:h=FunctionRegion.Any}={}){this.url=i,this.headers=o,this.region=h,this.fetch=resolveFetch$3(d)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i,o={}){var d;return __awaiter$7(this,void 0,void 0,function*(){try{const{headers:h,method:g,body:b}=o;let j={},{region:_}=o;_||(_=this.region);const $=new URL(`${this.url}/${i}`);_&&_!=="any"&&(j["x-region"]=_,$.searchParams.set("forceFunctionRegion",_));let _e;b&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)&&(typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?(j["Content-Type"]="application/octet-stream",_e=b):typeof b=="string"?(j["Content-Type"]="text/plain",_e=b):typeof FormData<"u"&&b instanceof FormData?_e=b:(j["Content-Type"]="application/json",_e=JSON.stringify(b)));const et=yield this.fetch($.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},j),this.headers),h),body:_e}).catch(it=>{throw new FunctionsFetchError(it)}),tt=et.headers.get("x-relay-error");if(tt&&tt==="true")throw new FunctionsRelayError(et);if(!et.ok)throw new FunctionsHttpError(et);let rt=((d=et.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),nt;return rt==="application/json"?nt=yield et.json():rt==="application/octet-stream"?nt=yield et.blob():rt==="text/event-stream"?nt=et:rt==="multipart/form-data"?nt=yield et.formData():nt=yield et.text(),{data:nt,error:null,response:et}}catch(h){return{data:null,error:h,response:h instanceof FunctionsHttpError||h instanceof FunctionsRelayError?h.context:void 0}}})}}var cjs={},PostgrestClient$2={},PostgrestQueryBuilder$2={},PostgrestFilterBuilder$2={},PostgrestTransformBuilder$2={},PostgrestBuilder$2={},getGlobal=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},globalObject=getGlobal();const fetch$1=globalObject.fetch,nodeFetch=globalObject.fetch.bind(globalObject),Headers$1=globalObject.Headers,Request=globalObject.Request,Response$1=globalObject.Response,browser=Object.freeze(Object.defineProperty({__proto__:null,Headers:Headers$1,Request,Response:Response$1,default:nodeFetch,fetch:fetch$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(browser);var PostgrestError$2={};Object.defineProperty(PostgrestError$2,"__esModule",{value:!0});let PostgrestError$1=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}};PostgrestError$2.default=PostgrestError$1;var __importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PostgrestBuilder$2,"__esModule",{value:!0});const node_fetch_1=__importDefault$5(require$$0),PostgrestError_1$1=__importDefault$5(PostgrestError$2);let PostgrestBuilder$1=class{constructor(i){var o,d;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(d=i.isMaybeSingle)!==null&&d!==void 0?d:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=node_fetch_1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var b,j,_,$;let _e=null,et=null,tt=null,rt=g.status,nt=g.statusText;if(g.ok){if(this.method!=="HEAD"){const ot=await g.text();ot===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((b=this.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?et=ot:et=JSON.parse(ot))}const st=(j=this.headers.get("Prefer"))===null||j===void 0?void 0:j.match(/count=(exact|planned|estimated)/),at=(_=g.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");st&&at&&at.length>1&&(tt=parseInt(at[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(et)&&(et.length>1?(_e={code:"PGRST116",details:`Results contain ${et.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},et=null,tt=null,rt=406,nt="Not Acceptable"):et.length===1?et=et[0]:et=null)}else{const st=await g.text();try{_e=JSON.parse(st),Array.isArray(_e)&&g.status===404&&(et=[],_e=null,rt=200,nt="OK")}catch{g.status===404&&st===""?(rt=204,nt="No Content"):_e={message:st}}if(_e&&this.isMaybeSingle&&(!(($=_e==null?void 0:_e.details)===null||$===void 0)&&$.includes("0 rows"))&&(_e=null,rt=200,nt="OK"),_e&&this.shouldThrowOnError)throw new PostgrestError_1$1.default(_e)}return{error:_e,data:et,count:tt,status:rt,statusText:nt}});return this.shouldThrowOnError||(h=h.catch(g=>{var b,j,_;return{error:{message:`${(b=g==null?void 0:g.name)!==null&&b!==void 0?b:"FetchError"}: ${g==null?void 0:g.message}`,details:`${(j=g==null?void 0:g.stack)!==null&&j!==void 0?j:""}`,hint:"",code:`${(_=g==null?void 0:g.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),h.then(i,o)}returns(){return this}overrideTypes(){return this}};PostgrestBuilder$2.default=PostgrestBuilder$1;var __importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PostgrestTransformBuilder$2,"__esModule",{value:!0});const PostgrestBuilder_1$1=__importDefault$4(PostgrestBuilder$2);let PostgrestTransformBuilder$1=class extends PostgrestBuilder_1$1.default{select(i){let o=!1;const d=(i??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:d,foreignTable:h,referencedTable:g=h}={}){const b=g?`${g}.order`:"order",j=this.url.searchParams.get(b);return this.url.searchParams.set(b,`${j?`${j},`:""}${i}.${o?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:d=o}={}){const h=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${i}`),this}range(i,o,{foreignTable:d,referencedTable:h=d}={}){const g=typeof h>"u"?"offset":`${h}.offset`,b=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${i}`),this.url.searchParams.set(b,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:d=!1,buffers:h=!1,wal:g=!1,format:b="text"}={}){var j;const _=[i?"analyze":null,o?"verbose":null,d?"settings":null,h?"buffers":null,g?"wal":null].filter(Boolean).join("|"),$=(j=this.headers.get("Accept"))!==null&&j!==void 0?j:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${b}; for="${$}"; options=${_};`),b==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};PostgrestTransformBuilder$2.default=PostgrestTransformBuilder$1;var __importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PostgrestFilterBuilder$2,"__esModule",{value:!0});const PostgrestTransformBuilder_1$1=__importDefault$3(PostgrestTransformBuilder$2);let PostgrestFilterBuilder$1=class extends PostgrestTransformBuilder_1$1.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const d=Array.from(new Set(o)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(i,`in.(${d})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:d,type:h}={}){let g="";h==="plain"?g="pl":h==="phrase"?g="ph":h==="websearch"&&(g="w");const b=d===void 0?"":`(${d})`;return this.url.searchParams.append(i,`${g}fts${b}.${o}`),this}match(i){return Object.entries(i).forEach(([o,d])=>{this.url.searchParams.append(o,`eq.${d}`)}),this}not(i,o,d){return this.url.searchParams.append(i,`not.${o}.${d}`),this}or(i,{foreignTable:o,referencedTable:d=o}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${i})`),this}filter(i,o,d){return this.url.searchParams.append(i,`${o}.${d}`),this}};PostgrestFilterBuilder$2.default=PostgrestFilterBuilder$1;var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PostgrestQueryBuilder$2,"__esModule",{value:!0});const PostgrestFilterBuilder_1$2=__importDefault$2(PostgrestFilterBuilder$2);let PostgrestQueryBuilder$1=class{constructor(i,{headers:o={},schema:d,fetch:h}){this.url=i,this.headers=new Headers(o),this.schema=d,this.fetch=h}select(i,{head:o=!1,count:d}={}){const h=o?"HEAD":"GET";let g=!1;const b=(i??"*").split("").map(j=>/\s/.test(j)&&!g?"":(j==='"'&&(g=!g),j)).join("");return this.url.searchParams.set("select",b),d&&this.headers.append("Prefer",`count=${d}`),new PostgrestFilterBuilder_1$2.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:d=!0}={}){var h;const g="POST";if(o&&this.headers.append("Prefer",`count=${o}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const b=i.reduce((j,_)=>j.concat(Object.keys(_)),[]);if(b.length>0){const j=[...new Set(b)].map(_=>`"${_}"`);this.url.searchParams.set("columns",j.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:d=!1,count:h,defaultToNull:g=!0}={}){var b;const j="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),h&&this.headers.append("Prefer",`count=${h}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const _=i.reduce(($,_e)=>$.concat(Object.keys(_e)),[]);if(_.length>0){const $=[...new Set(_)].map(_e=>`"${_e}"`);this.url.searchParams.set("columns",$.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:j,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}update(i,{count:o}={}){var d;const h="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new PostgrestFilterBuilder_1$2.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:i}={}){var o;const d="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new PostgrestFilterBuilder_1$2.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};PostgrestQueryBuilder$2.default=PostgrestQueryBuilder$1;var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PostgrestClient$2,"__esModule",{value:!0});const PostgrestQueryBuilder_1$1=__importDefault$1(PostgrestQueryBuilder$2),PostgrestFilterBuilder_1$1=__importDefault$1(PostgrestFilterBuilder$2);let PostgrestClient$1=class Cr{constructor(i,{headers:o={},schema:d,fetch:h}={}){this.url=i,this.headers=new Headers(o),this.schemaName=d,this.fetch=h}from(i){const o=new URL(`${this.url}/${i}`);return new PostgrestQueryBuilder_1$1.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new Cr(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:d=!1,get:h=!1,count:g}={}){var b;let j;const _=new URL(`${this.url}/rpc/${i}`);let $;d||h?(j=d?"HEAD":"GET",Object.entries(o).filter(([et,tt])=>tt!==void 0).map(([et,tt])=>[et,Array.isArray(tt)?`{${tt.join(",")}}`:`${tt}`]).forEach(([et,tt])=>{_.searchParams.append(et,tt)})):(j="POST",$=o);const _e=new Headers(this.headers);return g&&_e.set("Prefer",`count=${g}`),new PostgrestFilterBuilder_1$1.default({method:j,url:_,headers:_e,schema:this.schemaName,body:$,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}};PostgrestClient$2.default=PostgrestClient$1;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cjs,"__esModule",{value:!0});cjs.PostgrestError=cjs.PostgrestBuilder=cjs.PostgrestTransformBuilder=cjs.PostgrestFilterBuilder=cjs.PostgrestQueryBuilder=cjs.PostgrestClient=void 0;const PostgrestClient_1=__importDefault(PostgrestClient$2);cjs.PostgrestClient=PostgrestClient_1.default;const PostgrestQueryBuilder_1=__importDefault(PostgrestQueryBuilder$2);cjs.PostgrestQueryBuilder=PostgrestQueryBuilder_1.default;const PostgrestFilterBuilder_1=__importDefault(PostgrestFilterBuilder$2);cjs.PostgrestFilterBuilder=PostgrestFilterBuilder_1.default;const PostgrestTransformBuilder_1=__importDefault(PostgrestTransformBuilder$2);cjs.PostgrestTransformBuilder=PostgrestTransformBuilder_1.default;const PostgrestBuilder_1=__importDefault(PostgrestBuilder$2);cjs.PostgrestBuilder=PostgrestBuilder_1.default;const PostgrestError_1=__importDefault(PostgrestError$2);cjs.PostgrestError=PostgrestError_1.default;var _default=cjs.default={PostgrestClient:PostgrestClient_1.default,PostgrestQueryBuilder:PostgrestQueryBuilder_1.default,PostgrestFilterBuilder:PostgrestFilterBuilder_1.default,PostgrestTransformBuilder:PostgrestTransformBuilder_1.default,PostgrestBuilder:PostgrestBuilder_1.default,PostgrestError:PostgrestError_1.default};const{PostgrestClient,PostgrestQueryBuilder,PostgrestFilterBuilder,PostgrestTransformBuilder,PostgrestBuilder,PostgrestError}=_default;class WebSocketFactory{static detectEnvironment(){var i;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((i=navigator.userAgent)===null||i===void 0)&&i.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const o=process.versions;if(o&&o.node){const d=o.node,h=parseInt(d.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const i=this.detectEnvironment();if(i.constructor)return i.constructor;let o=i.error||"WebSocket not supported in this environment.";throw i.workaround&&(o+=`

Suggested solution: ${i.workaround}`),new Error(o)}static createWebSocket(i,o){const d=this.getWebSocketConstructor();return new d(i,o)}static isWebSocketSupported(){try{const i=this.detectEnvironment();return i.type==="native"||i.type==="ws"}catch{return!1}}}const version$3="2.15.5",DEFAULT_VERSION=`realtime-js/${version$3}`,VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3,MAX_PUSH_BUFFER_SIZE=100;var SOCKET_STATES;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(e){e.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(){this.HEADER_LENGTH=1}decode(i,o){return i.constructor===ArrayBuffer?o(this._binaryDecode(i)):o(typeof i=="string"?JSON.parse(i):{})}_binaryDecode(i){const o=new DataView(i),d=new TextDecoder;return this._decodeBroadcast(i,o,d)}_decodeBroadcast(i,o,d){const h=o.getUint8(1),g=o.getUint8(2);let b=this.HEADER_LENGTH+2;const j=d.decode(i.slice(b,b+h));b=b+h;const _=d.decode(i.slice(b,b+g));b=b+g;const $=JSON.parse(d.decode(i.slice(b,i.byteLength)));return{ref:null,topic:j,event:_,payload:$}}}class Timer{constructor(i,o){this.callback=i,this.timerCalc=o,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=o}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(e,i,o={})=>{var d;const h=(d=o.skipTypes)!==null&&d!==void 0?d:[];return Object.keys(i).reduce((g,b)=>(g[b]=convertColumn(b,e,i,h),g),{})},convertColumn=(e,i,o,d)=>{const h=i.find(j=>j.name===e),g=h==null?void 0:h.type,b=o[e];return g&&!d.includes(g)?convertCell(g,b):noop$5(b)},convertCell=(e,i)=>{if(e.charAt(0)==="_"){const o=e.slice(1,e.length);return toArray$2(i,o)}switch(e){case PostgresTypes.bool:return toBoolean(i);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber$1(i);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(i);case PostgresTypes.timestamp:return toTimestampString(i);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$5(i);default:return noop$5(i)}},noop$5=e=>e,toBoolean=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},toNumber$1=e=>{if(typeof e=="string"){const i=parseFloat(e);if(!Number.isNaN(i))return i}return e},toJson=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(i){return console.log(`JSON parse error: ${i}`),e}return e},toArray$2=(e,i)=>{if(typeof e!="string")return e;const o=e.length-1,d=e[o];if(e[0]==="{"&&d==="}"){let g;const b=e.slice(1,o);try{g=JSON.parse("["+b+"]")}catch{g=b?b.split(","):[]}return g.map(j=>convertCell(i,j))}return e},toTimestampString=e=>typeof e=="string"?e.replace(" ","T"):e,httpEndpointURL=e=>{let i=e;return i=i.replace(/^ws/i,"http"),i=i.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),i.replace(/\/+$/,"")+"/api/broadcast"};class Push{constructor(i,o,d={},h=DEFAULT_TIMEOUT){this.channel=i,this.event=o,this.payload=d,this.timeout=h,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,o){var d;return this._hasReceived(i)&&o((d=this.receivedResp)===null||d===void 0?void 0:d.response),this.recHooks.push({status:i,callback:o}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const i=o=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=o,this._matchReceive(o)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,o){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:o})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:o}){this.recHooks.filter(d=>d.status===i).forEach(d=>d.callback(o))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(i,o){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const d=(o==null?void 0:o.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(d.state,{},h=>{const{onJoin:g,onLeave:b,onSync:j}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,h,g,b),this.pendingDiffs.forEach(_=>{this.state=RealtimePresence.syncDiff(this.state,_,g,b)}),this.pendingDiffs=[],j()}),this.channel._on(d.diff,{},h=>{const{onJoin:g,onLeave:b,onSync:j}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(h):(this.state=RealtimePresence.syncDiff(this.state,h,g,b),j())}),this.onJoin((h,g,b)=>{this.channel._trigger("presence",{event:"join",key:h,currentPresences:g,newPresences:b})}),this.onLeave((h,g,b)=>{this.channel._trigger("presence",{event:"leave",key:h,currentPresences:g,leftPresences:b})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,o,d,h){const g=this.cloneDeep(i),b=this.transformState(o),j={},_={};return this.map(g,($,_e)=>{b[$]||(_[$]=_e)}),this.map(b,($,_e)=>{const et=g[$];if(et){const tt=_e.map(st=>st.presence_ref),rt=et.map(st=>st.presence_ref),nt=_e.filter(st=>rt.indexOf(st.presence_ref)<0),it=et.filter(st=>tt.indexOf(st.presence_ref)<0);nt.length>0&&(j[$]=nt),it.length>0&&(_[$]=it)}else j[$]=_e}),this.syncDiff(g,{joins:j,leaves:_},d,h)}static syncDiff(i,o,d,h){const{joins:g,leaves:b}={joins:this.transformState(o.joins),leaves:this.transformState(o.leaves)};return d||(d=()=>{}),h||(h=()=>{}),this.map(g,(j,_)=>{var $;const _e=($=i[j])!==null&&$!==void 0?$:[];if(i[j]=this.cloneDeep(_),_e.length>0){const et=i[j].map(rt=>rt.presence_ref),tt=_e.filter(rt=>et.indexOf(rt.presence_ref)<0);i[j].unshift(...tt)}d(j,_e,_)}),this.map(b,(j,_)=>{let $=i[j];if(!$)return;const _e=_.map(et=>et.presence_ref);$=$.filter(et=>_e.indexOf(et.presence_ref)<0),i[j]=$,h(j,$,_),$.length===0&&delete i[j]}),i}static map(i,o){return Object.getOwnPropertyNames(i).map(d=>o(d,i[d]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((o,d)=>{const h=i[d];return"metas"in h?o[d]=h.metas.map(g=>(g.presence_ref=g.phx_ref,delete g.phx_ref,delete g.phx_ref_prev,g)):o[d]=h,o},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(i,o={config:{}},d){this.topic=i,this.params=o,this.socket=d,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},o.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(i,o=this.timeout){var d,h,g;if(this.socket.isConnected()||this.socket.connect(),this.state==CHANNEL_STATES.closed){const{config:{broadcast:b,presence:j,private:_}}=this.params,$=(h=(d=this.bindings.postgres_changes)===null||d===void 0?void 0:d.map(rt=>rt.filter))!==null&&h!==void 0?h:[],_e=!!this.bindings[REALTIME_LISTEN_TYPES.PRESENCE]&&this.bindings[REALTIME_LISTEN_TYPES.PRESENCE].length>0||((g=this.params.config.presence)===null||g===void 0?void 0:g.enabled)===!0,et={},tt={broadcast:b,presence:Object.assign(Object.assign({},j),{enabled:_e}),postgres_changes:$,private:_};this.socket.accessTokenValue&&(et.access_token=this.socket.accessTokenValue),this._onError(rt=>i==null?void 0:i(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,rt)),this._onClose(()=>i==null?void 0:i(REALTIME_SUBSCRIBE_STATES.CLOSED)),this.updateJoinPayload(Object.assign({config:tt},et)),this.joinedOnce=!0,this._rejoin(o),this.joinPush.receive("ok",async({postgres_changes:rt})=>{var nt;if(this.socket.setAuth(),rt===void 0){i==null||i(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const it=this.bindings.postgres_changes,st=(nt=it==null?void 0:it.length)!==null&&nt!==void 0?nt:0,at=[];for(let ot=0;ot<st;ot++){const lt=it[ot],{filter:{event:ct,schema:ut,table:dt,filter:mt}}=lt,xt=rt&&rt[ot];if(xt&&xt.event===ct&&xt.schema===ut&&xt.table===dt&&xt.filter===mt)at.push(Object.assign(Object.assign({},lt),{id:xt.id}));else{this.unsubscribe(),this.state=CHANNEL_STATES.errored,i==null||i(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=at,i&&i(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",rt=>{this.state=CHANNEL_STATES.errored,i==null||i(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(rt).join(", ")||"error")))}).receive("timeout",()=>{i==null||i(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(i,o={}){return await this.send({type:"presence",event:"track",payload:i},o.timeout||this.timeout)}async untrack(i={}){return await this.send({type:"presence",event:"untrack"},i)}on(i,o,d){return this.state===CHANNEL_STATES.joined&&i===REALTIME_LISTEN_TYPES.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(i,o,d)}async send(i,o={}){var d,h;if(!this._canPush()&&i.type==="broadcast"){const{event:g,payload:b}=i,_={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:g,payload:b,private:this.private}]})};try{const $=await this._fetchWithTimeout(this.broadcastEndpointURL,_,(d=o.timeout)!==null&&d!==void 0?d:this.timeout);return await((h=$.body)===null||h===void 0?void 0:h.cancel()),$.ok?"ok":"error"}catch($){return $.name==="AbortError"?"timed out":"error"}}else return new Promise(g=>{var b,j,_;const $=this._push(i.type,i,o.timeout||this.timeout);i.type==="broadcast"&&!(!((_=(j=(b=this.params)===null||b===void 0?void 0:b.config)===null||j===void 0?void 0:j.broadcast)===null||_===void 0)&&_.ack)&&g("ok"),$.receive("ok",()=>g("ok")),$.receive("error",()=>g("error")),$.receive("timeout",()=>g("timed out"))})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=CHANNEL_STATES.leaving;const o=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};this.joinPush.destroy();let d=null;return new Promise(h=>{d=new Push(this,CHANNEL_EVENTS.leave,{},i),d.receive("ok",()=>{o(),h("ok")}).receive("timeout",()=>{o(),h("timed out")}).receive("error",()=>{h("error")}),d.send(),this._canPush()||d.trigger("ok",{})}).finally(()=>{d==null||d.destroy()})}teardown(){this.pushBuffer.forEach(i=>i.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=CHANNEL_STATES.closed,this.bindings={}}async _fetchWithTimeout(i,o,d){const h=new AbortController,g=setTimeout(()=>h.abort(),d),b=await this.socket.fetch(i,Object.assign(Object.assign({},o),{signal:h.signal}));return clearTimeout(g),b}_push(i,o,d=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let h=new Push(this,i,o,d);return this._canPush()?h.send():this._addToPushBuffer(h),h}_addToPushBuffer(i){if(i.startTimeout(),this.pushBuffer.push(i),this.pushBuffer.length>MAX_PUSH_BUFFER_SIZE){const o=this.pushBuffer.shift();o&&(o.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${o.event}`,o.payload))}}_onMessage(i,o,d){return o}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,o,d){var h,g;const b=i.toLocaleLowerCase(),{close:j,error:_,leave:$,join:_e}=CHANNEL_EVENTS;if(d&&[j,_,$,_e].indexOf(b)>=0&&d!==this._joinRef())return;let tt=this._onMessage(b,o,d);if(o&&!tt)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(b)?(h=this.bindings.postgres_changes)===null||h===void 0||h.filter(rt=>{var nt,it,st;return((nt=rt.filter)===null||nt===void 0?void 0:nt.event)==="*"||((st=(it=rt.filter)===null||it===void 0?void 0:it.event)===null||st===void 0?void 0:st.toLocaleLowerCase())===b}).map(rt=>rt.callback(tt,d)):(g=this.bindings[b])===null||g===void 0||g.filter(rt=>{var nt,it,st,at,ot,lt;if(["broadcast","presence","postgres_changes"].includes(b))if("id"in rt){const ct=rt.id,ut=(nt=rt.filter)===null||nt===void 0?void 0:nt.event;return ct&&((it=o.ids)===null||it===void 0?void 0:it.includes(ct))&&(ut==="*"||(ut==null?void 0:ut.toLocaleLowerCase())===((st=o.data)===null||st===void 0?void 0:st.type.toLocaleLowerCase()))}else{const ct=(ot=(at=rt==null?void 0:rt.filter)===null||at===void 0?void 0:at.event)===null||ot===void 0?void 0:ot.toLocaleLowerCase();return ct==="*"||ct===((lt=o==null?void 0:o.event)===null||lt===void 0?void 0:lt.toLocaleLowerCase())}else return rt.type.toLocaleLowerCase()===b}).map(rt=>{if(typeof tt=="object"&&"ids"in tt){const nt=tt.data,{schema:it,table:st,commit_timestamp:at,type:ot,errors:lt}=nt;tt=Object.assign(Object.assign({},{schema:it,table:st,commit_timestamp:at,eventType:ot,new:{},old:{},errors:lt}),this._getPayloadRecords(nt))}rt.callback(tt,d)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,o,d){const h=i.toLocaleLowerCase(),g={type:h,filter:o,callback:d};return this.bindings[h]?this.bindings[h].push(g):this.bindings[h]=[g],this}_off(i,o){const d=i.toLocaleLowerCase();return this.bindings[d]&&(this.bindings[d]=this.bindings[d].filter(h=>{var g;return!(((g=h.type)===null||g===void 0?void 0:g.toLocaleLowerCase())===d&&RealtimeChannel.isEqual(h.filter,o))})),this}static isEqual(i,o){if(Object.keys(i).length!==Object.keys(o).length)return!1;for(const d in i)if(i[d]!==o[d])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(CHANNEL_EVENTS.close,{},i)}_onError(i){this._on(CHANNEL_EVENTS.error,{},o=>i(o))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(i))}_getPayloadRecords(i){const o={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(o.new=convertChangeData(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(o.old=convertChangeData(i.columns,i.old_record)),o}}const noop$4=()=>{},CONNECTION_TIMEOUTS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RECONNECT_INTERVALS=[1e3,2e3,5e3,1e4],DEFAULT_RECONNECT_FALLBACK=1e4,WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(i,o){var d;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=null,this.heartbeatIntervalMs=CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop$4,this.ref=0,this.reconnectTimer=null,this.logger=noop$4,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=h=>{let g;return h?g=h:typeof fetch>"u"?g=(...b)=>__vitePreload(async()=>{const{default:j}=await Promise.resolve().then(()=>browser);return{default:j}},void 0).then(({default:j})=>j(...b)).catch(j=>{throw new Error(`Failed to load @supabase/node-fetch: ${j.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):g=fetch,(...b)=>g(...b)},!(!((d=o==null?void 0:o.params)===null||d===void 0)&&d.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=o.params.apikey,this.endPoint=`${i}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(i),this._initializeOptions(o),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(o==null?void 0:o.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WebSocketFactory.createWebSocket(this.endpointURL())}catch(i){this._setConnectionState("disconnected");const o=i.message;throw o.includes("Node.js")?new Error(`${o}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${o}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}disconnect(i,o){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const d=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(d),this._setConnectionState("disconnected")},i?this.conn.close(i,o??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(i){const o=await i.unsubscribe();return this.channels.length===0&&this.disconnect(),o}async removeAllChannels(){const i=await Promise.all(this.channels.map(o=>o.unsubscribe()));return this.channels=[],this.disconnect(),i}log(i,o,d){this.logger(i,o,d)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(i,o={config:{}}){const d=`realtime:${i}`,h=this.getChannels().find(g=>g.topic===d);if(h)return h;{const g=new RealtimeChannel(`realtime:${i}`,o,this);return this.channels.push(g),g}}push(i){const{topic:o,event:d,payload:h,ref:g}=i,b=()=>{this.encode(i,j=>{var _;(_=this.conn)===null||_===void 0||_.send(j)})};this.log("push",`${o} ${d} (${g})`,h),this.isConnected()?b():this.sendBuffer.push(b)}async setAuth(i=null){this._authPromise=this._performAuth(i);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var i;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(o){this.log("error","error in heartbeat callback",o)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(o){this.log("error","error in heartbeat callback",o)}this._wasManualDisconnect=!1,(i=this.conn)===null||i===void 0||i.close(WS_CLOSE_NORMAL,"heartbeat timeout"),setTimeout(()=>{var o;this.isConnected()||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout()},CONNECTION_TIMEOUTS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(o){this.log("error","error in heartbeat callback",o)}this._setAuthSafely("heartbeat")}onHeartbeat(i){this.heartbeatCallback=i}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let o=this.channels.find(d=>d.topic===i&&(d._isJoined()||d._isJoining()));o&&(this.log("transport",`leaving duplicate topic "${i}"`),o.unsubscribe())}_remove(i){this.channels=this.channels.filter(o=>o.topic!==i.topic)}_onConnMessage(i){this.decode(i.data,o=>{if(o.topic==="phoenix"&&o.event==="phx_reply")try{this.heartbeatCallback(o.payload.status==="ok"?"ok":"error")}catch($){this.log("error","error in heartbeat callback",$)}o.ref&&o.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:d,event:h,payload:g,ref:b}=o,j=b?`(${b})`:"",_=g.status||"";this.log("receive",`${_} ${d} ${h} ${j}`.trim(),g),this.channels.filter($=>$._isMember(d)).forEach($=>$._trigger(h,g,b)),this._triggerStateCallbacks("message",o)})}_clearTimer(i){var o;i==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):i==="reconnect"&&((o=this.reconnectTimer)===null||o===void 0||o.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(i=>i.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=o=>{this.log("worker","worker error",o.message),this.workerRef.terminate()},this.workerRef.onmessage=o=>{o.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(i){var o;this._setConnectionState("disconnected"),this.log("transport","close",i),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout(),this._triggerStateCallbacks("close",i)}_onConnError(i){this._setConnectionState("disconnected"),this.log("transport",`${i}`),this._triggerChanError(),this._triggerStateCallbacks("error",i)}_triggerChanError(){this.channels.forEach(i=>i._trigger(CHANNEL_EVENTS.error))}_appendParams(i,o){if(Object.keys(o).length===0)return i;const d=i.match(/\?/)?"&":"?",h=new URLSearchParams(o);return`${i}${d}${h}`}_workerObjectUrl(i){let o;if(i)o=i;else{const d=new Blob([WORKER_SCRIPT],{type:"application/javascript"});o=URL.createObjectURL(d)}return o}_setConnectionState(i,o=!1){this._connectionState=i,i==="connecting"?this._wasManualDisconnect=!1:i==="disconnecting"&&(this._wasManualDisconnect=o)}async _performAuth(i=null){let o;i?o=i:this.accessToken?o=await this.accessToken():o=this.accessTokenValue,this.accessTokenValue!=o&&(this.accessTokenValue=o,this.channels.forEach(d=>{const h={access_token:o,version:DEFAULT_VERSION};o&&d.updateJoinPayload(h),d.joinedOnce&&d._isJoined()&&d._push(CHANNEL_EVENTS.access_token,{access_token:o})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(i="general"){this.setAuth().catch(o=>{this.log("error",`error setting auth in ${i}`,o)})}_triggerStateCallbacks(i,o){try{this.stateChangeCallbacks[i].forEach(d=>{try{d(o)}catch(h){this.log("error",`error in ${i} callback`,h)}})}catch(d){this.log("error",`error triggering ${i} callbacks`,d)}}_setupReconnectionTimer(){this.reconnectTimer=new Timer(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},CONNECTION_TIMEOUTS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(i){var o,d,h,g,b,j,_,$,_e;if(this.transport=(o=i==null?void 0:i.transport)!==null&&o!==void 0?o:null,this.timeout=(d=i==null?void 0:i.timeout)!==null&&d!==void 0?d:DEFAULT_TIMEOUT,this.heartbeatIntervalMs=(h=i==null?void 0:i.heartbeatIntervalMs)!==null&&h!==void 0?h:CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.worker=(g=i==null?void 0:i.worker)!==null&&g!==void 0?g:!1,this.accessToken=(b=i==null?void 0:i.accessToken)!==null&&b!==void 0?b:null,this.heartbeatCallback=(j=i==null?void 0:i.heartbeatCallback)!==null&&j!==void 0?j:noop$4,i!=null&&i.params&&(this.params=i.params),i!=null&&i.logger&&(this.logger=i.logger),(i!=null&&i.logLevel||i!=null&&i.log_level)&&(this.logLevel=i.logLevel||i.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(_=i==null?void 0:i.reconnectAfterMs)!==null&&_!==void 0?_:et=>RECONNECT_INTERVALS[et-1]||DEFAULT_RECONNECT_FALLBACK,this.encode=($=i==null?void 0:i.encode)!==null&&$!==void 0?$:(et,tt)=>tt(JSON.stringify(et)),this.decode=(_e=i==null?void 0:i.decode)!==null&&_e!==void 0?_e:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=i==null?void 0:i.workerUrl}}}class StorageError extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class StorageApiError extends StorageError{constructor(i,o,d){super(i),this.name="StorageApiError",this.status=o,this.statusCode=d}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class StorageUnknownError extends StorageError{constructor(i,o){super(i),this.name="StorageUnknownError",this.originalError=o}}var __awaiter$6=function(e,i,o,d){function h(g){return g instanceof o?g:new o(function(b){b(g)})}return new(o||(o=Promise))(function(g,b){function j(_e){try{$(d.next(_e))}catch(et){b(et)}}function _(_e){try{$(d.throw(_e))}catch(et){b(et)}}function $(_e){_e.done?g(_e.value):h(_e.value).then(j,_)}$((d=d.apply(e,i||[])).next())})};const resolveFetch$2=e=>{let i;return e?i=e:typeof fetch>"u"?i=(...o)=>__vitePreload(async()=>{const{default:d}=await Promise.resolve().then(()=>browser);return{default:d}},void 0).then(({default:d})=>d(...o)):i=fetch,(...o)=>i(...o)},resolveResponse=()=>__awaiter$6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield __vitePreload(()=>Promise.resolve().then(()=>browser),void 0)).Response:Response}),recursiveToCamel=e=>{if(Array.isArray(e))return e.map(o=>recursiveToCamel(o));if(typeof e=="function"||e!==Object(e))return e;const i={};return Object.entries(e).forEach(([o,d])=>{const h=o.replace(/([-_][a-z])/gi,g=>g.toUpperCase().replace(/[-_]/g,""));i[h]=recursiveToCamel(d)}),i},isPlainObject$6=e=>{if(typeof e!="object"||e===null)return!1;const i=Object.getPrototypeOf(e);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var __awaiter$5=function(e,i,o,d){function h(g){return g instanceof o?g:new o(function(b){b(g)})}return new(o||(o=Promise))(function(g,b){function j(_e){try{$(d.next(_e))}catch(et){b(et)}}function _(_e){try{$(d.throw(_e))}catch(et){b(et)}}function $(_e){_e.done?g(_e.value):h(_e.value).then(j,_)}$((d=d.apply(e,i||[])).next())})};const _getErrorMessage$1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),handleError$1=(e,i,o)=>__awaiter$5(void 0,void 0,void 0,function*(){const d=yield resolveResponse();e instanceof d&&!(o!=null&&o.noResolveJson)?e.json().then(h=>{const g=e.status||500,b=(h==null?void 0:h.statusCode)||g+"";i(new StorageApiError(_getErrorMessage$1(h),g,b))}).catch(h=>{i(new StorageUnknownError(_getErrorMessage$1(h),h))}):i(new StorageUnknownError(_getErrorMessage$1(e),e))}),_getRequestParams$1=(e,i,o,d)=>{const h={method:e,headers:(i==null?void 0:i.headers)||{}};return e==="GET"||!d?h:(isPlainObject$6(d)?(h.headers=Object.assign({"Content-Type":"application/json"},i==null?void 0:i.headers),h.body=JSON.stringify(d)):h.body=d,i!=null&&i.duplex&&(h.duplex=i.duplex),Object.assign(Object.assign({},h),o))};function _handleRequest$1(e,i,o,d,h,g){return __awaiter$5(this,void 0,void 0,function*(){return new Promise((b,j)=>{e(o,_getRequestParams$1(i,d,h,g)).then(_=>{if(!_.ok)throw _;return d!=null&&d.noResolveJson?_:_.json()}).then(_=>b(_)).catch(_=>handleError$1(_,j,d))})})}function get$4(e,i,o,d){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(e,"GET",i,o,d)})}function post(e,i,o,d,h){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(e,"POST",i,d,h,o)})}function put(e,i,o,d,h){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(e,"PUT",i,d,h,o)})}function head(e,i,o,d){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(e,"HEAD",i,Object.assign(Object.assign({},o),{noResolveJson:!0}),d)})}function remove(e,i,o,d,h){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(e,"DELETE",i,d,h,o)})}var __awaiter$4=function(e,i,o,d){function h(g){return g instanceof o?g:new o(function(b){b(g)})}return new(o||(o=Promise))(function(g,b){function j(_e){try{$(d.next(_e))}catch(et){b(et)}}function _(_e){try{$(d.throw(_e))}catch(et){b(et)}}function $(_e){_e.done?g(_e.value):h(_e.value).then(j,_)}$((d=d.apply(e,i||[])).next())})};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(i,o={},d,h){this.shouldThrowOnError=!1,this.url=i,this.headers=o,this.bucketId=d,this.fetch=resolveFetch$2(h)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(i,o,d,h){return __awaiter$4(this,void 0,void 0,function*(){try{let g;const b=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),h);let j=Object.assign(Object.assign({},this.headers),i==="POST"&&{"x-upsert":String(b.upsert)});const _=b.metadata;typeof Blob<"u"&&d instanceof Blob?(g=new FormData,g.append("cacheControl",b.cacheControl),_&&g.append("metadata",this.encodeMetadata(_)),g.append("",d)):typeof FormData<"u"&&d instanceof FormData?(g=d,g.append("cacheControl",b.cacheControl),_&&g.append("metadata",this.encodeMetadata(_))):(g=d,j["cache-control"]=`max-age=${b.cacheControl}`,j["content-type"]=b.contentType,_&&(j["x-metadata"]=this.toBase64(this.encodeMetadata(_)))),h!=null&&h.headers&&(j=Object.assign(Object.assign({},j),h.headers));const $=this._removeEmptyFolders(o),_e=this._getFinalPath($),et=yield(i=="PUT"?put:post)(this.fetch,`${this.url}/object/${_e}`,g,Object.assign({headers:j},b!=null&&b.duplex?{duplex:b.duplex}:{}));return{data:{path:$,id:et.Id,fullPath:et.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(isStorageError(g))return{data:null,error:g};throw g}})}upload(i,o,d){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",i,o,d)})}uploadToSignedUrl(i,o,d,h){return __awaiter$4(this,void 0,void 0,function*(){const g=this._removeEmptyFolders(i),b=this._getFinalPath(g),j=new URL(this.url+`/object/upload/sign/${b}`);j.searchParams.set("token",o);try{let _;const $=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},h),_e=Object.assign(Object.assign({},this.headers),{"x-upsert":String($.upsert)});typeof Blob<"u"&&d instanceof Blob?(_=new FormData,_.append("cacheControl",$.cacheControl),_.append("",d)):typeof FormData<"u"&&d instanceof FormData?(_=d,_.append("cacheControl",$.cacheControl)):(_=d,_e["cache-control"]=`max-age=${$.cacheControl}`,_e["content-type"]=$.contentType);const et=yield put(this.fetch,j.toString(),_,{headers:_e});return{data:{path:g,fullPath:et.Key},error:null}}catch(_){if(this.shouldThrowOnError)throw _;if(isStorageError(_))return{data:null,error:_};throw _}})}createSignedUploadUrl(i,o){return __awaiter$4(this,void 0,void 0,function*(){try{let d=this._getFinalPath(i);const h=Object.assign({},this.headers);o!=null&&o.upsert&&(h["x-upsert"]="true");const g=yield post(this.fetch,`${this.url}/object/upload/sign/${d}`,{},{headers:h}),b=new URL(this.url+g.url),j=b.searchParams.get("token");if(!j)throw new StorageError("No token returned by API");return{data:{signedUrl:b.toString(),path:i,token:j},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}})}update(i,o,d){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",i,o,d)})}move(i,o,d){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:i,destinationKey:o,destinationBucket:d==null?void 0:d.destinationBucket},{headers:this.headers}),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(isStorageError(h))return{data:null,error:h};throw h}})}copy(i,o,d){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:i,destinationKey:o,destinationBucket:d==null?void 0:d.destinationBucket},{headers:this.headers})).Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(isStorageError(h))return{data:null,error:h};throw h}})}createSignedUrl(i,o,d){return __awaiter$4(this,void 0,void 0,function*(){try{let h=this._getFinalPath(i),g=yield post(this.fetch,`${this.url}/object/sign/${h}`,Object.assign({expiresIn:o},d!=null&&d.transform?{transform:d.transform}:{}),{headers:this.headers});const b=d!=null&&d.download?`&download=${d.download===!0?"":d.download}`:"";return g={signedUrl:encodeURI(`${this.url}${g.signedURL}${b}`)},{data:g,error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(isStorageError(h))return{data:null,error:h};throw h}})}createSignedUrls(i,o,d){return __awaiter$4(this,void 0,void 0,function*(){try{const h=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:o,paths:i},{headers:this.headers}),g=d!=null&&d.download?`&download=${d.download===!0?"":d.download}`:"";return{data:h.map(b=>Object.assign(Object.assign({},b),{signedUrl:b.signedURL?encodeURI(`${this.url}${b.signedURL}${g}`):null})),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(isStorageError(h))return{data:null,error:h};throw h}})}download(i,o){return __awaiter$4(this,void 0,void 0,function*(){const h=typeof(o==null?void 0:o.transform)<"u"?"render/image/authenticated":"object",g=this.transformOptsToQueryString((o==null?void 0:o.transform)||{}),b=g?`?${g}`:"";try{const j=this._getFinalPath(i);return{data:yield(yield get$4(this.fetch,`${this.url}/${h}/${j}${b}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(j){if(this.shouldThrowOnError)throw j;if(isStorageError(j))return{data:null,error:j};throw j}})}info(i){return __awaiter$4(this,void 0,void 0,function*(){const o=this._getFinalPath(i);try{const d=yield get$4(this.fetch,`${this.url}/object/info/${o}`,{headers:this.headers});return{data:recursiveToCamel(d),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}})}exists(i){return __awaiter$4(this,void 0,void 0,function*(){const o=this._getFinalPath(i);try{return yield head(this.fetch,`${this.url}/object/${o}`,{headers:this.headers}),{data:!0,error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(isStorageError(d)&&d instanceof StorageUnknownError){const h=d.originalError;if([400,404].includes(h==null?void 0:h.status))return{data:!1,error:d}}throw d}})}getPublicUrl(i,o){const d=this._getFinalPath(i),h=[],g=o!=null&&o.download?`download=${o.download===!0?"":o.download}`:"";g!==""&&h.push(g);const j=typeof(o==null?void 0:o.transform)<"u"?"render/image":"object",_=this.transformOptsToQueryString((o==null?void 0:o.transform)||{});_!==""&&h.push(_);let $=h.join("&");return $!==""&&($=`?${$}`),{data:{publicUrl:encodeURI(`${this.url}/${j}/public/${d}${$}`)}}}remove(i){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:i},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}})}list(i,o,d){return __awaiter$4(this,void 0,void 0,function*(){try{const h=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),o),{prefix:i||""});return{data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,h,{headers:this.headers},d),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(isStorageError(h))return{data:null,error:h};throw h}})}listV2(i,o){return __awaiter$4(this,void 0,void 0,function*(){try{const d=Object.assign({},i);return{data:yield post(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,d,{headers:this.headers},o),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}})}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const o=[];return i.width&&o.push(`width=${i.width}`),i.height&&o.push(`height=${i.height}`),i.resize&&o.push(`resize=${i.resize}`),i.format&&o.push(`format=${i.format}`),i.quality&&o.push(`quality=${i.quality}`),o.join("&")}}const version$2="2.12.1",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var __awaiter$3=function(e,i,o,d){function h(g){return g instanceof o?g:new o(function(b){b(g)})}return new(o||(o=Promise))(function(g,b){function j(_e){try{$(d.next(_e))}catch(et){b(et)}}function _(_e){try{$(d.throw(_e))}catch(et){b(et)}}function $(_e){_e.done?g(_e.value):h(_e.value).then(j,_)}$((d=d.apply(e,i||[])).next())})};class StorageBucketApi{constructor(i,o={},d,h){this.shouldThrowOnError=!1;const g=new URL(i);h!=null&&h.useNewHostname&&/supabase\.(co|in|red)$/.test(g.hostname)&&!g.hostname.includes("storage.supabase.")&&(g.hostname=g.hostname.replace("supabase.","storage.supabase.")),this.url=g.href,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),o),this.fetch=resolveFetch$2(d)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get$4(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}getBucket(i){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get$4(this.fetch,`${this.url}/bucket/${i}`,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}})}createBucket(i,o={public:!1}){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}})}updateBucket(i,o){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${i}`,{id:i,name:i,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}})}emptyBucket(i){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket/${i}/empty`,{},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}})}deleteBucket(i){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${i}`,{},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}})}}class StorageClient extends StorageBucketApi{constructor(i,o={},d,h){super(i,o,d,h)}from(i){return new StorageFileApi(this.url,this.headers,i,this.fetch)}}const version$1="2.57.4";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$1}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};var __awaiter$2=function(e,i,o,d){function h(g){return g instanceof o?g:new o(function(b){b(g)})}return new(o||(o=Promise))(function(g,b){function j(_e){try{$(d.next(_e))}catch(et){b(et)}}function _(_e){try{$(d.throw(_e))}catch(et){b(et)}}function $(_e){_e.done?g(_e.value):h(_e.value).then(j,_)}$((d=d.apply(e,i||[])).next())})};const resolveFetch$1=e=>{let i;return e?i=e:typeof fetch>"u"?i=nodeFetch:i=fetch,(...o)=>i(...o)},resolveHeadersConstructor=()=>typeof Headers>"u"?Headers$1:Headers,fetchWithAuth=(e,i,o)=>{const d=resolveFetch$1(o),h=resolveHeadersConstructor();return(g,b)=>__awaiter$2(void 0,void 0,void 0,function*(){var j;const _=(j=yield i())!==null&&j!==void 0?j:e;let $=new h(b==null?void 0:b.headers);return $.has("apikey")||$.set("apikey",e),$.has("Authorization")||$.set("Authorization",`Bearer ${_}`),d(g,Object.assign(Object.assign({},b),{headers:$}))})};var __awaiter$1=function(e,i,o,d){function h(g){return g instanceof o?g:new o(function(b){b(g)})}return new(o||(o=Promise))(function(g,b){function j(_e){try{$(d.next(_e))}catch(et){b(et)}}function _(_e){try{$(d.throw(_e))}catch(et){b(et)}}function $(_e){_e.done?g(_e.value):h(_e.value).then(j,_)}$((d=d.apply(e,i||[])).next())})};function ensureTrailingSlash(e){return e.endsWith("/")?e:e+"/"}function applySettingDefaults(e,i){var o,d;const{db:h,auth:g,realtime:b,global:j}=e,{db:_,auth:$,realtime:_e,global:et}=i,tt={db:Object.assign(Object.assign({},_),h),auth:Object.assign(Object.assign({},$),g),realtime:Object.assign(Object.assign({},_e),b),storage:{},global:Object.assign(Object.assign(Object.assign({},et),j),{headers:Object.assign(Object.assign({},(o=et==null?void 0:et.headers)!==null&&o!==void 0?o:{}),(d=j==null?void 0:j.headers)!==null&&d!==void 0?d:{})}),accessToken:()=>__awaiter$1(this,void 0,void 0,function*(){return""})};return e.accessToken?tt.accessToken=e.accessToken:delete tt.accessToken,tt}function validateSupabaseUrl(e){const i=e==null?void 0:e.trim();if(!i)throw new Error("supabaseUrl is required.");if(!i.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ensureTrailingSlash(i))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const version="2.71.1",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY$1="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=10*60*1e3;class AuthError extends Error{constructor(i,o,d){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=o,this.code=d}}function isAuthError(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class AuthApiError extends AuthError{constructor(i,o,d){super(i,o,d),this.name="AuthApiError",this.status=o,this.code=d}}function isAuthApiError(e){return isAuthError(e)&&e.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(i,o){super(i),this.name="AuthUnknownError",this.originalError=o}}class CustomAuthError extends AuthError{constructor(i,o,d,h){super(i,d,h),this.name=o,this.status=d}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(e){return isAuthError(e)&&e.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(i,o=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(e){return isAuthError(e)&&e.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(i,o=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(i,o){super(i,"AuthRetryableFetchError",o,void 0)}}function isAuthRetryableFetchError(e){return isAuthError(e)&&e.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(i,o,d){super(i,"AuthWeakPasswordError",o,"weak_password"),this.reasons=d}}class AuthInvalidJwtError extends CustomAuthError{constructor(i){super(i,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const e=new Array(128);for(let i=0;i<e.length;i+=1)e[i]=-1;for(let i=0;i<IGNORE_BASE64URL.length;i+=1)e[IGNORE_BASE64URL[i].charCodeAt(0)]=-2;for(let i=0;i<TO_BASE64URL.length;i+=1)e[TO_BASE64URL[i].charCodeAt(0)]=i;return e})();function byteToBase64URL(e,i,o){if(e!==null)for(i.queue=i.queue<<8|e,i.queuedBits+=8;i.queuedBits>=6;){const d=i.queue>>i.queuedBits-6&63;o(TO_BASE64URL[d]),i.queuedBits-=6}else if(i.queuedBits>0)for(i.queue=i.queue<<6-i.queuedBits,i.queuedBits=6;i.queuedBits>=6;){const d=i.queue>>i.queuedBits-6&63;o(TO_BASE64URL[d]),i.queuedBits-=6}}function byteFromBase64URL(e,i,o){const d=FROM_BASE64URL[e];if(d>-1)for(i.queue=i.queue<<6|d,i.queuedBits+=6;i.queuedBits>=8;)o(i.queue>>i.queuedBits-8&255),i.queuedBits-=8;else{if(d===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function stringFromBase64URL(e){const i=[],o=b=>{i.push(String.fromCodePoint(b))},d={utf8seq:0,codepoint:0},h={queue:0,queuedBits:0},g=b=>{stringFromUTF8(b,d,o)};for(let b=0;b<e.length;b+=1)byteFromBase64URL(e.charCodeAt(b),h,g);return i.join("")}function codepointToUTF8(e,i){if(e<=127){i(e);return}else if(e<=2047){i(192|e>>6),i(128|e&63);return}else if(e<=65535){i(224|e>>12),i(128|e>>6&63),i(128|e&63);return}else if(e<=1114111){i(240|e>>18),i(128|e>>12&63),i(128|e>>6&63),i(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function stringToUTF8(e,i){for(let o=0;o<e.length;o+=1){let d=e.charCodeAt(o);if(d>55295&&d<=56319){const h=(d-55296)*1024&65535;d=(e.charCodeAt(o+1)-56320&65535|h)+65536,o+=1}codepointToUTF8(d,i)}}function stringFromUTF8(e,i,o){if(i.utf8seq===0){if(e<=127){o(e);return}for(let d=1;d<6;d+=1)if(!(e>>7-d&1)){i.utf8seq=d;break}if(i.utf8seq===2)i.codepoint=e&31;else if(i.utf8seq===3)i.codepoint=e&15;else if(i.utf8seq===4)i.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");i.utf8seq-=1}else if(i.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");i.codepoint=i.codepoint<<6|e&63,i.utf8seq-=1,i.utf8seq===0&&o(i.codepoint)}}function base64UrlToUint8Array(e){const i=[],o={queue:0,queuedBits:0},d=h=>{i.push(h)};for(let h=0;h<e.length;h+=1)byteFromBase64URL(e.charCodeAt(h),o,d);return new Uint8Array(i)}function stringToUint8Array(e){const i=[];return stringToUTF8(e,o=>i.push(o)),new Uint8Array(i)}function bytesToBase64URL(e){const i=[],o={queue:0,queuedBits:0},d=h=>{i.push(h)};return e.forEach(h=>byteToBase64URL(h,o,d)),byteToBase64URL(null,o,d),i.join("")}function expiresAt(e){return Math.round(Date.now()/1e3)+e}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const i=Math.random()*16|0;return(e=="x"?i:i&3|8).toString(16)})}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(e){const i={},o=new URL(e);if(o.hash&&o.hash[0]==="#")try{new URLSearchParams(o.hash.substring(1)).forEach((h,g)=>{i[g]=h})}catch{}return o.searchParams.forEach((d,h)=>{i[h]=d}),i}const resolveFetch=e=>{let i;return e?i=e:typeof fetch>"u"?i=(...o)=>__vitePreload(async()=>{const{default:d}=await Promise.resolve().then(()=>browser);return{default:d}},void 0).then(({default:d})=>d(...o)):i=fetch,(...o)=>i(...o)},looksLikeFetchResponse=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",setItemAsync=async(e,i,o)=>{await e.setItem(i,JSON.stringify(o))},getItemAsync=async(e,i)=>{const o=await e.getItem(i);if(!o)return null;try{return JSON.parse(o)}catch{return o}},removeItemAsync=async(e,i)=>{await e.removeItem(i)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((i,o)=>{this.resolve=i,this.reject=o})}}Deferred.promiseConstructor=Promise;function decodeJWT(e){const i=e.split(".");if(i.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let d=0;d<i.length;d++)if(!BASE64URL_REGEX.test(i[d]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(i[0])),payload:JSON.parse(stringFromBase64URL(i[1])),signature:base64UrlToUint8Array(i[2]),raw:{header:i[0],payload:i[1]}}}async function sleep(e){return await new Promise(i=>{setTimeout(()=>i(null),e)})}function retryable(e,i){return new Promise((d,h)=>{(async()=>{for(let g=0;g<1/0;g++)try{const b=await e(g);if(!i(g,null,b)){d(b);return}}catch(b){if(!i(g,b)){h(b);return}}})()})}function dec2hex(e){return("0"+e.toString(16)).substr(-2)}function generatePKCEVerifier(){const i=new Uint32Array(56);if(typeof crypto>"u"){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",d=o.length;let h="";for(let g=0;g<56;g++)h+=o.charAt(Math.floor(Math.random()*d));return h}return crypto.getRandomValues(i),Array.from(i,dec2hex).join("")}async function sha256(e){const o=new TextEncoder().encode(e),d=await crypto.subtle.digest("SHA-256",o),h=new Uint8Array(d);return Array.from(h).map(g=>String.fromCharCode(g)).join("")}async function generatePKCEChallenge(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const o=await sha256(e);return btoa(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(e,i,o=!1){const d=generatePKCEVerifier();let h=d;o&&(h+="/PASSWORD_RECOVERY"),await setItemAsync(e,`${i}-code-verifier`,h);const g=await generatePKCEChallenge(d);return[g,d===g?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(e){const i=e.headers.get(API_VERSION_HEADER_NAME);if(!i||!i.match(API_VERSION_REGEX))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}function validateExp(e){if(!e)throw new Error("Missing exp claim");const i=Math.floor(Date.now()/1e3);if(e<=i)throw new Error("JWT has expired")}function getAlgorithm(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(e){if(!UUID_REGEX.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){const e={};return new Proxy(e,{get:(i,o)=>{if(o==="__isUserNotAvailableProxy")return!0;if(typeof o=="symbol"){const d=o.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${o}" property of the session object is not supported. Please use getUser() instead.`)},set:(i,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(i,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function deepClone(e){return JSON.parse(JSON.stringify(e))}var __rest$1=function(e,i){var o={};for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&i.indexOf(d)<0&&(o[d]=e[d]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(e);h<d.length;h++)i.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(e,d[h])&&(o[d[h]]=e[d[h]]);return o};const _getErrorMessage=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),NETWORK_ERROR_CODES=[502,503,504];async function handleError(e){var i;if(!looksLikeFetchResponse(e))throw new AuthRetryableFetchError(_getErrorMessage(e),0);if(NETWORK_ERROR_CODES.includes(e.status))throw new AuthRetryableFetchError(_getErrorMessage(e),e.status);let o;try{o=await e.json()}catch(g){throw new AuthUnknownError(_getErrorMessage(g),g)}let d;const h=parseResponseAPIVersion(e);if(h&&h.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof o=="object"&&o&&typeof o.code=="string"?d=o.code:typeof o=="object"&&o&&typeof o.error_code=="string"&&(d=o.error_code),d){if(d==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(o),e.status,((i=o.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(d==="session_not_found")throw new AuthSessionMissingError}else if(typeof o=="object"&&o&&typeof o.weak_password=="object"&&o.weak_password&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.reasons.reduce((g,b)=>g&&typeof b=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(o),e.status,o.weak_password.reasons);throw new AuthApiError(_getErrorMessage(o),e.status||500,d)}const _getRequestParams=(e,i,o,d)=>{const h={method:e,headers:(i==null?void 0:i.headers)||{}};return e==="GET"?h:(h.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i==null?void 0:i.headers),h.body=JSON.stringify(d),Object.assign(Object.assign({},h),o))};async function _request(e,i,o,d){var h;const g=Object.assign({},d==null?void 0:d.headers);g[API_VERSION_HEADER_NAME]||(g[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),d!=null&&d.jwt&&(g.Authorization=`Bearer ${d.jwt}`);const b=(h=d==null?void 0:d.query)!==null&&h!==void 0?h:{};d!=null&&d.redirectTo&&(b.redirect_to=d.redirectTo);const j=Object.keys(b).length?"?"+new URLSearchParams(b).toString():"",_=await _handleRequest(e,i,o+j,{headers:g,noResolveJson:d==null?void 0:d.noResolveJson},{},d==null?void 0:d.body);return d!=null&&d.xform?d==null?void 0:d.xform(_):{data:Object.assign({},_),error:null}}async function _handleRequest(e,i,o,d,h,g){const b=_getRequestParams(i,d,h,g);let j;try{j=await e(o,Object.assign({},b))}catch(_){throw console.error(_),new AuthRetryableFetchError(_getErrorMessage(_),0)}if(j.ok||await handleError(j),d!=null&&d.noResolveJson)return j;try{return await j.json()}catch(_){await handleError(_)}}function _sessionResponse(e){var i;let o=null;hasSession(e)&&(o=Object.assign({},e),e.expires_at||(o.expires_at=expiresAt(e.expires_in)));const d=(i=e.user)!==null&&i!==void 0?i:e;return{data:{session:o,user:d},error:null}}function _sessionResponsePassword(e){const i=_sessionResponse(e);return!i.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((o,d)=>o&&typeof d=="string",!0)&&(i.data.weak_password=e.weak_password),i}function _userResponse(e){var i;return{data:{user:(i=e.user)!==null&&i!==void 0?i:e},error:null}}function _ssoResponse(e){return{data:e,error:null}}function _generateLinkResponse(e){const{action_link:i,email_otp:o,hashed_token:d,redirect_to:h,verification_type:g}=e,b=__rest$1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),j={action_link:i,email_otp:o,hashed_token:d,redirect_to:h,verification_type:g},_=Object.assign({},b);return{data:{properties:j,user:_},error:null}}function _noResolveJsonResponse(e){return e}function hasSession(e){return e.access_token&&e.refresh_token&&e.expires_in}const SIGN_OUT_SCOPES=["global","local","others"];var __rest=function(e,i){var o={};for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&i.indexOf(d)<0&&(o[d]=e[d]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(e);h<d.length;h++)i.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(e,d[h])&&(o[d[h]]=e[d[h]]);return o};class GoTrueAdminApi{constructor({url:i="",headers:o={},fetch:d}){this.url=i,this.headers=o,this.fetch=resolveFetch(d),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(i,o=SIGN_OUT_SCOPES[0]){if(SIGN_OUT_SCOPES.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(", ")}`);try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${o}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(d){if(isAuthError(d))return{data:null,error:d};throw d}}async inviteUserByEmail(i,o={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:o.data},headers:this.headers,redirectTo:o.redirectTo,xform:_userResponse})}catch(d){if(isAuthError(d))return{data:{user:null},error:d};throw d}}async generateLink(i){try{const{options:o}=i,d=__rest(i,["options"]),h=Object.assign(Object.assign({},d),o);return"newEmail"in d&&(h.new_email=d==null?void 0:d.newEmail,delete h.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:h,headers:this.headers,xform:_generateLinkResponse,redirectTo:o==null?void 0:o.redirectTo})}catch(o){if(isAuthError(o))return{data:{properties:null,user:null},error:o};throw o}}async createUser(i){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:_userResponse})}catch(o){if(isAuthError(o))return{data:{user:null},error:o};throw o}}async listUsers(i){var o,d,h,g,b,j,_;try{const $={nextPage:null,lastPage:0,total:0},_e=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(d=(o=i==null?void 0:i.page)===null||o===void 0?void 0:o.toString())!==null&&d!==void 0?d:"",per_page:(g=(h=i==null?void 0:i.perPage)===null||h===void 0?void 0:h.toString())!==null&&g!==void 0?g:""},xform:_noResolveJsonResponse});if(_e.error)throw _e.error;const et=await _e.json(),tt=(b=_e.headers.get("x-total-count"))!==null&&b!==void 0?b:0,rt=(_=(j=_e.headers.get("link"))===null||j===void 0?void 0:j.split(","))!==null&&_!==void 0?_:[];return rt.length>0&&(rt.forEach(nt=>{const it=parseInt(nt.split(";")[0].split("=")[1].substring(0,1)),st=JSON.parse(nt.split(";")[1].split("=")[1]);$[`${st}Page`]=it}),$.total=parseInt(tt)),{data:Object.assign(Object.assign({},et),$),error:null}}catch($){if(isAuthError($))return{data:{users:[]},error:$};throw $}}async getUserById(i){validateUUID(i);try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:_userResponse})}catch(o){if(isAuthError(o))return{data:{user:null},error:o};throw o}}async updateUserById(i,o){validateUUID(i);try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:o,headers:this.headers,xform:_userResponse})}catch(d){if(isAuthError(d))return{data:{user:null},error:d};throw d}}async deleteUser(i,o=!1){validateUUID(i);try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:o},xform:_userResponse})}catch(d){if(isAuthError(d))return{data:{user:null},error:d};throw d}}async _listFactors(i){validateUUID(i.userId);try{const{data:o,error:d}=await _request(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:h=>({data:{factors:h},error:null})});return{data:o,error:d}}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async _deleteFactor(i){validateUUID(i.userId),validateUUID(i.id);try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}}function memoryLocalStorageAdapter(e={}){return{getItem:i=>e[i]||null,setItem:(i,o)=>{e[i]=o},removeItem:i=>{delete e[i]}}}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(e,i,o){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,i);const d=new globalThis.AbortController;return i>0&&setTimeout(()=>{d.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},i),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:d.signal},async h=>{if(h){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,h.name);try{return await o()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,h.name)}}else{if(i===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(internals.debug)try{const g=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(g,null,"  "))}catch(g){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",g)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await o()}}))}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY$1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lockNoOp(e,i,o){return await o()}const GLOBAL_JWKS={};class GoTrueClient{constructor(i){var o,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const h=Object.assign(Object.assign({},DEFAULT_OPTIONS),i);if(this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.persistSession=h.persistSession,this.storageKey=h.storageKey,this.autoRefreshToken=h.autoRefreshToken,this.admin=new GoTrueAdminApi({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=resolveFetch(h.fetch),this.lock=h.lock||lockNoOp,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,h.lock?this.lock=h.lock:isBrowser()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(g){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",g)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async g=>{this._debug("received broadcast notification from other tab or client",g),await this._notifyAllSubscribers(g.data.event,g.data.session,!1)})}this.initialize()}get jwks(){var i,o;return(o=(i=GLOBAL_JWKS[this.storageKey])===null||i===void 0?void 0:i.jwks)!==null&&o!==void 0?o:{keys:[]}}set jwks(i){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{jwks:i})}get jwks_cached_at(){var i,o;return(o=(i=GLOBAL_JWKS[this.storageKey])===null||i===void 0?void 0:i.cachedAt)!==null&&o!==void 0?o:Number.MIN_SAFE_INTEGER}set jwks_cached_at(i){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{cachedAt:i})}_debug(...i){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${version}) ${new Date().toISOString()}`,...i),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var i;try{const o=parseParametersFromURL(window.location.href);let d="none";if(this._isImplicitGrantCallback(o)?d="implicit":await this._isPKCECallback(o)&&(d="pkce"),isBrowser()&&this.detectSessionInUrl&&d!=="none"){const{data:h,error:g}=await this._getSessionFromURL(o,d);if(g){if(this._debug("#_initialize()","error detecting session from URL",g),isAuthImplicitGrantRedirectError(g)){const _=(i=g.details)===null||i===void 0?void 0:i.code;if(_==="identity_already_exists"||_==="identity_not_found"||_==="single_identity_not_deletable")return{error:g}}return await this._removeSession(),{error:g}}const{session:b,redirectType:j}=h;return this._debug("#_initialize()","detected session in URL",b,"redirect type",j),await this._saveSession(b),setTimeout(async()=>{j==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",b):await this._notifyAllSubscribers("SIGNED_IN",b)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(o){return isAuthError(o)?{error:o}:{error:new AuthUnknownError("Unexpected error during initialization",o)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(i){var o,d,h;try{const g=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(d=(o=i==null?void 0:i.options)===null||o===void 0?void 0:o.data)!==null&&d!==void 0?d:{},gotrue_meta_security:{captcha_token:(h=i==null?void 0:i.options)===null||h===void 0?void 0:h.captchaToken}},xform:_sessionResponse}),{data:b,error:j}=g;if(j||!b)return{data:{user:null,session:null},error:j};const _=b.session,$=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",_)),{data:{user:$,session:_},error:null}}catch(g){if(isAuthError(g))return{data:{user:null,session:null},error:g};throw g}}async signUp(i){var o,d,h;try{let g;if("email"in i){const{email:_e,password:et,options:tt}=i;let rt=null,nt=null;this.flowType==="pkce"&&([rt,nt]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),g=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:tt==null?void 0:tt.emailRedirectTo,body:{email:_e,password:et,data:(o=tt==null?void 0:tt.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:tt==null?void 0:tt.captchaToken},code_challenge:rt,code_challenge_method:nt},xform:_sessionResponse})}else if("phone"in i){const{phone:_e,password:et,options:tt}=i;g=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_e,password:et,data:(d=tt==null?void 0:tt.data)!==null&&d!==void 0?d:{},channel:(h=tt==null?void 0:tt.channel)!==null&&h!==void 0?h:"sms",gotrue_meta_security:{captcha_token:tt==null?void 0:tt.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:b,error:j}=g;if(j||!b)return{data:{user:null,session:null},error:j};const _=b.session,$=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",_)),{data:{user:$,session:_},error:null}}catch(g){if(isAuthError(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithPassword(i){try{let o;if("email"in i){const{email:g,password:b,options:j}=i;o=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:g,password:b,gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in i){const{phone:g,password:b,options:j}=i;o=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:g,password:b,gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:d,error:h}=o;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign({user:d.user,session:d.session},d.weak_password?{weakPassword:d.weak_password}:null),error:h})}catch(o){if(isAuthError(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithOAuth(i){var o,d,h,g;return await this._handleProviderSignIn(i.provider,{redirectTo:(o=i.options)===null||o===void 0?void 0:o.redirectTo,scopes:(d=i.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=i.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:(g=i.options)===null||g===void 0?void 0:g.skipBrowserRedirect})}async exchangeCodeForSession(i){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(i))}async signInWithWeb3(i){const{chain:o}=i;if(o==="solana")return await this.signInWithSolana(i);throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}async signInWithSolana(i){var o,d,h,g,b,j,_,$,_e,et,tt,rt;let nt,it;if("message"in i)nt=i.message,it=i.signature;else{const{chain:st,wallet:at,statement:ot,options:lt}=i;let ct;if(isBrowser())if(typeof at=="object")ct=at;else{const dt=window;if("solana"in dt&&typeof dt.solana=="object"&&("signIn"in dt.solana&&typeof dt.solana.signIn=="function"||"signMessage"in dt.solana&&typeof dt.solana.signMessage=="function"))ct=dt.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof at!="object"||!(lt!=null&&lt.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ct=at}const ut=new URL((o=lt==null?void 0:lt.url)!==null&&o!==void 0?o:window.location.href);if("signIn"in ct&&ct.signIn){const dt=await ct.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},lt==null?void 0:lt.signInWithSolana),{version:"1",domain:ut.host,uri:ut.href}),ot?{statement:ot}:null));let mt;if(Array.isArray(dt)&&dt[0]&&typeof dt[0]=="object")mt=dt[0];else if(dt&&typeof dt=="object"&&"signedMessage"in dt&&"signature"in dt)mt=dt;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in mt&&"signature"in mt&&(typeof mt.signedMessage=="string"||mt.signedMessage instanceof Uint8Array)&&mt.signature instanceof Uint8Array)nt=typeof mt.signedMessage=="string"?mt.signedMessage:new TextDecoder().decode(mt.signedMessage),it=mt.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ct)||typeof ct.signMessage!="function"||!("publicKey"in ct)||typeof ct!="object"||!ct.publicKey||!("toBase58"in ct.publicKey)||typeof ct.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");nt=[`${ut.host} wants you to sign in with your Solana account:`,ct.publicKey.toBase58(),...ot?["",ot,""]:[""],"Version: 1",`URI: ${ut.href}`,`Issued At: ${(h=(d=lt==null?void 0:lt.signInWithSolana)===null||d===void 0?void 0:d.issuedAt)!==null&&h!==void 0?h:new Date().toISOString()}`,...!((g=lt==null?void 0:lt.signInWithSolana)===null||g===void 0)&&g.notBefore?[`Not Before: ${lt.signInWithSolana.notBefore}`]:[],...!((b=lt==null?void 0:lt.signInWithSolana)===null||b===void 0)&&b.expirationTime?[`Expiration Time: ${lt.signInWithSolana.expirationTime}`]:[],...!((j=lt==null?void 0:lt.signInWithSolana)===null||j===void 0)&&j.chainId?[`Chain ID: ${lt.signInWithSolana.chainId}`]:[],...!((_=lt==null?void 0:lt.signInWithSolana)===null||_===void 0)&&_.nonce?[`Nonce: ${lt.signInWithSolana.nonce}`]:[],...!(($=lt==null?void 0:lt.signInWithSolana)===null||$===void 0)&&$.requestId?[`Request ID: ${lt.signInWithSolana.requestId}`]:[],...!((et=(_e=lt==null?void 0:lt.signInWithSolana)===null||_e===void 0?void 0:_e.resources)===null||et===void 0)&&et.length?["Resources",...lt.signInWithSolana.resources.map(mt=>`- ${mt}`)]:[]].join(`
`);const dt=await ct.signMessage(new TextEncoder().encode(nt),"utf8");if(!dt||!(dt instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");it=dt}}try{const{data:st,error:at}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:nt,signature:bytesToBase64URL(it)},!((tt=i.options)===null||tt===void 0)&&tt.captchaToken?{gotrue_meta_security:{captcha_token:(rt=i.options)===null||rt===void 0?void 0:rt.captchaToken}}:null),xform:_sessionResponse});if(at)throw at;return!st||!st.session||!st.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(st.session&&(await this._saveSession(st.session),await this._notifyAllSubscribers("SIGNED_IN",st.session)),{data:Object.assign({},st),error:at})}catch(st){if(isAuthError(st))return{data:{user:null,session:null},error:st};throw st}}async _exchangeCodeForSession(i){const o=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[d,h]=(o??"").split("/");try{const{data:g,error:b}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:i,code_verifier:d},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),b)throw b;return!g||!g.session||!g.user?{data:{user:null,session:null,redirectType:null},error:new AuthInvalidTokenResponseError}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign(Object.assign({},g),{redirectType:h??null}),error:b})}catch(g){if(isAuthError(g))return{data:{user:null,session:null,redirectType:null},error:g};throw g}}async signInWithIdToken(i){try{const{options:o,provider:d,token:h,access_token:g,nonce:b}=i,j=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:d,id_token:h,access_token:g,nonce:b,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:_sessionResponse}),{data:_,error:$}=j;return $?{data:{user:null,session:null},error:$}:!_||!_.session||!_.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:_,error:$})}catch(o){if(isAuthError(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithOtp(i){var o,d,h,g,b;try{if("email"in i){const{email:j,options:_}=i;let $=null,_e=null;this.flowType==="pkce"&&([$,_e]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:et}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:j,data:(o=_==null?void 0:_.data)!==null&&o!==void 0?o:{},create_user:(d=_==null?void 0:_.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:$,code_challenge_method:_e},redirectTo:_==null?void 0:_.emailRedirectTo});return{data:{user:null,session:null},error:et}}if("phone"in i){const{phone:j,options:_}=i,{data:$,error:_e}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:j,data:(h=_==null?void 0:_.data)!==null&&h!==void 0?h:{},create_user:(g=_==null?void 0:_.shouldCreateUser)!==null&&g!==void 0?g:!0,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},channel:(b=_==null?void 0:_.channel)!==null&&b!==void 0?b:"sms"}});return{data:{user:null,session:null,messageId:$==null?void 0:$.message_id},error:_e}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(j){if(isAuthError(j))return{data:{user:null,session:null},error:j};throw j}}async verifyOtp(i){var o,d;try{let h,g;"options"in i&&(h=(o=i.options)===null||o===void 0?void 0:o.redirectTo,g=(d=i.options)===null||d===void 0?void 0:d.captchaToken);const{data:b,error:j}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},i),{gotrue_meta_security:{captcha_token:g}}),redirectTo:h,xform:_sessionResponse});if(j)throw j;if(!b)throw new Error("An error occurred on token verification.");const _=b.session,$=b.user;return _!=null&&_.access_token&&(await this._saveSession(_),await this._notifyAllSubscribers(i.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",_)),{data:{user:$,session:_},error:null}}catch(h){if(isAuthError(h))return{data:{user:null,session:null},error:h};throw h}}async signInWithSSO(i){var o,d,h;try{let g=null,b=null;return this.flowType==="pkce"&&([g,b]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in i?{provider_id:i.providerId}:null),"domain"in i?{domain:i.domain}:null),{redirect_to:(d=(o=i.options)===null||o===void 0?void 0:o.redirectTo)!==null&&d!==void 0?d:void 0}),!((h=i==null?void 0:i.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:i.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:b}),headers:this.headers,xform:_ssoResponse})}catch(g){if(isAuthError(g))return{data:null,error:g};throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async i=>{const{data:{session:o},error:d}=i;if(d)throw d;if(!o)throw new AuthSessionMissingError;const{error:h}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:o.access_token});return{data:{user:null,session:null},error:h}})}catch(i){if(isAuthError(i))return{data:{user:null,session:null},error:i};throw i}}async resend(i){try{const o=`${this.url}/resend`;if("email"in i){const{email:d,type:h,options:g}=i,{error:b}=await _request(this.fetch,"POST",o,{headers:this.headers,body:{email:d,type:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:b}}else if("phone"in i){const{phone:d,type:h,options:g}=i,{data:b,error:j}=await _request(this.fetch,"POST",o,{headers:this.headers,body:{phone:d,type:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}}});return{data:{user:null,session:null,messageId:b==null?void 0:b.message_id},error:j}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(o){if(isAuthError(o))return{data:{user:null,session:null},error:o};throw o}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async o=>o))}async _acquireLock(i,o){this._debug("#_acquireLock","begin",i);try{if(this.lockAcquired){const d=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),h=(async()=>(await d,await o()))();return this.pendingInLock.push((async()=>{try{await h}catch{}})()),h}return await this.lock(`lock:${this.storageKey}`,i,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const d=o();for(this.pendingInLock.push((async()=>{try{await d}catch{}})()),await d;this.pendingInLock.length;){const h=[...this.pendingInLock];await Promise.all(h),this.pendingInLock.splice(0,h.length)}return await d}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(i){this._debug("#_useSession","begin");try{const o=await this.__loadSession();return await i(o)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let i=null;const o=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",o),o!==null&&(this._isValidSession(o)?i=o:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!i)return{data:{session:null},error:null};const d=i.expires_at?i.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${d?"":" not"} expired`,"expires_at",i.expires_at),!d){if(this.userStorage){const b=await getItemAsync(this.userStorage,this.storageKey+"-user");b!=null&&b.user?i.user=b.user:i.user=userNotAvailableProxy()}if(this.storage.isServer&&i.user){let b=this.suppressGetSessionWarning;i=new Proxy(i,{get:(_,$,_e)=>(!b&&$==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),b=!0,this.suppressGetSessionWarning=!0),Reflect.get(_,$,_e))})}return{data:{session:i},error:null}}const{session:h,error:g}=await this._callRefreshToken(i.refresh_token);return g?{data:{session:null},error:g}:{data:{session:h},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(i){return i?await this._getUser(i):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(i){try{return i?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:i,xform:_userResponse}):await this._useSession(async o=>{var d,h,g;const{data:b,error:j}=o;if(j)throw j;return!(!((d=b.session)===null||d===void 0)&&d.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(g=(h=b.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0,xform:_userResponse})})}catch(o){if(isAuthError(o))return isAuthSessionMissingError(o)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}}async updateUser(i,o={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(i,o))}async _updateUser(i,o={}){try{return await this._useSession(async d=>{const{data:h,error:g}=d;if(g)throw g;if(!h.session)throw new AuthSessionMissingError;const b=h.session;let j=null,_=null;this.flowType==="pkce"&&i.email!=null&&([j,_]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:$,error:_e}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:o==null?void 0:o.emailRedirectTo,body:Object.assign(Object.assign({},i),{code_challenge:j,code_challenge_method:_}),jwt:b.access_token,xform:_userResponse});if(_e)throw _e;return b.user=$.user,await this._saveSession(b),await this._notifyAllSubscribers("USER_UPDATED",b),{data:{user:b.user},error:null}})}catch(d){if(isAuthError(d))return{data:{user:null},error:d};throw d}}async setSession(i){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(i))}async _setSession(i){try{if(!i.access_token||!i.refresh_token)throw new AuthSessionMissingError;const o=Date.now()/1e3;let d=o,h=!0,g=null;const{payload:b}=decodeJWT(i.access_token);if(b.exp&&(d=b.exp,h=d<=o),h){const{session:j,error:_}=await this._callRefreshToken(i.refresh_token);if(_)return{data:{user:null,session:null},error:_};if(!j)return{data:{user:null,session:null},error:null};g=j}else{const{data:j,error:_}=await this._getUser(i.access_token);if(_)throw _;g={access_token:i.access_token,refresh_token:i.refresh_token,user:j.user,token_type:"bearer",expires_in:d-o,expires_at:d},await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)}return{data:{user:g.user,session:g},error:null}}catch(o){if(isAuthError(o))return{data:{session:null,user:null},error:o};throw o}}async refreshSession(i){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(i))}async _refreshSession(i){try{return await this._useSession(async o=>{var d;if(!i){const{data:b,error:j}=o;if(j)throw j;i=(d=b.session)!==null&&d!==void 0?d:void 0}if(!(i!=null&&i.refresh_token))throw new AuthSessionMissingError;const{session:h,error:g}=await this._callRefreshToken(i.refresh_token);return g?{data:{user:null,session:null},error:g}:h?{data:{user:h.user,session:h},error:null}:{data:{user:null,session:null},error:null}})}catch(o){if(isAuthError(o))return{data:{user:null,session:null},error:o};throw o}}async _getSessionFromURL(i,o){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(i.error||i.error_description||i.error_code)throw new AuthImplicitGrantRedirectError(i.error_description||"Error in URL with unspecified error_description",{error:i.error||"unspecified_error",code:i.error_code||"unspecified_code"});switch(o){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(o==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!i.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:ot,error:lt}=await this._exchangeCodeForSession(i.code);if(lt)throw lt;const ct=new URL(window.location.href);return ct.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ct.toString()),{data:{session:ot.session,redirectType:null},error:null}}const{provider_token:d,provider_refresh_token:h,access_token:g,refresh_token:b,expires_in:j,expires_at:_,token_type:$}=i;if(!g||!j||!b||!$)throw new AuthImplicitGrantRedirectError("No session defined in URL");const _e=Math.round(Date.now()/1e3),et=parseInt(j);let tt=_e+et;_&&(tt=parseInt(_));const rt=tt-_e;rt*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${rt}s, should have been closer to ${et}s`);const nt=tt-et;_e-nt>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",nt,tt,_e):_e-nt<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",nt,tt,_e);const{data:it,error:st}=await this._getUser(g);if(st)throw st;const at={provider_token:d,provider_refresh_token:h,access_token:g,expires_in:et,expires_at:tt,refresh_token:b,token_type:$,user:it.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:at,redirectType:i.type},error:null}}catch(d){if(isAuthError(d))return{data:{session:null,redirectType:null},error:d};throw d}}_isImplicitGrantCallback(i){return!!(i.access_token||i.error_description)}async _isPKCECallback(i){const o=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(i.code&&o)}async signOut(i={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(i))}async _signOut({scope:i}={scope:"global"}){return await this._useSession(async o=>{var d;const{data:h,error:g}=o;if(g)return{error:g};const b=(d=h.session)===null||d===void 0?void 0:d.access_token;if(b){const{error:j}=await this.admin.signOut(b,i);if(j&&!(isAuthApiError(j)&&(j.status===404||j.status===401||j.status===403)))return{error:j}}return i!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(i){const o=uuid(),d={id:o,callback:i,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,d),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(o)})))(),{data:{subscription:d}}}async _emitInitialSession(i){return await this._useSession(async o=>{var d,h;try{const{data:{session:g},error:b}=o;if(b)throw b;await((d=this.stateChangeEmitters.get(i))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",g)),this._debug("INITIAL_SESSION","callback id",i,"session",g)}catch(g){await((h=this.stateChangeEmitters.get(i))===null||h===void 0?void 0:h.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",i,"error",g),console.error(g)}})}async resetPasswordForEmail(i,o={}){let d=null,h=null;this.flowType==="pkce"&&([d,h]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:i,code_challenge:d,code_challenge_method:h,gotrue_meta_security:{captcha_token:o.captchaToken}},headers:this.headers,redirectTo:o.redirectTo})}catch(g){if(isAuthError(g))return{data:null,error:g};throw g}}async getUserIdentities(){var i;try{const{data:o,error:d}=await this.getUser();if(d)throw d;return{data:{identities:(i=o.user.identities)!==null&&i!==void 0?i:[]},error:null}}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async linkIdentity(i){var o;try{const{data:d,error:h}=await this._useSession(async g=>{var b,j,_,$,_e;const{data:et,error:tt}=g;if(tt)throw tt;const rt=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,i.provider,{redirectTo:(b=i.options)===null||b===void 0?void 0:b.redirectTo,scopes:(j=i.options)===null||j===void 0?void 0:j.scopes,queryParams:(_=i.options)===null||_===void 0?void 0:_.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",rt,{headers:this.headers,jwt:(_e=($=et.session)===null||$===void 0?void 0:$.access_token)!==null&&_e!==void 0?_e:void 0})});if(h)throw h;return isBrowser()&&!(!((o=i.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d==null?void 0:d.url),{data:{provider:i.provider,url:d==null?void 0:d.url},error:null}}catch(d){if(isAuthError(d))return{data:{provider:i.provider,url:null},error:d};throw d}}async unlinkIdentity(i){try{return await this._useSession(async o=>{var d,h;const{data:g,error:b}=o;if(b)throw b;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${i.identity_id}`,{headers:this.headers,jwt:(h=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})})}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async _refreshAccessToken(i){const o=`#_refreshAccessToken(${i.substring(0,5)}...)`;this._debug(o,"begin");try{const d=Date.now();return await retryable(async h=>(h>0&&await sleep(200*Math.pow(2,h-1)),this._debug(o,"refreshing attempt",h),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:i},headers:this.headers,xform:_sessionResponse})),(h,g)=>{const b=200*Math.pow(2,h);return g&&isAuthRetryableFetchError(g)&&Date.now()+b-d<AUTO_REFRESH_TICK_DURATION_MS})}catch(d){if(this._debug(o,"error",d),isAuthError(d))return{data:{session:null,user:null},error:d};throw d}finally{this._debug(o,"end")}}_isValidSession(i){return typeof i=="object"&&i!==null&&"access_token"in i&&"refresh_token"in i&&"expires_at"in i}async _handleProviderSignIn(i,o){const d=await this._getUrlForProvider(`${this.url}/authorize`,i,{redirectTo:o.redirectTo,scopes:o.scopes,queryParams:o.queryParams});return this._debug("#_handleProviderSignIn()","provider",i,"options",o,"url",d),isBrowser()&&!o.skipBrowserRedirect&&window.location.assign(d),{data:{provider:i,url:d},error:null}}async _recoverAndRefresh(){var i,o;const d="#_recoverAndRefresh()";this._debug(d,"begin");try{const h=await getItemAsync(this.storage,this.storageKey);if(h&&this.userStorage){let b=await getItemAsync(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:h.user},await setItemAsync(this.userStorage,this.storageKey+"-user",b)),h.user=(i=b==null?void 0:b.user)!==null&&i!==void 0?i:userNotAvailableProxy()}else if(h&&!h.user&&!h.user){const b=await getItemAsync(this.storage,this.storageKey+"-user");b&&(b!=null&&b.user)?(h.user=b.user,await removeItemAsync(this.storage,this.storageKey+"-user"),await setItemAsync(this.storage,this.storageKey,h)):h.user=userNotAvailableProxy()}if(this._debug(d,"session from storage",h),!this._isValidSession(h)){this._debug(d,"session is not valid"),h!==null&&await this._removeSession();return}const g=((o=h.expires_at)!==null&&o!==void 0?o:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(d,`session has${g?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),g){if(this.autoRefreshToken&&h.refresh_token){const{error:b}=await this._callRefreshToken(h.refresh_token);b&&(console.error(b),isAuthRetryableFetchError(b)||(this._debug(d,"refresh failed with a non-retryable error, removing the session",b),await this._removeSession()))}}else if(h.user&&h.user.__isUserNotAvailableProxy===!0)try{const{data:b,error:j}=await this._getUser(h.access_token);!j&&(b!=null&&b.user)?(h.user=b.user,await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)):this._debug(d,"could not get user data, skipping SIGNED_IN notification")}catch(b){console.error("Error getting user data:",b),this._debug(d,"error getting user data, skipping SIGNED_IN notification",b)}else await this._notifyAllSubscribers("SIGNED_IN",h)}catch(h){this._debug(d,"error",h),console.error(h);return}finally{this._debug(d,"end")}}async _callRefreshToken(i){var o,d;if(!i)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const h=`#_callRefreshToken(${i.substring(0,5)}...)`;this._debug(h,"begin");try{this.refreshingDeferred=new Deferred;const{data:g,error:b}=await this._refreshAccessToken(i);if(b)throw b;if(!g.session)throw new AuthSessionMissingError;await this._saveSession(g.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",g.session);const j={session:g.session,error:null};return this.refreshingDeferred.resolve(j),j}catch(g){if(this._debug(h,"error",g),isAuthError(g)){const b={session:null,error:g};return isAuthRetryableFetchError(g)||await this._removeSession(),(o=this.refreshingDeferred)===null||o===void 0||o.resolve(b),b}throw(d=this.refreshingDeferred)===null||d===void 0||d.reject(g),g}finally{this.refreshingDeferred=null,this._debug(h,"end")}}async _notifyAllSubscribers(i,o,d=!0){const h=`#_notifyAllSubscribers(${i})`;this._debug(h,"begin",o,`broadcast = ${d}`);try{this.broadcastChannel&&d&&this.broadcastChannel.postMessage({event:i,session:o});const g=[],b=Array.from(this.stateChangeEmitters.values()).map(async j=>{try{await j.callback(i,o)}catch(_){g.push(_)}});if(await Promise.all(b),g.length>0){for(let j=0;j<g.length;j+=1)console.error(g[j]);throw g[0]}}finally{this._debug(h,"end")}}async _saveSession(i){this._debug("#_saveSession()",i),this.suppressGetSessionWarning=!0;const o=Object.assign({},i),d=o.user&&o.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!d&&o.user&&await setItemAsync(this.userStorage,this.storageKey+"-user",{user:o.user});const h=Object.assign({},o);delete h.user;const g=deepClone(h);await setItemAsync(this.storage,this.storageKey,g)}else{const h=deepClone(o);await setItemAsync(this.storage,this.storageKey,h)}}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey),await removeItemAsync(this.storage,this.storageKey+"-code-verifier"),await removeItemAsync(this.storage,this.storageKey+"-user"),this.userStorage&&await removeItemAsync(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const i=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{i&&isBrowser()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",i)}catch(o){console.error("removing visibilitychange callback failed",o)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const i=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const i=this.autoRefreshTicker;this.autoRefreshTicker=null,i&&clearInterval(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const i=Date.now();try{return await this._useSession(async o=>{const{data:{session:d}}=o;if(!d||!d.refresh_token||!d.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const h=Math.floor((d.expires_at*1e3-i)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${h} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),h<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(d.refresh_token)})}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(i){if(i.isAcquireTimeout||i instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw i}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(i){console.error("_handleVisibilityChange",i)}}async _onVisibilityChanged(i){const o=`#_onVisibilityChanged(${i})`;this._debug(o,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),i||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(i,o,d){const h=[`provider=${encodeURIComponent(o)}`];if(d!=null&&d.redirectTo&&h.push(`redirect_to=${encodeURIComponent(d.redirectTo)}`),d!=null&&d.scopes&&h.push(`scopes=${encodeURIComponent(d.scopes)}`),this.flowType==="pkce"){const[g,b]=await getCodeChallengeAndMethod(this.storage,this.storageKey),j=new URLSearchParams({code_challenge:`${encodeURIComponent(g)}`,code_challenge_method:`${encodeURIComponent(b)}`});h.push(j.toString())}if(d!=null&&d.queryParams){const g=new URLSearchParams(d.queryParams);h.push(g.toString())}return d!=null&&d.skipBrowserRedirect&&h.push(`skip_http_redirect=${d.skipBrowserRedirect}`),`${i}?${h.join("&")}`}async _unenroll(i){try{return await this._useSession(async o=>{var d;const{data:h,error:g}=o;return g?{data:null,error:g}:await _request(this.fetch,"DELETE",`${this.url}/factors/${i.factorId}`,{headers:this.headers,jwt:(d=h==null?void 0:h.session)===null||d===void 0?void 0:d.access_token})})}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async _enroll(i){try{return await this._useSession(async o=>{var d,h;const{data:g,error:b}=o;if(b)return{data:null,error:b};const j=Object.assign({friendly_name:i.friendlyName,factor_type:i.factorType},i.factorType==="phone"?{phone:i.phone}:{issuer:i.issuer}),{data:_,error:$}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:j,headers:this.headers,jwt:(d=g==null?void 0:g.session)===null||d===void 0?void 0:d.access_token});return $?{data:null,error:$}:(i.factorType==="totp"&&(!((h=_==null?void 0:_.totp)===null||h===void 0)&&h.qr_code)&&(_.totp.qr_code=`data:image/svg+xml;utf-8,${_.totp.qr_code}`),{data:_,error:null})})}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async _verify(i){return this._acquireLock(-1,async()=>{try{return await this._useSession(async o=>{var d;const{data:h,error:g}=o;if(g)return{data:null,error:g};const{data:b,error:j}=await _request(this.fetch,"POST",`${this.url}/factors/${i.factorId}/verify`,{body:{code:i.code,challenge_id:i.challengeId},headers:this.headers,jwt:(d=h==null?void 0:h.session)===null||d===void 0?void 0:d.access_token});return j?{data:null,error:j}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+b.expires_in},b)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",b),{data:b,error:j})})}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}})}async _challenge(i){return this._acquireLock(-1,async()=>{try{return await this._useSession(async o=>{var d;const{data:h,error:g}=o;return g?{data:null,error:g}:await _request(this.fetch,"POST",`${this.url}/factors/${i.factorId}/challenge`,{body:{channel:i.channel},headers:this.headers,jwt:(d=h==null?void 0:h.session)===null||d===void 0?void 0:d.access_token})})}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}})}async _challengeAndVerify(i){const{data:o,error:d}=await this._challenge({factorId:i.factorId});return d?{data:null,error:d}:await this._verify({factorId:i.factorId,challengeId:o.id,code:i.code})}async _listFactors(){const{data:{user:i},error:o}=await this.getUser();if(o)return{data:null,error:o};const d=(i==null?void 0:i.factors)||[],h=d.filter(b=>b.factor_type==="totp"&&b.status==="verified"),g=d.filter(b=>b.factor_type==="phone"&&b.status==="verified");return{data:{all:d,totp:h,phone:g},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async i=>{var o,d;const{data:{session:h},error:g}=i;if(g)return{data:null,error:g};if(!h)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:b}=decodeJWT(h.access_token);let j=null;b.aal&&(j=b.aal);let _=j;((d=(o=h.user.factors)===null||o===void 0?void 0:o.filter(et=>et.status==="verified"))!==null&&d!==void 0?d:[]).length>0&&(_="aal2");const _e=b.amr||[];return{data:{currentLevel:j,nextLevel:_,currentAuthenticationMethods:_e},error:null}}))}async fetchJwk(i,o={keys:[]}){let d=o.keys.find(j=>j.kid===i);if(d)return d;const h=Date.now();if(d=this.jwks.keys.find(j=>j.kid===i),d&&this.jwks_cached_at+JWKS_TTL>h)return d;const{data:g,error:b}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(b)throw b;return!g.keys||g.keys.length===0||(this.jwks=g,this.jwks_cached_at=h,d=g.keys.find(j=>j.kid===i),!d)?null:d}async getClaims(i,o={}){try{let d=i;if(!d){const{data:rt,error:nt}=await this.getSession();if(nt||!rt.session)return{data:null,error:nt};d=rt.session.access_token}const{header:h,payload:g,signature:b,raw:{header:j,payload:_}}=decodeJWT(d);o!=null&&o.allowExpired||validateExp(g.exp);const $=!h.alg||h.alg.startsWith("HS")||!h.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(h.kid,o!=null&&o.keys?{keys:o.keys}:o==null?void 0:o.jwks);if(!$){const{error:rt}=await this.getUser(d);if(rt)throw rt;return{data:{claims:g,header:h,signature:b},error:null}}const _e=getAlgorithm(h.alg),et=await crypto.subtle.importKey("jwk",$,_e,!0,["verify"]);if(!await crypto.subtle.verify(_e,et,b,stringToUint8Array(`${j}.${_}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:g,header:h,signature:b},error:null}}catch(d){if(isAuthError(d))return{data:null,error:d};throw d}}}GoTrueClient.nextInstanceID=0;const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(i){super(i)}}var __awaiter=function(e,i,o,d){function h(g){return g instanceof o?g:new o(function(b){b(g)})}return new(o||(o=Promise))(function(g,b){function j(_e){try{$(d.next(_e))}catch(et){b(et)}}function _(_e){try{$(d.throw(_e))}catch(et){b(et)}}function $(_e){_e.done?g(_e.value):h(_e.value).then(j,_)}$((d=d.apply(e,i||[])).next())})};class SupabaseClient{constructor(i,o,d){var h,g,b;this.supabaseUrl=i,this.supabaseKey=o;const j=validateSupabaseUrl(i);if(!o)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",j),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",j),this.storageUrl=new URL("storage/v1",j),this.functionsUrl=new URL("functions/v1",j);const _=`sb-${j.hostname.split(".")[0]}-auth-token`,$={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:_}),global:DEFAULT_GLOBAL_OPTIONS},_e=applySettingDefaults(d??{},$);this.storageKey=(h=_e.auth.storageKey)!==null&&h!==void 0?h:"",this.headers=(g=_e.global.headers)!==null&&g!==void 0?g:{},_e.accessToken?(this.accessToken=_e.accessToken,this.auth=new Proxy({},{get:(et,tt)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(tt)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((b=_e.auth)!==null&&b!==void 0?b:{},this.headers,_e.global.fetch),this.fetch=fetchWithAuth(o,this._getAccessToken.bind(this),_e.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_e.realtime)),this.rest=new PostgrestClient(new URL("rest/v1",j).href,{headers:this.headers,schema:_e.db.schema,fetch:this.fetch}),this.storage=new StorageClient(this.storageUrl.href,this.headers,this.fetch,d==null?void 0:d.storage),_e.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,o={},d={}){return this.rest.rpc(i,o,d)}channel(i,o={config:{}}){return this.realtime.channel(i,o)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var i,o;return __awaiter(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:d}=yield this.auth.getSession();return(o=(i=d.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:o,detectSessionInUrl:d,storage:h,userStorage:g,storageKey:b,flowType:j,lock:_,debug:$},_e,et){const tt={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},tt),_e),storageKey:b,autoRefreshToken:i,persistSession:o,detectSessionInUrl:d,storage:h,userStorage:g,flowType:j,lock:_,debug:$,fetch:et,hasCustomAuthorizationHeader:Object.keys(this.headers).some(rt=>rt.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},i),{params:Object.assign({apikey:this.supabaseKey},i==null?void 0:i.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((o,d)=>{this._handleTokenChanged(o,"CLIENT",d==null?void 0:d.access_token)})}_handleTokenChanged(i,o,d){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==d?this.changedAccessToken=d:i==="SIGNED_OUT"&&(this.realtime.setAuth(),o=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(e,i,o)=>new SupabaseClient(e,i,o);function shouldShowDeprecationWarning(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const i=e.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}shouldShowDeprecationWarning()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const supabaseUrl=void 0,supabaseKey=void 0,supabase=createClient(supabaseUrl,supabaseKey),mapSubject=e=>({id:e.id,name:e.name,examBoard:e.exam_board,description:e.description,icon:e.icon,themeColor:e.theme_color}),mapUnit=e=>({id:e.id,subjectId:e.subject_id,name:e.name,orderIndex:e.order_index,description:e.description}),mapTopic=e=>({id:e.id,subjectId:e.subject_id,unitId:e.unit_id,name:e.name,orderIndex:e.order_index,description:e.description}),mapPrompt=e=>({id:e.id,subjectId:e.subject_id,unitId:e.unit_id,topicId:e.topic_id,type:e.type,question:e.question,answers:e.answers,hint:e.hint,explanation:e.explanation,meta:e.meta}),mapQuiz=e=>({id:e.id,subjectId:e.subject_id,scopeType:e.scope_type,topicId:e.topic_id,unitId:e.unit_id,title:e.title,description:e.description,timeLimitSec:e.time_limit_sec,grade9TargetSec:e.grade9_target_sec,promptIds:e.prompt_ids}),mapPlaylist=e=>({id:e.id,title:e.title,description:e.description,subjectId:e.subject_id,unitId:e.unit_id,themeTag:e.theme_tag,isDaily:e.is_daily,isFeatured:e.is_featured,coverStyle:e.cover_style,orderIndex:e.order_index,createdAt:e.created_at}),mapPlaylistItem=e=>({id:e.id,playlistId:e.playlist_id,quizId:e.quiz_id,orderIndex:e.order_index,createdAt:e.created_at}),db={getSubjects:async()=>{const{data:e,error:i}=await supabase.from("subjects").select("*").order("name");if(i)throw i;return(e||[]).map(mapSubject)},getSubject:async e=>{const{data:i,error:o}=await supabase.from("subjects").select("*").eq("id",e).maybeSingle();if(o)throw o;return i?mapSubject(i):void 0},getUnits:async e=>{const{data:i,error:o}=await supabase.from("units").select("*").eq("subject_id",e).order("order_index");if(o)throw o;return(i||[]).map(mapUnit)},getTopics:async e=>{const{data:i,error:o}=await supabase.from("topics").select("*").eq("subject_id",e).order("order_index");if(o)throw o;return(i||[]).map(mapTopic)},getTopicsByUnit:async e=>{const{data:i,error:o}=await supabase.from("topics").select("*").eq("unit_id",e).order("order_index");if(o)throw o;return(i||[]).map(mapTopic)},getQuizzesBySubject:async e=>{const{data:i,error:o}=await supabase.from("quizzes").select("*").eq("subject_id",e);if(o)throw o;return(i||[]).map(mapQuiz)},getQuizzesByTopic:async e=>{const{data:i,error:o}=await supabase.from("quizzes").select("*").eq("topic_id",e);if(o)throw o;return(i||[]).map(mapQuiz)},getQuizzesByUnit:async e=>{const{data:i,error:o}=await supabase.from("quizzes").select("*").eq("unit_id",e);if(o)throw o;return(i||[]).map(mapQuiz)},getQuiz:async e=>{const{data:i,error:o}=await supabase.from("quizzes").select("*").eq("id",e).maybeSingle();if(o)throw o;return i?mapQuiz(i):void 0},getPromptsByIds:async e=>{if(e.length===0)return[];const{data:i,error:o}=await supabase.from("prompts").select("*").in("id",e);if(o)throw o;const d=new Map((i||[]).map(h=>[h.id,mapPrompt(h)]));return e.map(h=>d.get(h)).filter(Boolean)},getPrompt:async e=>{const{data:i,error:o}=await supabase.from("prompts").select("*").eq("id",e).maybeSingle();if(o)throw o;return i?mapPrompt(i):void 0},getPromptsBySubject:async e=>{const{data:i,error:o}=await supabase.from("prompts").select("*").eq("subject_id",e);if(o)throw o;return(i||[]).map(mapPrompt)},getPromptsByTopic:async e=>{const{data:i,error:o}=await supabase.from("prompts").select("*").eq("topic_id",e);if(o)throw o;return(i||[]).map(mapPrompt)},createSubject:async e=>{const{data:i,error:o}=await supabase.from("subjects").insert({name:e.name,exam_board:e.examBoard,description:e.description,icon:e.icon,theme_color:e.themeColor}).select().single();if(o)throw o;return mapSubject(i)},updateSubject:async(e,i)=>{const o={};i.name&&(o.name=i.name),i.examBoard&&(o.exam_board=i.examBoard),i.description&&(o.description=i.description),i.icon&&(o.icon=i.icon),i.themeColor&&(o.theme_color=i.themeColor);const{error:d}=await supabase.from("subjects").update(o).eq("id",e);if(d)throw d},deleteSubject:async e=>{const{error:i}=await supabase.from("subjects").delete().eq("id",e);if(i)throw i},createUnit:async e=>{const{data:i,error:o}=await supabase.from("units").insert({subject_id:e.subjectId,name:e.name,order_index:e.orderIndex,description:e.description}).select().single();if(o)throw o;return mapUnit(i)},createTopic:async e=>{const{data:i,error:o}=await supabase.from("topics").insert({subject_id:e.subjectId,unit_id:e.unitId,name:e.name,order_index:e.orderIndex,description:e.description}).select().single();if(o)throw o;return mapTopic(i)},createPrompt:async e=>{const{data:i,error:o}=await supabase.from("prompts").insert({subject_id:e.subjectId,unit_id:e.unitId,topic_id:e.topicId,type:e.type,question:e.question,answers:e.answers,hint:e.hint,explanation:e.explanation,meta:e.meta}).select().single();if(o)throw o;return mapPrompt(i)},updatePrompt:async(e,i)=>{const o={};i.question&&(o.question=i.question),i.answers&&(o.answers=i.answers),i.hint!==void 0&&(o.hint=i.hint),i.explanation!==void 0&&(o.explanation=i.explanation),i.type&&(o.type=i.type),i.meta!==void 0&&(o.meta=i.meta);const{error:d}=await supabase.from("prompts").update(o).eq("id",e);if(d)throw d},deletePrompt:async e=>{const{error:i}=await supabase.from("prompts").delete().eq("id",e);if(i)throw i},createQuiz:async e=>{const{data:i,error:o}=await supabase.from("quizzes").insert({subject_id:e.subjectId,scope_type:e.scopeType,topic_id:e.topicId,unit_id:e.unitId,title:e.title,description:e.description,time_limit_sec:e.timeLimitSec,grade9_target_sec:e.grade9TargetSec,prompt_ids:e.promptIds}).select().single();if(o)throw o;return mapQuiz(i)},updateQuiz:async(e,i)=>{const o={};i.title&&(o.title=i.title),i.description&&(o.description=i.description),i.timeLimitSec&&(o.time_limit_sec=i.timeLimitSec),i.grade9TargetSec&&(o.grade9_target_sec=i.grade9TargetSec),i.promptIds&&(o.prompt_ids=i.promptIds);const{error:d}=await supabase.from("quizzes").update(o).eq("id",e);if(d)throw d},deleteQuiz:async e=>{const{error:i}=await supabase.from("quizzes").delete().eq("id",e);if(i)throw i},getLeaderboard:async()=>[],getPlaylists:async()=>{const{data:e,error:i}=await supabase.from("playlists").select("*").order("order_index");if(i)throw i;return(e||[]).map(mapPlaylist)},getFeaturedPlaylists:async()=>{const{data:e,error:i}=await supabase.from("playlists").select("*").eq("is_featured",!0).order("order_index");if(i)throw i;return(e||[]).map(mapPlaylist)},getDailyPlaylists:async()=>{const{data:e,error:i}=await supabase.from("playlists").select("*").eq("is_daily",!0).order("created_at",{ascending:!1}).limit(5);if(i)throw i;return(e||[]).map(mapPlaylist)},getPlaylist:async e=>{const{data:i,error:o}=await supabase.from("playlists").select("*").eq("id",e).maybeSingle();if(o)throw o;return i?mapPlaylist(i):void 0},getPlaylistItems:async e=>{const{data:i,error:o}=await supabase.from("playlist_items").select("*").eq("playlist_id",e).order("order_index");if(o)throw o;return(i||[]).map(mapPlaylistItem)},getPlaylistQuizzes:async e=>{const i=await db.getPlaylistItems(e);if(i.length===0)return[];const o=i.map(b=>b.quizId),{data:d,error:h}=await supabase.from("quizzes").select("*").in("id",o);if(h)throw h;const g=new Map((d||[]).map(b=>[b.id,mapQuiz(b)]));return o.map(b=>g.get(b)).filter(Boolean)},createPlaylist:async e=>{const{data:i,error:o}=await supabase.from("playlists").insert({title:e.title,description:e.description,subject_id:e.subjectId,unit_id:e.unitId,theme_tag:e.themeTag,is_daily:e.isDaily,is_featured:e.isFeatured,cover_style:e.coverStyle,order_index:e.orderIndex}).select().single();if(o)throw o;return mapPlaylist(i)},addQuizToPlaylist:async(e,i,o)=>{const{data:d,error:h}=await supabase.from("playlist_items").insert({playlist_id:e,quiz_id:i,order_index:o}).select().single();if(h)throw h;return mapPlaylistItem(d)},getSavedQuizzes:async e=>{const{data:i,error:o}=await supabase.from("user_saved_quizzes").select("quiz_id").eq("user_id",e).order("saved_at",{ascending:!1});if(o)throw o;return(i||[]).map(d=>d.quiz_id)},saveQuiz:async(e,i)=>{const{error:o}=await supabase.from("user_saved_quizzes").insert({user_id:e,quiz_id:i});if(o&&o.code!=="23505")throw o},unsaveQuiz:async(e,i)=>{const{error:o}=await supabase.from("user_saved_quizzes").delete().eq("user_id",e).eq("quiz_id",i);if(o)throw o},isSaved:async(e,i)=>{const{data:o,error:d}=await supabase.from("user_saved_quizzes").select("id").eq("user_id",e).eq("quiz_id",i).maybeSingle();if(d)throw d;return!!o},deletePlaylist:async e=>{const{error:i}=await supabase.from("playlists").delete().eq("id",e);if(i)throw i},updatePlaylist:async(e,i)=>{const o={};i.title&&(o.title=i.title),i.description!==void 0&&(o.description=i.description),i.themeTag!==void 0&&(o.theme_tag=i.themeTag),i.isDaily!==void 0&&(o.is_daily=i.isDaily),i.isFeatured!==void 0&&(o.is_featured=i.isFeatured),i.coverStyle&&(o.cover_style=i.coverStyle),i.orderIndex!==void 0&&(o.order_index=i.orderIndex);const{error:d}=await supabase.from("playlists").update(o).eq("id",e);if(d)throw d},removeAllQuizzesFromPlaylist:async e=>{const{error:i}=await supabase.from("playlist_items").delete().eq("playlist_id",e);if(i)throw i},updateUnit:async(e,i)=>{const o={};i.name&&(o.name=i.name),i.description&&(o.description=i.description),i.orderIndex!==void 0&&(o.order_index=i.orderIndex);const{error:d}=await supabase.from("units").update(o).eq("id",e);if(d)throw d},deleteUnit:async e=>{const{error:i}=await supabase.from("units").delete().eq("id",e);if(i)throw i},updateTopic:async(e,i)=>{const o={};i.name&&(o.name=i.name),i.description&&(o.description=i.description),i.orderIndex!==void 0&&(o.order_index=i.orderIndex);const{error:d}=await supabase.from("topics").update(o).eq("id",e);if(d)throw d},deleteTopic:async e=>{const{error:i}=await supabase.from("topics").delete().eq("id",e);if(i)throw i},getPromptsByUnit:async e=>{const{data:i,error:o}=await supabase.from("prompts").select("*").eq("unit_id",e);if(o)throw o;return(i||[]).map(mapPrompt)},getAllPrompts:async()=>{const{data:e,error:i}=await supabase.from("prompts").select("*");if(i)throw i;return(e||[]).map(mapPrompt)},supabase,getPapers:async e=>{const{data:i,error:o}=await supabase.from("papers").select("*").eq("subject_id",e).order("paper_number");if(o)throw o;return(i||[]).map(d=>({id:d.id,subjectId:d.subject_id,paperNumber:d.paper_number,name:d.name,calculatorAllowedDefault:d.calculator_allowed_default,createdAt:d.created_at}))},getPaper:async e=>{const{data:i,error:o}=await supabase.from("papers").select("*").eq("id",e).maybeSingle();if(o)throw o;return i?{id:i.id,subjectId:i.subject_id,paperNumber:i.paper_number,name:i.name,calculatorAllowedDefault:i.calculator_allowed_default,createdAt:i.created_at}:void 0},createPaper:async e=>{const{data:i,error:o}=await supabase.from("papers").insert({subject_id:e.subjectId,paper_number:e.paperNumber,name:e.name,calculator_allowed_default:e.calculatorAllowedDefault}).select().single();if(o)throw o;return{id:i.id,subjectId:i.subject_id,paperNumber:i.paper_number,name:i.name,calculatorAllowedDefault:i.calculator_allowed_default,createdAt:i.created_at}},getQuestionTypes:async e=>{const{data:i,error:o}=await supabase.from("question_types").select("*").eq("subject_id",e);if(o)throw o;return(i||[]).map(d=>({id:d.id,subjectId:d.subject_id,paperId:d.paper_id,unitId:d.unit_id,topicId:d.topic_id,typeId:d.type_id,title:d.title,difficultyMin:d.difficulty_min,difficultyMax:d.difficulty_max,marksMin:d.marks_min,marksMax:d.marks_max,calculatorAllowed:d.calculator_allowed,diagramTemplateId:d.diagram_template_id,tags:d.tags||[],createdAt:d.created_at}))},getQuestionTypesByTopic:async e=>{const{data:i,error:o}=await supabase.from("question_types").select("*").eq("topic_id",e);if(o)throw o;return(i||[]).map(d=>({id:d.id,subjectId:d.subject_id,paperId:d.paper_id,unitId:d.unit_id,topicId:d.topic_id,typeId:d.type_id,title:d.title,difficultyMin:d.difficulty_min,difficultyMax:d.difficulty_max,marksMin:d.marks_min,marksMax:d.marks_max,calculatorAllowed:d.calculator_allowed,diagramTemplateId:d.diagram_template_id,tags:d.tags||[],createdAt:d.created_at}))},createQuestionType:async e=>{const{data:i,error:o}=await supabase.from("question_types").insert({subject_id:e.subjectId,paper_id:e.paperId,unit_id:e.unitId,topic_id:e.topicId,type_id:e.typeId,title:e.title,difficulty_min:e.difficultyMin,difficulty_max:e.difficultyMax,marks_min:e.marksMin,marks_max:e.marksMax,calculator_allowed:e.calculatorAllowed,diagram_template_id:e.diagramTemplateId,tags:e.tags||[]}).select().single();if(o)throw o;return{id:i.id,subjectId:i.subject_id,paperId:i.paper_id,unitId:i.unit_id,topicId:i.topic_id,typeId:i.type_id,title:i.title,difficultyMin:i.difficulty_min,difficultyMax:i.difficulty_max,marksMin:i.marks_min,marksMax:i.marks_max,calculatorAllowed:i.calculator_allowed,diagramTemplateId:i.diagram_template_id,tags:i.tags||[],createdAt:i.created_at}},getCoverageSettings:async e=>{const{data:i,error:o}=await supabase.from("coverage_settings").select("*").eq("subject_id",e).maybeSingle();if(o)throw o;return i?{id:i.id,subjectId:i.subject_id,minPromptsPerQuestionType:i.min_prompts_per_question_type,minPromptsPerTopic:i.min_prompts_per_topic,minPromptsPerUnit:i.min_prompts_per_unit,createdAt:i.created_at,updatedAt:i.updated_at}:void 0},createCoverageSettings:async e=>{const{data:i,error:o}=await supabase.from("coverage_settings").insert({subject_id:e.subjectId,min_prompts_per_question_type:e.minPromptsPerQuestionType||10,min_prompts_per_topic:e.minPromptsPerTopic||50,min_prompts_per_unit:e.minPromptsPerUnit||200}).select().single();if(o)throw o;return{id:i.id,subjectId:i.subject_id,minPromptsPerQuestionType:i.min_prompts_per_question_type,minPromptsPerTopic:i.min_prompts_per_topic,minPromptsPerUnit:i.min_prompts_per_unit,createdAt:i.created_at,updatedAt:i.updated_at}},updateCoverageSettings:async(e,i)=>{const o={};i.minPromptsPerQuestionType!==void 0&&(o.min_prompts_per_question_type=i.minPromptsPerQuestionType),i.minPromptsPerTopic!==void 0&&(o.min_prompts_per_topic=i.minPromptsPerTopic),i.minPromptsPerUnit!==void 0&&(o.min_prompts_per_unit=i.minPromptsPerUnit);const{error:d}=await supabase.from("coverage_settings").update(o).eq("id",e);if(d)throw d}},client=Object.freeze(Object.defineProperty({__proto__:null,db,supabase},Symbol.toStringTag,{value:"Module"}));function ProgressBar({value:e,max:i,label:o,showPercentage:d=!0,size:h="md",variant:g="primary"}){const b=Math.min(100,Math.round(e/i*100)),j={sm:"h-1.5",md:"h-2",lg:"h-3"},_={primary:"var(--gradient-primary)",success:"var(--gradient-success)",warning:"linear-gradient(135deg, rgb(var(--warning)) 0%, rgb(var(--warning-light)) 100%)"};return jsxRuntimeExports.jsxs("div",{className:"w-full",children:[(o||d)&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2 text-sm",children:[o&&jsxRuntimeExports.jsx("span",{style:{color:"rgb(var(--text-secondary))"},className:"font-medium",children:o}),d&&jsxRuntimeExports.jsxs("span",{className:"font-bold stat-number",style:{color:"rgb(var(--text))"},children:[b,"%"]})]}),jsxRuntimeExports.jsx("div",{className:`w-full rounded-full overflow-hidden ${j[h]}`,style:{background:"rgb(var(--surface-2))"},children:jsxRuntimeExports.jsx("div",{className:`${j[h]} rounded-full transition-all duration-500 ease-out`,style:{width:`${b}%`,background:_[g]}})})]})}function SubjectCard({subject:e,readinessPercent:i,masteredCount:o,totalQuizzes:d}){const h=useNavigate();return jsxRuntimeExports.jsxs(motion.div,{onClick:()=>h(`/subjects/${e.id}`),whileHover:{y:-4},whileTap:{scale:.98},className:"card-hover group relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${e.themeColor} opacity-5 group-hover:opacity-10 transition-opacity`}),jsxRuntimeExports.jsxs("div",{className:"relative p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-1 group-hover:text-gradient transition-all",style:{color:"rgb(var(--text))"},children:e.name}),jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:"rgb(var(--text-secondary))"},children:e.examBoard})]}),jsxRuntimeExports.jsx(motion.div,{whileHover:{scale:1.1},className:"p-2 rounded-lg transition-all",style:{background:"rgb(var(--surface-2))"},children:jsxRuntimeExports.jsx(ChevronRight,{size:20,style:{color:"rgb(var(--text))"}})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(ProgressBar,{value:i,max:100,label:"Grade 9 Readiness",size:"md",variant:"success"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{style:{color:"rgb(var(--text-secondary))"},className:"font-medium",children:"Mastered Topics"}),jsxRuntimeExports.jsxs("span",{className:"font-bold stat-number",style:{color:"rgb(var(--text))"},children:[o," / ",d]})]}),jsxRuntimeExports.jsx("div",{className:"pt-4 border-t",style:{borderColor:"rgb(var(--border))"},children:jsxRuntimeExports.jsx("div",{className:"flex gap-1.5",children:[...Array(Math.min(d,12))].map((g,b)=>jsxRuntimeExports.jsx("div",{className:"h-1.5 flex-1 rounded-full transition-all",style:{background:b<o?"var(--gradient-success)":"rgb(var(--surface-2))"}},b))})})]})]})]})}function Skeleton({className:e="",variant:i="rectangular",width:o,height:d}){const h="animate-pulse bg-gray-200",g={text:"h-4 rounded",circular:"rounded-full",rectangular:"rounded-lg"},b={width:o||void 0,height:d||void 0};return jsxRuntimeExports.jsx("div",{className:`${h} ${g[i]} ${e}`,style:b})}function SkeletonCard(){return jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md space-y-4",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",className:"h-32 w-full"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",className:"w-3/4"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",className:"w-1/2"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",className:"h-8 w-20"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",className:"h-8 w-20"})]})]})}function SkeletonQuizTile(){return jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl p-4 shadow-md",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"circular",width:"48px",height:"48px"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text",className:"w-2/3"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",className:"w-full"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",className:"h-6 w-16"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",className:"h-6 w-16"})]})]})]})})}function SkeletonSubjectCard(){return jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",className:"h-40 w-full"}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-3",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text",className:"w-3/4 h-6"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",className:"w-full"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",className:"w-5/6"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 pt-2",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",className:"h-10 flex-1"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",className:"h-10 w-10"})]})]})]})}const Button=reactExports.forwardRef(({variant:e="primary",size:i="md",fullWidth:o=!1,className:d="",children:h,disabled:g,...b},j)=>{const _=`
      inline-flex items-center justify-center gap-2 font-semibold
      rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2
      disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none
    `,$={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500 active:scale-95",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-900 focus:ring-gray-500 active:scale-95",ghost:"hover:bg-gray-100 text-gray-700 focus:ring-gray-500 active:scale-95",destructive:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500 active:scale-95"},_e={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},et=o?"w-full":"";return jsxRuntimeExports.jsx("button",{ref:j,className:`${_} ${$[e]} ${_e[i]} ${et} ${d}`,disabled:g,...b,children:h})});Button.displayName="Button";function EmptyState({icon:e,title:i,description:o,action:d,className:h=""}){return jsxRuntimeExports.jsxs("div",{className:`flex flex-col items-center justify-center text-center py-12 px-4 ${h}`,children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-gray-100 rounded-2xl mb-4",children:jsxRuntimeExports.jsx(e,{size:48,className:"text-gray-400",strokeWidth:1.5})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:i}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:o}),d&&jsxRuntimeExports.jsx(Button,{onClick:d.onClick,variant:"primary",children:d.label})]})}function HomePage(){const e=useNavigate(),i=storage.getStreak(),o=storage.getAttempts(),d=storage.getMasteryStates(),h=storage.getProfile(),[g,b]=reactExports.useState([]),[j,_]=reactExports.useState([]),[$,_e]=reactExports.useState(!0),[et,tt]=reactExports.useState(null);reactExports.useEffect(()=>{rt()},[]);const rt=async()=>{try{tt(null);const[ut,dt]=await Promise.all([db.getSubjects(),Promise.all((await db.getSubjects()).map(mt=>db.getQuizzesBySubject(mt.id))).then(mt=>mt.flat())]);b(ut),_(dt)}catch(ut){console.error("Failed to load data:",ut),tt("Failed to load dashboard data. Please try again.")}finally{_e(!1)}},nt=o.length>0?o[o.length-1]:null,it=nt?j.find(ut=>ut.id===nt.quizId):null,st=()=>o.slice(-5).flatMap(mt=>mt.missedPromptIds).slice(0,10),at=()=>{const ut=j.length;if(ut===0)return 0;let dt=0;return j.forEach(mt=>{const xt=d[mt.id],ft=(xt==null?void 0:xt.masteryLevel)??0;dt+=ft/4*100}),Math.round(dt/ut)},ot=ut=>{const dt=j.filter(ft=>ft.subjectId===ut);let mt=0,xt=0;return dt.forEach(ft=>{const gt=d[ft.id],pt=(gt==null?void 0:gt.masteryLevel)??0;mt+=pt/4*100,pt>=3&&xt++}),{readinessPercent:Math.round(mt/dt.length)||0,masteredCount:xt,totalQuizzes:dt.length}},lt=at(),ct=st().length>0;return $?jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[jsxRuntimeExports.jsx(SkeletonCard,{}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsx(SkeletonCard,{}),jsxRuntimeExports.jsx(SkeletonCard,{}),jsxRuntimeExports.jsx(SkeletonCard,{})]}),jsxRuntimeExports.jsx(SkeletonCard,{}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsx(SkeletonSubjectCard,{}),jsxRuntimeExports.jsx(SkeletonSubjectCard,{}),jsxRuntimeExports.jsx(SkeletonSubjectCard,{})]})]}):et?jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto",children:jsxRuntimeExports.jsx(EmptyState,{icon:AlertCircle,title:"Unable to load dashboard",description:et,action:{label:"Try Again",onClick:rt}})}):g.length===0?jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto",children:jsxRuntimeExports.jsx(EmptyState,{icon:BookOpen,title:"No subjects available",description:"There are no subjects configured yet. Please check back later or contact your administrator.",action:{label:"Refresh",onClick:rt}})}):jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[jsxRuntimeExports.jsxs(motion.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative overflow-hidden rounded-2xl shadow-xl p-6 sm:p-8 md:p-12",style:{background:"var(--gradient-primary)"},children:[jsxRuntimeExports.jsxs("div",{className:"relative z-10 max-w-3xl",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-3 md:mb-4 tracking-tight",children:"Sprint to Grade 9"}),jsxRuntimeExports.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-white/90 mb-6 md:mb-8",children:"Master topics through speed + accuracy."})]}),jsxRuntimeExports.jsxs(motion.button,{onClick:()=>e("/quiz/daily-challenge-1"),whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"flex items-center justify-center gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-white text-base sm:text-lg font-bold rounded-xl shadow-xl hover:shadow-2xl transition-all w-full sm:w-auto focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-blue-600",style:{color:"rgb(var(--accent))"},children:[jsxRuntimeExports.jsx(Zap,{size:24}),jsxRuntimeExports.jsx("span",{children:"Start Today's Sprint"})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-64 sm:w-96 h-64 sm:h-96 bg-white/10 rounded-full -mr-32 sm:-mr-48 -mt-32 sm:-mt-48"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-48 sm:w-64 h-48 sm:h-64 bg-white/10 rounded-full -ml-24 sm:-ml-32 -mb-24 sm:-mb-32"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[it&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card-hover p-6 cursor-pointer",onClick:()=>e(`/quiz/${it.id}`),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg",style:{background:"rgb(var(--accent) / 0.1)"},children:jsxRuntimeExports.jsx(TrendingUp,{size:20,style:{color:"rgb(var(--accent))"}})}),jsxRuntimeExports.jsx("h3",{className:"font-bold",style:{color:"rgb(var(--text))"},children:"Continue"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm mb-2 line-clamp-2",style:{color:"rgb(var(--text-secondary))"},children:it.title}),jsxRuntimeExports.jsxs("p",{className:"text-xs",style:{color:"rgb(var(--muted))"},children:["Last played ",new Date(nt.finishedAt).toLocaleDateString()]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},className:"card p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg",style:{background:"rgb(var(--warning) / 0.1)"},children:jsxRuntimeExports.jsx(Flame,{size:20,style:{color:"rgb(var(--warning))"}})}),jsxRuntimeExports.jsx("h3",{className:"font-bold",style:{color:"rgb(var(--text))"},children:"Streak"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-3xl font-bold stat-number",style:{color:"rgb(var(--text))"},children:i.currentStreakDays}),jsxRuntimeExports.jsx("span",{className:"text-sm",style:{color:"rgb(var(--text-secondary))"},children:"days"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs",style:{color:"rgb(var(--muted))"},children:["Best: ",i.bestStreakDays," days"]})]}),ct&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card-hover p-6 cursor-pointer",style:{background:"var(--gradient-success)"},onClick:()=>e("/quiz/daily-challenge-1?mode=fixit"),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:jsxRuntimeExports.jsx(AlertCircle,{size:20,className:"text-white"})}),jsxRuntimeExports.jsx("h3",{className:"font-bold text-white",children:"Fix-It Drill"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-white/90 mb-2",children:"Practice recent mistakes"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-white/75",children:[st().length," items to review"]})]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.45},className:"card p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg",style:{background:"rgb(var(--success) / 0.1)"},children:jsxRuntimeExports.jsx(Target,{size:24,style:{color:"rgb(var(--success))"}})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold",style:{color:"rgb(var(--text))"},children:"Grade 9 Readiness"}),jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:"rgb(var(--text-secondary))"},children:"Overall mastery across all subjects"})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold stat-number",style:{color:"rgb(var(--success))"},children:[lt,"%"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs",style:{color:"rgb(var(--muted))"},children:["Level ",h.level]})]})]}),jsxRuntimeExports.jsx(ProgressBar,{value:lt,max:100,size:"lg",variant:"success",showPercentage:!1})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold",style:{color:"rgb(var(--text))"},children:"Your Subjects"}),jsxRuntimeExports.jsx("button",{onClick:()=>e("/subjects"),className:"btn-ghost text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-lg",children:"View All"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((ut,dt)=>{const mt=ot(ut.id);return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5+dt*.05},children:jsxRuntimeExports.jsx(SubjectCard,{subject:ut,...mt})},ut.id)})})]})]})}function SubjectsPage$1(){const e=storage.getMasteryStates(),[i,o]=reactExports.useState([]),[d,h]=reactExports.useState([]),[g,b]=reactExports.useState(!0);reactExports.useEffect(()=>{j()},[]);const j=async()=>{try{const[$,_e]=await Promise.all([db.getSubjects(),Promise.all((await db.getSubjects()).map(et=>db.getQuizzesBySubject(et.id))).then(et=>et.flat())]);o($),h(_e)}catch($){console.error("Failed to load data:",$)}finally{b(!1)}},_=$=>{const _e=d.filter(rt=>rt.subjectId===$);let et=0,tt=0;return _e.forEach(rt=>{const nt=e[rt.id],it=(nt==null?void 0:nt.masteryLevel)??0;et+=it/4*100,it>=3&&tt++}),{readinessPercent:Math.round(et/_e.length)||0,masteredCount:tt,totalQuizzes:_e.length}};return g?jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-center min-h-[400px]",children:jsxRuntimeExports.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})}):jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-500/10 rounded-xl",children:jsxRuntimeExports.jsx(BookOpen,{size:32,className:"text-blue-600 dark:text-blue-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white",children:"Your Subjects"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Choose a subject to start practicing"})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map($=>{const _e=_($.id);return jsxRuntimeExports.jsx(SubjectCard,{subject:$,..._e},$.id)})}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3",children:"Quick Tips"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-blue-500 font-bold",children:""}),jsxRuntimeExports.jsx("span",{children:"Start with topics you find challenging to build confidence"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-green-500 font-bold",children:""}),jsxRuntimeExports.jsx("span",{children:"Practice daily to maintain your streak and improve retention"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-purple-500 font-bold",children:""}),jsxRuntimeExports.jsx("span",{children:"Aim for Grade 9 Speed mastery to prove exam readiness"})]})]})]})]})}const masteryConfig={0:{label:"Unseen",icon:Circle,style:{background:"rgb(var(--muted) / 0.1)",color:"rgb(var(--muted))",border:"1px solid rgb(var(--muted) / 0.2)"}},1:{label:"Learning",icon:TrendingUp,style:{background:"rgb(var(--warning) / 0.1)",color:"rgb(var(--warning))",border:"1px solid rgb(var(--warning) / 0.2)"}},2:{label:"Secure",icon:Target,style:{background:"rgb(59 130 246 / 0.1)",color:"rgb(59 130 246)",border:"1px solid rgb(59 130 246 / 0.2)"}},3:{label:"Mastered",icon:CheckCircle2,style:{background:"rgb(var(--success) / 0.1)",color:"rgb(var(--success))",border:"1px solid rgb(var(--success) / 0.2)"}},4:{label:"Grade 9",icon:Zap,style:{background:"var(--gradient-elite)",color:"white",border:"none"}}};function MasteryChip({level:e,size:i="md"}){const o=masteryConfig[e],d=o.icon,h={sm:"px-2.5 py-1 text-xs gap-1",md:"px-3 py-1.5 text-sm gap-1.5",lg:"px-4 py-2 text-base gap-2"},g={sm:12,md:14,lg:16};return jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center rounded-full font-semibold transition-all ${h[i]}`,style:o.style,children:[jsxRuntimeExports.jsx(d,{size:g[i]}),o.label]})}function QuizTile({quiz:e}){const i=useNavigate(),o=storage.getMasteryState(e.id),d=(o==null?void 0:o.masteryLevel)??0,h=j=>{const _=Math.floor(j/60),$=j%60;return $>0?`${_}m ${$}s`:`${_}m`},g=j=>{switch(j){case"full":return"Full GCSE";case"unit":return"Unit Quiz";case"topic":return"Topic Sprint";default:return""}},b=j=>{switch(j){case"full":return{background:"var(--gradient-elite)",color:"white",border:"none"};case"unit":return{background:"rgb(var(--accent) / 0.1)",color:"rgb(var(--accent))",border:"1px solid rgb(var(--accent) / 0.2)"};case"topic":return{background:"rgb(var(--success) / 0.1)",color:"rgb(var(--success))",border:"1px solid rgb(var(--success) / 0.2)"};default:return{background:"rgb(var(--surface-2))",color:"rgb(var(--text))",border:"1px solid rgb(var(--border))"}}};return jsxRuntimeExports.jsx(motion.div,{onClick:()=>i(`/quiz/${e.id}`),whileHover:{y:-2},whileTap:{scale:.98},className:"card-hover group relative",children:jsxRuntimeExports.jsxs("div",{className:"p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"inline-block px-3 py-1 text-xs font-semibold rounded-full",style:b(e.scopeType),children:g(e.scopeType)}),jsxRuntimeExports.jsx(MasteryChip,{level:d,size:"sm"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-lg mb-1 group-hover:text-gradient transition-colors",style:{color:"rgb(var(--text))"},children:e.title}),jsxRuntimeExports.jsxs("p",{className:"text-sm",style:{color:"rgb(var(--text-secondary))"},children:[e.promptIds.length," questions"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm mb-3",style:{color:"rgb(var(--text-secondary))"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx(Clock,{size:16}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:h(e.timeLimitSec)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx(Award,{size:16}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:["G9: ",h(e.grade9TargetSec)]})]})]}),o&&jsxRuntimeExports.jsxs("div",{className:"pt-3 border-t flex items-center justify-between text-sm",style:{borderColor:"rgb(var(--border))"},children:[jsxRuntimeExports.jsx("span",{style:{color:"rgb(var(--text-secondary))"},className:"font-medium",children:"Personal Best"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 stat-number font-bold",style:{color:"rgb(var(--text))"},children:[jsxRuntimeExports.jsxs("span",{children:[Math.round(o.bestAccuracyPct),"%"]}),jsxRuntimeExports.jsx("span",{className:"opacity-50",children:""}),jsxRuntimeExports.jsx("span",{children:h(o.bestTimeSec)})]})]}),jsxRuntimeExports.jsx(motion.div,{className:"absolute bottom-5 right-5 opacity-0 group-hover:opacity-100 transition-opacity",whileHover:{scale:1.1},children:jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white",style:{background:"var(--gradient-primary)"},children:jsxRuntimeExports.jsx(Play,{size:18,fill:"white"})})})]})})}const masteryColors={0:"bg-gray-300 dark:bg-gray-700 hover:bg-gray-400 dark:hover:bg-gray-600",1:"bg-orange-300 dark:bg-orange-900 hover:bg-orange-400 dark:hover:bg-orange-800",2:"bg-yellow-300 dark:bg-yellow-900 hover:bg-yellow-400 dark:hover:bg-yellow-800",3:"bg-green-400 dark:bg-green-900 hover:bg-green-500 dark:hover:bg-green-800",4:"bg-purple-400 dark:bg-purple-900 hover:bg-purple-500 dark:hover:bg-purple-800"};function HeatmapGrid({topics:e,quizzes:i}){const o=useNavigate(),d=h=>{const g=i.filter($=>$.topicId===h);if(g.length===0)return 0;const b=g.map($=>{const _e=storage.getMasteryState($.id);return(_e==null?void 0:_e.masteryLevel)??0}),_=b.reduce(($,_e)=>$+_e,0)/b.length;return Math.round(_)};return jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:e.map(h=>{const g=d(h.id),b=masteryColors[g];return jsxRuntimeExports.jsxs("button",{onClick:()=>{const j=i.find(_=>_.topicId===h.id);j&&o(`/quiz/${j.id}`)},className:`group relative aspect-square rounded-xl ${b} transition-all duration-200 p-4 flex flex-col items-center justify-center text-center shadow-sm hover:shadow-md`,children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white line-clamp-2",children:h.name}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-700 dark:text-gray-300 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:["Level ",g]})]},h.id)})})}function SubjectDetailPage(){const{subjectId:e}=useParams(),i=useNavigate(),[o,d]=reactExports.useState("topics"),[h,g]=reactExports.useState(null),[b,j]=reactExports.useState([]),[_,$]=reactExports.useState([]),[_e,et]=reactExports.useState(!0);reactExports.useEffect(()=>{tt()},[e]);const tt=async()=>{if(e)try{const[ut,dt,mt]=await Promise.all([db.getSubject(e),db.getQuizzesBySubject(e),db.getTopics(e)]);g(ut||null),j(dt),$(mt)}catch(ut){console.error("Failed to load data:",ut)}finally{et(!1)}};if(_e)return jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-center min-h-[400px]",children:jsxRuntimeExports.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})});if(!h)return jsxRuntimeExports.jsx("div",{children:"Subject not found"});const rt=b.filter(ut=>ut.scopeType==="topic").sort((ut,dt)=>ut.title.localeCompare(dt.title)),nt=b.filter(ut=>ut.scopeType==="unit").sort((ut,dt)=>ut.title.localeCompare(dt.title)),it=b.filter(ut=>ut.scopeType==="full").sort((ut,dt)=>ut.title.localeCompare(dt.title)),st=storage.getMasteryStates(),at=storage.getAttempts(),lt=(()=>{let ut=0,dt=0,mt=0;return b.forEach(xt=>{const ft=st[xt.id],gt=(ft==null?void 0:ft.masteryLevel)??0;ut+=gt/4*100,gt>=3&&dt++,at.filter(yt=>yt.quizId===xt.id).forEach(yt=>mt+=yt.timeTakenSec)}),{readinessPercent:Math.round(ut/b.length)||0,masteredCount:dt,totalQuizzes:b.length,totalTimeMinutes:Math.round(mt/60)}})(),ct=[{id:"topics",label:"Topics",count:rt.length},{id:"units",label:"Units",count:nt.length},{id:"full",label:"Full GCSE",count:it.length},{id:"heatmap",label:"Heatmap",count:0}];return jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>i("/subjects"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:20}),jsxRuntimeExports.jsx("span",{children:"Back to Subjects"})]}),jsxRuntimeExports.jsxs("div",{className:`bg-gradient-to-br ${h.themeColor} rounded-2xl p-8 text-white shadow-xl`,children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-6",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:h.name}),jsxRuntimeExports.jsx("p",{className:"text-white/90 text-lg",children:h.examBoard})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Target,{size:20}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Readiness"})]}),jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold",children:[lt.readinessPercent,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Award,{size:20}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Mastered"})]}),jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold",children:[lt.masteredCount,"/",lt.totalQuizzes]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Clock,{size:20}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Time Spent"})]}),jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold",children:[lt.totalTimeMinutes,"m"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Award,{size:20}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Topics"})]}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold",children:_.length})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[jsxRuntimeExports.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsx("div",{className:"flex overflow-x-auto",children:ct.map(ut=>jsxRuntimeExports.jsxs("button",{onClick:()=>d(ut.id),className:`px-6 py-4 font-semibold transition-colors whitespace-nowrap ${o===ut.id?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[ut.label,ut.count>0&&jsxRuntimeExports.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-gray-200 dark:bg-gray-700 rounded-full",children:ut.count})]},ut.id))})}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[o==="topics"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Topic Quizzes"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:rt.map(ut=>jsxRuntimeExports.jsx(QuizTile,{quiz:ut},ut.id))})]}),o==="units"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Unit Tests"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:nt.map(ut=>jsxRuntimeExports.jsx(QuizTile,{quiz:ut},ut.id))})]}),o==="full"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Full GCSE Quizzes"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Test your complete mastery with comprehensive quizzes covering all units"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:it.map(ut=>jsxRuntimeExports.jsx(QuizTile,{quiz:ut},ut.id))})]}),o==="heatmap"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Mastery Heatmap"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Visualize your progress across all topics. Darker colors indicate higher mastery."}),jsxRuntimeExports.jsx(HeatmapGrid,{topics:_,quizzes:rt}),jsxRuntimeExports.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Legend"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded bg-gray-300 dark:bg-gray-700"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Unseen (0)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded bg-orange-300 dark:bg-orange-900"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Learning (1)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded bg-yellow-300 dark:bg-yellow-900"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Secure (2)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded bg-green-400 dark:bg-green-900"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mastered (3)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded bg-purple-400 dark:bg-purple-900"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Grade 9 (4)"})]})]})]})]})]})]})]})}function XPPopup({xp:e,type:i="answer",position:o="input"}){const[d,h]=reactExports.useState(!0);reactExports.useEffect(()=>{const _=setTimeout(()=>h(!1),2e3);return()=>clearTimeout(_)},[]);const g={answer:{initial:{opacity:0,y:0,scale:.8},animate:{opacity:1,y:-40,scale:1},exit:{opacity:0,y:-60,scale:.8}},quiz:{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5}},mastery:{initial:{opacity:0,scale:.5,rotate:-10},animate:{opacity:1,scale:1,rotate:0},exit:{opacity:0,scale:1.2}}},b=()=>{switch(i){case"mastery":return jsxRuntimeExports.jsx(Zap,{size:20,fill:"white"});case"quiz":return jsxRuntimeExports.jsx(TrendingUp,{size:20});default:return jsxRuntimeExports.jsx(Plus,{size:16})}},j=()=>{switch(i){case"mastery":return{background:"var(--gradient-elite)",padding:"12px 24px",fontSize:"18px"};case"quiz":return{background:"var(--gradient-success)",padding:"10px 20px",fontSize:"16px"};default:return{background:"var(--gradient-primary)",padding:"6px 12px",fontSize:"14px"}}};return jsxRuntimeExports.jsx(AnimatePresence,{children:d&&jsxRuntimeExports.jsx(motion.div,{variants:g[i],initial:"initial",animate:"animate",exit:"exit",transition:{duration:.5,ease:"easeOut"},className:`fixed ${o==="center"?"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2":"top-1/4 left-1/2 -translate-x-1/2"} z-[100] pointer-events-none`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 rounded-full text-white font-bold shadow-xl",style:j(),children:[b(),jsxRuntimeExports.jsx("span",{children:i==="mastery"?"MASTERY UP!":`+${e} XP`})]})})})}function ComboTracker({combo:e,show:i}){return!i||e<2?null:jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsx(motion.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",bounce:.6},className:"fixed top-1/4 right-8 z-50 pointer-events-none",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 rounded-2xl shadow-xl",style:{background:e>=5?"var(--gradient-elite)":"var(--gradient-primary)"},children:[jsxRuntimeExports.jsx(Zap,{size:24,className:"text-white",fill:"white"}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-white stat-number",children:[e,"x"]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-white/80 font-semibold",children:"COMBO"})]})]})},e)})}const symbolGroups=[{name:"Basic",symbols:["+","","","","=","","<",">","",""]},{name:"Powers/Roots",symbols:["","","^","",""]},{name:"Fractions",symbols:["/",""]},{name:"Algebra",symbols:["x","y","a","b","n",""]},{name:"Brackets",symbols:["(",")","[","]","{","}"]},{name:"Geometry",symbols:["","","sin","cos","tan"]},{name:"Sets",symbols:["","","",""]},{name:"Other",symbols:["","","",""]}],templates$2=[{label:"( )",value:"()",cursorOffset:-1},{label:"( )",value:"()",cursorOffset:-1},{label:"( )",value:"()",cursorOffset:-2},{label:"x^",value:"x^",cursorOffset:0}];function MathsKeyboard({inputRef:e}){const[i,o]=reactExports.useState(()=>{const $=localStorage.getItem("mathsKeyboard_favorites");return $?JSON.parse($):["","","","","",""]});reactExports.useEffect(()=>{localStorage.setItem("mathsKeyboard_favorites",JSON.stringify(i))},[i]);const d=($,_e=0)=>{var lt;const et=e.current;if(!et)return;const tt=et.selectionStart||0,rt=et.selectionEnd||0,nt=et.value,it=nt.substring(0,tt)+$+nt.substring(rt),st=(lt=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:lt.set;st==null||st.call(et,it);const at=new Event("input",{bubbles:!0,cancelable:!0});et.dispatchEvent(at);const ot=tt+$.length+_e;setTimeout(()=>{et.focus(),et.setSelectionRange(ot,ot)},0)},h=$=>{d($)},g=$=>{d($.value,$.cursorOffset)},b=()=>{var at;const $=e.current;if(!$)return;const _e=$.selectionStart||0,et=$.selectionEnd||0,tt=$.value;let rt=tt,nt=_e;_e!==et?(rt=tt.substring(0,_e)+tt.substring(et),nt=_e):_e>0&&(rt=tt.substring(0,_e-1)+tt.substring(_e),nt=_e-1);const it=(at=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:at.set;it==null||it.call($,rt);const st=new Event("input",{bubbles:!0,cancelable:!0});$.dispatchEvent(st),setTimeout(()=>{$.focus(),$.setSelectionRange(nt,nt)},0)},j=()=>{var tt;const $=e.current;if(!$)return;const _e=(tt=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:tt.set;_e==null||_e.call($,"");const et=new Event("input",{bubbles:!0,cancelable:!0});$.dispatchEvent(et),setTimeout(()=>{$.focus()},0)},_=$=>{o(_e=>_e.includes($)?_e.filter(et=>et!==$):[..._e,$])};return jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto max-h-[calc(100vh-200px)]",children:[i.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider flex items-center gap-1",children:[jsxRuntimeExports.jsx(Star,{className:"w-3 h-3"}),"Favorites"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-6 gap-2",children:i.map($=>jsxRuntimeExports.jsx("button",{onClick:()=>h($),onContextMenu:_e=>{_e.preventDefault(),_($)},className:"kbd-key text-lg",title:"Right-click to remove from favorites",children:$},$))})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Templates"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-2",children:templates$2.map($=>jsxRuntimeExports.jsx("button",{onClick:()=>g($),className:"kbd-key text-sm font-mono",children:$.label},$.label))})]}),symbolGroups.map($=>jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:$.name}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-6 gap-2",children:$.symbols.map(_e=>{const et=i.includes(_e);return jsxRuntimeExports.jsxs("button",{onClick:()=>h(_e),onContextMenu:tt=>{tt.preventDefault(),_(_e)},className:`kbd-key text-lg relative ${et?"ring-2 ring-yellow-400":""}`,title:"Right-click to add to favorites",children:[_e,et&&jsxRuntimeExports.jsx(Star,{className:"w-3 h-3 absolute top-0.5 right-0.5 text-yellow-500 fill-yellow-500"})]},_e)})})]},$.name)),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("button",{onClick:b,className:"kbd-key-action",children:" Backspace"}),jsxRuntimeExports.jsx("button",{onClick:j,className:"kbd-key-action",children:"Clear"})]})]})}function DrawingCanvas({attemptId:e}){const i=reactExports.useRef(null),[o,d]=reactExports.useState(!1),[h,g]=reactExports.useState("pen"),[b,j]=reactExports.useState("#000000"),[_,$]=reactExports.useState(3),[_e,et]=reactExports.useState("none"),[tt,rt]=reactExports.useState([]),[nt,it]=reactExports.useState(-1),st=`drawing_${e}`;reactExports.useEffect(()=>{const ft=i.current;if(!ft)return;const gt=ft.getContext("2d");if(!gt)return;const pt=ft.parentElement;pt&&(ft.width=pt.clientWidth,ft.height=Math.max(400,window.innerHeight*.5)),at(gt,ft.width,ft.height);const yt=localStorage.getItem(st);if(yt)try{const bt=JSON.parse(yt),St=new Image;St.onload=()=>{gt.drawImage(St,0,0),rt(bt.history),it(bt.historyIndex)},St.src=bt.imageData}catch(bt){console.error("Failed to load drawing:",bt)}else ot()},[e]),reactExports.useEffect(()=>{const ft=i.current;if(!ft)return;const gt=ft.getContext("2d");gt&&at(gt,ft.width,ft.height)},[_e]);const at=(ft,gt,pt)=>{if(ft.fillStyle="#ffffff",ft.fillRect(0,0,gt,pt),_e==="none")return;ft.strokeStyle="#e5e7eb",ft.lineWidth=1;const yt=_e==="squared"?20:10;if(_e==="squared"){for(let bt=0;bt<=gt;bt+=yt)ft.beginPath(),ft.moveTo(bt,0),ft.lineTo(bt,pt),ft.stroke();for(let bt=0;bt<=pt;bt+=yt)ft.beginPath(),ft.moveTo(0,bt),ft.lineTo(gt,bt),ft.stroke()}else if(_e==="dotted"){ft.fillStyle="#e5e7eb";for(let bt=0;bt<=gt;bt+=yt)for(let St=0;St<=pt;St+=yt)ft.beginPath(),ft.arc(bt,St,1.5,0,Math.PI*2),ft.fill()}},ot=()=>{const ft=i.current;if(!ft)return;const gt=ft.toDataURL(),pt=tt.slice(0,nt+1);pt.push(gt),pt.length>50?pt.shift():it(bt=>bt+1),rt(pt);const yt={imageData:gt,history:pt,historyIndex:pt.length-1};localStorage.setItem(st,JSON.stringify(yt))},lt=()=>{if(nt<=0)return;const ft=i.current,gt=ft==null?void 0:ft.getContext("2d");if(!ft||!gt)return;const pt=nt-1;it(pt);const yt=new Image;yt.onload=()=>{gt.clearRect(0,0,ft.width,ft.height),at(gt,ft.width,ft.height),gt.drawImage(yt,0,0)},yt.src=tt[pt]},ct=()=>{if(nt>=tt.length-1)return;const ft=i.current,gt=ft==null?void 0:ft.getContext("2d");if(!ft||!gt)return;const pt=nt+1;it(pt);const yt=new Image;yt.onload=()=>{gt.clearRect(0,0,ft.width,ft.height),at(gt,ft.width,ft.height),gt.drawImage(yt,0,0)},yt.src=tt[pt]},ut=()=>{const ft=i.current,gt=ft==null?void 0:ft.getContext("2d");!ft||!gt||(gt.clearRect(0,0,ft.width,ft.height),at(gt,ft.width,ft.height),ot())},dt=ft=>{const gt=i.current,pt=gt==null?void 0:gt.getContext("2d");!gt||!pt||(pt.beginPath(),d(!0),xt(ft))},mt=()=>{o&&(d(!1),ot())},xt=ft=>{if(!o&&ft.type!=="mousedown"&&ft.type!=="touchstart")return;const gt=i.current,pt=gt==null?void 0:gt.getContext("2d");if(!gt||!pt)return;const yt=gt.getBoundingClientRect();let bt,St;"touches"in ft?(bt=ft.touches[0].clientX,St=ft.touches[0].clientY):(bt=ft.clientX,St=ft.clientY);const wt=gt.width/yt.width,kt=gt.height/yt.height,Et=(bt-yt.left)*wt,jt=(St-yt.top)*kt;pt.lineCap="round",pt.lineJoin="round",h==="eraser"?(pt.globalCompositeOperation="destination-out",pt.lineWidth=_*3):(pt.globalCompositeOperation="source-over",pt.lineWidth=_,pt.strokeStyle=b,h==="highlighter"?pt.globalAlpha=.3:pt.globalAlpha=1),pt.lineTo(Et,jt),pt.stroke(),pt.beginPath(),pt.moveTo(Et,jt)};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-3 border-b border-gray-200 dark:border-gray-700 flex-wrap",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 border border-gray-300 dark:border-gray-600 rounded-lg p-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>g("pen"),className:`p-2 rounded transition-colors ${h==="pen"?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Pen",children:jsxRuntimeExports.jsx(Pen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>{g("highlighter"),j("#ffeb3b")},className:`p-2 rounded transition-colors ${h==="highlighter"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-600 dark:text-yellow-400":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Highlighter",children:jsxRuntimeExports.jsx(Pen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>g("eraser"),className:`p-2 rounded transition-colors ${h==="eraser"?"bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Eraser",children:jsxRuntimeExports.jsx(Eraser,{className:"w-4 h-4"})})]}),h!=="eraser"&&jsxRuntimeExports.jsx("input",{type:"color",value:b,onChange:ft=>j(ft.target.value),className:"w-10 h-10 rounded border-2 border-gray-300 dark:border-gray-600 cursor-pointer",title:"Color"}),jsxRuntimeExports.jsx("input",{type:"range",min:"1",max:"10",value:_,onChange:ft=>$(Number(ft.target.value)),className:"w-24",title:"Size"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 border border-gray-300 dark:border-gray-600 rounded-lg p-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("none"),className:`p-2 rounded transition-colors ${_e==="none"?"bg-gray-200 dark:bg-gray-700":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"No Grid",children:jsxRuntimeExports.jsx(Square,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("squared"),className:`p-2 rounded transition-colors ${_e==="squared"?"bg-gray-200 dark:bg-gray-700":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Squared Grid",children:jsxRuntimeExports.jsx(Grid3x3,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("dotted"),className:`p-2 rounded transition-colors ${_e==="dotted"?"bg-gray-200 dark:bg-gray-700":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Dotted Grid",children:jsxRuntimeExports.jsx(Grid2x2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsx("button",{onClick:lt,disabled:nt<=0,className:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo",children:jsxRuntimeExports.jsx(Undo2,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:ct,disabled:nt>=tt.length-1,className:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo",children:jsxRuntimeExports.jsx(Redo2,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:ut,className:"p-2 rounded hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 transition-colors",title:"Clear",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden bg-white dark:bg-gray-900",children:jsxRuntimeExports.jsx("canvas",{ref:i,onMouseDown:dt,onMouseMove:xt,onMouseUp:mt,onMouseLeave:mt,onTouchStart:dt,onTouchMove:xt,onTouchEnd:mt,className:"cursor-crosshair touch-none",style:{width:"100%",height:"100%"}})})]})}function Calculator({inputRef}){const[display,setDisplay]=reactExports.useState("0"),[expression,setExpression]=reactExports.useState(""),[lastResult,setLastResult]=reactExports.useState(null),handleNumber=e=>{setDisplay(display==="0"||display==="Error"?e:display+e)},handleOperator=e=>{if(display==="Error"){setDisplay("0"),setExpression("");return}setExpression(display+" "+e+" "),setDisplay("0")},handleClear=()=>{setDisplay("0"),setExpression(""),setLastResult(null)},handleBackspace=()=>{display.length>1?setDisplay(display.slice(0,-1)):setDisplay("0")},handleDecimal=()=>{display.includes(".")||setDisplay(display+".")},handleEquals=()=>{try{const fullExpression=expression+display,sanitized=fullExpression.replace(//g,"*").replace(//g,"/").replace(/\^/g,"**").replace(//g,Math.PI.toString()),result=eval(sanitized);setDisplay(result.toString()),setExpression(""),setLastResult(result)}catch(e){setDisplay("Error"),setExpression("")}},handleFunction=e=>{try{const i=parseFloat(display);let o;switch(e){case"":o=Math.sqrt(i);break;case"x":o=i*i;break;case"":o=-i;break;case"%":o=i/100;break;case"":o=Math.PI;break;default:return}setDisplay(o.toString()),setLastResult(o)}catch{setDisplay("Error")}},handlePower=()=>{setExpression(display+" ^ "),setDisplay("0")},insertResult=()=>{const e=inputRef.current;if(!e||display==="Error")return;const i=e.insertTextAtCursor;typeof i=="function"?i(display):console.error("insertTextAtCursor function not found on input element")};return jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-full",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold text-green-700 dark:text-green-400",children:"Calculator Allowed"})]})}),jsxRuntimeExports.jsxs("div",{className:"calc-display",children:[expression&&jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:expression}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold",children:display})]}),lastResult!==null&&display!=="Error"&&jsxRuntimeExports.jsxs("button",{onClick:insertResult,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg text-blue-600 dark:text-blue-400 font-semibold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[jsxRuntimeExports.jsx(ArrowUpToLine,{className:"w-4 h-4"}),"Insert Result into Answer"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:handleClear,className:"calc-btn-clear",children:"C"}),jsxRuntimeExports.jsx("button",{onClick:handleBackspace,className:"calc-btn-function",children:jsxRuntimeExports.jsx(Delete,{className:"w-5 h-5 mx-auto"})}),jsxRuntimeExports.jsx("button",{onClick:()=>handleFunction("%"),className:"calc-btn-function",children:"%"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleOperator(""),className:"calc-btn-operator",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>handleNumber("7"),className:"calc-btn",children:"7"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleNumber("8"),className:"calc-btn",children:"8"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleNumber("9"),className:"calc-btn",children:"9"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleOperator(""),className:"calc-btn-operator",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>handleNumber("4"),className:"calc-btn",children:"4"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleNumber("5"),className:"calc-btn",children:"5"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleNumber("6"),className:"calc-btn",children:"6"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleOperator("-"),className:"calc-btn-operator",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>handleNumber("1"),className:"calc-btn",children:"1"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleNumber("2"),className:"calc-btn",children:"2"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleNumber("3"),className:"calc-btn",children:"3"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleOperator("+"),className:"calc-btn-operator",children:"+"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleFunction(""),className:"calc-btn-function",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>handleNumber("0"),className:"calc-btn",children:"0"}),jsxRuntimeExports.jsx("button",{onClick:handleDecimal,className:"calc-btn",children:"."}),jsxRuntimeExports.jsx("button",{onClick:handleEquals,className:"calc-btn-equals",children:"="})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("button",{onClick:()=>handleFunction(""),className:"calc-btn-function",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>handleFunction("x"),className:"calc-btn-function",children:"x"}),jsxRuntimeExports.jsx("button",{onClick:handlePower,className:"calc-btn-function",children:"x^y"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleFunction(""),className:"calc-btn-function",children:""})]})]})}function MathsToolkit({isOpen:e,onClose:i,calculatorAllowed:o,attemptId:d,inputRef:h}){const[g,b]=reactExports.useState(()=>localStorage.getItem("mathsToolkit_lastTab")||"keyboard");reactExports.useEffect(()=>{localStorage.setItem("mathsToolkit_lastTab",g)},[g]),reactExports.useEffect(()=>{e&&g==="calculator"&&!o&&b("keyboard")},[e,o,g]),reactExports.useEffect(()=>{const $=localStorage.getItem("mathsToolkit_lastTab");e&&o&&$==="calculator"&&g!=="calculator"&&b("calculator")},[e,o,g]);const j=[{id:"keyboard",label:"Keyboard",icon:Keyboard,enabled:!0},{id:"draw",label:"Draw",icon:PenTool,enabled:!0},{id:"calculator",label:"Calculator",icon:Calculator$1,enabled:o}];return window.innerWidth<768?jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:i,className:"fixed inset-0 bg-black/50 z-40"}),jsxRuntimeExports.jsxs(motion.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 rounded-t-3xl shadow-2xl z-50 max-h-[80vh] flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold",style:{color:"rgb(var(--text))"},children:"Maths Toolkit"}),jsxRuntimeExports.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:j.filter($=>$.enabled).map($=>jsxRuntimeExports.jsxs("button",{onClick:()=>b($.id),className:`flex items-center gap-2 px-6 py-3 font-medium transition-colors whitespace-nowrap ${g===$.id?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[jsxRuntimeExports.jsx($.icon,{className:"w-4 h-4"}),$.label]},$.id))}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-hidden",children:[g==="keyboard"&&jsxRuntimeExports.jsx(MathsKeyboard,{inputRef:h}),g==="draw"&&jsxRuntimeExports.jsx(DrawingCanvas,{attemptId:d}),g==="calculator"&&o&&jsxRuntimeExports.jsx(Calculator,{inputRef:h})]})]})]})}):jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsxs(motion.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed right-0 top-0 bottom-0 w-96 bg-white dark:bg-gray-900 shadow-2xl z-50 flex flex-col border-l border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold",style:{color:"rgb(var(--text))"},children:"Maths Toolkit"}),jsxRuntimeExports.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:j.filter($=>$.enabled).map($=>jsxRuntimeExports.jsxs("button",{onClick:()=>b($.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 font-medium transition-colors ${g===$.id?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[jsxRuntimeExports.jsx($.icon,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:$.label})]},$.id))}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-hidden",children:[g==="keyboard"&&jsxRuntimeExports.jsx(MathsKeyboard,{inputRef:h}),g==="draw"&&jsxRuntimeExports.jsx(DrawingCanvas,{attemptId:d}),g==="calculator"&&o&&jsxRuntimeExports.jsx(Calculator,{inputRef:h})]})]})})}const angleInSemicircle={templateId:"math.circle_theorems.angle_in_semicircle.v1",title:"Angle in a Semicircle",description:"Circle with diameter and point on circumference showing 90 angle",category:"geometry",schema:{labels:{A:{default:"A",maxLen:3},B:{default:"B",maxLen:3},C:{default:"C",maxLen:3},O:{default:"O",maxLen:3}},positions:{C:{default:{x:.5,y:.2},normalized:!0}},visibility:{showCenter:{default:!0},showAngleLabel:{default:!0},showRightAngleMark:{default:!0}}},render:e=>{var dt,mt,xt,ft,gt,pt,yt,bt;const b=((dt=e.labels)==null?void 0:dt.A)||"A",j=((mt=e.labels)==null?void 0:mt.B)||"B",_=((xt=e.labels)==null?void 0:xt.C)||"C",$=((ft=e.labels)==null?void 0:ft.O)||"O",et=(((gt=e.positions)==null?void 0:gt.C)||{x:.5,y:.2}).x*2*Math.PI,tt=200+150*Math.cos(et),rt=200-150*Math.sin(et),nt=50,it=200,st=350,at=200,ot=((pt=e.visibility)==null?void 0:pt.showCenter)!==!1,lt=((yt=e.visibility)==null?void 0:yt.showAngleLabel)!==!1,ct=((bt=e.visibility)==null?void 0:bt.showRightAngleMark)!==!1;return{svg:`<svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-line { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-highlight { stroke: #60a5fa; stroke-width: 2; fill: none; }
    .diagram-point { fill: #cbd5e1; }
    .diagram-point-highlight { fill: #60a5fa; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; font-weight: bold; fill: #e2e8f0; }
    .diagram-text-small { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #94a3b8; }
    .diagram-text-angle { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #f87171; }
    .diagram-angle-mark { stroke: #f87171; stroke-width: 2; fill: none; }
  </style>

  <g id="grp:main">
    <circle id="ln:circle" cx="200" cy="200" r="150" class="diagram-line"/>
    <line id="ln:AB" x1="${nt}" y1="${it}" x2="${st}" y2="${at}" class="diagram-line"/>
    <line id="ln:AC" x1="${nt}" y1="${it}" x2="${tt}" y2="${rt}" class="diagram-highlight"/>
    <line id="ln:BC" x1="${st}" y1="${at}" x2="${tt}" y2="${rt}" class="diagram-highlight"/>

    <circle id="pt:A" cx="${nt}" cy="${it}" r="5" class="diagram-point"/>
    <circle id="pt:B" cx="${st}" cy="${at}" r="5" class="diagram-point"/>
    <circle id="pt:C" cx="${tt}" cy="${rt}" r="5" class="diagram-point-highlight"/>
    ${ot?'<circle id="pt:O" cx="200" cy="200" r="5" class="diagram-point"/>':""}

    <text id="txt:A" x="${nt-20}" y="${it+5}" class="diagram-text">${b}</text>
    <text id="txt:B" x="${st+10}" y="${at+5}" class="diagram-text">${j}</text>
    <text id="txt:C" x="${tt+5}" y="${rt-10}" class="diagram-text">${_}</text>
    ${ot?`<text id="txt:O" x="205" y="220" class="diagram-text-small">${$}</text>`:""}

    ${ct?`<path id="mk:angleC" d="M ${tt-15} ${rt+5} L ${tt-15} ${rt+20} L ${tt} ${rt+20}" class="diagram-angle-mark"/>`:""}
    ${lt?`<text id="txt:angleC" x="${tt-25}" y="${rt+15}" class="diagram-text-angle">90</text>`:""}
  </g>
</svg>`,width:400,height:400,warnings:[]}}},fzcAngles={templateId:"math.parallel_lines.fzc_angles.v1",title:"F, Z, C Angles (Parallel Lines)",description:"Two parallel lines with a transversal showing alternate, corresponding, or co-interior angles",category:"geometry",schema:{labels:{angle1:{default:"a",maxLen:10},angle2:{default:"b",maxLen:10}},values:{angle1Value:{default:65,type:"number",min:0,max:180},angle2Value:{default:65,type:"number",min:0,max:180}},visibility:{showParallelMarks:{default:!0},showAngle1:{default:!0},showAngle2:{default:!0}}},render:e=>{var $,_e,et,tt,rt;const d=(($=e.labels)==null?void 0:$.angle1)||"a",h=((_e=e.labels)==null?void 0:_e.angle2)||"b",g=((et=e.visibility)==null?void 0:et.showParallelMarks)!==!1,b=((tt=e.visibility)==null?void 0:tt.showAngle1)!==!1,j=((rt=e.visibility)==null?void 0:rt.showAngle2)!==!1;return{svg:`<svg viewBox="0 0 450 350" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-line { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-transversal { stroke: #60a5fa; stroke-width: 2; fill: none; }
    .diagram-angle1 { fill: #f87171; fill-opacity: 0.3; }
    .diagram-angle2 { fill: #4ade80; fill-opacity: 0.3; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; font-weight: bold; }
    .diagram-text-label { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #e2e8f0; }
    .diagram-parallel-mark { stroke: #94a3b8; stroke-width: 2; }
  </style>

  <g id="grp:main">
    <line id="ln:L1" x1="50" y1="100" x2="400" y2="100" class="diagram-line"/>
    <line id="ln:L2" x1="50" y1="250" x2="400" y2="250" class="diagram-line"/>
    <line id="ln:T" x1="150" y1="50" x2="300" y2="300" class="diagram-transversal"/>

    ${b?'<path id="mk:angle1" d="M 190 100 L 210 100 L 200 85" class="diagram-angle1"/>':""}
    ${j?'<path id="mk:angle2" d="M 230 250 L 250 250 L 240 235" class="diagram-angle2"/>':""}

    <text id="txt:L1" x="410" y="105" class="diagram-text-label">L</text>
    <text id="txt:L2" x="410" y="255" class="diagram-text-label">L</text>
    ${b?`<text id="txt:angle1" x="205" y="75" class="diagram-text" fill="#ef4444">${d}</text>`:""}
    ${j?`<text id="txt:angle2" x="245" y="225" class="diagram-text" fill="#22c55e">${h}</text>`:""}

    ${g?`
    <g id="grp:parallel-marks">
      <line id="mk:par1a" x1="120" y1="95" x2="130" y2="95" class="diagram-parallel-mark"/>
      <line id="mk:par1b" x1="120" y1="105" x2="130" y2="105" class="diagram-parallel-mark"/>
      <line id="mk:par2a" x1="120" y1="245" x2="130" y2="245" class="diagram-parallel-mark"/>
      <line id="mk:par2b" x1="120" y1="255" x2="130" y2="255" class="diagram-parallel-mark"/>
    </g>`:""}
  </g>
</svg>`,width:450,height:350,warnings:[]}}},rightTriangle={templateId:"math.trig.right_triangle.v1",title:"Right Triangle",description:"Right-angled triangle with labeled sides (opposite, adjacent, hypotenuse)",category:"trigonometry",schema:{labels:{A:{default:"A",maxLen:3},B:{default:"B",maxLen:3},C:{default:"C",maxLen:3},opposite:{default:"opposite",maxLen:20},adjacent:{default:"adjacent",maxLen:20},hypotenuse:{default:"hypotenuse",maxLen:20}},values:{angle:{default:35,type:"number",min:1,max:89}},visibility:{showRightAngleMark:{default:!0},showSideLabels:{default:!0},showAngleLabel:{default:!1}}},render:e=>{var ft,gt,pt,yt,bt,St,wt,kt,Et,jt;const d=((ft=e.labels)==null?void 0:ft.A)||"A",h=((gt=e.labels)==null?void 0:gt.B)||"B",g=((pt=e.labels)==null?void 0:pt.C)||"C",b=((yt=e.labels)==null?void 0:yt.opposite)||"opposite",j=((bt=e.labels)==null?void 0:bt.adjacent)||"adjacent",_=((St=e.labels)==null?void 0:St.hypotenuse)||"hypotenuse",$=Number((wt=e.values)==null?void 0:wt.angle)||35,_e=((kt=e.visibility)==null?void 0:kt.showRightAngleMark)!==!1,et=((Et=e.visibility)==null?void 0:Et.showSideLabels)!==!1,tt=((jt=e.visibility)==null?void 0:jt.showAngleLabel)===!0,rt=100,nt=300,it=300,st=$*Math.PI/180,at=it*Math.tan(st),ot=rt,lt=nt,ct=rt+it,ut=nt,dt=ct,mt=nt-at;return{svg:`<svg viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-line { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-point { fill: #cbd5e1; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; font-weight: bold; fill: #e2e8f0; }
    .diagram-text-side { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; fill: #60a5fa; font-style: italic; }
    .diagram-text-angle { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; fill: #f87171; }
    .diagram-right-angle { stroke: #94a3b8; stroke-width: 2; fill: none; }
  </style>

  <g id="grp:main">
    <line id="ln:AB" x1="${ot}" y1="${lt}" x2="${ct}" y2="${ut}" class="diagram-line"/>
    <line id="ln:BC" x1="${ct}" y1="${ut}" x2="${dt}" y2="${mt}" class="diagram-line"/>
    <line id="ln:CA" x1="${dt}" y1="${mt}" x2="${ot}" y2="${lt}" class="diagram-line"/>

    <circle id="pt:A" cx="${ot}" cy="${lt}" r="4" class="diagram-point"/>
    <circle id="pt:B" cx="${ct}" cy="${ut}" r="4" class="diagram-point"/>
    <circle id="pt:C" cx="${dt}" cy="${mt}" r="4" class="diagram-point"/>

    <text id="txt:A" x="${ot-20}" y="${lt+5}" class="diagram-text">${d}</text>
    <text id="txt:B" x="${ct+10}" y="${ut+5}" class="diagram-text">${h}</text>
    <text id="txt:C" x="${dt+10}" y="${mt+5}" class="diagram-text">${g}</text>

    ${_e?`<rect id="mk:rightAngle" x="${ct-15}" y="${ut-15}" width="15" height="15" class="diagram-right-angle"/>`:""}

    ${et?`
    <text id="txt:adjacent" x="${(ot+ct)/2}" y="${lt+25}" text-anchor="middle" class="diagram-text-side">${j}</text>
    <text id="txt:opposite" x="${ct+30}" y="${(ut+mt)/2}" text-anchor="middle" class="diagram-text-side">${b}</text>
    <text id="txt:hypotenuse" x="${(ot+dt)/2-30}" y="${(lt+mt)/2-10}" text-anchor="middle" class="diagram-text-side">${_}</text>
    `:""}

    ${tt?`<text id="txt:angle" x="${ot+30}" y="${lt-15}" class="diagram-text-angle">${$}</text>`:""}
  </g>
</svg>`,width:500,height:400,warnings:[]}}},linearAxesLine={templateId:"math.graphs.linear_axes_line.v1",title:"Linear Graph with Axes",description:"Coordinate axes with optional grid and customizable linear line",category:"graphs",schema:{labels:{xLabel:{default:"x",maxLen:10},yLabel:{default:"y",maxLen:10}},values:{gradient:{default:1,type:"number",min:-10,max:10},intercept:{default:0,type:"number",min:-10,max:10}},visibility:{showGrid:{default:!0},showLine:{default:!0},showPoints:{default:!1}},positions:{point1:{default:{x:.3,y:.6},normalized:!0},point2:{default:{x:.7,y:.4},normalized:!0}}},render:e=>{var ot,lt,ct,ut,dt,mt,xt,ft,gt;const g=((ot=e.labels)==null?void 0:ot.xLabel)||"x",b=((lt=e.labels)==null?void 0:lt.yLabel)||"y",j=Number((ct=e.values)==null?void 0:ct.gradient)||1,_=Number((ut=e.values)==null?void 0:ut.intercept)||0,$=((dt=e.visibility)==null?void 0:dt.showGrid)!==!1,_e=((mt=e.visibility)==null?void 0:mt.showLine)!==!1,et=((xt=e.visibility)==null?void 0:xt.showPoints)===!0,tt=500/2,rt=500/2;let nt="";if(_e){const yt=rt-(j*(50-tt)+_*50),bt=450,St=rt-(j*(bt-tt)+_*50);nt=`<line id="ln:graphLine" x1="50" y1="${yt}" x2="${bt}" y2="${St}" stroke="#3b82f6" stroke-width="3"/>`}let it="";if(et){const pt=((ft=e.positions)==null?void 0:ft.point1)||{x:.3,y:.6},yt=((gt=e.positions)==null?void 0:gt.point2)||{x:.7,y:.4},bt=pt.x*500,St=pt.y*500,wt=yt.x*500,kt=yt.y*500;it=`
      <circle id="pt:A" cx="${bt}" cy="${St}" r="5" fill="#ef4444"/>
      <circle id="pt:B" cx="${wt}" cy="${kt}" r="5" fill="#ef4444"/>
      <text id="txt:A" x="${bt+10}" y="${St-5}" class="diagram-text-point">A</text>
      <text id="txt:B" x="${wt+10}" y="${kt-5}" class="diagram-text-point">B</text>
      `}return{svg:`<svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#94a3b8"/>
    </marker>
  </defs>
  <style>
    .diagram-axis { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; font-weight: bold; fill: #e2e8f0; }
    .diagram-text-small { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #94a3b8; }
    .diagram-text-point { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #f87171; }
  </style>

  <g id="grp:main">
    ${$?`
    <g id="grp:grid" opacity="0.2">
      ${Array.from({length:9},(pt,yt)=>{const bt=50+yt*50;return`<line x1="50" y1="${bt}" x2="450" y2="${bt}" stroke="#94a3b8" stroke-width="1"/>`}).join(`
`)}
      ${Array.from({length:9},(pt,yt)=>{const bt=50+yt*50;return`<line x1="${bt}" y1="50" x2="${bt}" y2="450" stroke="#94a3b8" stroke-width="1"/>`}).join(`
`)}
    </g>`:""}

    <line id="ln:xAxis" x1="50" y1="${rt}" x2="450" y2="${rt}" class="diagram-axis" marker-end="url(#arrowhead)"/>
    <line id="ln:yAxis" x1="${tt}" y1="450" x2="${tt}" y2="50" class="diagram-axis" marker-end="url(#arrowhead)"/>

    <text id="txt:xLabel" x="465" y="${rt+5}" class="diagram-text">${g}</text>
    <text id="txt:yLabel" x="${tt+5}" y="40" class="diagram-text">${b}</text>
    <text id="txt:origin" x="${tt-20}" y="${rt+20}" class="diagram-text-small">0</text>

    ${nt}
    ${it}
  </g>
</svg>`,width:500,height:500,warnings:[]}}},vennTwoSet={templateId:"math.statistics.venn_two_set.v1",title:"Two-Set Venn Diagram",description:"Venn diagram with two overlapping sets",category:"statistics",schema:{labels:{setA:{default:"A",maxLen:20},setB:{default:"B",maxLen:20},onlyA:{default:"",maxLen:50},onlyB:{default:"",maxLen:50},intersection:{default:"",maxLen:50},outside:{default:"",maxLen:50}},visibility:{showSetLabels:{default:!0},showRegionLabels:{default:!0},showUniverseBox:{default:!0}}},render:e=>{var ot,lt,ct,ut,dt,mt,xt,ft,gt;const d=((ot=e.labels)==null?void 0:ot.setA)||"A",h=((lt=e.labels)==null?void 0:lt.setB)||"B",g=((ct=e.labels)==null?void 0:ct.onlyA)||"",b=((ut=e.labels)==null?void 0:ut.onlyB)||"",j=((dt=e.labels)==null?void 0:dt.intersection)||"",_=((mt=e.labels)==null?void 0:mt.outside)||"",$=((xt=e.visibility)==null?void 0:xt.showSetLabels)!==!1,_e=((ft=e.visibility)==null?void 0:ft.showRegionLabels)!==!1,et=((gt=e.visibility)==null?void 0:gt.showUniverseBox)!==!1,tt=400/2,rt=120,nt=120,it=500/2-60,st=500/2+60;return{svg:`<svg viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-universe { stroke: #94a3b8; stroke-width: 2; fill: #1e293b; fill-opacity: 0.3; }
    .diagram-circle { stroke: #60a5fa; stroke-width: 2; fill: #3b82f6; fill-opacity: 0.2; }
    .diagram-text-set { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 20px; font-weight: bold; fill: #e2e8f0; }
    .diagram-text-region { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #e2e8f0; text-anchor: middle; }
    .diagram-text-outside { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; fill: #94a3b8; }
  </style>

  <g id="grp:main">
    ${et?'<rect id="rect:universe" x="30" y="30" width="440" height="340" rx="5" class="diagram-universe"/>':""}

    <circle id="circle:A" cx="${it}" cy="${tt}" r="${rt}" class="diagram-circle"/>
    <circle id="circle:B" cx="${st}" cy="${tt}" r="${nt}" class="diagram-circle"/>

    ${$?`
    <text id="txt:setA" x="${it-rt/2}" y="${tt-rt-10}" class="diagram-text-set">${d}</text>
    <text id="txt:setB" x="${st+nt/2}" y="${tt-nt-10}" class="diagram-text-set">${h}</text>
    `:""}

    ${_e?`
    ${g?`<text id="txt:onlyA" x="${it-50}" y="${tt+5}" class="diagram-text-region">${g}</text>`:""}
    ${j?`<text id="txt:intersection" x="${500/2}" y="${tt+5}" class="diagram-text-region">${j}</text>`:""}
    ${b?`<text id="txt:onlyB" x="${st+50}" y="${tt+5}" class="diagram-text-region">${b}</text>`:""}
    ${_&&et?`<text id="txt:outside" x="50" y="60" class="diagram-text-outside">${_}</text>`:""}
    `:""}
  </g>
</svg>`,width:500,height:400,warnings:[]}}},triangleBasicAngles={templateId:"math.triangle.basic_angles.v1",title:"Triangle - Basic Angles",description:"Triangle with three angles, used for finding unknown angles",category:"geometry",schema:{labels:{A:{default:"A",maxLen:3},B:{default:"B",maxLen:3},C:{default:"C",maxLen:3}},values:{angleA:{default:60,type:"number",min:1,max:179},angleB:{default:60,type:"number",min:1,max:179},angleC:{default:60,type:"number",min:1,max:179}},visibility:{showAngleA:{default:!0},showAngleB:{default:!0},showAngleC:{default:!0}}},render:e=>{var lt,ct,ut,dt,mt,xt,ft,gt,pt;const d=((lt=e.labels)==null?void 0:lt.A)||"A",h=((ct=e.labels)==null?void 0:ct.B)||"B",g=((ut=e.labels)==null?void 0:ut.C)||"C",b=Number((dt=e.values)==null?void 0:dt.angleA)||60,j=Number((mt=e.values)==null?void 0:mt.angleB)||60,_=Number((xt=e.values)==null?void 0:xt.angleC)||60,$=((ft=e.visibility)==null?void 0:ft.showAngleA)!==!1,_e=((gt=e.visibility)==null?void 0:gt.showAngleB)!==!1,et=((pt=e.visibility)==null?void 0:pt.showAngleC)!==!1,tt=100,rt=300,nt=400,it=300,st=250,at=100;return{svg:`<svg viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-line { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-point { fill: #cbd5e1; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; font-weight: bold; fill: #e2e8f0; }
    .diagram-text-angle { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #60a5fa; }
  </style>

  <g id="grp:main">
    <line id="ln:AB" x1="${tt}" y1="${rt}" x2="${nt}" y2="${it}" class="diagram-line"/>
    <line id="ln:BC" x1="${nt}" y1="${it}" x2="${st}" y2="${at}" class="diagram-line"/>
    <line id="ln:CA" x1="${st}" y1="${at}" x2="${tt}" y2="${rt}" class="diagram-line"/>

    <circle id="pt:A" cx="${tt}" cy="${rt}" r="4" class="diagram-point"/>
    <circle id="pt:B" cx="${nt}" cy="${it}" r="4" class="diagram-point"/>
    <circle id="pt:C" cx="${st}" cy="${at}" r="4" class="diagram-point"/>

    <text id="txt:A" x="${tt-20}" y="${rt+5}" class="diagram-text">${d}</text>
    <text id="txt:B" x="${nt+10}" y="${it+5}" class="diagram-text">${h}</text>
    <text id="txt:C" x="${st}" y="${at-10}" text-anchor="middle" class="diagram-text">${g}</text>

    ${$?`<text id="txt:angleA" x="${tt+20}" y="${rt-15}" class="diagram-text-angle">${b}</text>`:""}
    ${_e?`<text id="txt:angleB" x="${nt-30}" y="${it-15}" class="diagram-text-angle">${j}</text>`:""}
    ${et?`<text id="txt:angleC" x="${st}" y="${at+25}" text-anchor="middle" class="diagram-text-angle">${_}</text>`:""}
  </g>
</svg>`,width:500,height:400,warnings:[]}}},isoscelesTriangle={templateId:"math.triangle.isosceles.v1",title:"Isosceles Triangle",description:"Isosceles triangle with equal sides marked and base angles",category:"geometry",schema:{labels:{A:{default:"A",maxLen:3},B:{default:"B",maxLen:3},C:{default:"C",maxLen:3}},values:{baseAngle:{default:50,type:"number",min:1,max:89},apexAngle:{default:80,type:"number",min:1,max:178}},visibility:{showEqualMarks:{default:!0},showAngles:{default:!0}}},render:e=>{var at,ot,lt,ct,ut,dt,mt;const d=((at=e.labels)==null?void 0:at.A)||"A",h=((ot=e.labels)==null?void 0:ot.B)||"B",g=((lt=e.labels)==null?void 0:lt.C)||"C",b=Number((ct=e.values)==null?void 0:ct.baseAngle)||50,j=Number((ut=e.values)==null?void 0:ut.apexAngle)||80,_=((dt=e.visibility)==null?void 0:dt.showEqualMarks)!==!1,$=((mt=e.visibility)==null?void 0:mt.showAngles)!==!1,_e=100,et=320,tt=400,rt=320,nt=250,it=80;return{svg:`<svg viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-line { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-point { fill: #cbd5e1; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; font-weight: bold; fill: #e2e8f0; }
    .diagram-text-angle { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #60a5fa; }
    .diagram-equal-mark { stroke: #f87171; stroke-width: 2; }
  </style>

  <g id="grp:main">
    <line id="ln:AB" x1="${_e}" y1="${et}" x2="${tt}" y2="${rt}" class="diagram-line"/>
    <line id="ln:AC" x1="${_e}" y1="${et}" x2="${nt}" y2="${it}" class="diagram-line"/>
    <line id="ln:BC" x1="${tt}" y1="${rt}" x2="${nt}" y2="${it}" class="diagram-line"/>

    ${_?`
    <g id="grp:equal-marks">
      <line id="mk:eq1a" x1="160" y1="210" x2="170" y2="195" class="diagram-equal-mark"/>
      <line id="mk:eq1b" x1="170" y1="210" x2="180" y2="195" class="diagram-equal-mark"/>
      <line id="mk:eq2a" x1="320" y1="210" x2="330" y2="195" class="diagram-equal-mark"/>
      <line id="mk:eq2b" x1="330" y1="210" x2="340" y2="195" class="diagram-equal-mark"/>
    </g>`:""}

    <circle id="pt:A" cx="${_e}" cy="${et}" r="4" class="diagram-point"/>
    <circle id="pt:B" cx="${tt}" cy="${rt}" r="4" class="diagram-point"/>
    <circle id="pt:C" cx="${nt}" cy="${it}" r="4" class="diagram-point"/>

    <text id="txt:A" x="${_e-20}" y="${et+5}" class="diagram-text">${d}</text>
    <text id="txt:B" x="${tt+10}" y="${rt+5}" class="diagram-text">${h}</text>
    <text id="txt:C" x="${nt}" y="${it-10}" text-anchor="middle" class="diagram-text">${g}</text>

    ${$?`
    <text id="txt:angleA" x="${_e+20}" y="${et-15}" class="diagram-text-angle">${b}</text>
    <text id="txt:angleB" x="${tt-30}" y="${rt-15}" class="diagram-text-angle">${b}</text>
    <text id="txt:angleC" x="${nt}" y="${it+25}" text-anchor="middle" class="diagram-text-angle">${j}</text>
    `:""}
  </g>
</svg>`,width:500,height:400,warnings:[]}}},quadrilateralAngles={templateId:"math.quadrilateral.angles.v1",title:"Quadrilateral Angles",description:"Four-sided shape with interior angles (sum = 360)",category:"geometry",schema:{labels:{A:{default:"A",maxLen:3},B:{default:"B",maxLen:3},C:{default:"C",maxLen:3},D:{default:"D",maxLen:3}},values:{angleA:{default:90,type:"number",min:1,max:179},angleB:{default:90,type:"number",min:1,max:179},angleC:{default:90,type:"number",min:1,max:179},angleD:{default:90,type:"number",min:1,max:179}},visibility:{showAngleA:{default:!0},showAngleB:{default:!0},showAngleC:{default:!0},showAngleD:{default:!0}}},render:e=>{var xt,ft,gt,pt,yt,bt,St,wt,kt,Et,jt,Rt;const d=((xt=e.labels)==null?void 0:xt.A)||"A",h=((ft=e.labels)==null?void 0:ft.B)||"B",g=((gt=e.labels)==null?void 0:gt.C)||"C",b=((pt=e.labels)==null?void 0:pt.D)||"D",j=Number((yt=e.values)==null?void 0:yt.angleA)||90,_=Number((bt=e.values)==null?void 0:bt.angleB)||90,$=Number((St=e.values)==null?void 0:St.angleC)||90,_e=Number((wt=e.values)==null?void 0:wt.angleD)||90,et=((kt=e.visibility)==null?void 0:kt.showAngleA)!==!1,tt=((Et=e.visibility)==null?void 0:Et.showAngleB)!==!1,rt=((jt=e.visibility)==null?void 0:jt.showAngleC)!==!1,nt=((Rt=e.visibility)==null?void 0:Rt.showAngleD)!==!1,it=100,st=300,at=400,ot=300,lt=380,ct=100,ut=120,dt=100;return{svg:`<svg viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-line { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-fill { fill: #1e40af; fill-opacity: 0.1; stroke: #94a3b8; stroke-width: 2; }
    .diagram-point { fill: #cbd5e1; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; font-weight: bold; fill: #e2e8f0; }
    .diagram-text-angle { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #60a5fa; }
  </style>

  <g id="grp:main">
    <polygon id="poly:quad" points="${it},${st} ${at},${ot} ${lt},${ct} ${ut},${dt}" class="diagram-fill"/>

    <circle id="pt:A" cx="${it}" cy="${st}" r="4" class="diagram-point"/>
    <circle id="pt:B" cx="${at}" cy="${ot}" r="4" class="diagram-point"/>
    <circle id="pt:C" cx="${lt}" cy="${ct}" r="4" class="diagram-point"/>
    <circle id="pt:D" cx="${ut}" cy="${dt}" r="4" class="diagram-point"/>

    <text id="txt:A" x="${it-20}" y="${st+5}" class="diagram-text">${d}</text>
    <text id="txt:B" x="${at+10}" y="${ot+5}" class="diagram-text">${h}</text>
    <text id="txt:C" x="${lt+10}" y="${ct}" class="diagram-text">${g}</text>
    <text id="txt:D" x="${ut-20}" y="${dt}" class="diagram-text">${b}</text>

    ${et?`<text id="txt:angleA" x="${it+20}" y="${st-10}" class="diagram-text-angle">${j}</text>`:""}
    ${tt?`<text id="txt:angleB" x="${at-30}" y="${ot-10}" class="diagram-text-angle">${_}</text>`:""}
    ${rt?`<text id="txt:angleC" x="${lt-30}" y="${ct+20}" class="diagram-text-angle">${$}</text>`:""}
    ${nt?`<text id="txt:angleD" x="${ut+20}" y="${dt+20}" class="diagram-text-angle">${_e}</text>`:""}
  </g>
</svg>`,width:500,height:400,warnings:[]}}},polygonAngles={templateId:"math.polygons.interior_exterior.v1",title:"Polygon Interior/Exterior Angles",description:"Regular polygon with interior and exterior angles marked",category:"geometry",schema:{values:{sides:{default:6,type:"number",min:3,max:12},interiorAngle:{default:120,type:"number",min:0,max:180},exteriorAngle:{default:60,type:"number",min:0,max:180}},visibility:{showInteriorAngle:{default:!0},showExteriorAngle:{default:!0},showCenter:{default:!1}}},render:e=>{var at,ot,lt,ct,ut,dt;const b=Number((at=e.values)==null?void 0:at.sides)||6,j=Number((ot=e.values)==null?void 0:ot.interiorAngle)||120,_=Number((lt=e.values)==null?void 0:lt.exteriorAngle)||60,$=((ct=e.visibility)==null?void 0:ct.showInteriorAngle)!==!1,_e=((ut=e.visibility)==null?void 0:ut.showExteriorAngle)!==!1,et=((dt=e.visibility)==null?void 0:dt.showCenter)===!0,tt=2*Math.PI/b,rt=[];for(let mt=0;mt<b;mt++){const xt=mt*tt-Math.PI/2;rt.push({x:250+150*Math.cos(xt),y:250+150*Math.sin(xt)})}const nt=rt.map(mt=>`${mt.x},${mt.y}`).join(" "),it={x:rt[0].x+50*Math.cos(-Math.PI/2+tt),y:rt[0].y+50*Math.sin(-Math.PI/2+tt)};return{svg:`<svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-polygon { fill: #1e40af; fill-opacity: 0.1; stroke: #94a3b8; stroke-width: 2; }
    .diagram-line { stroke: #60a5fa; stroke-width: 2; stroke-dasharray: 4,4; }
    .diagram-point { fill: #cbd5e1; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #e2e8f0; }
    .diagram-text-angle { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #60a5fa; }
  </style>

  <g id="grp:main">
    <polygon id="poly:shape" points="${nt}" class="diagram-polygon"/>

    ${rt.map((mt,xt)=>`<circle id="pt:${xt}" cx="${mt.x}" cy="${mt.y}" r="4" class="diagram-point"/>`).join(`
    `)}

    ${et?`
    <circle id="pt:center" cx="250" cy="250" r="4" class="diagram-point"/>
    <line id="ln:radius1" x1="250" y1="250" x2="${rt[0].x}" y2="${rt[0].y}" class="diagram-line"/>
    <line id="ln:radius2" x1="250" y1="250" x2="${rt[1].x}" y2="${rt[1].y}" class="diagram-line"/>
    `:""}

    ${_e?`
    <line id="ln:extension" x1="${rt[0].x}" y1="${rt[0].y}" x2="${it.x}" y2="${it.y}" class="diagram-line"/>
    <text id="txt:exteriorAngle" x="${rt[0].x+60}" y="${rt[0].y-60}" class="diagram-text-angle">${_}</text>
    `:""}

    ${$?`
    <text id="txt:interiorAngle" x="${rt[0].x-40}" y="${rt[0].y+25}" class="diagram-text-angle">${j}</text>
    `:""}

    <text id="txt:sides" x="250" y="480" text-anchor="middle" class="diagram-text">${b}-sided polygon</text>
  </g>
</svg>`,width:500,height:500,warnings:[]}}},bearings={templateId:"math.bearings.north_arrow.v1",title:"Bearings with North Arrow",description:"Two points with north arrows and bearing angle",category:"geometry",schema:{labels:{pointA:{default:"A",maxLen:10},pointB:{default:"B",maxLen:10}},values:{bearing:{default:45,type:"number",min:0,max:360},distance:{default:200,type:"number",min:50,max:300}},visibility:{showBearingLabel:{default:!0},showNorthArrows:{default:!0},showDistance:{default:!1}}},render:e=>{var st,at,ot,lt,ct,ut,dt;const d=((st=e.labels)==null?void 0:st.pointA)||"A",h=((at=e.labels)==null?void 0:at.pointB)||"B",g=Number((ot=e.values)==null?void 0:ot.bearing)||45,b=Number((lt=e.values)==null?void 0:lt.distance)||200,j=((ct=e.visibility)==null?void 0:ct.showBearingLabel)!==!1,_=((ut=e.visibility)==null?void 0:ut.showNorthArrows)!==!1,$=((dt=e.visibility)==null?void 0:dt.showDistance)===!0,_e=250,et=350,tt=(g-90)*Math.PI/180,rt=_e+b*Math.cos(tt),nt=et+b*Math.sin(tt);return{svg:`<svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#60a5fa"/>
    </marker>
  </defs>
  <style>
    .diagram-line { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-north { stroke: #60a5fa; stroke-width: 2; }
    .diagram-point { fill: #cbd5e1; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; font-weight: bold; fill: #e2e8f0; }
    .diagram-text-angle { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #60a5fa; }
    .diagram-text-north { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; font-weight: bold; fill: #60a5fa; }
  </style>

  <g id="grp:main">
    <line id="ln:AB" x1="${_e}" y1="${et}" x2="${rt}" y2="${nt}" class="diagram-line"/>

    ${_?`
    <line id="ln:northA" x1="${_e}" y1="${et}" x2="${_e}" y2="${et-60}" class="diagram-north" marker-end="url(#arrowhead-blue)"/>
    <text id="txt:northA" x="${_e+10}" y="${et-50}" class="diagram-text-north">N</text>
    <line id="ln:northB" x1="${rt}" y1="${nt}" x2="${rt}" y2="${nt-60}" class="diagram-north" marker-end="url(#arrowhead-blue)"/>
    <text id="txt:northB" x="${rt+10}" y="${nt-50}" class="diagram-text-north">N</text>
    `:""}

    <circle id="pt:A" cx="${_e}" cy="${et}" r="5" class="diagram-point"/>
    <circle id="pt:B" cx="${rt}" cy="${nt}" r="5" class="diagram-point"/>

    <text id="txt:A" x="${_e-10}" y="${et+25}" class="diagram-text">${d}</text>
    <text id="txt:B" x="${rt+10}" y="${nt}" class="diagram-text">${h}</text>

    ${j?`<text id="txt:bearing" x="${_e+30}" y="${et-20}" class="diagram-text-angle">${g.toString().padStart(3,"0")}</text>`:""}
    ${$?`<text id="txt:distance" x="${(_e+rt)/2}" y="${(et+nt)/2+20}" text-anchor="middle" class="diagram-text-angle">${b}m</text>`:""}
  </g>
</svg>`,width:500,height:500,warnings:[]}}},circleTangentRadius={templateId:"math.circle_theorems.tangent_radius.v1",title:"Circle Theorem - Tangent Perpendicular to Radius",description:"Circle with tangent line perpendicular to radius at point of contact",category:"geometry",schema:{labels:{O:{default:"O",maxLen:3},A:{default:"A",maxLen:3},T:{default:"T",maxLen:3}},visibility:{showRightAngle:{default:!0},showCenter:{default:!0}}},render:e=>{var nt,it,st,at,ot;const b=((nt=e.labels)==null?void 0:nt.O)||"O",j=((it=e.labels)==null?void 0:it.A)||"A",_=((st=e.labels)==null?void 0:st.T)||"T",$=((at=e.visibility)==null?void 0:at.showRightAngle)!==!1,_e=((ot=e.visibility)==null?void 0:ot.showCenter)!==!1,et=320,tt=200;return{svg:`<svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-circle { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-line { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-tangent { stroke: #60a5fa; stroke-width: 2; fill: none; }
    .diagram-point { fill: #cbd5e1; }
    .diagram-point-highlight { fill: #60a5fa; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; font-weight: bold; fill: #e2e8f0; }
    .diagram-angle-mark { stroke: #f87171; stroke-width: 2; fill: none; }
  </style>

  <g id="grp:main">
    <circle id="ln:circle" cx="200" cy="200" r="120" class="diagram-circle"/>
    <line id="ln:radius" x1="200" y1="200" x2="${et}" y2="${tt}" class="diagram-line"/>
    <line id="ln:tangent" x1="${et}" y1="${tt-100}" x2="${et}" y2="${tt+100}" class="diagram-tangent"/>

    ${_e?'<circle id="pt:O" cx="200" cy="200" r="5" class="diagram-point"/>':""}
    <circle id="pt:A" cx="${et}" cy="${tt}" r="5" class="diagram-point-highlight"/>
    <circle id="pt:T" cx="${et}" cy="${tt+80}" r="5" class="diagram-point"/>

    ${_e?`<text id="txt:O" x="180" y="205" class="diagram-text">${b}</text>`:""}
    <text id="txt:A" x="${et+15}" y="${tt}" class="diagram-text">${j}</text>
    <text id="txt:T" x="${et+15}" y="${tt+85}" class="diagram-text">${_}</text>

    ${$?`<rect id="mk:rightAngle" x="${et-15}" y="${tt-15}" width="15" height="15" class="diagram-angle-mark"/>`:""}
  </g>
</svg>`,width:400,height:400,warnings:[]}}},circleTwoTangents={templateId:"math.circle_theorems.two_tangents.v1",title:"Circle Theorem - Two Tangents from External Point",description:"Two tangents from external point to circle (equal length)",category:"geometry",schema:{labels:{O:{default:"O",maxLen:3},P:{default:"P",maxLen:3},A:{default:"A",maxLen:3},B:{default:"B",maxLen:3}},visibility:{showEqualMarks:{default:!0},showCenter:{default:!0}}},render:e=>{var ct,ut,dt,mt,xt,ft;const b=((ct=e.labels)==null?void 0:ct.O)||"O",j=((ut=e.labels)==null?void 0:ut.P)||"P",_=((dt=e.labels)==null?void 0:dt.A)||"A",$=((mt=e.labels)==null?void 0:mt.B)||"B",_e=((xt=e.visibility)==null?void 0:xt.showEqualMarks)!==!1,et=((ft=e.visibility)==null?void 0:ft.showCenter)!==!1,tt=350,rt=200,nt=Math.asin(100/(tt-200)),it=200+100*Math.sin(nt),st=200-100*Math.cos(nt),at=200+100*Math.sin(nt),ot=200+100*Math.cos(nt);return{svg:`<svg viewBox="0 0 450 450" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-circle { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-line { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-tangent { stroke: #60a5fa; stroke-width: 2; fill: none; }
    .diagram-point { fill: #cbd5e1; }
    .diagram-point-highlight { fill: #60a5fa; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; font-weight: bold; fill: #e2e8f0; }
    .diagram-equal-mark { stroke: #f87171; stroke-width: 2; }
  </style>

  <g id="grp:main">
    <circle id="ln:circle" cx="200" cy="200" r="100" class="diagram-circle"/>
    <line id="ln:tangent1" x1="${tt}" y1="${rt}" x2="${it}" y2="${st}" class="diagram-tangent"/>
    <line id="ln:tangent2" x1="${tt}" y1="${rt}" x2="${at}" y2="${ot}" class="diagram-tangent"/>

    ${et?`
    <line id="ln:radiusA" x1="200" y1="200" x2="${it}" y2="${st}" class="diagram-line"/>
    <line id="ln:radiusB" x1="200" y1="200" x2="${at}" y2="${ot}" class="diagram-line"/>
    <circle id="pt:O" cx="200" cy="200" r="5" class="diagram-point"/>
    `:""}

    <circle id="pt:P" cx="${tt}" cy="${rt}" r="5" class="diagram-point-highlight"/>
    <circle id="pt:A" cx="${it}" cy="${st}" r="5" class="diagram-point"/>
    <circle id="pt:B" cx="${at}" cy="${ot}" r="5" class="diagram-point"/>

    ${et?`<text id="txt:O" x="180" y="200" class="diagram-text">${b}</text>`:""}
    <text id="txt:P" x="${tt+10}" y="${rt+5}" class="diagram-text">${j}</text>
    <text id="txt:A" x="${it+5}" y="${st-10}" class="diagram-text">${_}</text>
    <text id="txt:B" x="${at+5}" y="${ot+20}" class="diagram-text">${$}</text>

    ${_e?`
    <g id="grp:equal-marks">
      <line id="mk:eq1a" x1="${(tt+it)/2-5}" y1="${(rt+st)/2+5}" x2="${(tt+it)/2+5}" y2="${(rt+st)/2-5}" class="diagram-equal-mark"/>
      <line id="mk:eq2a" x1="${(tt+at)/2-5}" y1="${(rt+ot)/2-5}" x2="${(tt+at)/2+5}" y2="${(rt+ot)/2+5}" class="diagram-equal-mark"/>
    </g>`:""}
  </g>
</svg>`,width:450,height:450,warnings:[]}}},cyclicQuadrilateral={templateId:"math.circle_theorems.cyclic_quadrilateral.v1",title:"Circle Theorem - Cyclic Quadrilateral",description:"Quadrilateral inscribed in circle (opposite angles sum to 180)",category:"geometry",schema:{labels:{A:{default:"A",maxLen:3},B:{default:"B",maxLen:3},C:{default:"C",maxLen:3},D:{default:"D",maxLen:3}},values:{angleA:{default:80,type:"number",min:1,max:179},angleC:{default:100,type:"number",min:1,max:179}},visibility:{showAngles:{default:!0}}},render:e=>{var dt,mt,xt,ft,gt,pt,yt;const b=((dt=e.labels)==null?void 0:dt.A)||"A",j=((mt=e.labels)==null?void 0:mt.B)||"B",_=((xt=e.labels)==null?void 0:xt.C)||"C",$=((ft=e.labels)==null?void 0:ft.D)||"D",_e=Number((gt=e.values)==null?void 0:gt.angleA)||80,et=Number((pt=e.values)==null?void 0:pt.angleC)||100,tt=((yt=e.visibility)==null?void 0:yt.showAngles)!==!1,rt=225,nt=75,it=225+150*.9,st=225-150*.3,at=225+150*.5,ot=225+150*.9,lt=225-150*.8,ct=225+150*.6;return{svg:`<svg viewBox="0 0 450 450" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-circle { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-line { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-quad { fill: #1e40af; fill-opacity: 0.1; stroke: #60a5fa; stroke-width: 2; }
    .diagram-point { fill: #cbd5e1; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; font-weight: bold; fill: #e2e8f0; }
    .diagram-text-angle { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #60a5fa; }
  </style>

  <g id="grp:main">
    <circle id="ln:circle" cx="225" cy="225" r="150" class="diagram-circle"/>
    <polygon id="poly:quad" points="${rt},${nt} ${it},${st} ${at},${ot} ${lt},${ct}" class="diagram-quad"/>

    <circle id="pt:A" cx="${rt}" cy="${nt}" r="5" class="diagram-point"/>
    <circle id="pt:B" cx="${it}" cy="${st}" r="5" class="diagram-point"/>
    <circle id="pt:C" cx="${at}" cy="${ot}" r="5" class="diagram-point"/>
    <circle id="pt:D" cx="${lt}" cy="${ct}" r="5" class="diagram-point"/>

    <text id="txt:A" x="${rt}" y="${nt-15}" text-anchor="middle" class="diagram-text">${b}</text>
    <text id="txt:B" x="${it+15}" y="${st}" class="diagram-text">${j}</text>
    <text id="txt:C" x="${at+10}" y="${ot+20}" class="diagram-text">${_}</text>
    <text id="txt:D" x="${lt-25}" y="${ct+5}" class="diagram-text">${$}</text>

    ${tt?`
    <text id="txt:angleA" x="${rt}" y="${nt+20}" text-anchor="middle" class="diagram-text-angle">${_e}</text>
    <text id="txt:angleC" x="${at-25}" y="${ot-10}" class="diagram-text-angle">${et}</text>
    `:""}
  </g>
</svg>`,width:450,height:450,warnings:[]}}},pythagorasCuboid={templateId:"math.pythagoras.cuboid_3d.v1",title:"Pythagoras 3D Cuboid Diagonal",description:"3D cuboid showing space diagonal for Pythagoras in 3D",category:"geometry",schema:{labels:{length:{default:"l",maxLen:10},width:{default:"w",maxLen:10},height:{default:"h",maxLen:10}},values:{length:{default:6,type:"number",min:1,max:20},width:{default:4,type:"number",min:1,max:20},height:{default:3,type:"number",min:1,max:20}},visibility:{showDiagonal:{default:!0},showLabels:{default:!0}}},render:e=>{var mt,xt,ft,gt,pt,yt,bt,St;const d=((mt=e.labels)==null?void 0:mt.length)||"l",h=((xt=e.labels)==null?void 0:xt.width)||"w",g=((ft=e.labels)==null?void 0:ft.height)||"h",b=Number((gt=e.values)==null?void 0:gt.length)||6,j=Number((pt=e.values)==null?void 0:pt.width)||4,_=Number((yt=e.values)==null?void 0:yt.height)||3,$=((bt=e.visibility)==null?void 0:bt.showDiagonal)!==!1,_e=((St=e.visibility)==null?void 0:St.showLabels)!==!1,et=30,tt=120,rt=300,nt={x:tt,y:rt},it={x:tt+b*et,y:rt},st={x:tt+b*et+j*et*.5,y:rt-j*et*.3},at={x:tt+j*et*.5,y:rt-j*et*.3},ot={x:tt,y:rt-_*et},lt={x:tt+b*et,y:rt-_*et},ct={x:tt+b*et+j*et*.5,y:rt-_*et-j*et*.3},ut={x:tt+j*et*.5,y:rt-_*et-j*et*.3};return{svg:`<svg viewBox="0 0 500 450" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-line { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-line-hidden { stroke: #94a3b8; stroke-width: 1; stroke-dasharray: 4,4; fill: none; }
    .diagram-diagonal { stroke: #f87171; stroke-width: 2; fill: none; }
    .diagram-face { fill: #1e40af; fill-opacity: 0.1; stroke: #94a3b8; stroke-width: 2; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #e2e8f0; }
    .diagram-text-value { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; fill: #60a5fa; }
  </style>

  <g id="grp:main">
    <polygon id="face:front" points="${nt.x},${nt.y} ${it.x},${it.y} ${lt.x},${lt.y} ${ot.x},${ot.y}" class="diagram-face"/>
    <polygon id="face:right" points="${it.x},${it.y} ${st.x},${st.y} ${ct.x},${ct.y} ${lt.x},${lt.y}" class="diagram-face"/>
    <polygon id="face:top" points="${ot.x},${ot.y} ${lt.x},${lt.y} ${ct.x},${ct.y} ${ut.x},${ut.y}" class="diagram-face"/>

    <line id="ln:hidden1" x1="${nt.x}" y1="${nt.y}" x2="${at.x}" y2="${at.y}" class="diagram-line-hidden"/>
    <line id="ln:hidden2" x1="${at.x}" y1="${at.y}" x2="${ut.x}" y2="${ut.y}" class="diagram-line-hidden"/>
    <line id="ln:hidden3" x1="${at.x}" y1="${at.y}" x2="${st.x}" y2="${st.y}" class="diagram-line-hidden"/>

    ${$?`<line id="ln:diagonal" x1="${nt.x}" y1="${nt.y}" x2="${ct.x}" y2="${ct.y}" class="diagram-diagonal"/>`:""}

    ${_e?`
    <text id="txt:length" x="${(nt.x+it.x)/2}" y="${nt.y+25}" text-anchor="middle" class="diagram-text">${d}</text>
    <text id="txt:lengthVal" x="${(nt.x+it.x)/2}" y="${nt.y+42}" text-anchor="middle" class="diagram-text-value">${b}</text>

    <text id="txt:width" x="${it.x+40}" y="${(it.y+st.y)/2+10}" text-anchor="middle" class="diagram-text">${h}</text>
    <text id="txt:widthVal" x="${it.x+40}" y="${(it.y+st.y)/2+25}" text-anchor="middle" class="diagram-text-value">${j}</text>

    <text id="txt:height" x="${nt.x-25}" y="${(nt.y+ot.y)/2}" text-anchor="middle" class="diagram-text">${g}</text>
    <text id="txt:heightVal" x="${nt.x-25}" y="${(nt.y+ot.y)/2+15}" text-anchor="middle" class="diagram-text-value">${_}</text>
    `:""}
  </g>
</svg>`,width:500,height:450,warnings:[]}}},axesBlank={templateId:"math.graphs.axes_blank.v1",title:"Blank Coordinate Axes",description:"Empty coordinate axes with optional grid",category:"graphs",schema:{labels:{xLabel:{default:"x",maxLen:10},yLabel:{default:"y",maxLen:10}},values:{xMin:{default:-10,type:"number",min:-50,max:0},xMax:{default:10,type:"number",min:0,max:50},yMin:{default:-10,type:"number",min:-50,max:0},yMax:{default:10,type:"number",min:0,max:50}},visibility:{showGrid:{default:!0},showNumbers:{default:!0}}},render:e=>{var at,ot,lt,ct,ut,dt,mt,xt;const h=((at=e.labels)==null?void 0:at.xLabel)||"x",g=((ot=e.labels)==null?void 0:ot.yLabel)||"y",b=Number((lt=e.values)==null?void 0:lt.xMin)||-10,j=Number((ct=e.values)==null?void 0:ct.xMax)||10,_=Number((ut=e.values)==null?void 0:ut.yMin)||-10,$=Number((dt=e.values)==null?void 0:dt.yMax)||10,_e=((mt=e.visibility)==null?void 0:mt.showGrid)!==!1,et=((xt=e.visibility)==null?void 0:xt.showNumbers)!==!1,tt=500/2,rt=500/2,nt=(500-2*50)/(j-b);return{svg:`<svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#94a3b8"/>
    </marker>
  </defs>
  <style>
    .diagram-axis { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; font-weight: bold; fill: #e2e8f0; }
    .diagram-text-small { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; fill: #94a3b8; text-anchor: middle; }
  </style>

  <g id="grp:main">
    ${_e?`
    <g id="grp:grid" opacity="0.2">
      ${Array.from({length:j-b+1},(ft,gt)=>{const pt=50+gt*nt;return`<line x1="${pt}" y1="50" x2="${pt}" y2="450" stroke="#94a3b8" stroke-width="1"/>`}).join(`
`)}
      ${Array.from({length:$-_+1},(ft,gt)=>{const pt=50+gt*nt;return`<line x1="50" y1="${pt}" x2="450" y2="${pt}" stroke="#94a3b8" stroke-width="1"/>`}).join(`
`)}
    </g>`:""}

    <line id="ln:xAxis" x1="50" y1="${rt}" x2="450" y2="${rt}" class="diagram-axis" marker-end="url(#arrowhead)"/>
    <line id="ln:yAxis" x1="${tt}" y1="450" x2="${tt}" y2="50" class="diagram-axis" marker-end="url(#arrowhead)"/>

    <text id="txt:xLabel" x="465" y="${rt+5}" class="diagram-text">${h}</text>
    <text id="txt:yLabel" x="${tt+5}" y="40" class="diagram-text">${g}</text>
    <text id="txt:origin" x="${tt-15}" y="${rt+15}" class="diagram-text-small">0</text>

    ${et?`
    <text id="txt:xMax" x="450" y="${rt+25}" class="diagram-text-small">${j}</text>
    <text id="txt:yMax" x="${tt+15}" y="55" class="diagram-text-small">${$}</text>
    `:""}
  </g>
</svg>`,width:500,height:500,warnings:[]}}},boxPlot={templateId:"math.statistics.boxplot.v1",title:"Box Plot",description:"Box and whisker plot showing five-number summary",category:"statistics",schema:{values:{min:{default:10,type:"number",min:0,max:100},q1:{default:25,type:"number",min:0,max:100},median:{default:40,type:"number",min:0,max:100},q3:{default:55,type:"number",min:0,max:100},max:{default:70,type:"number",min:0,max:100}},visibility:{showLabels:{default:!0},showValues:{default:!0}}},render:e=>{var ct,ut,dt,mt,xt,ft,gt;const d=Number((ct=e.values)==null?void 0:ct.min)||10,h=Number((ut=e.values)==null?void 0:ut.q1)||25,g=Number((dt=e.values)==null?void 0:dt.median)||40,b=Number((mt=e.values)==null?void 0:mt.q3)||55,j=Number((xt=e.values)==null?void 0:xt.max)||70,_=((ft=e.visibility)==null?void 0:ft.showLabels)!==!1,$=((gt=e.visibility)==null?void 0:gt.showValues)!==!1,_e=50,et=60,tt=300/2,rt=(600-2*_e)/(j-d),nt=_e+(d-d)*rt,it=_e+(h-d)*rt,st=_e+(g-d)*rt,at=_e+(b-d)*rt,ot=_e+(j-d)*rt;return{svg:`<svg viewBox="0 0 600 300" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-line { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-box { fill: #1e40af; fill-opacity: 0.2; stroke: #60a5fa; stroke-width: 2; }
    .diagram-median { stroke: #f87171; stroke-width: 3; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; fill: #e2e8f0; text-anchor: middle; }
    .diagram-text-value { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; fill: #60a5fa; text-anchor: middle; }
  </style>

  <g id="grp:main">
    <line id="ln:whiskerLeft" x1="${nt}" y1="${tt}" x2="${it}" y2="${tt}" class="diagram-line"/>
    <line id="ln:whiskerRight" x1="${at}" y1="${tt}" x2="${ot}" y2="${tt}" class="diagram-line"/>

    <line id="ln:minBar" x1="${nt}" y1="${tt-et/2}" x2="${nt}" y2="${tt+et/2}" class="diagram-line"/>
    <line id="ln:maxBar" x1="${ot}" y1="${tt-et/2}" x2="${ot}" y2="${tt+et/2}" class="diagram-line"/>

    <rect id="rect:box" x="${it}" y="${tt-et/2}" width="${at-it}" height="${et}" class="diagram-box"/>
    <line id="ln:median" x1="${st}" y1="${tt-et/2}" x2="${st}" y2="${tt+et/2}" class="diagram-median"/>

    ${_?`
    <text id="txt:minLabel" x="${nt}" y="${tt-et/2-25}" class="diagram-text">Min</text>
    <text id="txt:q1Label" x="${it}" y="${tt-et/2-25}" class="diagram-text">Q</text>
    <text id="txt:medianLabel" x="${st}" y="${tt-et/2-25}" class="diagram-text">Median</text>
    <text id="txt:q3Label" x="${at}" y="${tt-et/2-25}" class="diagram-text">Q</text>
    <text id="txt:maxLabel" x="${ot}" y="${tt-et/2-25}" class="diagram-text">Max</text>
    `:""}

    ${$?`
    <text id="txt:minVal" x="${nt}" y="${tt+et/2+20}" class="diagram-text-value">${d}</text>
    <text id="txt:q1Val" x="${it}" y="${tt+et/2+20}" class="diagram-text-value">${h}</text>
    <text id="txt:medianVal" x="${st}" y="${tt+et/2+20}" class="diagram-text-value">${g}</text>
    <text id="txt:q3Val" x="${at}" y="${tt+et/2+20}" class="diagram-text-value">${b}</text>
    <text id="txt:maxVal" x="${ot}" y="${tt+et/2+20}" class="diagram-text-value">${j}</text>
    `:""}
  </g>
</svg>`,width:600,height:300,warnings:[]}}},functionMachine={templateId:"math.algebra.function_machine.v1",title:"Function Machine",description:"Input-output function machine diagram",category:"algebra",schema:{labels:{input:{default:"x",maxLen:10},output:{default:"y",maxLen:10},operation:{default:"2 + 3",maxLen:20}},values:{inputValue:{default:5,type:"number",min:-100,max:100},outputValue:{default:13,type:"number",min:-100,max:100}},visibility:{showValues:{default:!0}}},render:e=>{var _e,et,tt,rt,nt,it;const d=((_e=e.labels)==null?void 0:_e.input)||"x",h=((et=e.labels)==null?void 0:et.output)||"y",g=((tt=e.labels)==null?void 0:tt.operation)||"2 + 3",b=Number((rt=e.values)==null?void 0:rt.inputValue)||5,j=Number((nt=e.values)==null?void 0:nt.outputValue)||13,_=((it=e.visibility)==null?void 0:it.showValues)!==!1;return{svg:`<svg viewBox="0 0 500 250" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead-machine" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#60a5fa"/>
    </marker>
  </defs>
  <style>
    .diagram-box { fill: #1e40af; fill-opacity: 0.2; stroke: #60a5fa; stroke-width: 2; rx: 8; }
    .diagram-arrow { stroke: #60a5fa; stroke-width: 2; fill: none; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 20px; font-weight: bold; fill: #e2e8f0; text-anchor: middle; }
    .diagram-text-small { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #94a3b8; text-anchor: middle; }
    .diagram-text-value { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 18px; fill: #60a5fa; text-anchor: middle; }
  </style>

  <g id="grp:main">
    <rect id="box:input" x="30" y="80" width="80" height="80" class="diagram-box"/>
    <rect id="box:machine" x="180" y="60" width="140" height="120" class="diagram-box"/>
    <rect id="box:output" x="390" y="80" width="80" height="80" class="diagram-box"/>

    <line id="ln:arrow1" x1="110" y1="120" x2="180" y2="120" class="diagram-arrow" marker-end="url(#arrowhead-machine)"/>
    <line id="ln:arrow2" x1="320" y1="120" x2="390" y2="120" class="diagram-arrow" marker-end="url(#arrowhead-machine)"/>

    <text id="txt:inputLabel" x="70" y="45}" class="diagram-text-small">Input</text>
    <text id="txt:input" x="70" y="130" class="diagram-text">${d}</text>
    ${_?`<text id="txt:inputValue" x="70" y="155" class="diagram-text-value">${b}</text>`:""}

    <text id="txt:operation" x="250" y="125" class="diagram-text">${g}</text>

    <text id="txt:outputLabel" x="430" y="45" class="diagram-text-small">Output</text>
    <text id="txt:output" x="430" y="130" class="diagram-text">${h}</text>
    ${_?`<text id="txt:outputValue" x="430" y="155" class="diagram-text-value">${j}</text>`:""}
  </g>
</svg>`,width:500,height:250,warnings:[]}}},circuitSeries={templateId:"physics.circuits.series.v1",title:"Series Circuit",description:"Simple series circuit with battery and components",category:"physics",schema:{labels:{battery:{default:"6V",maxLen:10},component1:{default:"R",maxLen:10},component2:{default:"R",maxLen:10}},visibility:{showComponent1:{default:!0},showComponent2:{default:!0}}},render:e=>{var $,_e,et,tt,rt;const d=(($=e.labels)==null?void 0:$.battery)||"6V",h=((_e=e.labels)==null?void 0:_e.component1)||"R",g=((et=e.labels)==null?void 0:et.component2)||"R",b=((tt=e.visibility)==null?void 0:tt.showComponent1)!==!1,j=((rt=e.visibility)==null?void 0:rt.showComponent2)!==!1;return{svg:`<svg viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-wire { stroke: #94a3b8; stroke-width: 3; fill: none; }
    .diagram-component { stroke: #60a5fa; stroke-width: 3; fill: none; }
    .diagram-battery-pos { stroke: #94a3b8; stroke-width: 4; }
    .diagram-battery-neg { stroke: #94a3b8; stroke-width: 2; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #e2e8f0; text-anchor: middle; }
  </style>

  <g id="grp:main">
    <line id="wire:1" x1="100" y1="150" x2="100" y2="100" class="diagram-wire"/>
    <line id="wire:2" x1="100" y1="100" x2="250" y2="100" class="diagram-wire"/>
    <line id="wire:3" x1="250" y1="100" x2="400" y2="100" class="diagram-wire"/>
    <line id="wire:4" x1="400" y1="100" x2="400" y2="300" class="diagram-wire"/>
    <line id="wire:5" x1="400" y1="300" x2="100" y2="300" class="diagram-wire"/>
    <line id="wire:6" x1="100" y1="300" x2="100" y2="250" class="diagram-wire"/>

    <g id="component:battery">
      <line id="battery:pos" x1="90" y1="150" x2="110" y2="150" class="diagram-battery-pos"/>
      <line id="battery:neg" x1="95" y1="160" x2="105" y2="160" class="diagram-battery-neg"/>
      <line id="battery:pos2" x1="90" y1="170" x2="110" y2="170" class="diagram-battery-pos"/>
      <line id="battery:neg2" x1="95" y1="180" x2="105" y2="180" class="diagram-battery-neg"/>
      <line id="battery:pos3" x1="90" y1="190" x2="110" y2="190" class="diagram-battery-pos"/>
      <line id="battery:neg3" x1="95" y1="200" x2="105" y2="200" class="diagram-battery-neg"/>
      <line id="battery:pos4" x1="90" y1="210" x2="110" y2="210" class="diagram-battery-pos"/>
      <line id="battery:neg4" x1="95" y1="220" x2="105" y2="220" class="diagram-battery-neg"/>
      <line id="battery:pos5" x1="90" y1="230" x2="110" y2="230" class="diagram-battery-pos"/>
      <line id="battery:neg5" x1="95" y1="240" x2="105" y2="240" class="diagram-battery-neg"/>
      <text id="txt:battery" x="140" y="205" class="diagram-text">${d}</text>
    </g>

    ${b?`
    <g id="component:1">
      <rect id="resistor:1" x="230" y="90" width="40" height="20" class="diagram-component"/>
      <text id="txt:comp1" x="250" y="80" class="diagram-text">${h}</text>
    </g>`:""}

    ${j?`
    <g id="component:2">
      <rect id="resistor:2" x="380" y="140" width="40" height="20" class="diagram-component"/>
      <text id="txt:comp2" x="400" y="180" class="diagram-text">${g}</text>
    </g>`:""}
  </g>
</svg>`,width:500,height:400,warnings:[]}}},circuitParallel={templateId:"physics.circuits.parallel.v1",title:"Parallel Circuit",description:"Parallel circuit with battery and two branches",category:"physics",schema:{labels:{battery:{default:"6V",maxLen:10},component1:{default:"R",maxLen:10},component2:{default:"R",maxLen:10}},visibility:{showComponent1:{default:!0},showComponent2:{default:!0}}},render:e=>{var $,_e,et,tt,rt;const d=(($=e.labels)==null?void 0:$.battery)||"6V",h=((_e=e.labels)==null?void 0:_e.component1)||"R",g=((et=e.labels)==null?void 0:et.component2)||"R",b=((tt=e.visibility)==null?void 0:tt.showComponent1)!==!1,j=((rt=e.visibility)==null?void 0:rt.showComponent2)!==!1;return{svg:`<svg viewBox="0 0 500 450" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-wire { stroke: #94a3b8; stroke-width: 3; fill: none; }
    .diagram-component { stroke: #60a5fa; stroke-width: 3; fill: none; }
    .diagram-battery-pos { stroke: #94a3b8; stroke-width: 4; }
    .diagram-battery-neg { stroke: #94a3b8; stroke-width: 2; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #e2e8f0; text-anchor: middle; }
  </style>

  <g id="grp:main">
    <line id="wire:main1" x1="100" y1="250" x2="100" y2="100" class="diagram-wire"/>
    <line id="wire:main2" x1="100" y1="100" x2="200" y2="100" class="diagram-wire"/>

    <line id="wire:branch1a" x1="200" y1="100" x2="200" y2="150" class="diagram-wire"/>
    <line id="wire:branch1b" x1="200" y1="150" x2="400" y2="150" class="diagram-wire"/>
    <line id="wire:branch2a" x1="200" y1="100" x2="200" y2="50" class="diagram-wire"/>
    <line id="wire:branch2b" x1="200" y1="50" x2="400" y2="50" class="diagram-wire"/>

    <line id="wire:merge1" x1="400" y1="50" x2="400" y2="100" class="diagram-wire"/>
    <line id="wire:merge2" x1="400" y1="150" x2="400" y2="100" class="diagram-wire"/>
    <line id="wire:return1" x1="400" y1="100" x2="400" y2="350" class="diagram-wire"/>
    <line id="wire:return2" x1="400" y1="350" x2="100" y2="350" class="diagram-wire"/>
    <line id="wire:return3" x1="100" y1="350" x2="100" y2="300" class="diagram-wire"/>

    <g id="component:battery">
      <line id="battery:pos" x1="90" y1="250" x2="110" y2="250" class="diagram-battery-pos"/>
      <line id="battery:neg" x1="95" y1="260" x2="105" y2="260" class="diagram-battery-neg"/>
      <line id="battery:pos2" x1="90" y1="270" x2="110" y2="270" class="diagram-battery-pos"/>
      <line id="battery:neg2" x1="95" y1="280" x2="105" y2="280" class="diagram-battery-neg"/>
      <line id="battery:pos3" x1="90" y1="290" x2="110" y2="290" class="diagram-battery-pos"/>
      <text id="txt:battery" x="140" y="280" class="diagram-text">${d}</text>
    </g>

    ${b?`
    <g id="component:1">
      <rect id="resistor:1" x="280" y="40" width="40" height="20" class="diagram-component"/>
      <text id="txt:comp1" x="300" y="30" class="diagram-text">${h}</text>
    </g>`:""}

    ${j?`
    <g id="component:2">
      <rect id="resistor:2" x="280" y="140" width="40" height="20" class="diagram-component"/>
      <text id="txt:comp2" x="300" y="180" class="diagram-text">${g}</text>
    </g>`:""}
  </g>
</svg>`,width:500,height:450,warnings:[]}}},rayReflection={templateId:"physics.ray_diagram.reflection.v1",title:"Ray Diagram - Reflection",description:"Light ray reflecting off a plane mirror",category:"physics",schema:{values:{incidentAngle:{default:30,type:"number",min:5,max:85}},visibility:{showNormal:{default:!0},showAngles:{default:!0}}},render:e=>{var it,st,at;const d=Number((it=e.values)==null?void 0:it.incidentAngle)||30,h=((st=e.visibility)==null?void 0:st.showNormal)!==!1,g=((at=e.visibility)==null?void 0:at.showAngles)!==!1,b=250,j=250,_=150,$=d*Math.PI/180,_e=b-_*Math.sin($),et=j-_*Math.cos($),tt=b+_*Math.sin($),rt=j-_*Math.cos($);return{svg:`<svg viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead-ray" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#f87171"/>
    </marker>
  </defs>
  <style>
    .diagram-mirror { stroke: #94a3b8; stroke-width: 4; }
    .diagram-normal { stroke: #60a5fa; stroke-width: 2; stroke-dasharray: 4,4; }
    .diagram-ray { stroke: #f87171; stroke-width: 2; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #e2e8f0; }
    .diagram-text-angle { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; fill: #60a5fa; }
  </style>

  <g id="grp:main">
    <line id="ln:mirror" x1="100" y1="${j}" x2="400" y2="${j}" class="diagram-mirror"/>

    ${h?`
    <line id="ln:normal" x1="${b}" y1="${j}" x2="${b}" y2="${j-180}" class="diagram-normal"/>
    `:""}

    <line id="ln:incident" x1="${_e}" y1="${et}" x2="${b}" y2="${j}" class="diagram-ray" marker-end="url(#arrowhead-ray)"/>
    <line id="ln:reflected" x1="${b}" y1="${j}" x2="${tt}" y2="${rt}" class="diagram-ray" marker-end="url(#arrowhead-ray)"/>

    ${g?`
    <text id="txt:incidentAngle" x="${b-60}" y="${j-40}" class="diagram-text-angle">${d}</text>
    <text id="txt:reflectedAngle" x="${b+60}" y="${j-40}" class="diagram-text-angle">${d}</text>
    `:""}

    <text id="txt:incident" x="${_e-40}" y="${et+10}" class="diagram-text">Incident</text>
    <text id="txt:reflected" x="${tt+40}" y="${rt+10}" class="diagram-text">Reflected</text>
  </g>
</svg>`,width:500,height:400,warnings:[]}}},titrationSetup={templateId:"chemistry.titration_setup.v1",title:"Titration Setup",description:"Burette and conical flask titration apparatus",category:"chemistry",schema:{labels:{burette:{default:"Burette",maxLen:20},solution:{default:"Acid",maxLen:20},flask:{default:"Alkali + Indicator",maxLen:30}},visibility:{showLabels:{default:!0}}},render:e=>{var _,$,_e,et;const d=((_=e.labels)==null?void 0:_.burette)||"Burette",h=(($=e.labels)==null?void 0:$.solution)||"Acid",g=((_e=e.labels)==null?void 0:_e.flask)||"Alkali + Indicator",b=((et=e.visibility)==null?void 0:et.showLabels)!==!1;return{svg:`<svg viewBox="0 0 400 500" xmlns="http://www.w3.org/2000/svg">
  <style>
    .diagram-glass { stroke: #94a3b8; stroke-width: 2; fill: none; }
    .diagram-liquid { fill: #3b82f6; fill-opacity: 0.3; stroke: #60a5fa; stroke-width: 2; }
    .diagram-stand { stroke: #94a3b8; stroke-width: 3; fill: none; }
    .diagram-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; fill: #e2e8f0; text-anchor: middle; }
  </style>

  <g id="grp:main">
    <g id="grp:burette">
      <rect id="burette:body" x="180" y="50" width="40" height="200" class="diagram-glass"/>
      <rect id="burette:liquid" x="182" y="80" width="36" height="120" class="diagram-liquid"/>
      <line id="burette:tap" x1="200" y1="250" x2="200" y2="270" class="diagram-glass"/>
      <circle id="burette:tap-handle" cx="210" cy="260" r="8" class="diagram-glass"/>
      ${b?`<text id="txt:burette" x="260" y="100" class="diagram-text">${d}</text>`:""}
      ${b?`<text id="txt:solution" x="260" y="120" class="diagram-text">${h}</text>`:""}
    </g>

    <g id="grp:stand">
      <line id="stand:vertical" x1="150" y1="50" x2="150" y2="450" class="diagram-stand"/>
      <line id="stand:base" x1="100" y1="450" x2="300" y2="450" class="diagram-stand"/>
      <line id="stand:clamp1" x1="150" y1="150" x2="180" y2="150" class="diagram-stand"/>
      <line id="stand:clamp2" x1="150" y1="180" x2="180" y2="180" class="diagram-stand"/>
    </g>

    <g id="grp:flask">
      <path id="flask:body" d="M 170 320 L 170 360 L 160 380 L 160 420 L 240 420 L 240 380 L 230 360 L 230 320 Z" class="diagram-glass"/>
      <path id="flask:liquid" d="M 172 360 L 162 380 L 162 418 L 238 418 L 238 380 L 228 360 Z" class="diagram-liquid"/>
      ${b?`<text id="txt:flask" x="280" y="380" class="diagram-text">${g}</text>`:""}
    </g>
  </g>
</svg>`,width:400,height:500,warnings:[]}}},templates$1=new Map;function registerTemplate(e){templates$1.set(e.templateId,e)}registerTemplate(angleInSemicircle);registerTemplate(fzcAngles);registerTemplate(rightTriangle);registerTemplate(linearAxesLine);registerTemplate(vennTwoSet);registerTemplate(triangleBasicAngles);registerTemplate(isoscelesTriangle);registerTemplate(quadrilateralAngles);registerTemplate(polygonAngles);registerTemplate(bearings);registerTemplate(circleTangentRadius);registerTemplate(circleTwoTangents);registerTemplate(cyclicQuadrilateral);registerTemplate(pythagorasCuboid);registerTemplate(axesBlank);registerTemplate(boxPlot);registerTemplate(functionMachine);registerTemplate(circuitSeries);registerTemplate(circuitParallel);registerTemplate(rayReflection);registerTemplate(titrationSetup);function getTemplate(e){return templates$1.get(e)}function getAllTemplates(){return Array.from(templates$1.values())}function getTemplatesByCategory(e){return Array.from(templates$1.values()).filter(i=>i.category===e)}function validateDiagramParams(e,i){const o=[],d=[];return i.labels&&Object.entries(i.labels).forEach(([h,g])=>{var j;const b=(j=e.labels)==null?void 0:j[h];g.required&&!b&&d.push(`Label "${h}" is required but missing`),b&&g.maxLen&&b.length>g.maxLen&&o.push(`Label "${h}" exceeds max length of ${g.maxLen}`)}),i.positions&&Object.entries(i.positions).forEach(([h,g])=>{var j;const b=(j=e.positions)==null?void 0:j[h];g.required&&!b&&d.push(`Position "${h}" is required but missing`),b&&g.normalized&&((b.x<0||b.x>1)&&o.push(`Position "${h}" x-coordinate should be normalized (0-1), got ${b.x}`),(b.y<0||b.y>1)&&o.push(`Position "${h}" y-coordinate should be normalized (0-1), got ${b.y}`))}),i.values&&Object.entries(i.values).forEach(([h,g])=>{var j;const b=(j=e.values)==null?void 0:j[h];if(g.required&&b===void 0&&d.push(`Value "${h}" is required but missing`),b!==void 0&&g.type==="number"){const _=typeof b=="number"?b:parseFloat(String(b));isNaN(_)?d.push(`Value "${h}" must be a number`):(g.min!==void 0&&_<g.min&&o.push(`Value "${h}" is below minimum of ${g.min}`),g.max!==void 0&&_>g.max&&o.push(`Value "${h}" is above maximum of ${g.max}`))}}),{ok:d.length===0,warnings:o,errors:d}}function mergeWithDefaults(e,i){const o={labels:{...e.labels},positions:{...e.positions},values:{...e.values},visibility:{...e.visibility}};return i.labels&&Object.entries(i.labels).forEach(([d,h])=>{o.labels&&o.labels[d]===void 0&&h.default!==void 0&&(o.labels[d]=h.default)}),i.positions&&Object.entries(i.positions).forEach(([d,h])=>{o.positions&&o.positions[d]===void 0&&h.default&&(o.positions[d]=h.default)}),i.values&&Object.entries(i.values).forEach(([d,h])=>{o.values&&o.values[d]===void 0&&h.default!==void 0&&(o.values[d]=h.default)}),i.visibility&&Object.entries(i.visibility).forEach(([d,h])=>{o.visibility&&o.visibility[d]===void 0&&h.default!==void 0&&(o.visibility[d]=h.default)}),o}function renderDiagram(e){if(e.mode!=="auto"||!e.templateId)return{svg:"",width:0,height:0,warnings:["Invalid mode or missing templateId for auto-render"]};const i=getTemplate(e.templateId);if(!i)return{svg:"",width:0,height:0,warnings:[`Template "${e.templateId}" not found in engine registry`]};const o=e.params||{},d=mergeWithDefaults(o,i.schema),h=validateDiagramParams(d,i.schema);if(!h.ok)return{svg:"",width:0,height:0,warnings:[...h.warnings,...h.errors]};try{const g=i.render(d);return{...g,warnings:[...g.warnings||[],...h.warnings]}}catch(g){return console.error("Error rendering diagram:",g),{svg:"",width:0,height:0,warnings:[`Render error: ${g instanceof Error?g.message:"Unknown error"}`]}}}function validateDiagram(e){if(e.mode!=="auto"||!e.templateId)return{ok:!1,warnings:[],errors:["Invalid mode or missing templateId for auto-render"]};const i=getTemplate(e.templateId);if(!i)return{ok:!1,warnings:[],errors:[`Template "${e.templateId}" not found in engine registry`]};const o=e.params||{},d=mergeWithDefaults(o,i.schema);return validateDiagramParams(d,i.schema)}function denormalizeCoord(e,i){return e*i}function normalizeCoord(e,i){return e/i}const index=Object.freeze(Object.defineProperty({__proto__:null,denormalizeCoord,getAllTemplates,getTemplate,getTemplatesByCategory,mergeWithDefaults,normalizeCoord,renderDiagram,validateDiagram,validateDiagramParams},Symbol.toStringTag,{value:"Module"})),templateCache=new Map,assetCache=new Map;function DiagramRenderer({metadata:e,className:i="",showWarnings:o=!1}){const[d,h]=reactExports.useState(null),[g,b]=reactExports.useState(null),[j,_]=reactExports.useState(!0),[$,_e]=reactExports.useState(null),[et,tt]=reactExports.useState([]),rt=reactExports.useRef(null);reactExports.useEffect(()=>{nt()},[e.mode,e.templateId,e.diagramId,JSON.stringify(e.params)]);const nt=async()=>{_(!0),_e(null),tt([]);try{if(e.mode==="auto")_(!1);else if(e.mode==="template"&&e.templateId){if(templateCache.has(e.templateId))h(templateCache.get(e.templateId));else{const{data:ot,error:lt}=await supabase.from("diagram_templates").select("*").eq("template_id",e.templateId).single();if(lt)throw lt;const ct={id:ot.id,templateId:ot.template_id,title:ot.title,subjectId:ot.subject_id,topicTags:ot.topic_tags||[],baseCanvasData:ot.base_canvas_data,baseSvgData:ot.base_svg_data,width:ot.width,height:ot.height,anchors:ot.anchors||{},schema:ot.schema||{},createdAt:ot.created_at,updatedAt:ot.updated_at};templateCache.set(e.templateId,ct),h(ct)}_(!1)}else if(e.mode==="asset"&&e.diagramId){if(assetCache.has(e.diagramId))b(assetCache.get(e.diagramId));else{const{data:ot,error:lt}=await supabase.from("diagrams").select("*").eq("id",e.diagramId).single();if(lt)throw lt;const ct={id:ot.id,title:ot.title,subjectId:ot.subject_id,diagramType:ot.diagram_type,tags:ot.tags||[],storageMode:ot.storage_mode,canvasData:ot.canvas_data||{elements:[]},svgData:ot.svg_data,pngUrl:ot.png_url,width:ot.width,height:ot.height,createdAt:ot.created_at,updatedAt:ot.updated_at};assetCache.set(e.diagramId,ct),b(ct)}_(!1)}else _(!1)}catch(ot){console.error("Error loading diagram:",ot),_e("Failed to load diagram"),_(!1)}},it=reactExports.useMemo(()=>{if(e.mode==="auto"){const ot=renderDiagram(e);return ot.warnings&&ot.warnings.length>0&&tt(ot.warnings),ot.svg}else{if(e.mode==="template"&&d)return applyOverridesToSvg(d.baseSvgData,e.overrides,d.schema);if(e.mode==="asset"&&g)return g.svgData||""}return""},[e.mode,e,d,g,e.overrides,e.params]);if(j)return jsxRuntimeExports.jsx("div",{className:`diagram-renderer diagram-loading ${i}`,children:jsxRuntimeExports.jsx("div",{className:"animate-pulse bg-gray-200 rounded-lg",style:{height:"300px"}})});if($||!d&&!g&&e.mode!=="auto")return o&&$?jsxRuntimeExports.jsxs("div",{className:"diagram-renderer-error bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:[jsxRuntimeExports.jsx("strong",{children:"Diagram Error:"})," ",$]}):null;if(!it)return o&&et.length>0?jsxRuntimeExports.jsxs("div",{className:"diagram-renderer-warning bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-yellow-700",children:[jsxRuntimeExports.jsx("strong",{children:"Diagram Warnings:"}),jsxRuntimeExports.jsx("ul",{className:"list-disc list-inside mt-2",children:et.map((ot,lt)=>jsxRuntimeExports.jsx("li",{children:ot},lt))})]}):null;const at=`diagram-placement-${e.placement||"above"}`;return jsxRuntimeExports.jsxs("div",{className:`diagram-renderer ${at} ${i}`,ref:rt,children:[o&&et.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3 text-yellow-700 text-sm",children:[jsxRuntimeExports.jsx("strong",{children:"Warnings:"}),jsxRuntimeExports.jsx("ul",{className:"list-disc list-inside mt-1",children:et.map((ot,lt)=>jsxRuntimeExports.jsx("li",{children:ot},lt))})]}),jsxRuntimeExports.jsxs("div",{className:"diagram-container",children:[it&&jsxRuntimeExports.jsx("div",{className:"diagram-svg-wrapper",dangerouslySetInnerHTML:{__html:it}}),e.caption&&jsxRuntimeExports.jsx("p",{className:"diagram-caption",children:e.caption})]})]})}function applyOverridesToSvg(e,i,o){if(!i)return e;try{const h=new DOMParser().parseFromString(e,"image/svg+xml");return h.querySelector("svg")?(i.labels&&applyLabelOverrides(h,i.labels,o),i.values&&applyValueOverrides(h,i.values,o),i.visibility&&applyVisibilityOverrides(h,i.visibility),i.positions&&applyPositionOverrides(h,i.positions,o),i.styles&&applyStyleOverrides(h,i.styles),new XMLSerializer().serializeToString(h)):e}catch(d){return console.error("Error applying overrides:",d),e}}function applyLabelOverrides(e,i,o){Object.entries(i).forEach(([d,h])=>{var $,_e;const g=(_e=($=o==null?void 0:o.labels)==null?void 0:$[d])==null?void 0:_e.maxLen,b=g?h.substring(0,g):h;let j=d.startsWith("txt:")?d:`txt:${d}`,_=e.getElementById(j);if(!_&&!d.startsWith("txt:")&&(_=e.getElementById(d)),_){const et=_.querySelector("text")||_;(et.tagName==="text"||et.tagName==="tspan")&&(et.textContent=b)}})}function applyValueOverrides(e,i,o){Object.entries(i).forEach(([d,h])=>{var _;const g=(_=o==null?void 0:o.values)==null?void 0:_[d];let b=h;g&&typeof h=="number"&&(g.min!==void 0&&h<g.min&&(b=g.min),g.max!==void 0&&h>g.max&&(b=g.max));const j=e.getElementById(d);if(j){const $=j.querySelector("text")||j;($.tagName==="text"||$.tagName==="tspan")&&($.textContent=String(b))}})}function applyVisibilityOverrides(e,i){Object.entries(i).forEach(([o,d])=>{const h=e.getElementById(o);h&&(d?(h.removeAttribute("display"),h.style.display=""):h.style.display="none")})}function applyPositionOverrides(e,i,o){Object.entries(i).forEach(([d,h])=>{var j;const g=d.startsWith("pt:")?d:`pt:${d}`,b=e.getElementById(g);if(b){b.tagName==="circle"?(b.setAttribute("cx",String(h.x)),b.setAttribute("cy",String(h.y))):b.tagName==="text"&&(b.setAttribute("x",String(h.x)),b.setAttribute("y",String(h.y)));const _=(j=o==null?void 0:o.positions)==null?void 0:j[d];if(_!=null&&_.linkedText){const $=_.linkedText.startsWith("txt:")?_.linkedText:`txt:${_.linkedText}`,_e=e.getElementById($);_e&&_e.tagName==="text"&&(_e.setAttribute("x",String(h.x)),_e.setAttribute("y",String(h.y)))}}})}function applyStyleOverrides(e,i){i.highlight&&i.highlight.forEach(o=>{const d=e.getElementById(o);d&&d.classList.add("diag-highlight")}),i.muted&&i.muted.forEach(o=>{const d=e.getElementById(o);d&&d.classList.add("diag-muted")})}class SoundSystem{constructor(){this.enabled=!1,this.audioContext=null;const i=localStorage.getItem("grade9_sounds_enabled");this.enabled=i==="true"}getAudioContext(){return this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext}toggle(){return this.enabled=!this.enabled,localStorage.setItem("grade9_sounds_enabled",String(this.enabled)),this.enabled}isEnabled(){return this.enabled}playCorrect(){this.enabled&&this.playTone(880,.05,.1,"sine")}playWrong(){this.enabled&&this.playTone(220,.1,.15,"triangle")}playLevelUp(){if(!this.enabled)return;const o=this.getAudioContext().currentTime;[523,659,784].forEach((d,h)=>{this.playTone(d,.08,.12,"sine",o+h*.1)})}playGrade9Finish(){if(!this.enabled)return;const o=this.getAudioContext().currentTime;[523,659,784,1047].forEach((d,h)=>{this.playTone(d,.06,.1,"sine",o+h*.08)})}playTone(i,o,d,h="sine",g){try{const b=this.getAudioContext(),j=b.createOscillator(),_=b.createGain();j.connect(_),_.connect(b.destination),j.frequency.value=i,j.type=h;const $=g||b.currentTime;_.gain.setValueAtTime(o,$),_.gain.exponentialRampToValueAtTime(.01,$+d),j.start($),j.stop($+d)}catch(b){console.warn("Sound playback failed:",b)}}}const soundSystem=new SoundSystem;function normalizeAnswer(e){if(!e||typeof e!="string")return"";let i=e.trim().toLowerCase();return i==="0.5"&&(i="1/2"),i==="1/2"&&(i="0.5"),i==="0.25"&&(i="1/4"),i==="1/4"&&(i="0.25"),i==="0.75"&&(i="3/4"),i==="3/4"&&(i="0.75"),i.match(/^0\.33+$/)&&(i="1/3"),i==="1/3"&&(i="0.33"),i.match(/^0\.66+$/)&&(i="2/3"),i==="2/3"&&(i="0.67"),i}function parseAnswerList(e){return e?Array.isArray(e)?e.filter(i=>typeof i=="string"&&i.trim().length>0):typeof e=="string"?e.includes("|")?e.split("|").map(i=>i.trim()).filter(i=>i.length>0):e.trim().length>0?[e]:[]:[]:[]}function isAnswerCorrect(e,i){if(!e||!i)return!1;const o=normalizeAnswer(e);if(!o)return!1;const d=parseAnswerList(i);return d.length===0?!1:d.some(h=>{const g=normalizeAnswer(h);return o===g})}const ConfirmContext=reactExports.createContext(void 0);function ConfirmProvider({children:e}){const[i,o]=reactExports.useState(!1),[d,h]=reactExports.useState(null),[g,b]=reactExports.useState(null),j=reactExports.useCallback(_e=>new Promise(et=>{h(_e),o(!0),b(()=>et)}),[]),_=()=>{g&&g(!0),o(!1),b(null)},$=()=>{g&&g(!1),o(!1),b(null)};return jsxRuntimeExports.jsxs(ConfirmContext.Provider,{value:{confirm:j},children:[e,jsxRuntimeExports.jsx(AnimatePresence,{children:i&&d&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-[1300]",onClick:$}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[1300] flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",onClick:_e=>_e.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("div",{className:`p-3 rounded-xl ${d.destructive?"bg-red-100":"bg-blue-100"}`,children:jsxRuntimeExports.jsx(AlertTriangle,{size:24,className:d.destructive?"text-red-600":"text-blue-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:d.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:d.message})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-6",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",fullWidth:!0,onClick:$,children:d.cancelLabel||"Cancel"}),jsxRuntimeExports.jsx(Button,{variant:d.destructive?"destructive":"primary",fullWidth:!0,onClick:_,children:d.confirmLabel||"Confirm"})]})]})})]})})]})}function useConfirm(){const e=reactExports.useContext(ConfirmContext);if(!e)throw new Error("useConfirm must be used within ConfirmProvider");return e}function QuizPlayerPage(){var gr,yr;const{quizId:e}=useParams(),[i]=useSearchParams(),o=useNavigate(),d=reactExports.useRef(null),h=reactExports.useRef(!1),{confirm:g}=useConfirm(),[b,j]=reactExports.useState(null),[_,$]=reactExports.useState([]),[_e,et]=reactExports.useState(!0),[tt,rt]=reactExports.useState(null),nt=i.get("mode")==="fixit",[it,st]=reactExports.useState(()=>localStorage.getItem("grade9_focus_mode")==="true"),[at,ot]=reactExports.useState(()=>localStorage.getItem("grade9_speedrun_mode")==="true"),[lt,ct]=reactExports.useState(soundSystem.isEnabled()),[ut,dt]=reactExports.useState(!1),[mt,xt]=reactExports.useState(!1),[ft,gt]=reactExports.useState(()=>localStorage.getItem("mathsToolkit_open")==="true"),[pt,yt]=reactExports.useState(""),[bt,St]=reactExports.useState(new Set),[wt,kt]=reactExports.useState(new Set),[Et,jt]=reactExports.useState(0),[Rt,At]=reactExports.useState(0),[Dt]=reactExports.useState(Date.now()),[Nt,zt]=reactExports.useState(!1),[Vt,Gt]=reactExports.useState(!1),[Mt,Wt]=reactExports.useState(!1),[Zt,Ct]=reactExports.useState(0),[Ut,Kt]=reactExports.useState(!1),[$t,Jt]=reactExports.useState(!1),[Qt,er]=reactExports.useState(!1),Xt=_[Et],rr=(b==null?void 0:b.subjectId)==="0d9b0cc0-1779-4097-a684-f41d5b994f50",nr=((gr=Xt==null?void 0:Xt.meta)==null?void 0:gr.calculatorAllowed)===!0,ir=(yr=Xt==null?void 0:Xt.meta)==null?void 0:yr.diagram;reactExports.useEffect(()=>{localStorage.setItem("mathsToolkit_open",ft.toString())},[ft]),reactExports.useEffect(()=>{vr()},[e]);const dr=reactExports.useCallback(Lt=>{const ht=d.current;if(!ht)return;const vt=ht.selectionStart||0,Tt=ht.selectionEnd||0,_t=ht.value,Pt=_t.substring(0,vt)+Lt+_t.substring(Tt);h.current=!0,yt(Pt),setTimeout(()=>{const It=vt+Lt.length;ht.focus(),ht.setSelectionRange(It,It)},0)},[]),pr=reactExports.useCallback(Lt=>{d.current=Lt,Lt&&(Lt.insertTextAtCursor=dr)},[dr]),vr=async()=>{if(e)try{const Lt=await db.getQuiz(e);if(Lt){j(Lt),At(Lt.timeLimitSec);let ht=await db.getPromptsByIds(Lt.promptIds);if(nt){const vt=storage.getAttemptsByQuizId(Lt.id),Tt=vt[vt.length-1];Tt&&Tt.missedPromptIds.length>0&&(ht=ht.filter(_t=>Tt.missedPromptIds.includes(_t.id)))}else ht=[...ht].sort(()=>Math.random()-.5);$(ht)}}catch(Lt){console.error("Failed to load quiz:",Lt)}finally{et(!1)}};reactExports.useEffect(()=>{if(!Vt||Mt)return;const Lt=setInterval(()=>{At(ht=>ht<=1?(hr(),0):ht-1)},1e3);return()=>clearInterval(Lt)},[Vt,Mt]),reactExports.useEffect(()=>{if(Vt&&!Mt){const Lt=setTimeout(()=>{var ht,vt;(ht=d.current)==null||ht.focus(),(vt=d.current)==null||vt.select()},250);return()=>clearTimeout(Lt)}},[Et,Vt,Mt]),reactExports.useEffect(()=>{const Lt=async ht=>{ht.key==="Escape"&&Vt&&!Mt&&await g({title:"Quit Quiz?",message:"Your progress will not be saved. Are you sure you want to quit?",confirmLabel:"Quit",cancelLabel:"Keep Going",destructive:!0})&&o(-1)};return window.addEventListener("keydown",Lt),()=>window.removeEventListener("keydown",Lt)},[Vt,Mt,o,g]);const mr=()=>{const Lt=!it;st(Lt),localStorage.setItem("grade9_focus_mode",String(Lt))},xr=()=>{const Lt=!at;ot(Lt),localStorage.setItem("grade9_speedrun_mode",String(Lt))},br=()=>{soundSystem.toggle(),ct(soundSystem.isEnabled())};if(_e)return jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-center min-h-[400px]",children:jsxRuntimeExports.jsx("div",{style:{color:"rgb(var(--text-secondary))"},children:"Loading quiz..."})});if(!b)return jsxRuntimeExports.jsx("div",{children:"Quiz not found"});const ar=storage.getMasteryState(b.id),jr=()=>{Gt(!0)},Er=Lt=>{if(yt(Lt),!Lt.trim())return;if(h.current){h.current=!1;return}if(isAnswerCorrect(Lt,Xt.answers)){soundSystem.playCorrect(),rt("correct"),Jt(!0),setTimeout(()=>{rt(null),Jt(!1)},250),Ct(Tt=>Tt+1),Kt(!0),setTimeout(()=>Kt(!1),1500);const vt=new Set([...bt,Xt.id]);St(vt),yt(""),zt(!1),vt.size===_.length?setTimeout(()=>fr(vt),500):setTimeout(()=>wr(),200)}},or=async()=>{if(pt.trim()&&!Qt){er(!0);try{isAnswerCorrect(pt,Xt.answers)||(soundSystem.playWrong(),rt("wrong"),setTimeout(()=>rt(null),300),Ct(0))}finally{er(!1)}}},wr=()=>{let Lt=(Et+1)%_.length,ht=0;for(;bt.has(_[Lt].id)&&ht<_.length;)Lt=(Lt+1)%_.length,ht++;jt(Lt)},Sr=async()=>{if(!await g({title:"Give Up?",message:"This will mark all remaining questions as missed and end the quiz.",confirmLabel:"Give Up",cancelLabel:"Keep Trying",destructive:!0}))return;_.filter(vt=>!bt.has(vt.id)).forEach(vt=>{kt(Tt=>new Set([...Tt,vt.id]))}),hr()},Rr=async()=>{await g({title:"Restart Quiz?",message:"Your current progress will be lost. Start fresh?",confirmLabel:"Restart",cancelLabel:"Cancel",destructive:!1})&&(o(`/quiz/${b.id}`),window.location.reload())},fr=Lt=>{Wt(!0);const ht=Math.floor((Date.now()-Dt)/1e3),vt=Lt.size,Tt=new Set(_.map(tr=>tr.id)),_t=new Set(Array.from(Tt).filter(tr=>!Lt.has(tr))),Pt=wt.size>0?wt:_t,It=Lt.size+Pt.size,Bt=It>0?vt/It:0,Ot={id:`attempt-${Date.now()}`,quizId:b.id,startedAt:new Date(Dt).toISOString(),finishedAt:new Date().toISOString(),correctPromptIds:Array.from(Lt),missedPromptIds:Array.from(Pt),timeTakenSec:ht,accuracyPct:Bt*100};storage.saveAttempt(Ot),storage.updateStreak();const Ft=vt*5;storage.addXP(Ft);const qt=storage.getProfile();storage.updateProfile({totalQuizzes:qt.totalQuizzes+1,totalTimeMinutes:qt.totalTimeMinutes+Math.floor(ht/60)});const Ht=ar||{quizId:b.id,bestAccuracyPct:0,bestTimeSec:1/0,masteryLevel:0,lastPlayedAt:new Date().toISOString()},Yt={...Ht,bestAccuracyPct:Math.max(Ht.bestAccuracyPct,Bt*100),bestTimeSec:Math.min(Ht.bestTimeSec,ht),lastPlayedAt:new Date().toISOString()},sr=calculateMasteryLevel(Yt.bestAccuracyPct/100,Yt.bestTimeSec,b.grade9TargetSec);if(Yt.masteryLevel=sr.level,storage.updateMasteryState(Yt),sr.level===3&&Ht.masteryLevel<3){storage.addBadge("First Mastered");const tr=storage.getProfile();storage.updateProfile({masteredCount:tr.masteredCount+1})}if(sr.level===4&&Ht.masteryLevel<4){soundSystem.playGrade9Finish(),storage.addBadge("Grade 9 Speed");const tr=storage.getProfile();storage.updateProfile({grade9SpeedCount:tr.grade9SpeedCount+1})}o(`/results/${Ot.id}`)},hr=()=>{fr(bt)},lr=Lt=>{const ht=Math.floor(Lt/60),vt=Lt%60;return`${ht}:${vt.toString().padStart(2,"0")}`},cr=bt.size/_.length*100;return Vt?jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 overflow-auto quiz-player-bg",style:{background:"rgb(var(--bg))"},children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 min-h-screen",children:[jsxRuntimeExports.jsx(motion.div,{initial:{y:-20},animate:{y:0},className:"card mb-6 sticky top-4 z-10",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"absolute top-0 left-0 right-0 h-2 bg-gray-200 dark:bg-gray-700 rounded-t-xl overflow-hidden",children:[jsxRuntimeExports.jsx(motion.div,{className:"h-full",style:{background:"linear-gradient(90deg, rgb(var(--accent)), rgb(var(--success)))"},initial:{width:"0%"},animate:{width:`${cr}%`},transition:{duration:.3,ease:"easeOut"}}),[25,50,75,100].map(Lt=>jsxRuntimeExports.jsx("div",{className:"absolute top-0 bottom-0 w-1",style:{left:`${Lt}%`,background:cr>=Lt?"white":"rgba(255,255,255,0.3)"}},Lt))]}),jsxRuntimeExports.jsxs("div",{className:"p-4 pt-6 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:async()=>{await g({title:"Quit Quiz?",message:"Your progress will not be saved.",confirmLabel:"Quit",cancelLabel:"Keep Going",destructive:!0})&&o(-1)},className:"p-2 rounded-lg transition-colors hover:bg-opacity-10",style:{color:"rgb(var(--text))"},children:jsxRuntimeExports.jsx(X,{size:24})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"font-bold",style:{color:"rgb(var(--text))"},children:nt?"Fix-It Drill":b.title}),jsxRuntimeExports.jsxs("p",{className:"text-sm",style:{color:"rgb(var(--text-secondary))"},children:[bt.size," / ",_.length,"  ",Math.round(cr),"%"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[!it&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[at&&jsxRuntimeExports.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:[jsxRuntimeExports.jsx(Zap,{size:16,className:"text-yellow-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-yellow-600",children:"SPEEDRUN"})]}),jsxRuntimeExports.jsxs(motion.div,{animate:{scale:Rt<30?[1,1.05,1]:1},transition:{repeat:Rt<30?1/0:0,duration:1},className:"flex items-center gap-2 px-4 py-2 rounded-xl font-mono font-bold text-xl",style:{background:Rt<30?"rgb(var(--danger) / 0.1)":"rgb(var(--accent) / 0.1)",color:Rt<30?"rgb(var(--danger))":"rgb(var(--accent))",fontVariantNumeric:"tabular-nums"},children:[jsxRuntimeExports.jsx(Clock,{size:20}),jsxRuntimeExports.jsx("span",{children:lr(Rt)})]})]}),rr&&jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>gt(!ft),className:`p-2 rounded-lg transition-colors ${ft?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400":nr?"bg-blue-50 dark:bg-blue-900/30 border-2 border-blue-400 dark:border-blue-600 text-blue-600 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,style:{color:ft||nr?void 0:"rgb(var(--text))"},title:nr?"Maths Toolkit (Calculator Available)":"Maths Toolkit",children:jsxRuntimeExports.jsx(Wrench,{size:20})}),nr&&!ft&&jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-white dark:border-gray-800"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>dt(!ut),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",style:{color:"rgb(var(--text))"},children:jsxRuntimeExports.jsx(Settings,{size:20})}),jsxRuntimeExports.jsx(AnimatePresence,{children:ut&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},className:"absolute right-0 top-12 w-56 card p-3 space-y-2 z-20",children:[jsxRuntimeExports.jsxs("button",{onClick:mr,className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[it?jsxRuntimeExports.jsx(EyeOff,{size:16}):jsxRuntimeExports.jsx(Eye,{size:16}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Focus Mode"})]}),jsxRuntimeExports.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${it?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:jsxRuntimeExports.jsx(motion.div,{className:"w-4 h-4 bg-white rounded-full mt-0.5",animate:{x:it?20:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),jsxRuntimeExports.jsxs("button",{onClick:xr,className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Zap,{size:16}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Speedrun"})]}),jsxRuntimeExports.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${at?"bg-yellow-500":"bg-gray-300 dark:bg-gray-600"}`,children:jsxRuntimeExports.jsx(motion.div,{className:"w-4 h-4 bg-white rounded-full mt-0.5",animate:{x:at?20:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),jsxRuntimeExports.jsxs("button",{onClick:br,className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[lt?jsxRuntimeExports.jsx(Volume2,{size:16}):jsxRuntimeExports.jsx(VolumeX,{size:16}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Sounds"})]}),jsxRuntimeExports.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${lt?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"}`,children:jsxRuntimeExports.jsx(motion.div,{className:"w-4 h-4 bg-white rounded-full mt-0.5",animate:{x:lt?20:2},transition:{type:"spring",stiffness:500,damping:30}})})]})]})})]})]})]})]})}),Ut&&jsxRuntimeExports.jsx(XPPopup,{xp:5,type:"answer",position:"input"}),jsxRuntimeExports.jsx(ComboTracker,{combo:Zt,show:Vt&&!Mt}),jsxRuntimeExports.jsxs("div",{className:`grid ${it?"grid-cols-1":"grid-cols-1 lg:grid-cols-3"} gap-6`,children:[jsxRuntimeExports.jsx("div",{className:it?"max-w-3xl mx-auto w-full":"lg:col-span-2",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.15,ease:"easeOut"},className:`card-elevated p-8 md:p-12 relative ${tt==="correct"?"quiz-correct-pulse":""} ${tt==="wrong"?"quiz-wrong-shake":""}`,children:[jsxRuntimeExports.jsx(AnimatePresence,{children:$t&&jsxRuntimeExports.jsx(motion.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2},className:"absolute top-8 right-8 bg-green-500 rounded-full p-2",children:jsxRuntimeExports.jsx(Check,{size:24,className:"text-white"})})}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[nr&&jsxRuntimeExports.jsxs("div",{className:"mb-4 inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[jsxRuntimeExports.jsx(Wrench,{size:16,className:"text-blue-600 dark:text-blue-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Calculator Available"})]}),ir&&(!ir.placement||ir.placement==="above")&&jsxRuntimeExports.jsx(DiagramRenderer,{metadata:ir}),jsxRuntimeExports.jsx("h3",{className:"text-2xl md:text-3xl font-bold",style:{color:"rgb(var(--text))"},children:Xt.question}),ir&&ir.placement==="below"&&jsxRuntimeExports.jsx(DiagramRenderer,{metadata:ir})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("input",{ref:pr,type:"text",value:pt,onChange:Lt=>Er(Lt.target.value),onKeyDown:Lt=>{Lt.key==="Enter"&&or()},placeholder:"Type your answer...",className:`quiz-input ${tt==="correct"?"quiz-input-correct":""} ${tt==="wrong"?"quiz-input-wrong":""}`,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:"false",disabled:Qt})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:or,className:"btn-primary flex-1 py-4",disabled:!pt.trim()||Qt,children:"Submit"}),!at&&jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>zt(!Nt),className:"btn-secondary px-4",children:jsxRuntimeExports.jsx(Lightbulb,{size:20})}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>xt(!mt),className:"btn-secondary px-4",children:jsxRuntimeExports.jsx(MoreHorizontal,{size:20})}),jsxRuntimeExports.jsx(AnimatePresence,{children:mt&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"absolute right-0 top-14 w-48 card p-2 space-y-1 z-20",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{xt(!1),Rr()},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-sm",children:[jsxRuntimeExports.jsx(RotateCcw,{size:16}),"Restart"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{xt(!1),Sr()},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-sm text-red-600",children:[jsxRuntimeExports.jsx(Flag,{size:16}),"Give Up"]})]})})]})]})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:Nt&&Xt.hint&&!at&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-6 p-4 rounded-xl",style:{background:"rgb(var(--warning) / 0.1)",border:"1px solid rgb(var(--warning) / 0.2)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Lightbulb,{size:20,style:{color:"rgb(var(--warning))"},className:"mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-semibold mb-1",style:{color:"rgb(var(--text))"},children:"Hint"}),jsxRuntimeExports.jsx("p",{style:{color:"rgb(var(--text-secondary))"},children:Xt.hint})]})]})})})]},Et)})}),!it&&jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"card p-6",children:[jsxRuntimeExports.jsxs("h4",{className:"font-bold mb-4 flex items-center gap-2",style:{color:"rgb(var(--text))"},children:[jsxRuntimeExports.jsx(CheckCircle,{size:20,style:{color:"rgb(var(--success))"}}),jsxRuntimeExports.jsx("span",{children:"Answer Slots"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto custom-scrollbar",children:jsxRuntimeExports.jsx(AnimatePresence,{children:_.map((Lt,ht)=>{const vt=bt.has(Lt.id);return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:`p-3 rounded-lg text-sm transition-all ${vt?"answer-slot-solved":"answer-slot-empty"}`,style:{background:vt?"rgb(var(--success) / 0.1)":"rgb(var(--surface-2))",color:vt?"rgb(var(--success))":"rgb(var(--muted))",borderLeft:vt?"3px solid rgb(var(--success))":"none"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-mono text-xs opacity-50",children:String(ht+1).padStart(2,"0")}),vt?jsxRuntimeExports.jsx("span",{className:"font-medium",children:Lt.answers[0]}):jsxRuntimeExports.jsx("span",{className:"opacity-50",children:""})]})},Lt.id)})})})]})})]}),rr&&jsxRuntimeExports.jsx(AnimatePresence,{children:ft&&jsxRuntimeExports.jsx(MathsToolkit,{isOpen:ft,onClose:()=>gt(!1),calculatorAllowed:nr,attemptId:`${b.id}-${Dt}`,inputRef:d})})]})}):jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-4xl mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"card-elevated p-8 md:p-12",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-3",style:{color:"rgb(var(--text))"},children:b.title}),jsxRuntimeExports.jsx("p",{style:{color:"rgb(var(--text-secondary))"},children:nt?"Fix-It Drill  Practice your mistakes":b.scopeType.charAt(0).toUpperCase()+b.scopeType.slice(1)+" Quiz"})]}),ar&&jsxRuntimeExports.jsx(MasteryChip,{level:ar.masteryLevel,size:"lg"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"card p-6",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"rgb(var(--accent))"},children:"Questions"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold stat-number",style:{color:"rgb(var(--text))"},children:_.length})]}),jsxRuntimeExports.jsxs("div",{className:"card p-6",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"rgb(var(--success))"},children:"Time Limit"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold stat-number",style:{color:"rgb(var(--text))"},children:lr(b.timeLimitSec)})]}),jsxRuntimeExports.jsxs("div",{className:"card p-6 sm:col-span-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium mb-2 text-gradient-elite",children:"Grade 9 Target"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold stat-number",style:{color:"rgb(var(--text))"},children:lr(b.grade9TargetSec)})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx(motion.button,{onClick:jr,whileHover:{scale:1.01},whileTap:{scale:.99},className:"btn-primary w-full py-4 text-lg",children:nt?"Start Drill":"Start Quiz"}),jsxRuntimeExports.jsx("button",{onClick:()=>o(-1),className:"btn-secondary w-full py-3",children:"Back"})]})]})})}function Grade9Achievement({quizTitle:e,time:i,isNewPB:o,onClose:d,onShare:h}){const g=b=>{const j=Math.floor(b/60),_=b%60;return`${j}:${_.toString().padStart(2,"0")}`};return jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex items-center justify-center p-4",style:{background:"rgba(0, 0, 0, 0.9)"},onClick:d,children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},transition:{type:"spring",bounce:.3},className:"max-w-lg w-full relative",onClick:b=>b.stopPropagation(),children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(30)].map((b,j)=>jsxRuntimeExports.jsx(motion.div,{initial:{x:"50%",y:"100%",scale:0,rotate:0},animate:{x:`${Math.random()*100}%`,y:`${Math.random()*-50}%`,scale:[0,1,.8],rotate:Math.random()*360},transition:{duration:2,delay:j*.03,ease:"easeOut"},className:"absolute w-3 h-3 rounded-full",style:{background:"var(--gradient-elite)",boxShadow:"0 0 10px rgba(139, 92, 246, 0.8)"}},j))}),jsxRuntimeExports.jsxs("div",{className:"card-elevated p-12 text-center relative overflow-hidden",style:{background:"var(--gradient-elite)"},children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring",bounce:.5},className:"inline-flex items-center justify-center w-32 h-32 rounded-full bg-white/20 mb-6 backdrop-blur-sm",children:jsxRuntimeExports.jsx(Zap,{size:64,className:"text-white",fill:"white"})}),jsxRuntimeExports.jsx(motion.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-5xl font-bold text-white mb-3",children:"GRADE 9 SPEED"}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-xl text-white/90 mb-6",children:e}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5},className:"inline-flex items-center gap-3 px-8 py-4 bg-white/20 backdrop-blur-sm rounded-2xl mb-6",children:[jsxRuntimeExports.jsx(Award,{size:32,className:"text-white"}),jsxRuntimeExports.jsx("span",{className:"text-4xl font-bold text-white stat-number",children:g(i)})]}),o&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},className:"inline-block px-4 py-2 bg-white/20 backdrop-blur-sm rounded-full mb-8",children:jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:"New Personal Best!"})}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"flex gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:h,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-white text-lg font-bold rounded-xl shadow-xl hover:shadow-2xl transition-all",style:{color:"rgb(var(--accent))"},children:[jsxRuntimeExports.jsx(Share2,{size:20}),jsxRuntimeExports.jsx("span",{children:"Share"})]}),jsxRuntimeExports.jsx("button",{onClick:d,className:"px-6 py-3 bg-white/20 backdrop-blur-sm text-white font-bold rounded-xl hover:bg-white/30 transition-all",children:"Continue"})]})]})]})})})}function ShareCardModal({isOpen:e,onClose:i,data:o}){const d=reactExports.useRef(null),h=b=>{const j=Math.floor(b/60),_=b%60;return`${j}:${_.toString().padStart(2,"0")}`},g=()=>{const b=` Grade9 Sprint

${o.quizTitle}
 ${o.accuracy}%   ${h(o.time)}
 ${o.streak} day streak   Level ${o.level}

Sprint to Grade 9!`;navigator.clipboard.writeText(b)};return jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex items-center justify-center p-4",style:{background:"rgba(0, 0, 0, 0.8)"},onClick:i,children:jsxRuntimeExports.jsx(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"max-w-md w-full",onClick:b=>b.stopPropagation(),children:jsxRuntimeExports.jsxs("div",{className:"card p-6 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold",style:{color:"rgb(var(--text))"},children:"Share Your Run"}),jsxRuntimeExports.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-opacity-10 transition-colors",style:{color:"rgb(var(--text))"},children:jsxRuntimeExports.jsx(X,{size:20})})]}),jsxRuntimeExports.jsxs("div",{ref:d,className:"relative overflow-hidden rounded-2xl p-8 mb-4",style:{background:"var(--gradient-elite)"},children:[jsxRuntimeExports.jsx("div",{className:"absolute top-4 right-4",children:jsxRuntimeExports.jsx("div",{className:"text-white/80 text-xs font-semibold",children:"GRADE9 SPRINT"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-white/70 text-sm mb-1",children:o.subjectName}),jsxRuntimeExports.jsx("h4",{className:"text-2xl font-bold text-white mb-3",children:o.quizTitle}),jsxRuntimeExports.jsx(MasteryChip,{level:o.masteryLevel,size:"md"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-white/70 text-xs mb-1",children:"Accuracy"}),jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-white stat-number",children:[o.accuracy,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-white/70 text-xs mb-1",children:"Time"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-white stat-number",children:h(o.time)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/20",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-white/70 text-xs",children:"Streak"}),jsxRuntimeExports.jsxs("div",{className:"text-xl font-bold text-white",children:[o.streak," days"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-white/70 text-xs",children:"Level"}),jsxRuntimeExports.jsx("div",{className:"text-xl font-bold text-white",children:o.level})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-3",children:jsxRuntimeExports.jsxs("button",{onClick:g,className:"btn-secondary flex-1 flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Copy,{size:18}),jsxRuntimeExports.jsx("span",{children:"Copy Stats"})]})})]})})})})}function LevelUpModal({level:e,onClose:i,unlocks:o=[]}){const[d,h]=reactExports.useState(!1);return reactExports.useEffect(()=>{e%10===0&&(h(!0),setTimeout(()=>h(!1),3e3))},[e]),jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex items-center justify-center p-4",style:{background:"rgba(0, 0, 0, 0.8)"},onClick:i,children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},transition:{type:"spring",bounce:.4},className:"card-elevated max-w-md w-full p-8 relative overflow-hidden",onClick:g=>g.stopPropagation(),children:[d&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(20)].map((g,b)=>jsxRuntimeExports.jsx(motion.div,{initial:{x:"50%",y:"50%",scale:0,rotate:0},animate:{x:`${50+(Math.random()-.5)*100}%`,y:`${50+(Math.random()-.5)*100}%`,scale:1,rotate:Math.random()*360},transition:{duration:1,delay:b*.05},className:"absolute w-2 h-2 rounded-full",style:{background:["rgb(var(--accent))","rgb(var(--success))","rgb(var(--warning))"][b%3]}},b))}),jsxRuntimeExports.jsx("button",{onClick:i,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-opacity-10 transition-colors",style:{color:"rgb(var(--text))"},children:jsxRuntimeExports.jsx(X,{size:20})}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring",bounce:.5},className:"inline-flex items-center justify-center w-24 h-24 rounded-full mb-6",style:{background:"var(--gradient-elite)"},children:jsxRuntimeExports.jsx(Trophy,{size:48,className:"text-white"})}),jsxRuntimeExports.jsx(motion.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-4xl font-bold mb-2 text-gradient-elite",children:"LEVEL UP!"}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.4,type:"spring"},className:"inline-flex items-center gap-2 px-6 py-3 rounded-full mb-6",style:{background:"var(--gradient-primary)",color:"white"},children:[jsxRuntimeExports.jsx(Sparkles,{size:24}),jsxRuntimeExports.jsxs("span",{className:"text-3xl font-bold stat-number",children:["Level ",e]})]}),o.length>0&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card p-4 mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold mb-3",style:{color:"rgb(var(--text-secondary))"},children:"New Unlocks"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:o.map((g,b)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+b*.1},className:"flex items-center gap-2 text-sm",style:{color:"rgb(var(--text))"},children:[jsxRuntimeExports.jsx(Sparkles,{size:16,style:{color:"rgb(var(--accent))"}}),jsxRuntimeExports.jsx("span",{children:g})]},b))})]}),jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},onClick:i,className:"btn-primary w-full py-3",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Continue"})]})]})})})}function ResultsPage(){const{attemptId:e}=useParams(),i=useNavigate(),[o,d]=reactExports.useState(null),[h,g]=reactExports.useState(null),[b,j]=reactExports.useState([]),[_,$]=reactExports.useState(!0),[_e,et]=reactExports.useState(!1),[tt,rt]=reactExports.useState(!1),[nt,it]=reactExports.useState(!1),[st,at]=reactExports.useState(0),[ot,lt]=reactExports.useState(!1),[ct,ut]=reactExports.useState(null),dt=storage.getAttemptById(e),mt=storage.getProfile(),xt=storage.getStreak();reactExports.useEffect(()=>{ft(),gt()},[e]),reactExports.useEffect(()=>{const Mt=Wt=>{Wt.key==="Enter"&&o&&!_e&&!nt&&!tt&&i(`/quiz/${o.id}`)};return window.addEventListener("keydown",Mt),()=>window.removeEventListener("keydown",Mt)},[o,i,_e,nt,tt]);const ft=async()=>{if(!dt){$(!1);return}try{const Mt=await db.getQuiz(dt.quizId);if(Mt){d(Mt);const Wt=await db.getPromptsByIds(dt.missedPromptIds);j(Wt);const Zt=await db.getSubject(Mt.subjectId);g(Zt);const Ct=storage.getAttemptsByQuizId(Mt.id);if(Ct.length>1){const Ut=Ct.findIndex(Kt=>Kt.id===e)-1;Ut>=0&&ut(Ct[Ut])}}}catch(Mt){console.error("Failed to load results:",Mt)}finally{$(!1)}},gt=()=>{if(!dt||!o)return;const Mt=storage.getMasteryState(dt.quizId),Wt=storage.getProfile(),Zt=Math.floor((Wt.xpTotal-dt.correctPromptIds.length*5)/100),Ct=Wt.level;if(Ct>Zt&&(at(Ct),setTimeout(()=>{it(!0)},1500),soundSystem.playLevelUp()),(Mt==null?void 0:Mt.masteryLevel)===4){const Ut=dt.correctPromptIds.length+dt.missedPromptIds.length,Kt=dt.correctPromptIds.length===Ut,$t=dt.timeTakenSec<=o.grade9TargetSec;Kt&&$t&&setTimeout(()=>{et(!0)},500)}lt(!0),setTimeout(()=>lt(!1),2500)};if(_)return jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-center min-h-[400px]",children:jsxRuntimeExports.jsx("div",{style:{color:"rgb(var(--text-secondary))"},children:"Loading results..."})});if(!dt)return jsxRuntimeExports.jsx("div",{children:"Attempt not found"});if(!o||!h)return jsxRuntimeExports.jsx("div",{children:"Quiz not found"});const pt=storage.getMasteryState(o.id),yt=dt.correctPromptIds.length+dt.missedPromptIds.length,bt=yt>0?dt.correctPromptIds.length/yt:0,St=Math.round(bt*100),wt=dt.timeTakenSec,kt=o.grade9TargetSec,Et=wt<=kt,jt=dt.correctPromptIds.length*5,Rt=(pt==null?void 0:pt.bestTimeSec)===wt||(pt==null?void 0:pt.bestAccuracyPct)===St,At=ct?wt-ct.timeTakenSec:0,Dt=ct?St-Math.round(ct.accuracyPct):0,Nt=Mt=>{const Wt=Math.floor(Mt/60),Zt=Mt%60;return`${Wt}:${Zt.toString().padStart(2,"0")}`},zt=(Mt,Wt=!1)=>{if(Mt===0)return null;const Zt=Mt>0?"+":"";return Wt?`${Zt}${Mt}s`:`${Zt}${Mt}%`},Vt=()=>{const Mt=[];return st===5?(Mt.push("Teal Accent Theme"),Mt.push("Glass Card Style")):st===10?(Mt.push("Crimson Accent Theme"),Mt.push("Steel Card Style")):st===15&&Mt.push("Minimal Card Style"),Mt},Gt=()=>{i(`/quiz/${o.id}`)};return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-4xl mx-auto space-y-6",children:[ot&&jsxRuntimeExports.jsx(XPPopup,{xp:jt,type:"quiz",position:"center"}),_e&&jsxRuntimeExports.jsx(Grade9Achievement,{quizTitle:o.title,time:wt,isNewPB:(pt==null?void 0:pt.bestTimeSec)===wt,onClose:()=>et(!1),onShare:()=>{et(!1),rt(!0)}}),nt&&jsxRuntimeExports.jsx(LevelUpModal,{level:st,unlocks:Vt(),onClose:()=>it(!1)}),jsxRuntimeExports.jsx(ShareCardModal,{isOpen:tt,onClose:()=>rt(!1),data:{quizTitle:o.title,subjectName:h.name,accuracy:St,time:wt,masteryLevel:(pt==null?void 0:pt.masteryLevel)||0,streak:xt.currentStreakDays,level:mt.level}}),jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1},className:"card-elevated p-8 relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:Et?"linear-gradient(135deg, rgb(var(--success)), rgb(var(--accent)))":"var(--gradient-primary)"}}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-2",style:{color:"rgb(var(--text))"},children:St===100?"Perfect Run!":Et?"Elite Finish!":"Run Complete!"}),jsxRuntimeExports.jsx("p",{className:"text-lg",style:{color:"rgb(var(--text-secondary))"},children:o.title})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[Rt&&jsxRuntimeExports.jsxs(motion.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",delay:.3},className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-bold",children:[jsxRuntimeExports.jsx(Award,{size:20}),jsxRuntimeExports.jsx("span",{children:"NEW PB!"})]}),pt&&jsxRuntimeExports.jsx(MasteryChip,{level:pt.masteryLevel,size:"lg"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"card p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Trophy,{size:18,style:{color:"rgb(var(--accent))"}}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",style:{color:"rgb(var(--text-secondary))"},children:"Accuracy"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-baseline gap-2",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold stat-number",style:{color:"rgb(var(--text))"},children:[St,"%"]}),Dt!==0&&jsxRuntimeExports.jsx("span",{className:`text-sm font-semibold ${Dt>0?"text-green-600":"text-red-600"}`,children:zt(Dt)})]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.25},className:"card p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(CheckCircle,{size:18,style:{color:"rgb(var(--success))"}}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",style:{color:"rgb(var(--text-secondary))"},children:"Correct"})]}),jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold stat-number",style:{color:"rgb(var(--text))"},children:[dt.correctPromptIds.length,"/",yt]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"card p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Clock,{size:18,style:{color:"rgb(var(--text-secondary))"}}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",style:{color:"rgb(var(--text-secondary))"},children:"Time"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-baseline gap-2",children:[jsxRuntimeExports.jsx("p",{className:`text-3xl font-bold font-mono stat-number ${Et?"text-green-600":""}`,style:{color:Et?"rgb(var(--success))":"rgb(var(--text))"},children:Nt(wt)}),At!==0&&jsxRuntimeExports.jsx("span",{className:`text-sm font-semibold ${At<0?"text-green-600":"text-red-600"}`,children:zt(At,!0)})]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.35},className:"card p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Target,{size:18,style:{color:"rgb(var(--warning))"}}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",style:{color:"rgb(var(--text-secondary))"},children:"Target"})]}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold font-mono stat-number",style:{color:Et?"rgb(var(--success))":"rgb(var(--text))"},children:Nt(kt)})]})]})]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs(motion.button,{onClick:Gt,whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn-primary py-5 text-lg font-bold flex items-center justify-center gap-3 shadow-lg",children:[jsxRuntimeExports.jsx(RefreshCw,{size:22}),jsxRuntimeExports.jsx("span",{children:"RUN IT BACK"})]}),b.length>0&&jsxRuntimeExports.jsxs(motion.button,{onClick:()=>i(`/quiz/${o.id}?mode=fixit`),whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn-secondary py-5 flex items-center justify-center gap-3 font-semibold",children:[jsxRuntimeExports.jsx(Wrench,{size:20}),jsxRuntimeExports.jsx("span",{children:"Fix-It Drill"})]}),jsxRuntimeExports.jsxs(motion.button,{onClick:()=>rt(!0),whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn-secondary py-5 flex items-center justify-center gap-3 font-semibold",children:[jsxRuntimeExports.jsx(Share2,{size:20}),jsxRuntimeExports.jsx("span",{children:"Share"})]})]}),pt&&jsxRuntimeExports.jsxs(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"card p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg",style:{background:"rgb(var(--accent) / 0.1)"},children:jsxRuntimeExports.jsx(TrendingUp,{size:24,style:{color:"rgb(var(--accent))"}})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold",style:{color:"rgb(var(--text))"},children:"Personal Best"}),jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:"rgb(var(--text-secondary))"},children:"Your records for this quiz"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"card p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm mb-1",style:{color:"rgb(var(--text-secondary))"},children:"Best Accuracy"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold stat-number",style:{color:"rgb(var(--text))"},children:[Math.round(pt.bestAccuracyPct),"%",St===Math.round(pt.bestAccuracyPct)&&jsxRuntimeExports.jsx("span",{className:"text-xs ml-2 text-gradient-elite",children:"PB!"})]})]}),jsxRuntimeExports.jsxs("div",{className:"card p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm mb-1",style:{color:"rgb(var(--text-secondary))"},children:"Best Time"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold font-mono stat-number",style:{color:"rgb(var(--text))"},children:[Nt(pt.bestTimeSec),wt===pt.bestTimeSec&&jsxRuntimeExports.jsx("span",{className:"text-xs ml-2 text-gradient-elite",children:"PB!"})]})]})]})]}),b.length>0&&jsxRuntimeExports.jsxs(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"card p-6",style:{borderColor:"rgb(var(--danger) / 0.3)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg",style:{background:"rgb(var(--danger) / 0.1)"},children:jsxRuntimeExports.jsx(XCircle,{size:24,style:{color:"rgb(var(--danger))"}})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-bold",style:{color:"rgb(var(--text))"},children:["Missed Answers (",b.length,")"]}),jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:"rgb(var(--text-secondary))"},children:"Review these to improve your next run"})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:b.map(Mt=>jsxRuntimeExports.jsxs("div",{className:"card p-4",style:{background:"rgb(var(--danger) / 0.05)",borderColor:"rgb(var(--danger) / 0.2)"},children:[jsxRuntimeExports.jsx("p",{className:"font-semibold mb-2",style:{color:"rgb(var(--text))"},children:Mt.question}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:Mt.answers.map((Wt,Zt)=>jsxRuntimeExports.jsx("span",{className:"px-3 py-1 rounded-lg text-sm font-medium",style:{background:"rgb(var(--success) / 0.1)",color:"rgb(var(--success))",border:"1px solid rgb(var(--success) / 0.2)"},children:Wt},Zt))}),Mt.explanation&&jsxRuntimeExports.jsxs("p",{className:"text-sm mt-2",style:{color:"rgb(var(--text-secondary))"},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Explanation:"})," ",Mt.explanation]})]},Mt.id))})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-4 pt-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>i("/"),className:"btn-ghost px-8 py-3",children:"Back to Home"}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex items-center gap-2 text-sm",style:{color:"rgb(var(--muted))"},children:[jsxRuntimeExports.jsx("span",{children:"Press"}),jsxRuntimeExports.jsx("kbd",{className:"px-3 py-1.5 rounded-lg bg-gray-200 dark:bg-gray-700 font-mono font-semibold",style:{color:"rgb(var(--text))"},children:"Enter"}),jsxRuntimeExports.jsx("span",{children:"to retry instantly"})]})]})]})}function ProfileHeaderCard({profile:e,streak:i,grade9ReadinessPct:o}){const d=e.xpTotal%1e3,h=1e3,g=d/h*100;return jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden rounded-3xl",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-5",style:{background:"radial-gradient(circle at top right, rgb(var(--accent)) 0%, transparent 70%)"}}),jsxRuntimeExports.jsxs("div",{className:"relative p-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start md:items-center",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.05},className:"w-28 h-28 rounded-3xl flex items-center justify-center text-4xl font-black text-white relative overflow-hidden",style:{background:"var(--gradient-primary)"},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 20px)"}}),jsxRuntimeExports.jsx(User,{size:48,className:"relative z-10"})]}),jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"absolute -bottom-2 -right-2 w-12 h-12 rounded-xl flex items-center justify-center text-white font-black text-lg shadow-lg",style:{background:"var(--gradient-primary)"},children:e.level})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-black",style:{color:"rgb(var(--text))"},children:"Training Dashboard"}),jsxRuntimeExports.jsxs("p",{className:"text-lg mt-1",style:{color:"rgb(var(--text-secondary))"},children:["Level ",e.level," Sprinter"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold",children:[jsxRuntimeExports.jsxs("span",{style:{color:"rgb(var(--text-secondary))"},children:[d.toLocaleString()," / ",h.toLocaleString()," XP"]}),jsxRuntimeExports.jsxs("span",{className:"text-gradient",children:["Level ",e.level+1]})]}),jsxRuntimeExports.jsx("div",{className:"h-3 rounded-full overflow-hidden",style:{background:"rgb(var(--surface-2))"},children:jsxRuntimeExports.jsx(motion.div,{initial:{width:0},animate:{width:`${g}%`},transition:{duration:1,ease:"easeOut"},className:"h-full rounded-full",style:{background:"var(--gradient-primary)"}})})]}),jsxRuntimeExports.jsx("div",{className:"pt-4",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-3 px-6 py-3 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx(Trophy,{size:24,className:"text-gradient"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Grade 9 Readiness"}),jsxRuntimeExports.jsxs("p",{className:"text-3xl font-black text-gradient",children:[o,"%"]})]})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-8 pt-8 border-t",style:{borderColor:"rgb(var(--border))"},children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center gap-2 mb-2",children:jsxRuntimeExports.jsx(Flame,{size:20,style:{color:"rgb(var(--accent))"}})}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-black",style:{color:"rgb(var(--text))"},children:i.currentStreakDays}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Day Streak"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center gap-2 mb-2",children:jsxRuntimeExports.jsx(Trophy,{size:20,style:{color:"rgb(var(--accent))"}})}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-black",style:{color:"rgb(var(--text))"},children:e.totalQuizzes}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Total Quizzes"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center gap-2 mb-2",children:jsxRuntimeExports.jsx(Zap,{size:20,style:{color:"rgb(var(--accent))"}})}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-black",style:{color:"rgb(var(--text))"},children:e.grade9SpeedCount}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Grade 9 Speed"})]})]})]})]})}function StreakWidget({streak:e,attempts:i}){const[o,d]=reactExports.useState("");reactExports.useEffect(()=>{const $=()=>{const et=new Date,tt=new Date;tt.setHours(24,0,0,0);const rt=tt.getTime()-et.getTime(),nt=Math.floor(rt/(1e3*60*60)),it=Math.floor(rt%(1e3*60*60)/(1e3*60));d(`${nt}h ${it}m`)};$();const _e=setInterval($,6e4);return()=>clearInterval(_e)},[]);const h=()=>{const $=[],_e=new Date;for(let et=13;et>=0;et--){const tt=new Date(_e);tt.setDate(tt.getDate()-et),$.push(tt)}return $},g=$=>{const _e=$.toDateString();return i.some(et=>new Date(et.finishedAt).toDateString()===_e)},b=$=>$.toDateString()===new Date().toDateString(),j=h(),_=Math.min(e.currentStreakDays/30,1);return jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black mb-2",style:{color:"rgb(var(--text))"},children:"Streak & Discipline"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Keep your momentum going"})]}),jsxRuntimeExports.jsx(motion.div,{animate:{filter:`drop-shadow(0 0 ${_*20}px rgb(var(--accent)))`},className:"relative",children:jsxRuntimeExports.jsx(Flame,{size:48,style:{color:"rgb(var(--accent))"}})})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-6 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:"rgb(var(--text-secondary))"},children:"Current Streak"}),jsxRuntimeExports.jsx("p",{className:"text-5xl font-black text-gradient mb-1",children:e.currentStreakDays}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"days"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-6 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:"rgb(var(--text-secondary))"},children:"Best Streak"}),jsxRuntimeExports.jsx("p",{className:"text-5xl font-black",style:{color:"rgb(var(--text))"},children:e.bestStreakDays}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"days"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl mb-6",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-bold",style:{color:"rgb(var(--text))"},children:"14-Day Activity"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold",style:{color:"rgb(var(--text-secondary))"},children:[jsxRuntimeExports.jsx(Clock,{size:14}),jsxRuntimeExports.jsxs("span",{children:["Resets in ",o]})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-7 gap-2",children:j.map(($,_e)=>{const et=g($),tt=b($);return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:_e*.02},className:"flex flex-col items-center gap-1",children:[jsxRuntimeExports.jsx("div",{className:`w-full aspect-square rounded-xl transition-all ${tt?"ring-2":""}`,style:{background:et?"var(--gradient-primary)":"rgb(var(--surface))",ringColor:tt?"rgb(var(--accent))":"transparent"},title:$.toLocaleDateString()}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-semibold",style:{color:"rgb(var(--text-secondary))"},children:$.getDate()})]},_e)})})]}),jsxRuntimeExports.jsx("div",{className:"text-center p-4 rounded-xl",style:{background:"rgba(var(--accent), 0.1)"},children:jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--accent))"},children:"Complete one quiz today to keep your streak alive"})})]})}function MasteryProgressCard({masteryStates:e,profile:i,onViewHeatmap:o}){const d=Object.values(e),h={0:d.filter(_e=>_e.masteryLevel===0).length,1:d.filter(_e=>_e.masteryLevel===1).length,2:d.filter(_e=>_e.masteryLevel===2).length,3:d.filter(_e=>_e.masteryLevel===3).length,4:d.filter(_e=>_e.masteryLevel===4).length},g=d.length||1,b=h[3]+h[4],j=h[4],_=["rgb(150, 150, 150)","rgb(251, 146, 60)","rgb(250, 204, 21)","rgb(34, 197, 94)","rgb(var(--accent))"],$=["Not Started","Learning","Secure","Mastered","Grade 9 Speed"];return jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black mb-2",style:{color:"rgb(var(--text))"},children:"Mastery Progress"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Your training progression"})]}),jsxRuntimeExports.jsx("button",{onClick:o,className:"px-4 py-2 rounded-xl font-semibold text-sm transition-all hover:scale-105",style:{background:"rgb(var(--surface-2))",color:"rgb(var(--text))"},children:"View Heatmap"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold mb-2",children:[jsxRuntimeExports.jsx("span",{style:{color:"rgb(var(--text-secondary))"},children:"Mastery Distribution"}),jsxRuntimeExports.jsxs("span",{style:{color:"rgb(var(--text))"},children:[d.length," quizzes"]})]}),jsxRuntimeExports.jsx("div",{className:"h-8 rounded-full overflow-hidden flex",style:{background:"rgb(var(--surface-2))"},children:Object.entries(h).map(([_e,et],tt)=>{const rt=et/g*100;return rt===0?null:jsxRuntimeExports.jsx(motion.div,{initial:{width:0},animate:{width:`${rt}%`},transition:{duration:.8,delay:tt*.1},className:"h-full flex items-center justify-center text-xs font-bold text-white",style:{background:_[parseInt(_e)]},title:`${$[parseInt(_e)]}: ${et}`,children:et>0&&et},_e)})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-5 gap-2 text-xs",children:$.map((_e,et)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded",style:{background:_[et]}}),jsxRuntimeExports.jsx("span",{className:"font-semibold truncate",style:{color:"rgb(var(--text-secondary))"},children:_e})]},et))})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl text-center",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-3",children:jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl",style:{background:"rgba(34, 197, 94, 0.1)"},children:jsxRuntimeExports.jsx(Award,{size:24,style:{color:"rgb(34, 197, 94)"}})})}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-black mb-1",style:{color:"rgb(var(--text))"},children:b}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Mastered"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl text-center",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-3",children:jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl",style:{background:"rgba(var(--accent), 0.1)"},children:jsxRuntimeExports.jsx(Zap,{size:24,style:{color:"rgb(var(--accent))"}})})}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-black mb-1",style:{color:"rgb(var(--text))"},children:j}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Grade 9 Speed"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl text-center",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-3",children:jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl",style:{background:"rgba(59, 130, 246, 0.1)"},children:jsxRuntimeExports.jsx(Target,{size:24,style:{color:"rgb(59, 130, 246)"}})})}),jsxRuntimeExports.jsxs("p",{className:"text-3xl font-black mb-1",style:{color:"rgb(var(--text))"},children:[Math.round(b/g*100),"%"]}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Completion"})]})]})]})}function BadgeCard({badge:e}){const i={common:"rgb(156, 163, 175)",rare:"rgb(59, 130, 246)",epic:"rgb(168, 85, 247)",legendary:"rgb(251, 146, 60)"},o={common:"linear-gradient(135deg, rgb(156, 163, 175) 0%, rgb(107, 114, 128) 100%)",rare:"linear-gradient(135deg, rgb(59, 130, 246) 0%, rgb(37, 99, 235) 100%)",epic:"linear-gradient(135deg, rgb(168, 85, 247) 0%, rgb(126, 34, 206) 100%)",legendary:"linear-gradient(135deg, rgb(251, 146, 60) 0%, rgb(249, 115, 22) 100%)"},h={"first-quiz":Star,"first-mastered":Award,"grade9-speed":Zap,"7-day-streak":Flame,"10-quizzes":Trophy,"100-percent":Target}[e.id]||Trophy;return jsxRuntimeExports.jsxs(motion.div,{whileHover:e.earned?{scale:1.05,y:-4}:{},className:`relative rounded-2xl p-6 transition-all ${e.earned?"cursor-pointer":"opacity-60"}`,style:{background:e.earned?"rgb(var(--surface-2))":"rgb(var(--surface))",border:`2px solid ${e.earned?i[e.rarity]:"rgb(var(--border))"}`},children:[e.earned&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-10",style:{background:o[e.rarity]}}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-4",children:[jsxRuntimeExports.jsx(motion.div,{animate:e.earned?{rotate:[0,-10,10,-10,0]}:{},transition:{duration:.5,repeat:e.earned?1/0:0,repeatDelay:3},className:"w-16 h-16 rounded-2xl flex items-center justify-center text-white",style:{background:e.earned?o[e.rarity]:"rgb(var(--surface-2))"},children:e.earned?jsxRuntimeExports.jsx(h,{size:32}):jsxRuntimeExports.jsx(Lock,{size:32,style:{color:"rgb(var(--text-secondary))"}})}),jsxRuntimeExports.jsx("div",{className:"px-2 py-1 rounded-lg text-xs font-bold uppercase tracking-wider",style:{background:e.earned?`${i[e.rarity]}20`:"rgb(var(--surface-2))",color:e.earned?i[e.rarity]:"rgb(var(--text-secondary))"},children:e.rarity})]}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-black mb-2",style:{color:"rgb(var(--text))"},children:e.name}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold mb-4",style:{color:"rgb(var(--text-secondary))"},children:e.description}),!e.earned&&e.progress!==void 0&&e.progressMax!==void 0&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs font-semibold",children:[jsxRuntimeExports.jsx("span",{style:{color:"rgb(var(--text-secondary))"},children:"Progress"}),jsxRuntimeExports.jsxs("span",{style:{color:"rgb(var(--text))"},children:[e.progress," / ",e.progressMax]})]}),jsxRuntimeExports.jsx("div",{className:"h-2 rounded-full overflow-hidden",style:{background:"rgb(var(--surface-2))"},children:jsxRuntimeExports.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${e.progress/e.progressMax*100}%`,background:i[e.rarity]}})})]})]})]})}function BadgeGrid({profile:e,streak:i,attempts:o}){const[d,h]=reactExports.useState("badges"),g=[{id:"first-quiz",name:"First Steps",description:"Complete your first quiz",earned:o.length>0,rarity:"common",progress:o.length>0?1:0,progressMax:1},{id:"first-mastered",name:"Mastery Achieved",description:"Master your first quiz",earned:e.badges.includes("First Mastered"),rarity:"rare",progress:e.masteredCount,progressMax:1},{id:"grade9-speed",name:"Grade 9 Speed",description:"Achieve Grade 9 speed on any quiz",earned:e.badges.includes("Grade 9 Speed"),rarity:"epic",progress:e.grade9SpeedCount,progressMax:1},{id:"7-day-streak",name:"7 Day Warrior",description:"Maintain a 7-day streak",earned:i.bestStreakDays>=7,rarity:"epic",progress:Math.min(i.currentStreakDays,7),progressMax:7},{id:"10-quizzes",name:"Quiz Master",description:"Complete 10 quizzes",earned:e.totalQuizzes>=10,rarity:"rare",progress:Math.min(e.totalQuizzes,10),progressMax:10},{id:"100-percent",name:"Perfect Score",description:"Get 100% on any quiz",earned:o.some(_=>_.accuracyPct===100&&_.correctPromptIds&&_.correctPromptIds.length>0),rarity:"legendary"}],b=g.filter(_=>_.earned),j=g.filter(_=>!_.earned);return jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black mb-2",style:{color:"rgb(var(--text))"},children:"Achievements"}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:[b.length," of ",g.length," unlocked"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 p-1 rounded-xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("badges"),className:"px-4 py-2 rounded-lg font-semibold text-sm transition-all",style:{background:d==="badges"?"var(--gradient-primary)":"transparent",color:d==="badges"?"white":"rgb(var(--text))"},children:"Badges"}),jsxRuntimeExports.jsx("button",{onClick:()=>h("trophies"),className:"px-4 py-2 rounded-lg font-semibold text-sm transition-all",style:{background:d==="trophies"?"var(--gradient-primary)":"transparent",color:d==="trophies"?"white":"rgb(var(--text))"},children:"Trophies"})]})]}),d==="badges"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[b.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold mb-4",style:{color:"rgb(var(--text-secondary))"},children:"EARNED"}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(_=>jsxRuntimeExports.jsx(BadgeCard,{badge:_},_.id))})]}),j.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold mb-4",style:{color:"rgb(var(--text-secondary))"},children:"LOCKED"}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(_=>jsxRuntimeExports.jsx(BadgeCard,{badge:_},_.id))})]}),b.length===0&&jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold mb-2",style:{color:"rgb(var(--text-secondary))"},children:"No badges earned yet"}),jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:"rgb(var(--text-secondary))"},children:"Complete quizzes to unlock your first badge"})]})]}),d==="trophies"&&jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold mb-2",style:{color:"rgb(var(--text-secondary))"},children:"Trophies coming soon"}),jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:"rgb(var(--text-secondary))"},children:"Complete subject milestones to earn trophies"})]})]})}function PersonalBestsCard({attempts:e}){const i=e.length>0?Math.min(...e.map(b=>b.timeTakenSec)):null,o=e.length>0?Math.max(...e.map(b=>b.accuracyPct)):null,d=e.filter(b=>b.accuracyPct===100).length,g=[{icon:Clock,label:"Fastest Quiz",value:i?(b=>{const j=Math.floor(b/60),_=b%60;return`${j}:${_.toString().padStart(2,"0")}`})(i):"--",color:"rgb(59, 130, 246)",bgColor:"rgba(59, 130, 246, 0.1)"},{icon:Target,label:"Highest Accuracy",value:o?`${o}%`:"--",color:"rgb(34, 197, 94)",bgColor:"rgba(34, 197, 94, 0.1)"},{icon:Trophy,label:"Perfect Runs",value:d>0?d:"--",color:"rgb(251, 146, 60)",bgColor:"rgba(251, 146, 60, 0.1)"}];return jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black mb-2",style:{color:"rgb(var(--text))"},children:"Personal Bests"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Your top achievements"})]}),e.length>0?jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:g.map((b,j)=>{const _=b.icon;return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:j*.1},className:"p-6 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl",style:{background:b.bgColor},children:jsxRuntimeExports.jsx(_,{size:24,style:{color:b.color}})})}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-black text-center mb-2",style:{color:"rgb(var(--text))"},children:b.value}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-center",style:{color:"rgb(var(--text-secondary))"},children:b.label})]},b.label)})}):jsxRuntimeExports.jsxs("div",{className:"text-center py-12 px-6 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx("div",{className:"p-4 rounded-2xl",style:{background:"rgba(var(--accent), 0.1)"},children:jsxRuntimeExports.jsx(Zap,{size:32,style:{color:"rgb(var(--accent))"}})})}),jsxRuntimeExports.jsx("p",{className:"text-lg font-bold mb-2",style:{color:"rgb(var(--text))"},children:"No records yet"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Complete a quiz to set your first personal best"})]})]})}function SettingsCard({theme:e,onThemeChange:i}){const[o,d]=reactExports.useState(!1),h=()=>{storage.resetAll(),d(!1),window.location.reload()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black mb-2",style:{color:"rgb(var(--text))"},children:"Settings"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Customize your experience"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-bold mb-1",style:{color:"rgb(var(--text))"},children:"Theme"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Switch between light and dark mode"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>i(e==="dark"?"light":"dark"),className:"relative w-16 h-8 rounded-full transition-all",style:{background:"rgb(var(--accent))"},children:jsxRuntimeExports.jsx("div",{className:"absolute top-1 left-1 w-6 h-6 rounded-full bg-white flex items-center justify-center transition-transform",style:{transform:e==="dark"?"translateX(32px)":"translateX(0)"},children:e==="dark"?jsxRuntimeExports.jsx(Moon,{size:14}):jsxRuntimeExports.jsx(Sun,{size:14})})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl border-2",style:{background:"rgba(239, 68, 68, 0.05)",borderColor:"rgb(239, 68, 68)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg",style:{background:"rgba(239, 68, 68, 0.1)"},children:jsxRuntimeExports.jsx(AlertTriangle,{size:24,style:{color:"rgb(239, 68, 68)"}})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"font-bold mb-1",style:{color:"rgb(239, 68, 68)"},children:"Danger Zone"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Reset all progress and start fresh. This action cannot be undone."})]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-bold transition-all hover:scale-105",style:{background:"rgb(239, 68, 68)",color:"white"},children:[jsxRuntimeExports.jsx(RotateCcw,{size:18}),jsxRuntimeExports.jsx("span",{children:"Reset All Data"})]})]})]})]}),o&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8 max-w-md w-full shadow-2xl",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-6",children:jsxRuntimeExports.jsx("div",{className:"p-4 rounded-2xl",style:{background:"rgba(239, 68, 68, 0.1)"},children:jsxRuntimeExports.jsx(AlertTriangle,{size:48,style:{color:"rgb(239, 68, 68)"}})})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-black text-center mb-3",style:{color:"rgb(var(--text))"},children:"Reset All Data?"}),jsxRuntimeExports.jsx("p",{className:"text-center mb-8 font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"This will permanently delete all your progress, attempts, streaks, and achievements. This action cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:h,className:"flex-1 px-6 py-4 rounded-xl font-bold transition-all hover:scale-105",style:{background:"rgb(239, 68, 68)",color:"white"},children:"Yes, Reset Everything"}),jsxRuntimeExports.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-6 py-4 rounded-xl font-bold transition-all hover:scale-105",style:{background:"rgb(var(--surface-2))",color:"rgb(var(--text))"},children:"Cancel"})]})]})})]})}function ProfilePage(){const e=useNavigate(),[i,o]=reactExports.useState(storage.getTheme()),d=storage.getProfile(),h=storage.getStreak(),g=storage.getAttempts(),b=storage.getAllMasteryStates();reactExports.useEffect(()=>{i==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),storage.setTheme(i)},[i]);const _=(()=>{const _e=Object.values(b);if(_e.length===0)return 0;const et=_e.filter(tt=>tt.masteryLevel>=3).length;return Math.round(et/_e.length*100)})(),$=()=>{e("/subjects")};return jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[jsxRuntimeExports.jsx(ProfileHeaderCard,{profile:d,streak:h,grade9ReadinessPct:_}),jsxRuntimeExports.jsx("button",{onClick:()=>e("/profile/subjects"),className:"w-full rounded-3xl p-8 transition-all hover:scale-[1.02]",style:{background:"rgb(var(--surface))"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"p-4 rounded-2xl",style:{background:"rgba(var(--accent), 0.1)"},children:jsxRuntimeExports.jsx(BarChart3,{size:32,style:{color:"rgb(var(--accent))"}})}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black mb-1",style:{color:"rgb(var(--text))"},children:"Subject Breakdown"}),jsxRuntimeExports.jsx("p",{className:"text-base font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"View detailed analytics for each subject"})]})]}),jsxRuntimeExports.jsx(ArrowRight,{size:32,style:{color:"rgb(var(--accent))"}})]})}),jsxRuntimeExports.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsx(StreakWidget,{streak:h,attempts:g}),jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsx(MasteryProgressCard,{masteryStates:b,profile:d,onViewHeatmap:$})})]}),jsxRuntimeExports.jsx(PersonalBestsCard,{attempts:g}),jsxRuntimeExports.jsx(BadgeGrid,{profile:d,streak:h,attempts:g}),jsxRuntimeExports.jsx(SettingsCard,{theme:i,onThemeChange:o})]})}const calculateSubjectStats=(e,i,o,d)=>{const h=i.filter(tt=>tt.subjectId===e),g=d.filter(tt=>h.some(rt=>rt.id===tt.quizId)),b={0:0,1:0,2:0,3:0,4:0};h.forEach(tt=>{const rt=o[tt.id];rt?b[rt.masteryLevel]++:b[0]++});const j=h.length||1,_=b[3]+b[4],$=Math.round(_/j*100),_e=Math.round(g.reduce((tt,rt)=>tt+rt.timeTakenSec,0)/60),et=g.length*50;return{subjectId:e,grade9ReadinessPct:$,totalQuizzes:h.length,unseenCount:b[0],learningCount:b[1],secureCount:b[2],masteredCount:b[3],grade9SpeedCount:b[4],weakestTopic:null,totalAttempts:g.length,totalTimeMinutes:_e,xpEarned:et}},calculateTopicStats=(e,i,o,d)=>e.map(h=>{const g=i.filter(tt=>tt.topicId===h.id),b=d.filter(tt=>g.some(rt=>rt.id===tt.quizId));let j=0,_=0,$=0;g.forEach(tt=>{const rt=o[tt.id];rt&&(j+=rt.masteryLevel,rt.masteryLevel>=3&&_++,rt.masteryLevel===4&&$++)});const _e=g.length>0?j/g.length:0,et=b.length>0?Math.min(...b.map(tt=>tt.timeTakenSec)):null;return{topicId:h.id,topicName:h.name,quizCount:g.length,avgMastery:_e,masteredCount:_,grade9SpeedCount:$,fastestTime:et}}),calculateUnitStats=(e,i,o,d)=>e.map(h=>{const g=i.filter(tt=>tt.unitId===h.id),b=o.filter(tt=>tt.unitId===h.id);let j=0;b.forEach(tt=>{const rt=d[tt.id];rt&&rt.masteryLevel>=3&&j++});const _=b.length||1,$=Math.round(j/_*100),_e=calculateTopicStats(g,o,d,[]),et=_e.length>0?_e.reduce((tt,rt)=>rt.avgMastery<tt.avgMastery?rt:tt):null;return{unitId:h.id,unitName:h.name,readinessPct:$,totalQuizzes:b.length,masteredCount:j,weakestTopic:et?{topicId:et.topicId,topicName:et.topicName}:null}}),findMostImproved=(e,i)=>{const o=[];return e.forEach(d=>{const h=i.filter(g=>g.quizId===d.id).sort((g,b)=>new Date(g.finishedAt).getTime()-new Date(b.finishedAt).getTime());if(h.length>=2){const g=h[0],b=h[h.length-1],j=g.timeTakenSec-b.timeTakenSec;j>10&&o.push({quizId:d.id,quizTitle:d.title,improvementType:"time",before:g.timeTakenSec,after:b.timeTakenSec,delta:j});const _=b.accuracyPct-g.accuracyPct;_>5&&o.push({quizId:d.id,quizTitle:d.title,improvementType:"accuracy",before:g.accuracyPct,after:b.accuracyPct,delta:_})}}),o.sort((d,h)=>h.delta-d.delta)},getRecommendedQuiz=(e,i)=>{const o=e.filter(g=>!i[g.id]);if(o.length>0)return{quiz:o[0],reason:"Unseen"};const d=e.filter(g=>{var b;return((b=i[g.id])==null?void 0:b.masteryLevel)===1});if(d.length>0)return{quiz:d[0],reason:"Needs practice"};const h=e.filter(g=>{const b=i[g.id];return b&&b.masteryLevel===2});return h.length>0?{quiz:h[0],reason:"Needs speed"}:e.length>0?{quiz:e[0],reason:"Keep practicing"}:null};function SubjectBreakdownHub(){const e=useNavigate(),[i,o]=reactExports.useState([]),[d,h]=reactExports.useState([]),[g,b]=reactExports.useState({}),[j,_]=reactExports.useState(!0),[$,_e]=reactExports.useState("weakest"),et=storage.getAllMasteryStates(),tt=storage.getAttempts();reactExports.useEffect(()=>{rt()},[]);const rt=async()=>{try{_(!0);const[st,at]=await Promise.all([db.getSubjects(),Promise.all((await db.getSubjects()).map(lt=>db.getQuizzesBySubject(lt.id))).then(lt=>lt.flat())]);o(st),h(at);const ot={};st.forEach(lt=>{ot[lt.id]=calculateSubjectStats(lt.id,at,et,tt)}),b(ot)}catch(st){console.error("Error loading subject breakdown:",st)}finally{_(!1)}},it=(()=>{const st=[...i];switch($){case"readiness-desc":return st.sort((at,ot)=>{var lt,ct;return(((lt=g[ot.id])==null?void 0:lt.grade9ReadinessPct)||0)-(((ct=g[at.id])==null?void 0:ct.grade9ReadinessPct)||0)});case"readiness-asc":return st.sort((at,ot)=>{var lt,ct;return(((lt=g[at.id])==null?void 0:lt.grade9ReadinessPct)||0)-(((ct=g[ot.id])==null?void 0:ct.grade9ReadinessPct)||0)});case"weakest":return st.sort((at,ot)=>{var lt,ct;return(((lt=g[at.id])==null?void 0:lt.grade9ReadinessPct)||0)-(((ct=g[ot.id])==null?void 0:ct.grade9ReadinessPct)||0)});default:return st}})();return j?jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-32 mb-8"}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(st=>jsxRuntimeExports.jsx(Skeleton,{className:"h-64"},st))})]}):i.length===0?jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"text-center py-20 px-6 rounded-3xl",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-6",children:jsxRuntimeExports.jsx("div",{className:"p-4 rounded-2xl",style:{background:"rgba(var(--accent), 0.1)"},children:jsxRuntimeExports.jsx(BarChart3,{size:48,style:{color:"rgb(var(--accent))"}})})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black mb-3",style:{color:"rgb(var(--text))"},children:"No subjects available"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold mb-6",style:{color:"rgb(var(--text-secondary))"},children:"Contact your administrator to add subjects"})]})}):jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-black mb-3",style:{color:"rgb(var(--text))"},children:"Subject Breakdown"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"See your strongest and weakest areas"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-bold",style:{color:"rgb(var(--text-secondary))"},children:"Sort by:"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:[{value:"weakest",label:"Weakest First",icon:TrendingDown},{value:"readiness-asc",label:"Readiness (Low)",icon:Target},{value:"readiness-desc",label:"Readiness (High)",icon:TrendingUp}].map(st=>{const at=st.icon;return jsxRuntimeExports.jsxs("button",{onClick:()=>_e(st.value),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-sm transition-all",style:{background:$===st.value?"var(--gradient-primary)":"rgb(var(--surface-2))",color:$===st.value?"white":"rgb(var(--text))"},children:[jsxRuntimeExports.jsx(at,{size:16}),jsxRuntimeExports.jsx("span",{children:st.label})]},st.value)})})]}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:it.map((st,at)=>{const ot=g[st.id];return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:at*.05},onClick:()=>e(`/profile/subjects/${st.id}`),className:"rounded-3xl p-6 cursor-pointer transition-all hover:scale-105",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between mb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center text-2xl",style:{background:`${st.themeColor}20`},children:st.icon}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-black",style:{color:"rgb(var(--text))"},children:st.name}),jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold",style:{color:"rgb(var(--text-secondary))"},children:st.examBoard})]})]})}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-bold",style:{color:"rgb(var(--text-secondary))"},children:"Grade 9 Readiness"}),jsxRuntimeExports.jsxs("span",{className:"text-2xl font-black text-gradient",children:[(ot==null?void 0:ot.grade9ReadinessPct)||0,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"h-3 rounded-full overflow-hidden flex",style:{background:"rgb(var(--surface-2))"},children:[0,1,2,3,4].map(lt=>{const ct=lt===0?(ot==null?void 0:ot.unseenCount)||0:lt===1?(ot==null?void 0:ot.learningCount)||0:lt===2?(ot==null?void 0:ot.secureCount)||0:lt===3?(ot==null?void 0:ot.masteredCount)||0:(ot==null?void 0:ot.grade9SpeedCount)||0,ut=(ot==null?void 0:ot.totalQuizzes)||1,dt=ct/ut*100,mt=["rgb(150, 150, 150)","rgb(251, 146, 60)","rgb(250, 204, 21)","rgb(34, 197, 94)","rgb(var(--accent))"];return dt===0?null:jsxRuntimeExports.jsx("div",{className:"h-full",style:{width:`${dt}%`,background:mt[lt]}},lt)})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-black mb-1",style:{color:"rgb(var(--text))"},children:(ot==null?void 0:ot.masteredCount)||0}),jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Mastered"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-black mb-1",style:{color:"rgb(var(--text))"},children:(ot==null?void 0:ot.grade9SpeedCount)||0}),jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Grade 9 Speed"})]})]}),jsxRuntimeExports.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-bold transition-all hover:scale-105",style:{background:"var(--gradient-primary)",color:"white"},children:[jsxRuntimeExports.jsx("span",{children:"View Breakdown"}),jsxRuntimeExports.jsx(ArrowRight,{size:18})]})]},st.id)})})]})}function TrainingStrip({aggregates:e,selectedDate:i,onSelectDate:o}){const d=j=>j===0?"transparent":j<=2?"rgba(var(--accent), 0.3)":j<=5?"rgba(var(--accent), 0.6)":"rgb(var(--accent))",h=j=>j===0?"2px solid rgba(var(--text-secondary), 0.2)":"none",g=j=>new Date(j).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),b=j=>new Date(j).toLocaleDateString("en-GB",{weekday:"short"});return jsxRuntimeExports.jsx("div",{className:"overflow-x-auto pb-4",children:jsxRuntimeExports.jsx("div",{className:"flex gap-2 min-w-max",children:e.map((j,_)=>jsxRuntimeExports.jsxs(motion.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.02},onClick:()=>o(j.date),className:"relative flex flex-col items-center gap-2 group",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-bold",style:{color:"rgb(var(--text-secondary))"},children:b(j.date)}),jsxRuntimeExports.jsxs("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center relative transition-all group-hover:scale-110",style:{background:d(j.attemptsCount),border:h(j.attemptsCount),transform:i===j.date?"scale(1.15)":"scale(1)",boxShadow:i===j.date?"0 0 0 3px rgba(var(--accent), 0.3)":"none"},children:[j.attemptsCount>0&&jsxRuntimeExports.jsx("span",{className:"text-sm font-black",style:{color:"white"},children:j.attemptsCount}),j.grade9SpeedCount>0&&jsxRuntimeExports.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center",style:{background:"rgb(var(--accent))"},children:jsxRuntimeExports.jsx(Crown,{size:12,color:"white"})}),j.masteryUpgrades>0&&j.grade9SpeedCount===0&&jsxRuntimeExports.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center",style:{background:"rgb(34, 197, 94)"},children:jsxRuntimeExports.jsx(Star,{size:12,color:"white"})}),j.fullGcseAttempted&&jsxRuntimeExports.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center",style:{background:"rgb(var(--accent))"},children:jsxRuntimeExports.jsx(Flag,{size:12,color:"white"})})]}),jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold",style:{color:"rgb(var(--text-secondary))"},children:g(j.date).split(" ")[0]}),j.attemptsCount>0&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 -z-10 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity p-2 mt-6",style:{background:"rgb(var(--surface-2))",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",width:"200px",transform:"translateX(-50%) translateX(28px)",pointerEvents:"none",marginTop:"80px"},children:jsxRuntimeExports.jsxs("div",{className:"text-left space-y-1 p-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-bold",style:{color:"rgb(var(--text))"},children:g(j.date)}),jsxRuntimeExports.jsxs("p",{className:"text-xs font-semibold",style:{color:"rgb(var(--text-secondary))"},children:[j.attemptsCount," attempt",j.attemptsCount!==1?"s":""]}),j.bestAccuracy>0&&jsxRuntimeExports.jsxs("p",{className:"text-xs font-semibold",style:{color:"rgb(var(--text-secondary))"},children:["Best: ",Math.round(j.bestAccuracy),"%"]}),j.masteryUpgrades>0&&jsxRuntimeExports.jsxs("p",{className:"text-xs font-semibold",style:{color:"rgb(34, 197, 94)"},children:["+",j.masteryUpgrades," mastery upgrade",j.masteryUpgrades!==1?"s":""]}),j.grade9SpeedCount>0&&jsxRuntimeExports.jsxs("p",{className:"text-xs font-semibold",style:{color:"rgb(var(--accent))"},children:[j.grade9SpeedCount," Grade 9 Speed"]})]})})]},j.date))})})}const getLondonDate=e=>e.toLocaleDateString("en-GB",{timeZone:"Europe/London",year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-"),getDayBoundaries=e=>{const i=new Date(e+"T00:00:00"),o=new Date(e+"T23:59:59.999");return{startOfDay:i,endOfDay:o}},calculateReadinessForDay=(e,i,o)=>{if(e.length===0)return 0;const d=e.filter(h=>{const g=o[h.id];return g&&g.masteryLevel>=3}).length;return Math.round(d/e.length*100)},calculateDailyAggregates=(e,i,o,d)=>{const h=i.filter(_=>_.subjectId===e),g=o.filter(_=>h.some($=>$.id===_.quizId)),b=[],j=new Date;for(let _=d-1;_>=0;_--){const $=new Date(j);$.setDate($.getDate()-_);const _e=getLondonDate($),{startOfDay:et,endOfDay:tt}=getDayBoundaries(_e),rt=g.filter(dt=>{const mt=new Date(dt.finishedAt);return mt>=et&&mt<=tt}),nt=g.filter(dt=>new Date(dt.finishedAt)<=tt),it={};h.forEach(dt=>{const mt=nt.filter(xt=>xt.quizId===dt.id);if(mt.length>0){const xt=Math.max(...mt.map(pt=>pt.accuracyPct)),ft=Math.min(...mt.map(pt=>pt.timeTakenSec));let gt=0;xt===100&&ft<=dt.grade9TargetSec?gt=4:xt===100?gt=3:xt>=85?gt=2:gt=1,it[dt.id]={quizId:dt.id,bestAccuracyPct:xt,bestTimeSec:ft,masteryLevel:gt,lastPlayedAt:mt[mt.length-1].finishedAt}}});const st=calculateReadinessForDay(h,nt,it),at=rt.length>0?Math.max(...rt.map(dt=>dt.accuracyPct)):0,ot=rt.length>0?Math.min(...rt.map(dt=>dt.timeTakenSec)):null;let lt=0;rt.forEach(dt=>{const mt=h.find(ft=>ft.id===dt.quizId);if(!mt)return;const xt=g.filter(ft=>ft.quizId===dt.quizId&&new Date(ft.finishedAt)<new Date(dt.finishedAt));if(xt.length>0){const ft=Math.max(...xt.map(bt=>bt.accuracyPct)),gt=Math.min(...xt.map(bt=>bt.timeTakenSec));let pt=0;ft===100&&gt<=mt.grade9TargetSec?pt=4:ft===100?pt=3:ft>=85?pt=2:pt=1;let yt=0;dt.accuracyPct===100&&dt.timeTakenSec<=mt.grade9TargetSec?yt=4:dt.accuracyPct===100?yt=3:dt.accuracyPct>=85?yt=2:yt=1,yt>pt&&lt++}else dt.accuracyPct>=85&&lt++});const ct=rt.filter(dt=>{const mt=h.find(xt=>xt.id===dt.quizId);return mt&&dt.accuracyPct===100&&dt.timeTakenSec<=mt.grade9TargetSec}).length,ut=rt.some(dt=>{const mt=h.find(xt=>xt.id===dt.quizId);return mt&&mt.scopeType==="full"});b.push({date:_e,dateObj:$,attemptsCount:rt.length,bestAccuracy:at,bestTime:ot,masteryUpgrades:lt,grade9SpeedCount:ct,fullGcseAttempted:ut,attempts:rt,readinessPct:st})}return b},getQuizRuns=(e,i,o)=>{const d=[];return e.forEach(h=>{const g=i.find($=>$.id===h.quizId);if(!g)return;const b=g.grade9TargetSec-h.timeTakenSec,j=o.filter($=>$.quizId===h.quizId&&new Date($.finishedAt)<new Date(h.finishedAt));let _;if(j.length>0){const $=Math.max(...j.map(rt=>rt.accuracyPct)),_e=Math.min(...j.map(rt=>rt.timeTakenSec));let et=0;$===100&&_e<=g.grade9TargetSec?et=4:$===100?et=3:$>=85?et=2:et=1;let tt=0;h.accuracyPct===100&&h.timeTakenSec<=g.grade9TargetSec?tt=4:h.accuracyPct===100?tt=3:h.accuracyPct>=85?tt=2:tt=1,tt>et&&(_={from:et,to:tt})}else h.accuracyPct>=85&&(_={from:0,to:h.accuracyPct===100&&h.timeTakenSec<=g.grade9TargetSec?4:h.accuracyPct===100?3:2});d.push({attempt:h,quiz:g,targetDelta:b,masteryChange:_})}),d.sort((h,g)=>g.attempt.accuracyPct-h.attempt.accuracyPct||h.attempt.timeTakenSec-g.attempt.timeTakenSec)},findBestDay=e=>e.length===0?null:e.reduce((i,o)=>{const d=o.grade9SpeedCount*10+o.masteryUpgrades*5+o.attemptsCount,h=i.grade9SpeedCount*10+i.masteryUpgrades*5+i.attemptsCount;return d>h?o:i}),findLongestStreak=e=>{let i=0,o=0;return e.forEach(d=>{d.attemptsCount>0?(i++,o=Math.max(o,i)):i=0}),o},findBiggestImprovements=(e,i,o)=>{let d=null,h=null;return e.forEach(g=>{const b=o.find(_=>_.id===g.quizId);if(!b)return;const j=i.filter(_=>_.quizId===g.quizId&&new Date(_.finishedAt)<new Date(g.finishedAt));if(j.length>0){const $=Math.min(...j.map(tt=>tt.timeTakenSec))-g.timeTakenSec;$>0&&(!d||$>d.delta)&&(d={quiz:b,delta:$});const _e=Math.max(...j.map(tt=>tt.accuracyPct)),et=g.accuracyPct-_e;et>0&&(!h||et>h.delta)&&(h={quiz:b,delta:et})}}),{timeImprovement:d,accuracyImprovement:h}};function DayDetailDrawer({day:e,quizzes:i,allAttempts:o,onClose:d}){const h=useNavigate();if(!e)return null;const g=getQuizRuns(e.attempts,i,o),{timeImprovement:b,accuracyImprovement:j}=findBiggestImprovements(e.attempts,o,i),_=rt=>new Date(rt).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),$=rt=>{const nt=Math.floor(rt/60),it=rt%60;return`${nt}:${it.toString().padStart(2,"0")}`},_e=rt=>rt===4?"Grade 9 Speed":rt===3?"Mastered":rt===2?"Secure":rt===1?"Learning":"Unseen",et=rt=>rt===4?"rgb(var(--accent))":rt===3?"rgb(34, 197, 94)":rt===2?"rgb(250, 204, 21)":rt===1?"rgb(251, 146, 60)":"rgb(150, 150, 150)",tt=rt=>{const nt={topic:{bg:"rgba(59, 130, 246, 0.1)",text:"rgb(59, 130, 246)"},unit:{bg:"rgba(34, 197, 94, 0.1)",text:"rgb(34, 197, 94)"},full:{bg:"rgba(var(--accent), 0.1)",text:"rgb(var(--accent))"}},it=nt[rt]||nt.topic;return jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-lg text-xs font-bold uppercase",style:{background:it.bg,color:it.text},children:rt})};return jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-end md:items-center md:justify-end",onClick:d,children:jsxRuntimeExports.jsx(motion.div,{initial:{y:"100%",x:0},animate:{y:0,x:0},exit:{y:"100%",x:0},transition:{type:"spring",damping:30,stiffness:300},className:"w-full md:w-[600px] md:h-full md:max-h-screen rounded-t-3xl md:rounded-none overflow-hidden",style:{background:"rgb(var(--surface))"},onClick:rt=>rt.stopPropagation(),children:jsxRuntimeExports.jsxs("div",{className:"h-full overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-10 p-6 flex items-center justify-between",style:{background:"rgb(var(--surface))",borderBottom:"1px solid rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black",style:{color:"rgb(var(--text))"},children:_(e.date)}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold mt-1",style:{color:"rgb(var(--text-secondary))"},children:"Training Log"})]}),jsxRuntimeExports.jsx("button",{onClick:d,className:"w-10 h-10 rounded-xl flex items-center justify-center transition-all hover:scale-105",style:{background:"rgb(var(--surface-2))"},children:jsxRuntimeExports.jsx(X,{size:20,style:{color:"rgb(var(--text))"}})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-2xl text-center",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-black mb-1",style:{color:"rgb(var(--text))"},children:e.attemptsCount}),jsxRuntimeExports.jsx("p",{className:"text-xs font-bold",style:{color:"rgb(var(--text-secondary))"},children:"Attempts"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-2xl text-center",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-black mb-1",style:{color:"rgb(var(--text))"},children:[Math.round(e.bestAccuracy),"%"]}),jsxRuntimeExports.jsx("p",{className:"text-xs font-bold",style:{color:"rgb(var(--text-secondary))"},children:"Best Accuracy"})]}),e.bestTime&&jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-2xl text-center",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-black mb-1",style:{color:"rgb(var(--text))"},children:$(e.bestTime)}),jsxRuntimeExports.jsx("p",{className:"text-xs font-bold",style:{color:"rgb(var(--text-secondary))"},children:"Best Time"})]}),e.masteryUpgrades>0&&jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-2xl text-center",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-black mb-1 text-gradient",children:["+",e.masteryUpgrades]}),jsxRuntimeExports.jsx("p",{className:"text-xs font-bold",style:{color:"rgb(var(--text-secondary))"},children:"Mastery Upgrades"})]})]}),(b||j)&&jsxRuntimeExports.jsxs("div",{className:"rounded-2xl p-6",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(TrendingUp,{size:20,style:{color:"rgb(var(--accent))"}}),jsxRuntimeExports.jsx("h3",{className:"font-black",style:{color:"rgb(var(--text))"},children:"Today's Gains"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[b&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-bold mb-1",style:{color:"rgb(var(--text))"},children:b.quiz.title}),jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Time improvement"})]}),jsxRuntimeExports.jsxs("div",{className:"px-3 py-1 rounded-lg font-bold text-sm",style:{background:"rgba(34, 197, 94, 0.1)",color:"rgb(34, 197, 94)"},children:["-",b.delta,"s"]})]}),j&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-bold mb-1",style:{color:"rgb(var(--text))"},children:j.quiz.title}),jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Accuracy improvement"})]}),jsxRuntimeExports.jsxs("div",{className:"px-3 py-1 rounded-lg font-bold text-sm",style:{background:"rgba(34, 197, 94, 0.1)",color:"rgb(34, 197, 94)"},children:["+",j.delta.toFixed(0),"%"]})]})]})]}),!b&&!j&&e.attemptsCount>0&&jsxRuntimeExports.jsxs("div",{className:"rounded-2xl p-6 text-center",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx(AlertCircle,{size:32,className:"mx-auto mb-3",style:{color:"rgb(var(--text-secondary))"}}),jsxRuntimeExports.jsx("p",{className:"font-bold mb-1",style:{color:"rgb(var(--text))"},children:"No PBs today"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Run it back tomorrow"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-black mb-4",style:{color:"rgb(var(--text))"},children:"Runs Today"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:g.map((rt,nt)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:nt*.05},className:"p-4 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between mb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("p",{className:"font-bold text-sm",style:{color:"rgb(var(--text))"},children:rt.quiz.title}),tt(rt.quiz.scopeType)]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-xs font-semibold",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Target,{size:14,style:{color:"rgb(var(--text-secondary))"}}),jsxRuntimeExports.jsxs("span",{style:{color:"rgb(var(--text))"},children:[Math.round(rt.attempt.accuracyPct),"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{size:14,style:{color:"rgb(var(--text-secondary))"}}),jsxRuntimeExports.jsx("span",{style:{color:"rgb(var(--text))"},children:$(rt.attempt.timeTakenSec)})]})]}),rt.targetDelta!==0&&jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold mt-2",style:{color:rt.targetDelta>0?"rgb(34, 197, 94)":"rgb(251, 146, 60)"},children:rt.targetDelta>0?`-${rt.targetDelta}s under target`:`+${Math.abs(rt.targetDelta)}s over target`}),rt.masteryChange&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded-lg",style:{background:`${et(rt.masteryChange.to)}20`,color:et(rt.masteryChange.to)},children:[_e(rt.masteryChange.from),"  ",_e(rt.masteryChange.to)]})})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>h(`/quiz/${rt.quiz.id}`),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-xl font-bold text-sm transition-all hover:scale-105",style:{background:"var(--gradient-primary)",color:"white"},children:[jsxRuntimeExports.jsx(Play,{size:14}),jsxRuntimeExports.jsx("span",{children:"Retry Quiz"})]}),rt.attempt.missedPromptIds&&rt.attempt.missedPromptIds.length>0&&jsxRuntimeExports.jsxs("button",{onClick:()=>h(`/quiz/${rt.quiz.id}?mode=fix-it&attemptId=${rt.attempt.id}`),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-xl font-bold text-sm transition-all hover:scale-105",style:{background:"rgb(var(--surface))",color:"rgb(var(--text))"},children:[jsxRuntimeExports.jsx(AlertCircle,{size:14}),jsxRuntimeExports.jsx("span",{children:"Fix-It"})]})]})]},`${rt.attempt.id}-${nt}`))})]})]})]})})})})}function r(e){var i,o,d="";if(typeof e=="string"||typeof e=="number")d+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(i=0;i<h;i++)e[i]&&(o=r(e[i]))&&(d&&(d+=" "),d+=o)}else for(o in e)e[o]&&(d&&(d+=" "),d+=o);return d}function clsx(){for(var e,i,o=0,d="",h=arguments.length;o<h;o++)(e=arguments[o])&&(i=r(e))&&(d&&(d+=" "),d+=i);return d}var EventKeys=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function isEventKey(e){if(typeof e!="string")return!1;var i=EventKeys;return i.includes(e)}var SVGElementPropKeys=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],SVGElementPropKeySet=new Set(SVGElementPropKeys);function isSvgElementPropKey(e){return typeof e!="string"?!1:SVGElementPropKeySet.has(e)}function isDataAttribute(e){return typeof e=="string"&&e.startsWith("data-")}function svgPropertiesNoEvents(e){if(typeof e!="object"||e===null)return{};var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(isSvgElementPropKey(o)||isDataAttribute(o))&&(i[o]=e[o]);return i}function svgPropertiesNoEventsFromUnknown(e){if(e==null)return null;if(reactExports.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var i=e.props;return svgPropertiesNoEvents(i)}return typeof e=="object"&&!Array.isArray(e)?svgPropertiesNoEvents(e):null}function svgPropertiesAndEvents(e){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(isSvgElementPropKey(o)||isDataAttribute(o)||isEventKey(o))&&(i[o]=e[o]);return i}function svgPropertiesAndEventsFromUnknown(e){return e==null?null:reactExports.isValidElement(e)?svgPropertiesAndEvents(e.props):typeof e=="object"&&!Array.isArray(e)?svgPropertiesAndEvents(e):null}var _excluded$l=["children","width","height","viewBox","className","style","title","desc"];function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$q.apply(null,arguments)}function _objectWithoutProperties$l(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$l(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$l(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}var Surface=reactExports.forwardRef((e,i)=>{var{children:o,width:d,height:h,viewBox:g,className:b,style:j,title:_,desc:$}=e,_e=_objectWithoutProperties$l(e,_excluded$l),et=g||{width:d,height:h,x:0,y:0},tt=clsx("recharts-surface",b);return reactExports.createElement("svg",_extends$q({},svgPropertiesAndEvents(_e),{className:tt,width:d,height:h,style:j,viewBox:"".concat(et.x," ").concat(et.y," ").concat(et.width," ").concat(et.height),ref:i}),reactExports.createElement("title",null,_),reactExports.createElement("desc",null,$),o)}),_excluded$k=["children","className"];function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$p.apply(null,arguments)}function _objectWithoutProperties$k(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$k(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$k(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}var Layer=reactExports.forwardRef((e,i)=>{var{children:o,className:d}=e,h=_objectWithoutProperties$k(e,_excluded$k),g=clsx("recharts-layer",d);return reactExports.createElement("g",_extends$p({className:g},svgPropertiesAndEvents(h),{ref:i}),o)}),LegendPortalContext=reactExports.createContext(null);function constant$1(e){return function(){return e}}const cos=Math.cos,sin=Math.sin,sqrt$1=Math.sqrt,pi$1=Math.PI,tau$1=2*pi$1,pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(e){this._+=e[0];for(let i=1,o=e.length;i<o;++i)this._+=arguments[i]+e[i]}function appendRound(e){let i=Math.floor(e);if(!(i>=0))throw new Error(`invalid digits: ${e}`);if(i>15)return append;const o=10**i;return function(d){this._+=d[0];for(let h=1,g=d.length;h<g;++h)this._+=Math.round(arguments[h]*o)/o+d[h]}}class Path{constructor(i){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=i==null?append:appendRound(i)}moveTo(i,o){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+o}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(i,o){this._append`L${this._x1=+i},${this._y1=+o}`}quadraticCurveTo(i,o,d,h){this._append`Q${+i},${+o},${this._x1=+d},${this._y1=+h}`}bezierCurveTo(i,o,d,h,g,b){this._append`C${+i},${+o},${+d},${+h},${this._x1=+g},${this._y1=+b}`}arcTo(i,o,d,h,g){if(i=+i,o=+o,d=+d,h=+h,g=+g,g<0)throw new Error(`negative radius: ${g}`);let b=this._x1,j=this._y1,_=d-i,$=h-o,_e=b-i,et=j-o,tt=_e*_e+et*et;if(this._x1===null)this._append`M${this._x1=i},${this._y1=o}`;else if(tt>epsilon)if(!(Math.abs(et*_-$*_e)>epsilon)||!g)this._append`L${this._x1=i},${this._y1=o}`;else{let rt=d-b,nt=h-j,it=_*_+$*$,st=rt*rt+nt*nt,at=Math.sqrt(it),ot=Math.sqrt(tt),lt=g*Math.tan((pi-Math.acos((it+tt-st)/(2*at*ot)))/2),ct=lt/ot,ut=lt/at;Math.abs(ct-1)>epsilon&&this._append`L${i+ct*_e},${o+ct*et}`,this._append`A${g},${g},0,0,${+(et*rt>_e*nt)},${this._x1=i+ut*_},${this._y1=o+ut*$}`}}arc(i,o,d,h,g,b){if(i=+i,o=+o,d=+d,b=!!b,d<0)throw new Error(`negative radius: ${d}`);let j=d*Math.cos(h),_=d*Math.sin(h),$=i+j,_e=o+_,et=1^b,tt=b?h-g:g-h;this._x1===null?this._append`M${$},${_e}`:(Math.abs(this._x1-$)>epsilon||Math.abs(this._y1-_e)>epsilon)&&this._append`L${$},${_e}`,d&&(tt<0&&(tt=tt%tau+tau),tt>tauEpsilon?this._append`A${d},${d},0,1,${et},${i-j},${o-_}A${d},${d},0,1,${et},${this._x1=$},${this._y1=_e}`:tt>epsilon&&this._append`A${d},${d},0,${+(tt>=pi)},${et},${this._x1=i+d*Math.cos(g)},${this._y1=o+d*Math.sin(g)}`)}rect(i,o,d,h){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+o}h${d=+d}v${+h}h${-d}Z`}toString(){return this._}}function withPath(e){let i=3;return e.digits=function(o){if(!arguments.length)return i;if(o==null)i=null;else{const d=Math.floor(o);if(!(d>=0))throw new RangeError(`invalid digits: ${o}`);i=d}return e},()=>new Path(i)}function array(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Linear(e){this._context=e}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,i){switch(e=+e,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break;case 1:this._point=2;default:this._context.lineTo(e,i);break}}};function curveLinear(e){return new Linear(e)}function x(e){return e[0]}function y(e){return e[1]}function shapeLine(e,i){var o=constant$1(!0),d=null,h=curveLinear,g=null,b=withPath(j);e=typeof e=="function"?e:e===void 0?x:constant$1(e),i=typeof i=="function"?i:i===void 0?y:constant$1(i);function j(_){var $,_e=(_=array(_)).length,et,tt=!1,rt;for(d==null&&(g=h(rt=b())),$=0;$<=_e;++$)!($<_e&&o(et=_[$],$,_))===tt&&((tt=!tt)?g.lineStart():g.lineEnd()),tt&&g.point(+e(et,$,_),+i(et,$,_));if(rt)return g=null,rt+""||null}return j.x=function(_){return arguments.length?(e=typeof _=="function"?_:constant$1(+_),j):e},j.y=function(_){return arguments.length?(i=typeof _=="function"?_:constant$1(+_),j):i},j.defined=function(_){return arguments.length?(o=typeof _=="function"?_:constant$1(!!_),j):o},j.curve=function(_){return arguments.length?(h=_,d!=null&&(g=h(d)),j):h},j.context=function(_){return arguments.length?(_==null?d=g=null:g=h(d=_),j):d},j}function shapeArea(e,i,o){var d=null,h=constant$1(!0),g=null,b=curveLinear,j=null,_=withPath($);e=typeof e=="function"?e:e===void 0?x:constant$1(+e),i=typeof i=="function"?i:constant$1(i===void 0?0:+i),o=typeof o=="function"?o:o===void 0?y:constant$1(+o);function $(et){var tt,rt,nt,it=(et=array(et)).length,st,at=!1,ot,lt=new Array(it),ct=new Array(it);for(g==null&&(j=b(ot=_())),tt=0;tt<=it;++tt){if(!(tt<it&&h(st=et[tt],tt,et))===at)if(at=!at)rt=tt,j.areaStart(),j.lineStart();else{for(j.lineEnd(),j.lineStart(),nt=tt-1;nt>=rt;--nt)j.point(lt[nt],ct[nt]);j.lineEnd(),j.areaEnd()}at&&(lt[tt]=+e(st,tt,et),ct[tt]=+i(st,tt,et),j.point(d?+d(st,tt,et):lt[tt],o?+o(st,tt,et):ct[tt]))}if(ot)return j=null,ot+""||null}function _e(){return shapeLine().defined(h).curve(b).context(g)}return $.x=function(et){return arguments.length?(e=typeof et=="function"?et:constant$1(+et),d=null,$):e},$.x0=function(et){return arguments.length?(e=typeof et=="function"?et:constant$1(+et),$):e},$.x1=function(et){return arguments.length?(d=et==null?null:typeof et=="function"?et:constant$1(+et),$):d},$.y=function(et){return arguments.length?(i=typeof et=="function"?et:constant$1(+et),o=null,$):i},$.y0=function(et){return arguments.length?(i=typeof et=="function"?et:constant$1(+et),$):i},$.y1=function(et){return arguments.length?(o=et==null?null:typeof et=="function"?et:constant$1(+et),$):o},$.lineX0=$.lineY0=function(){return _e().x(e).y(i)},$.lineY1=function(){return _e().x(e).y(o)},$.lineX1=function(){return _e().x(d).y(i)},$.defined=function(et){return arguments.length?(h=typeof et=="function"?et:constant$1(!!et),$):h},$.curve=function(et){return arguments.length?(b=et,g!=null&&(j=b(g)),$):b},$.context=function(et){return arguments.length?(et==null?g=j=null:j=b(g=et),$):g},$}class Bump{constructor(i,o){this._context=i,this._x=o}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(i,o){switch(i=+i,o=+o,this._point){case 0:{this._point=1,this._line?this._context.lineTo(i,o):this._context.moveTo(i,o);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+i)/2,this._y0,this._x0,o,i,o):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+o)/2,i,this._y0,i,o);break}}this._x0=i,this._y0=o}}function bumpX(e){return new Bump(e,!0)}function bumpY(e){return new Bump(e,!1)}const symbolCircle={draw(e,i){const o=sqrt$1(i/pi$1);e.moveTo(o,0),e.arc(0,0,o,0,tau$1)}},symbolCross={draw(e,i){const o=sqrt$1(i/5)/2;e.moveTo(-3*o,-o),e.lineTo(-o,-o),e.lineTo(-o,-3*o),e.lineTo(o,-3*o),e.lineTo(o,-o),e.lineTo(3*o,-o),e.lineTo(3*o,o),e.lineTo(o,o),e.lineTo(o,3*o),e.lineTo(-o,3*o),e.lineTo(-o,o),e.lineTo(-3*o,o),e.closePath()}},tan30=sqrt$1(1/3),tan30_2=tan30*2,symbolDiamond={draw(e,i){const o=sqrt$1(i/tan30_2),d=o*tan30;e.moveTo(0,-o),e.lineTo(d,0),e.lineTo(0,o),e.lineTo(-d,0),e.closePath()}},symbolSquare={draw(e,i){const o=sqrt$1(i),d=-o/2;e.rect(d,d,o,o)}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(e,i){const o=sqrt$1(i*ka),d=kx*o,h=ky*o;e.moveTo(0,-o),e.lineTo(d,h);for(let g=1;g<5;++g){const b=tau$1*g/5,j=cos(b),_=sin(b);e.lineTo(_*o,-j*o),e.lineTo(j*d-_*h,_*d+j*h)}e.closePath()}},sqrt3=sqrt$1(3),symbolTriangle={draw(e,i){const o=-sqrt$1(i/(sqrt3*3));e.moveTo(0,o*2),e.lineTo(-sqrt3*o,-o),e.lineTo(sqrt3*o,-o),e.closePath()}},c=-.5,s=sqrt$1(3)/2,k=1/sqrt$1(12),a=(k/2+1)*3,symbolWye={draw(e,i){const o=sqrt$1(i/a),d=o/2,h=o*k,g=d,b=o*k+o,j=-g,_=b;e.moveTo(d,h),e.lineTo(g,b),e.lineTo(j,_),e.lineTo(c*d-s*h,s*d+c*h),e.lineTo(c*g-s*b,s*g+c*b),e.lineTo(c*j-s*_,s*j+c*_),e.lineTo(c*d+s*h,c*h-s*d),e.lineTo(c*g+s*b,c*b-s*g),e.lineTo(c*j+s*_,c*_-s*j),e.closePath()}};function Symbol$1(e,i){let o=null,d=withPath(h);e=typeof e=="function"?e:constant$1(e||symbolCircle),i=typeof i=="function"?i:constant$1(i===void 0?64:+i);function h(){let g;if(o||(o=g=d()),e.apply(this,arguments).draw(o,+i.apply(this,arguments)),g)return o=null,g+""||null}return h.type=function(g){return arguments.length?(e=typeof g=="function"?g:constant$1(g),h):e},h.size=function(g){return arguments.length?(i=typeof g=="function"?g:constant$1(+g),h):i},h.context=function(g){return arguments.length?(o=g??null,h):o},h}function noop$3(){}function point$2(e,i,o){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+i)/6,(e._y0+4*e._y1+o)/6)}function Basis(e){this._context=e}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,i){switch(e=+e,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,e,i);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i}};function curveBasis(e){return new Basis(e)}function BasisClosed(e){this._context=e}BasisClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,i){switch(e=+e,i=+i,this._point){case 0:this._point=1,this._x2=e,this._y2=i;break;case 1:this._point=2,this._x3=e,this._y3=i;break;case 2:this._point=3,this._x4=e,this._y4=i,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+i)/6);break;default:point$2(this,e,i);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i}};function curveBasisClosed(e){return new BasisClosed(e)}function BasisOpen(e){this._context=e}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,i){switch(e=+e,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var o=(this._x0+4*this._x1+e)/6,d=(this._y0+4*this._y1+i)/6;this._line?this._context.lineTo(o,d):this._context.moveTo(o,d);break;case 3:this._point=4;default:point$2(this,e,i);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i}};function curveBasisOpen(e){return new BasisOpen(e)}function LinearClosed(e){this._context=e}LinearClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,i){e=+e,i=+i,this._point?this._context.lineTo(e,i):(this._point=1,this._context.moveTo(e,i))}};function curveLinearClosed(e){return new LinearClosed(e)}function sign(e){return e<0?-1:1}function slope3(e,i,o){var d=e._x1-e._x0,h=i-e._x1,g=(e._y1-e._y0)/(d||h<0&&-0),b=(o-e._y1)/(h||d<0&&-0),j=(g*h+b*d)/(d+h);return(sign(g)+sign(b))*Math.min(Math.abs(g),Math.abs(b),.5*Math.abs(j))||0}function slope2(e,i){var o=e._x1-e._x0;return o?(3*(e._y1-e._y0)/o-i)/2:i}function point$1(e,i,o){var d=e._x0,h=e._y0,g=e._x1,b=e._y1,j=(g-d)/3;e._context.bezierCurveTo(d+j,h+j*i,g-j,b-j*o,g,b)}function MonotoneX(e){this._context=e}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,i){var o=NaN;if(e=+e,i=+i,!(e===this._x1&&i===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,o=slope3(this,e,i)),o);break;default:point$1(this,this._t0,o=slope3(this,e,i));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i,this._t0=o}}};function MonotoneY(e){this._context=new ReflectContext(e)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(e,i){MonotoneX.prototype.point.call(this,i,e)};function ReflectContext(e){this._context=e}ReflectContext.prototype={moveTo:function(e,i){this._context.moveTo(i,e)},closePath:function(){this._context.closePath()},lineTo:function(e,i){this._context.lineTo(i,e)},bezierCurveTo:function(e,i,o,d,h,g){this._context.bezierCurveTo(i,e,d,o,g,h)}};function monotoneX(e){return new MonotoneX(e)}function monotoneY(e){return new MonotoneY(e)}function Natural(e){this._context=e}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,i=this._y,o=e.length;if(o)if(this._line?this._context.lineTo(e[0],i[0]):this._context.moveTo(e[0],i[0]),o===2)this._context.lineTo(e[1],i[1]);else for(var d=controlPoints(e),h=controlPoints(i),g=0,b=1;b<o;++g,++b)this._context.bezierCurveTo(d[0][g],h[0][g],d[1][g],h[1][g],e[b],i[b]);(this._line||this._line!==0&&o===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,i){this._x.push(+e),this._y.push(+i)}};function controlPoints(e){var i,o=e.length-1,d,h=new Array(o),g=new Array(o),b=new Array(o);for(h[0]=0,g[0]=2,b[0]=e[0]+2*e[1],i=1;i<o-1;++i)h[i]=1,g[i]=4,b[i]=4*e[i]+2*e[i+1];for(h[o-1]=2,g[o-1]=7,b[o-1]=8*e[o-1]+e[o],i=1;i<o;++i)d=h[i]/g[i-1],g[i]-=d,b[i]-=d*b[i-1];for(h[o-1]=b[o-1]/g[o-1],i=o-2;i>=0;--i)h[i]=(b[i]-h[i+1])/g[i];for(g[o-1]=(e[o]+h[o-1])/2,i=0;i<o-1;++i)g[i]=2*e[i+1]-h[i+1];return[h,g]}function curveNatural(e){return new Natural(e)}function Step(e,i){this._context=e,this._t=i}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,i){switch(e=+e,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,i),this._context.lineTo(e,i);else{var o=this._x*(1-this._t)+e*this._t;this._context.lineTo(o,this._y),this._context.lineTo(o,i)}break}}this._x=e,this._y=i}};function curveStep(e){return new Step(e,.5)}function stepBefore(e){return new Step(e,0)}function stepAfter(e){return new Step(e,1)}function stackOffsetNone(e,i){if((b=e.length)>1)for(var o=1,d,h,g=e[i[0]],b,j=g.length;o<b;++o)for(h=g,g=e[i[o]],d=0;d<j;++d)g[d][1]+=g[d][0]=isNaN(h[d][1])?h[d][0]:h[d][1]}function stackOrderNone(e){for(var i=e.length,o=new Array(i);--i>=0;)o[i]=i;return o}function stackValue(e,i){return e[i]}function stackSeries(e){const i=[];return i.key=e,i}function shapeStack(){var e=constant$1([]),i=stackOrderNone,o=stackOffsetNone,d=stackValue;function h(g){var b=Array.from(e.apply(this,arguments),stackSeries),j,_=b.length,$=-1,_e;for(const et of g)for(j=0,++$;j<_;++j)(b[j][$]=[0,+d(et,b[j].key,$,g)]).data=et;for(j=0,_e=array(i(b));j<_;++j)b[_e[j]].index=j;return o(b,_e),b}return h.keys=function(g){return arguments.length?(e=typeof g=="function"?g:constant$1(Array.from(g)),h):e},h.value=function(g){return arguments.length?(d=typeof g=="function"?g:constant$1(+g),h):d},h.order=function(g){return arguments.length?(i=g==null?stackOrderNone:typeof g=="function"?g:constant$1(Array.from(g)),h):i},h.offset=function(g){return arguments.length?(o=g??stackOffsetNone,h):o},h}function stackOffsetExpand(e,i){if((d=e.length)>0){for(var o,d,h=0,g=e[0].length,b;h<g;++h){for(b=o=0;o<d;++o)b+=e[o][h][1]||0;if(b)for(o=0;o<d;++o)e[o][h][1]/=b}stackOffsetNone(e,i)}}function stackOffsetSilhouette(e,i){if((h=e.length)>0){for(var o=0,d=e[i[0]],h,g=d.length;o<g;++o){for(var b=0,j=0;b<h;++b)j+=e[b][o][1]||0;d[o][1]+=d[o][0]=-j/2}stackOffsetNone(e,i)}}function stackOffsetWiggle(e,i){if(!(!((b=e.length)>0)||!((g=(h=e[i[0]]).length)>0))){for(var o=0,d=1,h,g,b;d<g;++d){for(var j=0,_=0,$=0;j<b;++j){for(var _e=e[i[j]],et=_e[d][1]||0,tt=_e[d-1][1]||0,rt=(et-tt)/2,nt=0;nt<j;++nt){var it=e[i[nt]],st=it[d][1]||0,at=it[d-1][1]||0;rt+=st-at}_+=et,$+=rt*et}h[d-1][1]+=h[d-1][0]=o,_&&(o-=$/_)}h[d-1][1]+=h[d-1][0]=o,stackOffsetNone(e,i)}}var get$3={},isUnsafeProperty={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){return o==="__proto__"}e.isUnsafeProperty=i})(isUnsafeProperty);var isDeepKey={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){switch(typeof o){case"number":case"symbol":return!1;case"string":return o.includes(".")||o.includes("[")||o.includes("]")}}e.isDeepKey=i})(isDeepKey);var toKey={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){var d;return typeof o=="string"||typeof o=="symbol"?o:Object.is((d=o==null?void 0:o.valueOf)==null?void 0:d.call(o),-0)?"-0":String(o)}e.toKey=i})(toKey);var toPath={},toString$1={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){if(o==null)return"";if(typeof o=="string")return o;if(Array.isArray(o))return o.map(i).join(",");const d=String(o);return d==="0"&&Object.is(Number(o),-0)?"-0":d}e.toString=i})(toString$1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=toString$1,o=toKey;function d(h){if(Array.isArray(h))return h.map(o.toKey);if(typeof h=="symbol")return[h];h=i.toString(h);const g=[],b=h.length;if(b===0)return g;let j=0,_="",$="",_e=!1;for(h.charCodeAt(0)===46&&(g.push(""),j++);j<b;){const et=h[j];$?et==="\\"&&j+1<b?(j++,_+=h[j]):et===$?$="":_+=et:_e?et==='"'||et==="'"?$=et:et==="]"?(_e=!1,g.push(_),_=""):_+=et:et==="["?(_e=!0,_&&(g.push(_),_="")):et==="."?_&&(g.push(_),_=""):_+=et,j++}return _&&g.push(_),g}e.toPath=d})(toPath);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=isUnsafeProperty,o=isDeepKey,d=toKey,h=toPath;function g(j,_,$){if(j==null)return $;switch(typeof _){case"string":{if(i.isUnsafeProperty(_))return $;const _e=j[_];return _e===void 0?o.isDeepKey(_)?g(j,h.toPath(_),$):$:_e}case"number":case"symbol":{typeof _=="number"&&(_=d.toKey(_));const _e=j[_];return _e===void 0?$:_e}default:{if(Array.isArray(_))return b(j,_,$);if(Object.is(_==null?void 0:_.valueOf(),-0)?_="-0":_=String(_),i.isUnsafeProperty(_))return $;const _e=j[_];return _e===void 0?$:_e}}}function b(j,_,$){if(_.length===0)return $;let _e=j;for(let et=0;et<_.length;et++){if(_e==null||i.isUnsafeProperty(_[et]))return $;_e=_e[_[et]]}return _e===void 0?$:_e}e.get=g})(get$3);var get$1=get$3.get;const get$2=getDefaultExportFromCjs(get$1);var defaultRoundPrecision=4;function round$1(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:defaultRoundPrecision,o=10**i,d=Math.round(e*o)/o;return Object.is(d,-0)?0:d}function roundTemplateLiteral(e){for(var i=arguments.length,o=new Array(i>1?i-1:0),d=1;d<i;d++)o[d-1]=arguments[d];return e.reduce((h,g,b)=>{var j=o[b-1];return typeof j=="string"?h+j+g:j!==void 0?h+round$1(j)+g:h+g},"")}var mathSign=e=>e===0?0:e>0?1:-1,isNan=e=>typeof e=="number"&&e!=+e,isPercent=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,isNumber=e=>(typeof e=="number"||e instanceof Number)&&!isNan(e),isNumOrStr=e=>isNumber(e)||typeof e=="string",idCounter=0,uniqueId=e=>{var i=++idCounter;return"".concat(e||"").concat(i)},getPercentValue=function e(i,o){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!isNumber(i)&&typeof i!="string")return d;var g;if(isPercent(i)){if(o==null)return d;var b=i.indexOf("%");g=o*parseFloat(i.slice(0,b))/100}else g=+i;return isNan(g)&&(g=d),h&&o!=null&&g>o&&(g=o),g},hasDuplicate=e=>{if(!Array.isArray(e))return!1;for(var i=e.length,o={},d=0;d<i;d++)if(!o[String(e[d])])o[String(e[d])]=!0;else return!0;return!1};function interpolate$1(e,i,o){return isNumber(e)&&isNumber(i)?round$1(e+o*(i-e)):i}function findEntryInArray(e,i,o){if(!(!e||!e.length))return e.find(d=>d&&(typeof i=="function"?i(d):get$2(d,i))===o)}var isNullish=e=>e===null||typeof e>"u",upperFirst=e=>isNullish(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function isNotNil(e){return e!=null}function noop$2(){}var _excluded$j=["type","size","sizeType"];function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$o.apply(null,arguments)}function ownKeys$z(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$z(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$z(Object(o),!0).forEach(function(d){_defineProperty$C(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$z(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$C(e,i,o){return(i=_toPropertyKey$C(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$C(e){var i=_toPrimitive$C(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$C(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _objectWithoutProperties$j(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$j(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$j(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}var symbolFactories={symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye},RADIAN$1=Math.PI/180,getSymbolFactory=e=>{var i="symbol".concat(upperFirst(e));return symbolFactories[i]||symbolCircle},calculateAreaSize=(e,i,o)=>{if(i==="area")return e;switch(o){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var d=18*RADIAN$1;return 1.25*e*e*(Math.tan(d)-Math.tan(d*2)*Math.tan(d)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},registerSymbol=(e,i)=>{symbolFactories["symbol".concat(upperFirst(e))]=i},Symbols=e=>{var{type:i="circle",size:o=64,sizeType:d="area"}=e,h=_objectWithoutProperties$j(e,_excluded$j),g=_objectSpread$z(_objectSpread$z({},h),{},{type:i,size:o,sizeType:d}),b="circle";typeof i=="string"&&(b=i);var j=()=>{var tt=getSymbolFactory(b),rt=Symbol$1().type(tt).size(calculateAreaSize(o,d,b)),nt=rt();if(nt!==null)return nt},{className:_,cx:$,cy:_e}=g,et=svgPropertiesAndEvents(g);return isNumber($)&&isNumber(_e)&&isNumber(o)?reactExports.createElement("path",_extends$o({},et,{className:clsx("recharts-symbols",_),transform:"translate(".concat($,", ").concat(_e,")"),d:j()})):null};Symbols.registerSymbol=registerSymbol;var isPolarCoordinate=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,adaptEventHandlers=(e,i)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var o=e;if(reactExports.isValidElement(e)&&(o=e.props),typeof o!="object"&&typeof o!="function")return null;var d={};return Object.keys(o).forEach(h=>{isEventKey(h)&&(d[h]=g=>o[h](o,g))}),d},getEventHandlerOfChild=(e,i,o)=>d=>(e(i,o,d),null),adaptEventsOfChild=(e,i,o)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var d=null;return Object.keys(e).forEach(h=>{var g=e[h];isEventKey(h)&&typeof g=="function"&&(d||(d={}),d[h]=getEventHandlerOfChild(g,i,o))}),d};function ownKeys$y(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$y(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$y(Object(o),!0).forEach(function(d){_defineProperty$B(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$y(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$B(e,i,o){return(i=_toPropertyKey$B(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$B(e){var i=_toPrimitive$B(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$B(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function resolveDefaultProps(e,i){var o=_objectSpread$y({},e),d=i,h=Object.keys(i),g=h.reduce((b,j)=>(b[j]===void 0&&d[j]!==void 0&&(b[j]=d[j]),b),o);return g}var uniqBy$3={},uniqBy$2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o,d){const h=new Map;for(let g=0;g<o.length;g++){const b=o[g],j=d(b);h.has(j)||h.set(j,b)}return Array.from(h.values())}e.uniqBy=i})(uniqBy$2);var identity$4={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){return o}e.identity=i})(identity$4);var isArrayLikeObject={},isArrayLike={},isLength={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){return Number.isSafeInteger(o)&&o>=0}e.isLength=i})(isLength);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=isLength;function o(d){return d!=null&&typeof d!="function"&&i.isLength(d.length)}e.isArrayLike=o})(isArrayLike);var isObjectLike={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){return typeof o=="object"&&o!==null}e.isObjectLike=i})(isObjectLike);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=isArrayLike,o=isObjectLike;function d(h){return o.isObjectLike(h)&&i.isArrayLike(h)}e.isArrayLikeObject=d})(isArrayLikeObject);var iteratee={},property={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=get$3;function o(d){return function(h){return i.get(h,d)}}e.property=o})(property);var matches={},isMatch={},isMatchWith={},isObject={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){return o!==null&&(typeof o=="object"||typeof o=="function")}e.isObject=i})(isObject);var isPrimitive={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){return o==null||typeof o!="object"&&typeof o!="function"}e.isPrimitive=i})(isPrimitive);var eq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o,d){return o===d||Number.isNaN(o)&&Number.isNaN(d)}e.eq=i})(eq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=isObject,o=isPrimitive,d=eq;function h(_e,et,tt){return typeof tt!="function"?h(_e,et,()=>{}):g(_e,et,function rt(nt,it,st,at,ot,lt){const ct=tt(nt,it,st,at,ot,lt);return ct!==void 0?!!ct:g(nt,it,rt,lt)},new Map)}function g(_e,et,tt,rt){if(et===_e)return!0;switch(typeof et){case"object":return b(_e,et,tt,rt);case"function":return Object.keys(et).length>0?g(_e,{...et},tt,rt):d.eq(_e,et);default:return i.isObject(_e)?typeof et=="string"?et==="":!0:d.eq(_e,et)}}function b(_e,et,tt,rt){if(et==null)return!0;if(Array.isArray(et))return _(_e,et,tt,rt);if(et instanceof Map)return j(_e,et,tt,rt);if(et instanceof Set)return $(_e,et,tt,rt);const nt=Object.keys(et);if(_e==null||o.isPrimitive(_e))return nt.length===0;if(nt.length===0)return!0;if(rt!=null&&rt.has(et))return rt.get(et)===_e;rt==null||rt.set(et,_e);try{for(let it=0;it<nt.length;it++){const st=nt[it];if(!o.isPrimitive(_e)&&!(st in _e)||et[st]===void 0&&_e[st]!==void 0||et[st]===null&&_e[st]!==null||!tt(_e[st],et[st],st,_e,et,rt))return!1}return!0}finally{rt==null||rt.delete(et)}}function j(_e,et,tt,rt){if(et.size===0)return!0;if(!(_e instanceof Map))return!1;for(const[nt,it]of et.entries()){const st=_e.get(nt);if(tt(st,it,nt,_e,et,rt)===!1)return!1}return!0}function _(_e,et,tt,rt){if(et.length===0)return!0;if(!Array.isArray(_e))return!1;const nt=new Set;for(let it=0;it<et.length;it++){const st=et[it];let at=!1;for(let ot=0;ot<_e.length;ot++){if(nt.has(ot))continue;const lt=_e[ot];let ct=!1;if(tt(lt,st,it,_e,et,rt)&&(ct=!0),ct){nt.add(ot),at=!0;break}}if(!at)return!1}return!0}function $(_e,et,tt,rt){return et.size===0?!0:_e instanceof Set?_([..._e],[...et],tt,rt):!1}e.isMatchWith=h,e.isSetMatch=$})(isMatchWith);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=isMatchWith;function o(d,h){return i.isMatchWith(d,h,()=>{})}e.isMatch=o})(isMatch);var cloneDeep$1={},cloneDeepWith$1={},getSymbols={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){return Object.getOwnPropertySymbols(o).filter(d=>Object.prototype.propertyIsEnumerable.call(o,d))}e.getSymbols=i})(getSymbols);var getTag={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){return o==null?o===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(o)}e.getTag=i})(getTag);var tags={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i="[object RegExp]",o="[object String]",d="[object Number]",h="[object Boolean]",g="[object Arguments]",b="[object Symbol]",j="[object Date]",_="[object Map]",$="[object Set]",_e="[object Array]",et="[object Function]",tt="[object ArrayBuffer]",rt="[object Object]",nt="[object Error]",it="[object DataView]",st="[object Uint8Array]",at="[object Uint8ClampedArray]",ot="[object Uint16Array]",lt="[object Uint32Array]",ct="[object BigUint64Array]",ut="[object Int8Array]",dt="[object Int16Array]",mt="[object Int32Array]",xt="[object BigInt64Array]",ft="[object Float32Array]",gt="[object Float64Array]";e.argumentsTag=g,e.arrayBufferTag=tt,e.arrayTag=_e,e.bigInt64ArrayTag=xt,e.bigUint64ArrayTag=ct,e.booleanTag=h,e.dataViewTag=it,e.dateTag=j,e.errorTag=nt,e.float32ArrayTag=ft,e.float64ArrayTag=gt,e.functionTag=et,e.int16ArrayTag=dt,e.int32ArrayTag=mt,e.int8ArrayTag=ut,e.mapTag=_,e.numberTag=d,e.objectTag=rt,e.regexpTag=i,e.setTag=$,e.stringTag=o,e.symbolTag=b,e.uint16ArrayTag=ot,e.uint32ArrayTag=lt,e.uint8ArrayTag=st,e.uint8ClampedArrayTag=at})(tags);var isTypedArray={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){return ArrayBuffer.isView(o)&&!(o instanceof DataView)}e.isTypedArray=i})(isTypedArray);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=getSymbols,o=getTag,d=tags,h=isPrimitive,g=isTypedArray;function b(_e,et){return j(_e,void 0,_e,new Map,et)}function j(_e,et,tt,rt=new Map,nt=void 0){const it=nt==null?void 0:nt(_e,et,tt,rt);if(it!==void 0)return it;if(h.isPrimitive(_e))return _e;if(rt.has(_e))return rt.get(_e);if(Array.isArray(_e)){const st=new Array(_e.length);rt.set(_e,st);for(let at=0;at<_e.length;at++)st[at]=j(_e[at],at,tt,rt,nt);return Object.hasOwn(_e,"index")&&(st.index=_e.index),Object.hasOwn(_e,"input")&&(st.input=_e.input),st}if(_e instanceof Date)return new Date(_e.getTime());if(_e instanceof RegExp){const st=new RegExp(_e.source,_e.flags);return st.lastIndex=_e.lastIndex,st}if(_e instanceof Map){const st=new Map;rt.set(_e,st);for(const[at,ot]of _e)st.set(at,j(ot,at,tt,rt,nt));return st}if(_e instanceof Set){const st=new Set;rt.set(_e,st);for(const at of _e)st.add(j(at,void 0,tt,rt,nt));return st}if(typeof Buffer<"u"&&Buffer.isBuffer(_e))return _e.subarray();if(g.isTypedArray(_e)){const st=new(Object.getPrototypeOf(_e)).constructor(_e.length);rt.set(_e,st);for(let at=0;at<_e.length;at++)st[at]=j(_e[at],at,tt,rt,nt);return st}if(_e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&_e instanceof SharedArrayBuffer)return _e.slice(0);if(_e instanceof DataView){const st=new DataView(_e.buffer.slice(0),_e.byteOffset,_e.byteLength);return rt.set(_e,st),_(st,_e,tt,rt,nt),st}if(typeof File<"u"&&_e instanceof File){const st=new File([_e],_e.name,{type:_e.type});return rt.set(_e,st),_(st,_e,tt,rt,nt),st}if(typeof Blob<"u"&&_e instanceof Blob){const st=new Blob([_e],{type:_e.type});return rt.set(_e,st),_(st,_e,tt,rt,nt),st}if(_e instanceof Error){const st=new _e.constructor;return rt.set(_e,st),st.message=_e.message,st.name=_e.name,st.stack=_e.stack,st.cause=_e.cause,_(st,_e,tt,rt,nt),st}if(_e instanceof Boolean){const st=new Boolean(_e.valueOf());return rt.set(_e,st),_(st,_e,tt,rt,nt),st}if(_e instanceof Number){const st=new Number(_e.valueOf());return rt.set(_e,st),_(st,_e,tt,rt,nt),st}if(_e instanceof String){const st=new String(_e.valueOf());return rt.set(_e,st),_(st,_e,tt,rt,nt),st}if(typeof _e=="object"&&$(_e)){const st=Object.create(Object.getPrototypeOf(_e));return rt.set(_e,st),_(st,_e,tt,rt,nt),st}return _e}function _(_e,et,tt=_e,rt,nt){const it=[...Object.keys(et),...i.getSymbols(et)];for(let st=0;st<it.length;st++){const at=it[st],ot=Object.getOwnPropertyDescriptor(_e,at);(ot==null||ot.writable)&&(_e[at]=j(et[at],at,tt,rt,nt))}}function $(_e){switch(o.getTag(_e)){case d.argumentsTag:case d.arrayTag:case d.arrayBufferTag:case d.dataViewTag:case d.booleanTag:case d.dateTag:case d.float32ArrayTag:case d.float64ArrayTag:case d.int8ArrayTag:case d.int16ArrayTag:case d.int32ArrayTag:case d.mapTag:case d.numberTag:case d.objectTag:case d.regexpTag:case d.setTag:case d.stringTag:case d.symbolTag:case d.uint8ArrayTag:case d.uint8ClampedArrayTag:case d.uint16ArrayTag:case d.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=b,e.cloneDeepWithImpl=j,e.copyProperties=_})(cloneDeepWith$1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=cloneDeepWith$1;function o(d){return i.cloneDeepWithImpl(d,void 0,d,new Map,void 0)}e.cloneDeep=o})(cloneDeep$1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=isMatch,o=cloneDeep$1;function d(h){return h=o.cloneDeep(h),g=>i.isMatch(g,h)}e.matches=d})(matches);var matchesProperty={},cloneDeep={},cloneDeepWith={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=cloneDeepWith$1,o=tags;function d(h,g){return i.cloneDeepWith(h,(b,j,_,$)=>{const _e=g==null?void 0:g(b,j,_,$);if(_e!==void 0)return _e;if(typeof h=="object")switch(Object.prototype.toString.call(h)){case o.numberTag:case o.stringTag:case o.booleanTag:{const et=new h.constructor(h==null?void 0:h.valueOf());return i.copyProperties(et,h),et}case o.argumentsTag:{const et={};return i.copyProperties(et,h),et.length=h.length,et[Symbol.iterator]=h[Symbol.iterator],et}default:return}})}e.cloneDeepWith=d})(cloneDeepWith);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=cloneDeepWith;function o(d){return i.cloneDeepWith(d)}e.cloneDeep=o})(cloneDeep);var has$2={},isIndex={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=/^(?:0|[1-9]\d*)$/;function o(d,h=Number.MAX_SAFE_INTEGER){switch(typeof d){case"number":return Number.isInteger(d)&&d>=0&&d<h;case"symbol":return!1;case"string":return i.test(d)}}e.isIndex=o})(isIndex);var isArguments={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=getTag;function o(d){return d!==null&&typeof d=="object"&&i.getTag(d)==="[object Arguments]"}e.isArguments=o})(isArguments);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=isDeepKey,o=isIndex,d=isArguments,h=toPath;function g(b,j){let _;if(Array.isArray(j)?_=j:typeof j=="string"&&i.isDeepKey(j)&&(b==null?void 0:b[j])==null?_=h.toPath(j):_=[j],_.length===0)return!1;let $=b;for(let _e=0;_e<_.length;_e++){const et=_[_e];if(($==null||!Object.hasOwn($,et))&&!((Array.isArray($)||d.isArguments($))&&o.isIndex(et)&&et<$.length))return!1;$=$[et]}return!0}e.has=g})(has$2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=isMatch,o=toKey,d=cloneDeep,h=get$3,g=has$2;function b(j,_){switch(typeof j){case"object":{Object.is(j==null?void 0:j.valueOf(),-0)&&(j="-0");break}case"number":{j=o.toKey(j);break}}return _=d.cloneDeep(_),function($){const _e=h.get($,j);return _e===void 0?g.has($,j):_===void 0?_e===void 0:i.isMatch(_e,_)}}e.matchesProperty=b})(matchesProperty);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=identity$4,o=property,d=matches,h=matchesProperty;function g(b){if(b==null)return i.identity;switch(typeof b){case"function":return b;case"object":return Array.isArray(b)&&b.length===2?h.matchesProperty(b[0],b[1]):d.matches(b);case"string":case"symbol":case"number":return o.property(b)}}e.iteratee=g})(iteratee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=uniqBy$2,o=identity$4,d=isArrayLikeObject,h=iteratee;function g(b,j=o.identity){return d.isArrayLikeObject(b)?i.uniqBy(Array.from(b),h.iteratee(j)):[]}e.uniqBy=g})(uniqBy$3);var uniqBy=uniqBy$3.uniqBy;const uniqBy$1=getDefaultExportFromCjs(uniqBy);function getUniqPayload(e,i,o){return i===!0?uniqBy$1(e,o):typeof i=="function"?uniqBy$1(e,i):e}var withSelector={exports:{}},withSelector_production={},shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$2=reactExports;function is$5(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var objectIs$2=typeof Object.is=="function"?Object.is:is$5,useState=React$2.useState,useEffect$2=React$2.useEffect,useLayoutEffect=React$2.useLayoutEffect,useDebugValue$2=React$2.useDebugValue;function useSyncExternalStore$2(e,i){var o=i(),d=useState({inst:{value:o,getSnapshot:i}}),h=d[0].inst,g=d[1];return useLayoutEffect(function(){h.value=o,h.getSnapshot=i,checkIfSnapshotChanged(h)&&g({inst:h})},[e,o,i]),useEffect$2(function(){return checkIfSnapshotChanged(h)&&g({inst:h}),e(function(){checkIfSnapshotChanged(h)&&g({inst:h})})},[e]),useDebugValue$2(o),o}function checkIfSnapshotChanged(e){var i=e.getSnapshot;e=e.value;try{var o=i();return!objectIs$2(e,o)}catch{return!0}}function useSyncExternalStore$1$1(e,i){return i()}var shim$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$2.useSyncExternalStore!==void 0?React$2.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports,shim=shimExports;function is$4(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var objectIs$1=typeof Object.is=="function"?Object.is:is$4,useSyncExternalStore$1=shim.useSyncExternalStore,useRef$1=React$1.useRef,useEffect$1=React$1.useEffect,useMemo$1=React$1.useMemo,useDebugValue$1=React$1.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(e,i,o,d,h){var g=useRef$1(null);if(g.current===null){var b={hasValue:!1,value:null};g.current=b}else b=g.current;g=useMemo$1(function(){function _(rt){if(!$){if($=!0,_e=rt,rt=d(rt),h!==void 0&&b.hasValue){var nt=b.value;if(h(nt,rt))return et=nt}return et=rt}if(nt=et,objectIs$1(_e,rt))return nt;var it=d(rt);return h!==void 0&&h(nt,it)?(_e=rt,nt):(_e=rt,et=it)}var $=!1,_e,et,tt=o===void 0?null:o;return[function(){return _(i())},tt===null?void 0:function(){return _(tt())}]},[i,o,d,h]);var j=useSyncExternalStore$1(e,g[0],g[1]);return useEffect$1(function(){b.hasValue=!0,b.value=j},[j]),useDebugValue$1(j),j};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports,RechartsReduxContext=reactExports.createContext(null),noopDispatch=e=>e,useAppDispatch=()=>{var e=reactExports.useContext(RechartsReduxContext);return e?e.store.dispatch:noopDispatch},noop$1=()=>{},addNestedSubNoop=()=>noop$1,refEquality=(e,i)=>e===i;function useAppSelector(e){var i=reactExports.useContext(RechartsReduxContext);return withSelectorExports.useSyncExternalStoreWithSelector(i?i.subscription.addNestedSub:addNestedSubNoop,i?i.store.getState:noop$1,i?i.store.getState:noop$1,i?e:noop$1,refEquality)}function assertIsFunction(e,i=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(i)}function assertIsObject(e,i=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(i)}function assertIsArrayOfFunctions(e,i="expected all items to be functions, instead received the following types: "){if(!e.every(o=>typeof o=="function")){const o=e.map(d=>typeof d=="function"?`function ${d.name||"unnamed"}()`:typeof d).join(", ");throw new TypeError(`${i}[${o}]`)}}var ensureIsArray=e=>Array.isArray(e)?e:[e];function getDependencies(e){const i=Array.isArray(e[0])?e[0]:e;return assertIsArrayOfFunctions(i,"createSelector expects all input-selectors to be functions, but received the following types: "),i}function collectInputSelectorResults(e,i){const o=[],{length:d}=e;for(let h=0;h<d;h++)o.push(e[h].apply(null,i));return o}var StrongRef=class{constructor(e){this.value=e}deref(){return this.value}},Ref=typeof WeakRef<"u"?WeakRef:StrongRef,UNTERMINATED=0,TERMINATED=1;function createCacheNode(){return{s:UNTERMINATED,v:void 0,o:null,p:null}}function weakMapMemoize(e,i={}){let o=createCacheNode();const{resultEqualityCheck:d}=i;let h,g=0;function b(){var et;let j=o;const{length:_}=arguments;for(let tt=0,rt=_;tt<rt;tt++){const nt=arguments[tt];if(typeof nt=="function"||typeof nt=="object"&&nt!==null){let it=j.o;it===null&&(j.o=it=new WeakMap);const st=it.get(nt);st===void 0?(j=createCacheNode(),it.set(nt,j)):j=st}else{let it=j.p;it===null&&(j.p=it=new Map);const st=it.get(nt);st===void 0?(j=createCacheNode(),it.set(nt,j)):j=st}}const $=j;let _e;if(j.s===TERMINATED)_e=j.v;else if(_e=e.apply(null,arguments),g++,d){const tt=((et=h==null?void 0:h.deref)==null?void 0:et.call(h))??h;tt!=null&&d(tt,_e)&&(_e=tt,g!==0&&g--),h=typeof _e=="object"&&_e!==null||typeof _e=="function"?new Ref(_e):_e}return $.s=TERMINATED,$.v=_e,_e}return b.clearCache=()=>{o=createCacheNode(),b.resetResultsCount()},b.resultsCount=()=>g,b.resetResultsCount=()=>{g=0},b}function createSelectorCreator(e,...i){const o=typeof e=="function"?{memoize:e,memoizeOptions:i}:e,d=(...h)=>{let g=0,b=0,j,_={},$=h.pop();typeof $=="object"&&(_=$,$=h.pop()),assertIsFunction($,`createSelector expects an output function after the inputs, but received: [${typeof $}]`);const _e={...o,..._},{memoize:et,memoizeOptions:tt=[],argsMemoize:rt=weakMapMemoize,argsMemoizeOptions:nt=[],devModeChecks:it={}}=_e,st=ensureIsArray(tt),at=ensureIsArray(nt),ot=getDependencies(h),lt=et(function(){return g++,$.apply(null,arguments)},...st),ct=rt(function(){b++;const dt=collectInputSelectorResults(ot,arguments);return j=lt.apply(null,dt),j},...at);return Object.assign(ct,{resultFunc:$,memoizedResultFunc:lt,dependencies:ot,dependencyRecomputations:()=>b,resetDependencyRecomputations:()=>{b=0},lastResult:()=>j,recomputations:()=>g,resetRecomputations:()=>{g=0},memoize:et,argsMemoize:rt})};return Object.assign(d,{withTypes:()=>d}),d}var createSelector=createSelectorCreator(weakMapMemoize),createStructuredSelector=Object.assign((e,i=createSelector)=>{assertIsObject(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const o=Object.keys(e),d=o.map(g=>e[g]);return i(d,(...g)=>g.reduce((b,j,_)=>(b[o[_]]=j,b),{}))},{withTypes:()=>createStructuredSelector}),sortBy$2={},orderBy={},compareValues={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(d){return typeof d=="symbol"?1:d===null?2:d===void 0?3:d!==d?4:0}const o=(d,h,g)=>{if(d!==h){const b=i(d),j=i(h);if(b===j&&b===0){if(d<h)return g==="desc"?1:-1;if(d>h)return g==="desc"?-1:1}return g==="desc"?j-b:b-j}return 0};e.compareValues=o})(compareValues);var isKey={},isSymbol={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){return typeof o=="symbol"||o instanceof Symbol}e.isSymbol=i})(isSymbol);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=isSymbol,o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function h(g,b){return Array.isArray(g)?!1:typeof g=="number"||typeof g=="boolean"||g==null||i.isSymbol(g)?!0:typeof g=="string"&&(d.test(g)||!o.test(g))||b!=null&&Object.hasOwn(b,g)}e.isKey=h})(isKey);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=compareValues,o=isKey,d=toPath;function h(g,b,j,_){if(g==null)return[];j=_?void 0:j,Array.isArray(g)||(g=Object.values(g)),Array.isArray(b)||(b=b==null?[null]:[b]),b.length===0&&(b=[null]),Array.isArray(j)||(j=j==null?[]:[j]),j=j.map(rt=>String(rt));const $=(rt,nt)=>{let it=rt;for(let st=0;st<nt.length&&it!=null;++st)it=it[nt[st]];return it},_e=(rt,nt)=>nt==null||rt==null?nt:typeof rt=="object"&&"key"in rt?Object.hasOwn(nt,rt.key)?nt[rt.key]:$(nt,rt.path):typeof rt=="function"?rt(nt):Array.isArray(rt)?$(nt,rt):typeof nt=="object"?nt[rt]:nt,et=b.map(rt=>(Array.isArray(rt)&&rt.length===1&&(rt=rt[0]),rt==null||typeof rt=="function"||Array.isArray(rt)||o.isKey(rt)?rt:{key:rt,path:d.toPath(rt)}));return g.map(rt=>({original:rt,criteria:et.map(nt=>_e(nt,rt))})).slice().sort((rt,nt)=>{for(let it=0;it<et.length;it++){const st=i.compareValues(rt.criteria[it],nt.criteria[it],j[it]);if(st!==0)return st}return 0}).map(rt=>rt.original)}e.orderBy=h})(orderBy);var flatten={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o,d=1){const h=[],g=Math.floor(d),b=(j,_)=>{for(let $=0;$<j.length;$++){const _e=j[$];Array.isArray(_e)&&_<g?b(_e,_+1):h.push(_e)}};return b(o,0),h}e.flatten=i})(flatten);var isIterateeCall={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=isIndex,o=isArrayLike,d=isObject,h=eq;function g(b,j,_){return d.isObject(_)&&(typeof j=="number"&&o.isArrayLike(_)&&i.isIndex(j)&&j<_.length||typeof j=="string"&&j in _)?h.eq(_[j],b):!1}e.isIterateeCall=g})(isIterateeCall);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=orderBy,o=flatten,d=isIterateeCall;function h(g,...b){const j=b.length;return j>1&&d.isIterateeCall(g,b[0],b[1])?b=[]:j>2&&d.isIterateeCall(b[0],b[1],b[2])&&(b=[b[0]]),i.orderBy(g,o.flatten(b),["asc"])}e.sortBy=h})(sortBy$2);var sortBy=sortBy$2.sortBy;const sortBy$1=getDefaultExportFromCjs(sortBy);var selectLegendSettings=e=>e.legend.settings,selectLegendSize=e=>e.legend.size,selectAllLegendPayload2DArray=e=>e.legend.payload;createSelector([selectAllLegendPayload2DArray,selectLegendSettings],(e,i)=>{var{itemSorter:o}=i,d=e.flat(1);return o?sortBy$1(d,o):d});var EPS$1=1;function useElementOffset(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[i,o]=reactExports.useState({height:0,left:0,top:0,width:0}),d=reactExports.useCallback(h=>{if(h!=null){var g=h.getBoundingClientRect(),b={height:g.height,left:g.left,top:g.top,width:g.width};(Math.abs(b.height-i.height)>EPS$1||Math.abs(b.left-i.left)>EPS$1||Math.abs(b.top-i.top)>EPS$1||Math.abs(b.width-i.width)>EPS$1)&&o({height:b.height,left:b.left,top:b.top,width:b.width})}},[i.width,i.height,i.top,i.left,...e]);return[i,d]}function formatProdErrorMessage$1(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $$observable=typeof Symbol=="function"&&Symbol.observable||"@@observable",symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`},actionTypes_default=ActionTypes;function isPlainObject$5(e){if(typeof e!="object"||e===null)return!1;let i=e;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(e)===i||Object.getPrototypeOf(e)===null}function createStore(e,i,o){if(typeof e!="function")throw new Error(formatProdErrorMessage$1(2));if(typeof i=="function"&&typeof o=="function"||typeof o=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage$1(0));if(typeof i=="function"&&typeof o>"u"&&(o=i,i=void 0),typeof o<"u"){if(typeof o!="function")throw new Error(formatProdErrorMessage$1(1));return o(createStore)(e,i)}let d=e,h=i,g=new Map,b=g,j=0,_=!1;function $(){b===g&&(b=new Map,g.forEach((st,at)=>{b.set(at,st)}))}function _e(){if(_)throw new Error(formatProdErrorMessage$1(3));return h}function et(st){if(typeof st!="function")throw new Error(formatProdErrorMessage$1(4));if(_)throw new Error(formatProdErrorMessage$1(5));let at=!0;$();const ot=j++;return b.set(ot,st),function(){if(at){if(_)throw new Error(formatProdErrorMessage$1(6));at=!1,$(),b.delete(ot),g=null}}}function tt(st){if(!isPlainObject$5(st))throw new Error(formatProdErrorMessage$1(7));if(typeof st.type>"u")throw new Error(formatProdErrorMessage$1(8));if(typeof st.type!="string")throw new Error(formatProdErrorMessage$1(17));if(_)throw new Error(formatProdErrorMessage$1(9));try{_=!0,h=d(h,st)}finally{_=!1}return(g=b).forEach(ot=>{ot()}),st}function rt(st){if(typeof st!="function")throw new Error(formatProdErrorMessage$1(10));d=st,tt({type:actionTypes_default.REPLACE})}function nt(){const st=et;return{subscribe(at){if(typeof at!="object"||at===null)throw new Error(formatProdErrorMessage$1(11));function ot(){const ct=at;ct.next&&ct.next(_e())}return ot(),{unsubscribe:st(ot)}},[symbol_observable_default](){return this}}}return tt({type:actionTypes_default.INIT}),{dispatch:tt,subscribe:et,getState:_e,replaceReducer:rt,[symbol_observable_default]:nt}}function assertReducerShape(e){Object.keys(e).forEach(i=>{const o=e[i];if(typeof o(void 0,{type:actionTypes_default.INIT})>"u")throw new Error(formatProdErrorMessage$1(12));if(typeof o(void 0,{type:actionTypes_default.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage$1(13))})}function combineReducers(e){const i=Object.keys(e),o={};for(let g=0;g<i.length;g++){const b=i[g];typeof e[b]=="function"&&(o[b]=e[b])}const d=Object.keys(o);let h;try{assertReducerShape(o)}catch(g){h=g}return function(b={},j){if(h)throw h;let _=!1;const $={};for(let _e=0;_e<d.length;_e++){const et=d[_e],tt=o[et],rt=b[et],nt=tt(rt,j);if(typeof nt>"u")throw j&&j.type,new Error(formatProdErrorMessage$1(14));$[et]=nt,_=_||nt!==rt}return _=_||d.length!==Object.keys(b).length,_?$:b}}function compose$1(...e){return e.length===0?i=>i:e.length===1?e[0]:e.reduce((i,o)=>(...d)=>i(o(...d)))}function applyMiddleware(...e){return i=>(o,d)=>{const h=i(o,d);let g=()=>{throw new Error(formatProdErrorMessage$1(15))};const b={getState:h.getState,dispatch:(_,...$)=>g(_,...$)},j=e.map(_=>_(b));return g=compose$1(...j)(h.dispatch),{...h,dispatch:g}}}function isAction(e){return isPlainObject$5(e)&&"type"in e&&typeof e.type=="string"}var NOTHING$1=Symbol.for("immer-nothing"),DRAFTABLE$1=Symbol.for("immer-draftable"),DRAFT_STATE$1=Symbol.for("immer-state");function die$1(e,...i){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var O=Object,getPrototypeOf$1=O.getPrototypeOf,CONSTRUCTOR="constructor",PROTOTYPE="prototype",CONFIGURABLE="configurable",ENUMERABLE="enumerable",WRITABLE="writable",VALUE="value",isDraft$1=e=>!!e&&!!e[DRAFT_STATE$1];function isDraftable$1(e){var i;return e?isPlainObject$4(e)||isArray(e)||!!e[DRAFTABLE$1]||!!((i=e[CONSTRUCTOR])!=null&&i[DRAFTABLE$1])||isMap$1(e)||isSet$1(e):!1}var objectCtorString$1=O[PROTOTYPE][CONSTRUCTOR].toString(),cachedCtorStrings$1=new WeakMap;function isPlainObject$4(e){if(!e||!isObjectish(e))return!1;const i=getPrototypeOf$1(e);if(i===null||i===O[PROTOTYPE])return!0;const o=O.hasOwnProperty.call(i,CONSTRUCTOR)&&i[CONSTRUCTOR];if(o===Object)return!0;if(!isFunction(o))return!1;let d=cachedCtorStrings$1.get(o);return d===void 0&&(d=Function.toString.call(o),cachedCtorStrings$1.set(o,d)),d===objectCtorString$1}function each$1(e,i,o=!0){getArchtype$1(e)===0?(o?Reflect.ownKeys(e):O.keys(e)).forEach(h=>{i(h,e[h],e)}):e.forEach((d,h)=>i(h,d,e))}function getArchtype$1(e){const i=e[DRAFT_STATE$1];return i?i.type_:isArray(e)?1:isMap$1(e)?2:isSet$1(e)?3:0}var has$1=(e,i,o=getArchtype$1(e))=>o===2?e.has(i):O[PROTOTYPE].hasOwnProperty.call(e,i),get=(e,i,o=getArchtype$1(e))=>o===2?e.get(i):e[i],set$1=(e,i,o,d=getArchtype$1(e))=>{d===2?e.set(i,o):d===3?e.add(o):e[i]=o};function is$3(e,i){return e===i?e!==0||1/e===1/i:e!==e&&i!==i}var isArray=Array.isArray,isMap$1=e=>e instanceof Map,isSet$1=e=>e instanceof Set,isObjectish=e=>typeof e=="object",isFunction=e=>typeof e=="function",isBoolean$1=e=>typeof e=="boolean";function isArrayIndex(e){const i=+e;return Number.isInteger(i)&&String(i)===e}var latest$1=e=>e.copy_||e.base_,getFinalValue=e=>e.modified_?e.copy_:e.base_;function shallowCopy$1(e,i){if(isMap$1(e))return new Map(e);if(isSet$1(e))return new Set(e);if(isArray(e))return Array[PROTOTYPE].slice.call(e);const o=isPlainObject$4(e);if(i===!0||i==="class_only"&&!o){const d=O.getOwnPropertyDescriptors(e);delete d[DRAFT_STATE$1];let h=Reflect.ownKeys(d);for(let g=0;g<h.length;g++){const b=h[g],j=d[b];j[WRITABLE]===!1&&(j[WRITABLE]=!0,j[CONFIGURABLE]=!0),(j.get||j.set)&&(d[b]={[CONFIGURABLE]:!0,[WRITABLE]:!0,[ENUMERABLE]:j[ENUMERABLE],[VALUE]:e[b]})}return O.create(getPrototypeOf$1(e),d)}else{const d=getPrototypeOf$1(e);if(d!==null&&o)return{...e};const h=O.create(d);return O.assign(h,e)}}function freeze$1(e,i=!1){return isFrozen$1(e)||isDraft$1(e)||!isDraftable$1(e)||(getArchtype$1(e)>1&&O.defineProperties(e,{set:dontMutateMethodOverride$1,add:dontMutateMethodOverride$1,clear:dontMutateMethodOverride$1,delete:dontMutateMethodOverride$1}),O.freeze(e),i&&each$1(e,(o,d)=>{freeze$1(d,!0)},!1)),e}function dontMutateFrozenCollections$1(){die$1(2)}var dontMutateMethodOverride$1={[VALUE]:dontMutateFrozenCollections$1};function isFrozen$1(e){return e===null||!isObjectish(e)?!0:O.isFrozen(e)}var PluginMapSet="MapSet",PluginPatches="Patches",PluginArrayMethods="ArrayMethods",plugins$1={};function getPlugin$1(e){const i=plugins$1[e];return i||die$1(0,e),i}var isPluginLoaded=e=>!!plugins$1[e],currentScope$1,getCurrentScope$1=()=>currentScope$1,createScope$1=(e,i)=>({drafts_:[],parent_:e,immer_:i,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:isPluginLoaded(PluginMapSet)?getPlugin$1(PluginMapSet):void 0,arrayMethodsPlugin_:isPluginLoaded(PluginArrayMethods)?getPlugin$1(PluginArrayMethods):void 0});function usePatchesInScope$1(e,i){i&&(e.patchPlugin_=getPlugin$1(PluginPatches),e.patches_=[],e.inversePatches_=[],e.patchListener_=i)}function revokeScope$1(e){leaveScope$1(e),e.drafts_.forEach(revokeDraft$1),e.drafts_=null}function leaveScope$1(e){e===currentScope$1&&(currentScope$1=e.parent_)}var enterScope$1=e=>currentScope$1=createScope$1(currentScope$1,e);function revokeDraft$1(e){const i=e[DRAFT_STATE$1];i.type_===0||i.type_===1?i.revoke_():i.revoked_=!0}function processResult$1(e,i){i.unfinalizedDrafts_=i.drafts_.length;const o=i.drafts_[0];if(e!==void 0&&e!==o){o[DRAFT_STATE$1].modified_&&(revokeScope$1(i),die$1(4)),isDraftable$1(e)&&(e=finalize$1(i,e));const{patchPlugin_:h}=i;h&&h.generateReplacementPatches_(o[DRAFT_STATE$1].base_,e,i)}else e=finalize$1(i,o);return maybeFreeze$1(i,e,!0),revokeScope$1(i),i.patches_&&i.patchListener_(i.patches_,i.inversePatches_),e!==NOTHING$1?e:void 0}function finalize$1(e,i){if(isFrozen$1(i))return i;const o=i[DRAFT_STATE$1];if(!o)return handleValue(i,e.handledSet_,e);if(!isSameScope(o,e))return i;if(!o.modified_)return o.base_;if(!o.finalized_){const{callbacks_:d}=o;if(d)for(;d.length>0;)d.pop()(e);generatePatchesAndFinalize(o,e)}return o.copy_}function maybeFreeze$1(e,i,o=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&freeze$1(i,o)}function markStateFinalized(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var isSameScope=(e,i)=>e.scope_===i,EMPTY_LOCATIONS_RESULT=[];function updateDraftInParent(e,i,o,d){const h=latest$1(e),g=e.type_;if(d!==void 0&&get(h,d,g)===i){set$1(h,d,o,g);return}if(!e.draftLocations_){const j=e.draftLocations_=new Map;each$1(h,(_,$)=>{if(isDraft$1($)){const _e=j.get($)||[];_e.push(_),j.set($,_e)}})}const b=e.draftLocations_.get(i)??EMPTY_LOCATIONS_RESULT;for(const j of b)set$1(h,j,o,g)}function registerChildFinalizationCallback(e,i,o){e.callbacks_.push(function(h){var j;const g=i;if(!g||!isSameScope(g,h))return;(j=h.mapSetPlugin_)==null||j.fixSetContents(g);const b=getFinalValue(g);updateDraftInParent(e,g.draft_??g,b,o),generatePatchesAndFinalize(g,h)})}function generatePatchesAndFinalize(e,i){var d;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((d=e.assigned_)==null?void 0:d.size)??0)>0)){const{patchPlugin_:h}=i;if(h){const g=h.getPath(e);g&&h.generatePatches_(e,g,i)}markStateFinalized(e)}}function handleCrossReference(e,i,o){const{scope_:d}=e;if(isDraft$1(o)){const h=o[DRAFT_STATE$1];isSameScope(h,d)&&h.callbacks_.push(function(){prepareCopy$1(e);const b=getFinalValue(h);updateDraftInParent(e,o,b,i)})}else isDraftable$1(o)&&e.callbacks_.push(function(){const g=latest$1(e);e.type_===3?g.has(o)&&handleValue(o,d.handledSet_,d):get(g,i,e.type_)===o&&d.drafts_.length>1&&(e.assigned_.get(i)??!1)===!0&&e.copy_&&handleValue(get(e.copy_,i,e.type_),d.handledSet_,d)})}function handleValue(e,i,o){return!o.immer_.autoFreeze_&&o.unfinalizedDrafts_<1||isDraft$1(e)||i.has(e)||!isDraftable$1(e)||isFrozen$1(e)||(i.add(e),each$1(e,(d,h)=>{if(isDraft$1(h)){const g=h[DRAFT_STATE$1];if(isSameScope(g,o)){const b=getFinalValue(g);set$1(e,d,b,e.type_),markStateFinalized(g)}}else isDraftable$1(h)&&handleValue(h,i,o)})),e}function createProxyProxy$1(e,i){const o=isArray(e),d={type_:o?1:0,scope_:i?i.scope_:getCurrentScope$1(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:i,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let h=d,g=objectTraps$1;o&&(h=[d],g=arrayTraps$1);const{revoke:b,proxy:j}=Proxy.revocable(h,g);return d.draft_=j,d.revoke_=b,[j,d]}var objectTraps$1={get(e,i){if(i===DRAFT_STATE$1)return e;let o=e.scope_.arrayMethodsPlugin_;const d=e.type_===1&&typeof i=="string";if(d&&o!=null&&o.isArrayOperationMethod(i))return o.createMethodInterceptor(e,i);const h=latest$1(e);if(!has$1(h,i,e.type_))return readPropFromProto$1(e,h,i);const g=h[i];if(e.finalized_||!isDraftable$1(g)||d&&e.operationMethod&&(o!=null&&o.isMutatingArrayMethod(e.operationMethod))&&isArrayIndex(i))return g;if(g===peek$1(e.base_,i)){prepareCopy$1(e);const b=e.type_===1?+i:i,j=createProxy$1(e.scope_,g,e,b);return e.copy_[b]=j}return g},has(e,i){return i in latest$1(e)},ownKeys(e){return Reflect.ownKeys(latest$1(e))},set(e,i,o){const d=getDescriptorFromProto$1(latest$1(e),i);if(d!=null&&d.set)return d.set.call(e.draft_,o),!0;if(!e.modified_){const h=peek$1(latest$1(e),i),g=h==null?void 0:h[DRAFT_STATE$1];if(g&&g.base_===o)return e.copy_[i]=o,e.assigned_.set(i,!1),!0;if(is$3(o,h)&&(o!==void 0||has$1(e.base_,i,e.type_)))return!0;prepareCopy$1(e),markChanged$1(e)}return e.copy_[i]===o&&(o!==void 0||i in e.copy_)||Number.isNaN(o)&&Number.isNaN(e.copy_[i])||(e.copy_[i]=o,e.assigned_.set(i,!0),handleCrossReference(e,i,o)),!0},deleteProperty(e,i){return prepareCopy$1(e),peek$1(e.base_,i)!==void 0||i in e.base_?(e.assigned_.set(i,!1),markChanged$1(e)):e.assigned_.delete(i),e.copy_&&delete e.copy_[i],!0},getOwnPropertyDescriptor(e,i){const o=latest$1(e),d=Reflect.getOwnPropertyDescriptor(o,i);return d&&{[WRITABLE]:!0,[CONFIGURABLE]:e.type_!==1||i!=="length",[ENUMERABLE]:d[ENUMERABLE],[VALUE]:o[i]}},defineProperty(){die$1(11)},getPrototypeOf(e){return getPrototypeOf$1(e.base_)},setPrototypeOf(){die$1(12)}},arrayTraps$1={};for(let e in objectTraps$1){let i=objectTraps$1[e];arrayTraps$1[e]=function(){const o=arguments;return o[0]=o[0][0],i.apply(this,o)}}arrayTraps$1.deleteProperty=function(e,i){return arrayTraps$1.set.call(this,e,i,void 0)};arrayTraps$1.set=function(e,i,o){return objectTraps$1.set.call(this,e[0],i,o,e[0])};function peek$1(e,i){const o=e[DRAFT_STATE$1];return(o?latest$1(o):e)[i]}function readPropFromProto$1(e,i,o){var h;const d=getDescriptorFromProto$1(i,o);return d?VALUE in d?d[VALUE]:(h=d.get)==null?void 0:h.call(e.draft_):void 0}function getDescriptorFromProto$1(e,i){if(!(i in e))return;let o=getPrototypeOf$1(e);for(;o;){const d=Object.getOwnPropertyDescriptor(o,i);if(d)return d;o=getPrototypeOf$1(o)}}function markChanged$1(e){e.modified_||(e.modified_=!0,e.parent_&&markChanged$1(e.parent_))}function prepareCopy$1(e){e.copy_||(e.assigned_=new Map,e.copy_=shallowCopy$1(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Immer2$1=class{constructor(i){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(o,d,h)=>{if(isFunction(o)&&!isFunction(d)){const b=d;d=o;const j=this;return function($=b,..._e){return j.produce($,et=>d.call(this,et,..._e))}}isFunction(d)||die$1(6),h!==void 0&&!isFunction(h)&&die$1(7);let g;if(isDraftable$1(o)){const b=enterScope$1(this),j=createProxy$1(b,o,void 0);let _=!0;try{g=d(j),_=!1}finally{_?revokeScope$1(b):leaveScope$1(b)}return usePatchesInScope$1(b,h),processResult$1(g,b)}else if(!o||!isObjectish(o)){if(g=d(o),g===void 0&&(g=o),g===NOTHING$1&&(g=void 0),this.autoFreeze_&&freeze$1(g,!0),h){const b=[],j=[];getPlugin$1(PluginPatches).generateReplacementPatches_(o,g,{patches_:b,inversePatches_:j}),h(b,j)}return g}else die$1(1,o)},this.produceWithPatches=(o,d)=>{if(isFunction(o))return(j,..._)=>this.produceWithPatches(j,$=>o($,..._));let h,g;return[this.produce(o,d,(j,_)=>{h=j,g=_}),h,g]},isBoolean$1(i==null?void 0:i.autoFreeze)&&this.setAutoFreeze(i.autoFreeze),isBoolean$1(i==null?void 0:i.useStrictShallowCopy)&&this.setUseStrictShallowCopy(i.useStrictShallowCopy),isBoolean$1(i==null?void 0:i.useStrictIteration)&&this.setUseStrictIteration(i.useStrictIteration)}createDraft(i){isDraftable$1(i)||die$1(8),isDraft$1(i)&&(i=current$1(i));const o=enterScope$1(this),d=createProxy$1(o,i,void 0);return d[DRAFT_STATE$1].isManual_=!0,leaveScope$1(o),d}finishDraft(i,o){const d=i&&i[DRAFT_STATE$1];(!d||!d.isManual_)&&die$1(9);const{scope_:h}=d;return usePatchesInScope$1(h,o),processResult$1(void 0,h)}setAutoFreeze(i){this.autoFreeze_=i}setUseStrictShallowCopy(i){this.useStrictShallowCopy_=i}setUseStrictIteration(i){this.useStrictIteration_=i}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(i,o){let d;for(d=o.length-1;d>=0;d--){const g=o[d];if(g.path.length===0&&g.op==="replace"){i=g.value;break}}d>-1&&(o=o.slice(d+1));const h=getPlugin$1(PluginPatches).applyPatches_;return isDraft$1(i)?h(i,o):this.produce(i,g=>h(g,o))}};function createProxy$1(e,i,o,d){const[h,g]=isMap$1(i)?getPlugin$1(PluginMapSet).proxyMap_(i,o):isSet$1(i)?getPlugin$1(PluginMapSet).proxySet_(i,o):createProxyProxy$1(i,o);return((o==null?void 0:o.scope_)??getCurrentScope$1()).drafts_.push(h),g.callbacks_=(o==null?void 0:o.callbacks_)??[],g.key_=d,o&&d!==void 0?registerChildFinalizationCallback(o,g,d):g.callbacks_.push(function(_){var _e;(_e=_.mapSetPlugin_)==null||_e.fixSetContents(g);const{patchPlugin_:$}=_;g.modified_&&$&&$.generatePatches_(g,[],_)}),h}function current$1(e){return isDraft$1(e)||die$1(10,e),currentImpl$1(e)}function currentImpl$1(e){if(!isDraftable$1(e)||isFrozen$1(e))return e;const i=e[DRAFT_STATE$1];let o,d=!0;if(i){if(!i.modified_)return i.base_;i.finalized_=!0,o=shallowCopy$1(e,i.scope_.immer_.useStrictShallowCopy_),d=i.scope_.immer_.shouldUseStrictIteration()}else o=shallowCopy$1(e,!0);return each$1(o,(h,g)=>{set$1(o,h,currentImpl$1(g))},d),i&&(i.finalized_=!1),o}var immer$1=new Immer2$1,produce=immer$1.produce;function createThunkMiddleware(e){return({dispatch:o,getState:d})=>h=>g=>typeof g=="function"?g(o,d,e):h(g)}var thunk=createThunkMiddleware(),withExtraArgument=createThunkMiddleware,composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose$1:compose$1.apply(null,arguments)};function createAction(e,i){function o(...d){if(i){let h=i(...d);if(!h)throw new Error(formatProdErrorMessage(0));return{type:e,payload:h.payload,..."meta"in h&&{meta:h.meta},..."error"in h&&{error:h.error}}}return{type:e,payload:d[0]}}return o.toString=()=>`${e}`,o.type=e,o.match=d=>isAction(d)&&d.type===e,o}var Tuple=class ur extends Array{constructor(...i){super(...i),Object.setPrototypeOf(this,ur.prototype)}static get[Symbol.species](){return ur}concat(...i){return super.concat.apply(this,i)}prepend(...i){return i.length===1&&Array.isArray(i[0])?new ur(...i[0].concat(this)):new ur(...i.concat(this))}};function freezeDraftable(e){return isDraftable$1(e)?produce(e,()=>{}):e}function getOrInsertComputed(e,i,o){return e.has(i)?e.get(i):e.set(i,o(i)).get(i)}function isBoolean(e){return typeof e=="boolean"}var buildGetDefaultMiddleware=()=>function(i){const{thunk:o=!0,immutableCheck:d=!0,serializableCheck:h=!0,actionCreatorCheck:g=!0}=i??{};let b=new Tuple;return o&&(isBoolean(o)?b.push(thunk):b.push(withExtraArgument(o.extraArgument))),b},SHOULD_AUTOBATCH="RTK_autoBatch",prepareAutoBatched=()=>e=>({payload:e,meta:{[SHOULD_AUTOBATCH]:!0}}),createQueueWithTimer=e=>i=>{setTimeout(i,e)},autoBatchEnhancer=(e={type:"raf"})=>i=>(...o)=>{const d=i(...o);let h=!0,g=!1,b=!1;const j=new Set,_=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10):e.type==="callback"?e.queueNotification:createQueueWithTimer(e.timeout),$=()=>{b=!1,g&&(g=!1,j.forEach(_e=>_e()))};return Object.assign({},d,{subscribe(_e){const et=()=>h&&_e(),tt=d.subscribe(et);return j.add(_e),()=>{tt(),j.delete(_e)}},dispatch(_e){var et;try{return h=!((et=_e==null?void 0:_e.meta)!=null&&et[SHOULD_AUTOBATCH]),g=!h,g&&(b||(b=!0,_($))),d.dispatch(_e)}finally{h=!0}}})},buildGetDefaultEnhancers=e=>function(o){const{autoBatch:d=!0}=o??{};let h=new Tuple(e);return d&&h.push(autoBatchEnhancer(typeof d=="object"?d:void 0)),h};function configureStore(e){const i=buildGetDefaultMiddleware(),{reducer:o=void 0,middleware:d,devTools:h=!0,duplicateMiddlewareCheck:g=!0,preloadedState:b=void 0,enhancers:j=void 0}=e||{};let _;if(typeof o=="function")_=o;else if(isPlainObject$5(o))_=combineReducers(o);else throw new Error(formatProdErrorMessage(1));let $;typeof d=="function"?$=d(i):$=i();let _e=compose$1;h&&(_e=composeWithDevTools({trace:!1,...typeof h=="object"&&h}));const et=applyMiddleware(...$),tt=buildGetDefaultEnhancers(et);let rt=typeof j=="function"?j(tt):tt();const nt=_e(...rt);return createStore(_,b,nt)}function executeReducerBuilderCallback(e){const i={},o=[];let d;const h={addCase(g,b){const j=typeof g=="string"?g:g.type;if(!j)throw new Error(formatProdErrorMessage(28));if(j in i)throw new Error(formatProdErrorMessage(29));return i[j]=b,h},addAsyncThunk(g,b){return b.pending&&(i[g.pending.type]=b.pending),b.rejected&&(i[g.rejected.type]=b.rejected),b.fulfilled&&(i[g.fulfilled.type]=b.fulfilled),b.settled&&o.push({matcher:g.settled,reducer:b.settled}),h},addMatcher(g,b){return o.push({matcher:g,reducer:b}),h},addDefaultCase(g){return d=g,h}};return e(h),[i,o,d]}function isStateFunction(e){return typeof e=="function"}function createReducer(e,i){let[o,d,h]=executeReducerBuilderCallback(i),g;if(isStateFunction(e))g=()=>freezeDraftable(e());else{const j=freezeDraftable(e);g=()=>j}function b(j=g(),_){let $=[o[_.type],...d.filter(({matcher:_e})=>_e(_)).map(({reducer:_e})=>_e)];return $.filter(_e=>!!_e).length===0&&($=[h]),$.reduce((_e,et)=>{if(et)if(isDraft$1(_e)){const rt=et(_e,_);return rt===void 0?_e:rt}else{if(isDraftable$1(_e))return produce(_e,tt=>et(tt,_));{const tt=et(_e,_);if(tt===void 0){if(_e===null)return _e;throw Error("A case reducer on a non-draftable value must not return undefined")}return tt}}return _e},j)}return b.getInitialState=g,b}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=(e=21)=>{let i="",o=e;for(;o--;)i+=urlAlphabet[Math.random()*64|0];return i},asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType(e,i){return`${e}/${i}`}function buildCreateSlice({creators:e}={}){var o;const i=(o=e==null?void 0:e.asyncThunk)==null?void 0:o[asyncThunkSymbol];return function(h){const{name:g,reducerPath:b=g}=h;if(!g)throw new Error(formatProdErrorMessage(11));typeof process<"u";const j=(typeof h.reducers=="function"?h.reducers(buildReducerCreators()):h.reducers)||{},_=Object.keys(j),$={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},_e={addCase(ct,ut){const dt=typeof ct=="string"?ct:ct.type;if(!dt)throw new Error(formatProdErrorMessage(12));if(dt in $.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return $.sliceCaseReducersByType[dt]=ut,_e},addMatcher(ct,ut){return $.sliceMatchers.push({matcher:ct,reducer:ut}),_e},exposeAction(ct,ut){return $.actionCreators[ct]=ut,_e},exposeCaseReducer(ct,ut){return $.sliceCaseReducersByName[ct]=ut,_e}};_.forEach(ct=>{const ut=j[ct],dt={reducerName:ct,type:getType(g,ct),createNotation:typeof h.reducers=="function"};isAsyncThunkSliceReducerDefinition(ut)?handleThunkCaseReducerDefinition(dt,ut,_e,i):handleNormalReducerDefinition(dt,ut,_e)});function et(){const[ct={},ut=[],dt=void 0]=typeof h.extraReducers=="function"?executeReducerBuilderCallback(h.extraReducers):[h.extraReducers],mt={...ct,...$.sliceCaseReducersByType};return createReducer(h.initialState,xt=>{for(let ft in mt)xt.addCase(ft,mt[ft]);for(let ft of $.sliceMatchers)xt.addMatcher(ft.matcher,ft.reducer);for(let ft of ut)xt.addMatcher(ft.matcher,ft.reducer);dt&&xt.addDefaultCase(dt)})}const tt=ct=>ct,rt=new Map,nt=new WeakMap;let it;function st(ct,ut){return it||(it=et()),it(ct,ut)}function at(){return it||(it=et()),it.getInitialState()}function ot(ct,ut=!1){function dt(xt){let ft=xt[ct];return typeof ft>"u"&&ut&&(ft=getOrInsertComputed(nt,dt,at)),ft}function mt(xt=tt){const ft=getOrInsertComputed(rt,ut,()=>new WeakMap);return getOrInsertComputed(ft,xt,()=>{const gt={};for(const[pt,yt]of Object.entries(h.selectors??{}))gt[pt]=wrapSelector(yt,xt,()=>getOrInsertComputed(nt,xt,at),ut);return gt})}return{reducerPath:ct,getSelectors:mt,get selectors(){return mt(dt)},selectSlice:dt}}const lt={name:g,reducer:st,actions:$.actionCreators,caseReducers:$.sliceCaseReducersByName,getInitialState:at,...ot(b),injectInto(ct,{reducerPath:ut,...dt}={}){const mt=ut??b;return ct.inject({reducerPath:mt,reducer:st},dt),{...lt,...ot(mt,!0)}}};return lt}}function wrapSelector(e,i,o,d){function h(g,...b){let j=i(g);return typeof j>"u"&&d&&(j=o()),e(j,...b)}return h.unwrapped=e,h}var createSlice=buildCreateSlice();function buildReducerCreators(){function e(i,o){return{_reducerDefinitionType:"asyncThunk",payloadCreator:i,...o}}return e.withTypes=()=>e,{reducer(i){return Object.assign({[i.name](...o){return i(...o)}}[i.name],{_reducerDefinitionType:"reducer"})},preparedReducer(i,o){return{_reducerDefinitionType:"reducerWithPrepare",prepare:i,reducer:o}},asyncThunk:e}}function handleNormalReducerDefinition({type:e,reducerName:i,createNotation:o},d,h){let g,b;if("reducer"in d){if(o&&!isCaseReducerWithPrepareDefinition(d))throw new Error(formatProdErrorMessage(17));g=d.reducer,b=d.prepare}else g=d;h.addCase(e,g).exposeCaseReducer(i,g).exposeAction(i,b?createAction(e,b):createAction(e))}function isAsyncThunkSliceReducerDefinition(e){return e._reducerDefinitionType==="asyncThunk"}function isCaseReducerWithPrepareDefinition(e){return e._reducerDefinitionType==="reducerWithPrepare"}function handleThunkCaseReducerDefinition({type:e,reducerName:i},o,d,h){if(!h)throw new Error(formatProdErrorMessage(18));const{payloadCreator:g,fulfilled:b,pending:j,rejected:_,settled:$,options:_e}=o,et=h(e,g,_e);d.exposeAction(i,et),b&&d.addCase(et.fulfilled,b),j&&d.addCase(et.pending,j),_&&d.addCase(et.rejected,_),$&&d.addMatcher(et.settled,$),d.exposeCaseReducer(i,{fulfilled:b||noop,pending:j||noop,rejected:_||noop,settled:$||noop})}function noop(){}var task="task",listener="listener",completed="completed",cancelled="cancelled",taskCancelled=`task-${cancelled}`,taskCompleted=`task-${completed}`,listenerCancelled=`${listener}-${cancelled}`,listenerCompleted=`${listener}-${completed}`,TaskAbortError=class{constructor(e){_r(this,"name","TaskAbortError");_r(this,"message");this.code=e,this.message=`${task} ${cancelled} (reason: ${e})`}},assertFunction=(e,i)=>{if(typeof e!="function")throw new TypeError(formatProdErrorMessage(32))},noop2=()=>{},catchRejection=(e,i=noop2)=>(e.catch(i),e),addAbortSignalListener=(e,i)=>(e.addEventListener("abort",i,{once:!0}),()=>e.removeEventListener("abort",i)),validateActive=e=>{if(e.aborted)throw new TaskAbortError(e.reason)};function raceWithSignal(e,i){let o=noop2;return new Promise((d,h)=>{const g=()=>h(new TaskAbortError(e.reason));if(e.aborted){g();return}o=addAbortSignalListener(e,g),i.finally(()=>o()).then(d,h)}).finally(()=>{o=noop2})}var runTask=async(e,i)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(o){return{status:o instanceof TaskAbortError?"cancelled":"rejected",error:o}}finally{i==null||i()}},createPause=e=>i=>catchRejection(raceWithSignal(e,i).then(o=>(validateActive(e),o))),createDelay=e=>{const i=createPause(e);return o=>i(new Promise(d=>setTimeout(d,o)))},{assign}=Object,INTERNAL_NIL_TOKEN={},alm="listenerMiddleware",createFork=(e,i)=>{const o=d=>addAbortSignalListener(e,()=>d.abort(e.reason));return(d,h)=>{assertFunction(d);const g=new AbortController;o(g);const b=runTask(async()=>{validateActive(e),validateActive(g.signal);const j=await d({pause:createPause(g.signal),delay:createDelay(g.signal),signal:g.signal});return validateActive(g.signal),j},()=>g.abort(taskCompleted));return h!=null&&h.autoJoin&&i.push(b.catch(noop2)),{result:createPause(e)(b),cancel(){g.abort(taskCancelled)}}}},createTakePattern=(e,i)=>{const o=async(d,h)=>{validateActive(i);let g=()=>{};const j=[new Promise((_,$)=>{let _e=e({predicate:d,effect:(et,tt)=>{tt.unsubscribe(),_([et,tt.getState(),tt.getOriginalState()])}});g=()=>{_e(),$()}})];h!=null&&j.push(new Promise(_=>setTimeout(_,h,null)));try{const _=await raceWithSignal(i,Promise.race(j));return validateActive(i),_}finally{g()}};return(d,h)=>catchRejection(o(d,h))},getListenerEntryPropsFrom=e=>{let{type:i,actionCreator:o,matcher:d,predicate:h,effect:g}=e;if(i)h=createAction(i).match;else if(o)i=o.type,h=o.match;else if(d)h=d;else if(!h)throw new Error(formatProdErrorMessage(21));return assertFunction(g),{predicate:h,type:i,effect:g}},createListenerEntry=assign(e=>{const{type:i,predicate:o,effect:d}=getListenerEntryPropsFrom(e);return{id:nanoid(),effect:d,type:i,predicate:o,pending:new Set,unsubscribe:()=>{throw new Error(formatProdErrorMessage(22))}}},{withTypes:()=>createListenerEntry}),findListenerEntry=(e,i)=>{const{type:o,effect:d,predicate:h}=getListenerEntryPropsFrom(i);return Array.from(e.values()).find(g=>(typeof o=="string"?g.type===o:g.predicate===h)&&g.effect===d)},cancelActiveListeners=e=>{e.pending.forEach(i=>{i.abort(listenerCancelled)})},createClearListenerMiddleware=(e,i)=>()=>{for(const o of i.keys())cancelActiveListeners(o);e.clear()},safelyNotifyError=(e,i,o)=>{try{e(i,o)}catch(d){setTimeout(()=>{throw d},0)}},addListener=assign(createAction(`${alm}/add`),{withTypes:()=>addListener}),clearAllListeners=createAction(`${alm}/removeAll`),removeListener=assign(createAction(`${alm}/remove`),{withTypes:()=>removeListener}),defaultErrorHandler=(...e)=>{console.error(`${alm}/error`,...e)},createListenerMiddleware=(e={})=>{const i=new Map,o=new Map,d=rt=>{const nt=o.get(rt)??0;o.set(rt,nt+1)},h=rt=>{const nt=o.get(rt)??1;nt===1?o.delete(rt):o.set(rt,nt-1)},{extra:g,onError:b=defaultErrorHandler}=e;assertFunction(b);const j=rt=>(rt.unsubscribe=()=>i.delete(rt.id),i.set(rt.id,rt),nt=>{rt.unsubscribe(),nt!=null&&nt.cancelActive&&cancelActiveListeners(rt)}),_=rt=>{const nt=findListenerEntry(i,rt)??createListenerEntry(rt);return j(nt)};assign(_,{withTypes:()=>_});const $=rt=>{const nt=findListenerEntry(i,rt);return nt&&(nt.unsubscribe(),rt.cancelActive&&cancelActiveListeners(nt)),!!nt};assign($,{withTypes:()=>$});const _e=async(rt,nt,it,st)=>{const at=new AbortController,ot=createTakePattern(_,at.signal),lt=[];try{rt.pending.add(at),d(rt),await Promise.resolve(rt.effect(nt,assign({},it,{getOriginalState:st,condition:(ct,ut)=>ot(ct,ut).then(Boolean),take:ot,delay:createDelay(at.signal),pause:createPause(at.signal),extra:g,signal:at.signal,fork:createFork(at.signal,lt),unsubscribe:rt.unsubscribe,subscribe:()=>{i.set(rt.id,rt)},cancelActiveListeners:()=>{rt.pending.forEach((ct,ut,dt)=>{ct!==at&&(ct.abort(listenerCancelled),dt.delete(ct))})},cancel:()=>{at.abort(listenerCancelled),rt.pending.delete(at)},throwIfCancelled:()=>{validateActive(at.signal)}})))}catch(ct){ct instanceof TaskAbortError||safelyNotifyError(b,ct,{raisedBy:"effect"})}finally{await Promise.all(lt),at.abort(listenerCompleted),h(rt),rt.pending.delete(at)}},et=createClearListenerMiddleware(i,o);return{middleware:rt=>nt=>it=>{if(!isAction(it))return nt(it);if(addListener.match(it))return _(it.payload);if(clearAllListeners.match(it)){et();return}if(removeListener.match(it))return $(it.payload);let st=rt.getState();const at=()=>{if(st===INTERNAL_NIL_TOKEN)throw new Error(formatProdErrorMessage(23));return st};let ot;try{if(ot=nt(it),i.size>0){const lt=rt.getState(),ct=Array.from(i.values());for(const ut of ct){let dt=!1;try{dt=ut.predicate(it,lt,st)}catch(mt){dt=!1,safelyNotifyError(b,mt,{raisedBy:"predicate"})}dt&&_e(ut,it,rt,at)}}}finally{st=INTERNAL_NIL_TOKEN}return ot},startListening:_,stopListening:$,clearListeners:et}};function formatProdErrorMessage(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var initialState$b={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},chartLayoutSlice=createSlice({name:"chartLayout",initialState:initialState$b,reducers:{setLayout(e,i){e.layoutType=i.payload},setChartSize(e,i){e.width=i.payload.width,e.height=i.payload.height},setMargin(e,i){var o,d,h,g;e.margin.top=(o=i.payload.top)!==null&&o!==void 0?o:0,e.margin.right=(d=i.payload.right)!==null&&d!==void 0?d:0,e.margin.bottom=(h=i.payload.bottom)!==null&&h!==void 0?h:0,e.margin.left=(g=i.payload.left)!==null&&g!==void 0?g:0},setScale(e,i){e.scale=i.payload}}}),{setMargin,setLayout,setChartSize,setScale}=chartLayoutSlice.actions,chartLayoutReducer=chartLayoutSlice.reducer;function getSliced(e,i,o){return Array.isArray(e)&&e&&i+o!==0?e.slice(i,o+1):e}function isWellBehavedNumber(e){return Number.isFinite(e)}function isPositiveNumber(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function ownKeys$x(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$x(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$x(Object(o),!0).forEach(function(d){_defineProperty$A(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$x(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$A(e,i,o){return(i=_toPropertyKey$A(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$A(e){var i=_toPrimitive$A(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$A(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function getValueByDataKey(e,i,o){return isNullish(e)||isNullish(i)?o:isNumOrStr(i)?get$2(e,i,o):typeof i=="function"?i(e):o}var appendOffsetOfLegend=(e,i,o)=>{if(i&&o){var{width:d,height:h}=o,{align:g,verticalAlign:b,layout:j}=i;if((j==="vertical"||j==="horizontal"&&b==="middle")&&g!=="center"&&isNumber(e[g]))return _objectSpread$x(_objectSpread$x({},e),{},{[g]:e[g]+(d||0)});if((j==="horizontal"||j==="vertical"&&g==="center")&&b!=="middle"&&isNumber(e[b]))return _objectSpread$x(_objectSpread$x({},e),{},{[b]:e[b]+(h||0)})}return e},isCategoricalAxis=(e,i)=>e==="horizontal"&&i==="xAxis"||e==="vertical"&&i==="yAxis"||e==="centric"&&i==="angleAxis"||e==="radial"&&i==="radiusAxis",getCoordinatesOfGrid=(e,i,o,d)=>{if(d)return e.map(j=>j.coordinate);var h,g,b=e.map(j=>(j.coordinate===i&&(h=!0),j.coordinate===o&&(g=!0),j.coordinate));return h||b.push(i),g||b.push(o),b},getTicksOfAxis=(e,i,o)=>{if(!e)return null;var{duplicateDomain:d,type:h,range:g,scale:b,realScaleType:j,isCategorical:_,categoricalDomain:$,tickCount:_e,ticks:et,niceTicks:tt,axisType:rt}=e;if(!b)return null;var nt=j==="scaleBand"&&b.bandwidth?b.bandwidth()/2:2,it=h==="category"&&b.bandwidth?b.bandwidth()/nt:0;if(it=rt==="angleAxis"&&g&&g.length>=2?mathSign(g[0]-g[1])*2*it:it,et||tt){var st=(et||tt||[]).map((at,ot)=>{var lt=d?d.indexOf(at):at;return{coordinate:b(lt)+it,value:at,offset:it,index:ot}});return st.filter(at=>!isNan(at.coordinate))}return _&&$?$.map((at,ot)=>({coordinate:b(at)+it,value:at,index:ot,offset:it})):b.ticks&&!o&&_e!=null?b.ticks(_e).map((at,ot)=>({coordinate:b(at)+it,value:at,offset:it,index:ot})):b.domain().map((at,ot)=>({coordinate:b(at)+it,value:d?d[at]:at,index:ot,offset:it}))},EPS=1e-4,checkDomainOfScale=e=>{var i=e.domain();if(!(!i||i.length<=2)){var o=i.length,d=e.range(),h=Math.min(d[0],d[1])-EPS,g=Math.max(d[0],d[1])+EPS,b=e(i[0]),j=e(i[o-1]);(b<h||b>g||j<h||j>g)&&e.domain([i[0],i[o-1]])}},truncateByDomain=(e,i)=>{if(!i||i.length!==2||!isNumber(i[0])||!isNumber(i[1]))return e;var o=Math.min(i[0],i[1]),d=Math.max(i[0],i[1]),h=[e[0],e[1]];return(!isNumber(e[0])||e[0]<o)&&(h[0]=o),(!isNumber(e[1])||e[1]>d)&&(h[1]=d),h[0]>d&&(h[0]=d),h[1]<o&&(h[1]=o),h},offsetSign=e=>{var i,o=e.length;if(!(o<=0)){var d=(i=e[0])===null||i===void 0?void 0:i.length;if(!(d==null||d<=0))for(var h=0;h<d;++h)for(var g=0,b=0,j=0;j<o;++j){var _=e[j],$=_==null?void 0:_[h];if($!=null){var _e=$[1],et=$[0],tt=isNan(_e)?et:_e;tt>=0?($[0]=g,$[1]=g+tt,g=_e):($[0]=b,$[1]=b+tt,b=_e)}}}},offsetPositive=e=>{var i,o=e.length;if(!(o<=0)){var d=(i=e[0])===null||i===void 0?void 0:i.length;if(!(d==null||d<=0))for(var h=0;h<d;++h)for(var g=0,b=0;b<o;++b){var j=e[b],_=j==null?void 0:j[h];if(_!=null){var $=isNan(_[1])?_[0]:_[1];$>=0?(_[0]=g,_[1]=g+$,g=_[1]):(_[0]=0,_[1]=0)}}}},STACK_OFFSET_MAP={sign:offsetSign,expand:stackOffsetExpand,none:stackOffsetNone,silhouette:stackOffsetSilhouette,wiggle:stackOffsetWiggle,positive:offsetPositive},getStackedData=(e,i,o)=>{var d,h=(d=STACK_OFFSET_MAP[o])!==null&&d!==void 0?d:stackOffsetNone,g=shapeStack().keys(i).value((j,_)=>Number(getValueByDataKey(j,_,0))).order(stackOrderNone).offset(h),b=g(e);return b.forEach((j,_)=>{j.forEach(($,_e)=>{var et=getValueByDataKey(e[_e],i[_],0);Array.isArray(et)&&et.length===2&&isNumber(et[0])&&isNumber(et[1])&&($[0]=et[0],$[1]=et[1])})}),b};function getNormalizedStackId(e){return e==null?void 0:String(e)}function getCateCoordinateOfLine(e){var{axis:i,ticks:o,bandSize:d,entry:h,index:g,dataKey:b}=e;if(i.type==="category"){if(!i.allowDuplicatedCategory&&i.dataKey&&!isNullish(h[i.dataKey])){var j=findEntryInArray(o,"value",h[i.dataKey]);if(j)return j.coordinate+d/2}return o[g]?o[g].coordinate+d/2:null}var _=getValueByDataKey(h,isNullish(b)?i.dataKey:b);return isNullish(_)?null:i.scale(_)}var getCateCoordinateOfBar=e=>{var{axis:i,ticks:o,offset:d,bandSize:h,entry:g,index:b}=e;if(i.type==="category")return o[b]?o[b].coordinate+d:null;var j=getValueByDataKey(g,i.dataKey,i.scale.domain()[b]);return isNullish(j)?null:i.scale(j)-h/2+d},getBaseValueOfBar=e=>{var{numericAxis:i}=e,o=i.scale.domain();if(i.type==="number"){var d=Math.min(o[0],o[1]),h=Math.max(o[0],o[1]);return d<=0&&h>=0?0:h<0?h:d}return o[0]},getDomainOfSingle=e=>{var i=e.flat(2).filter(isNumber);return[Math.min(...i),Math.max(...i)]},makeDomainFinite=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],getDomainOfStackGroups=(e,i,o)=>{if(e!=null)return makeDomainFinite(Object.keys(e).reduce((d,h)=>{var g=e[h];if(!g)return d;var{stackedData:b}=g,j=b.reduce((_,$)=>{var _e=getSliced($,i,o),et=getDomainOfSingle(_e);return!isWellBehavedNumber(et[0])||!isWellBehavedNumber(et[1])?_:[Math.min(_[0],et[0]),Math.max(_[1],et[1])]},[1/0,-1/0]);return[Math.min(j[0],d[0]),Math.max(j[1],d[1])]},[1/0,-1/0]))},MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,getBandSizeOfAxis=(e,i,o)=>{if(e&&e.scale&&e.scale.bandwidth){var d=e.scale.bandwidth();if(!o||d>0)return d}if(e&&i&&i.length>=2){for(var h=sortBy$1(i,_e=>_e.coordinate),g=1/0,b=1,j=h.length;b<j;b++){var _=h[b],$=h[b-1];g=Math.min(((_==null?void 0:_.coordinate)||0)-(($==null?void 0:$.coordinate)||0),g)}return g===1/0?0:g}return o?void 0:0};function getTooltipEntry(e){var{tooltipEntrySettings:i,dataKey:o,payload:d,value:h,name:g}=e;return _objectSpread$x(_objectSpread$x({},i),{},{dataKey:o,payload:d,value:h,name:g})}function getTooltipNameProp(e,i){if(e)return String(e);if(typeof i=="string")return i}var calculateCartesianTooltipPos=(e,i)=>{if(i==="horizontal")return e.chartX;if(i==="vertical")return e.chartY},calculatePolarTooltipPos=(e,i)=>i==="centric"?e.angle:e.radius,selectChartWidth=e=>e.layout.width,selectChartHeight=e=>e.layout.height,selectContainerScale=e=>e.layout.scale,selectMargin=e=>e.layout.margin,selectAllXAxes=createSelector(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),selectAllYAxes=createSelector(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),DATA_ITEM_INDEX_ATTRIBUTE_NAME="data-recharts-item-index",DATA_ITEM_GRAPHICAL_ITEM_ID_ATTRIBUTE_NAME="data-recharts-item-id",DEFAULT_Y_AXIS_WIDTH=60;function ownKeys$w(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$w(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$w(Object(o),!0).forEach(function(d){_defineProperty$z(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$w(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$z(e,i,o){return(i=_toPropertyKey$z(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$z(e){var i=_toPrimitive$z(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$z(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var selectBrushHeight=e=>e.brush.height;function selectLeftAxesOffset(e){var i=selectAllYAxes(e);return i.reduce((o,d)=>{if(d.orientation==="left"&&!d.mirror&&!d.hide){var h=typeof d.width=="number"?d.width:DEFAULT_Y_AXIS_WIDTH;return o+h}return o},0)}function selectRightAxesOffset(e){var i=selectAllYAxes(e);return i.reduce((o,d)=>{if(d.orientation==="right"&&!d.mirror&&!d.hide){var h=typeof d.width=="number"?d.width:DEFAULT_Y_AXIS_WIDTH;return o+h}return o},0)}function selectTopAxesOffset(e){var i=selectAllXAxes(e);return i.reduce((o,d)=>d.orientation==="top"&&!d.mirror&&!d.hide?o+d.height:o,0)}function selectBottomAxesOffset(e){var i=selectAllXAxes(e);return i.reduce((o,d)=>d.orientation==="bottom"&&!d.mirror&&!d.hide?o+d.height:o,0)}var selectChartOffsetInternal=createSelector([selectChartWidth,selectChartHeight,selectMargin,selectBrushHeight,selectLeftAxesOffset,selectRightAxesOffset,selectTopAxesOffset,selectBottomAxesOffset,selectLegendSettings,selectLegendSize],(e,i,o,d,h,g,b,j,_,$)=>{var _e={left:(o.left||0)+h,right:(o.right||0)+g},et={top:(o.top||0)+b,bottom:(o.bottom||0)+j},tt=_objectSpread$w(_objectSpread$w({},et),_e),rt=tt.bottom;tt.bottom+=d,tt=appendOffsetOfLegend(tt,_,$);var nt=e-tt.left-tt.right,it=i-tt.top-tt.bottom;return _objectSpread$w(_objectSpread$w({brushBottom:rt},tt),{},{width:Math.max(nt,0),height:Math.max(it,0)})}),selectChartViewBox=createSelector(selectChartOffsetInternal,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),selectAxisViewBox=createSelector(selectChartWidth,selectChartHeight,(e,i)=>({x:0,y:0,width:e,height:i})),PanoramaContext=reactExports.createContext(null),useIsPanorama=()=>reactExports.useContext(PanoramaContext)!=null,selectBrushSettings=e=>e.brush,selectBrushDimensions=createSelector([selectBrushSettings,selectChartOffsetInternal,selectMargin],(e,i,o)=>({height:e.height,x:isNumber(e.x)?e.x:i.left,y:isNumber(e.y)?e.y:i.top+i.height+i.brushBottom-((o==null?void 0:o.bottom)||0),width:isNumber(e.width)?e.width:i.width})),throttle$2={},debounce$1={},debounce={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o,d,{signal:h,edges:g}={}){let b,j=null;const _=g!=null&&g.includes("leading"),$=g==null||g.includes("trailing"),_e=()=>{j!==null&&(o.apply(b,j),b=void 0,j=null)},et=()=>{$&&_e(),it()};let tt=null;const rt=()=>{tt!=null&&clearTimeout(tt),tt=setTimeout(()=>{tt=null,et()},d)},nt=()=>{tt!==null&&(clearTimeout(tt),tt=null)},it=()=>{nt(),b=void 0,j=null},st=()=>{_e()},at=function(...ot){if(h!=null&&h.aborted)return;b=this,j=ot;const lt=tt==null;rt(),_&&lt&&_e()};return at.schedule=rt,at.cancel=it,at.flush=st,h==null||h.addEventListener("abort",it,{once:!0}),at}e.debounce=i})(debounce);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=debounce;function o(d,h=0,g={}){typeof g!="object"&&(g={});const{leading:b=!1,trailing:j=!0,maxWait:_}=g,$=Array(2);b&&($[0]="leading"),j&&($[1]="trailing");let _e,et=null;const tt=i.debounce(function(...it){_e=d.apply(this,it),et=null},h,{edges:$}),rt=function(...it){return _!=null&&(et===null&&(et=Date.now()),Date.now()-et>=_)?(_e=d.apply(this,it),et=Date.now(),tt.cancel(),tt.schedule(),_e):(tt.apply(this,it),_e)},nt=()=>(tt.flush(),_e);return rt.cancel=tt.cancel,rt.flush=nt,rt}e.debounce=o})(debounce$1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=debounce$1;function o(d,h=0,g={}){const{leading:b=!0,trailing:j=!0}=g;return i.debounce(d,h,{leading:b,maxWait:h,trailing:j})}e.throttle=o})(throttle$2);var throttle=throttle$2.throttle;const throttle$1=getDefaultExportFromCjs(throttle);var warn=function e(i,o){for(var d=arguments.length,h=new Array(d>2?d-2:0),g=2;g<d;g++)h[g-2]=arguments[g];if(typeof console<"u"&&console.warn&&(o===void 0&&console.warn("LogUtils requires an error message argument"),!i))if(o===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var b=0;console.warn(o.replace(/%s/g,()=>h[b++]))}},calculateChartDimensions=(e,i,o)=>{var{width:d="100%",height:h="100%",aspect:g,maxHeight:b}=o,j=isPercent(d)?e:Number(d),_=isPercent(h)?i:Number(h);return g&&g>0&&(j?_=j/g:_&&(j=_*g),b&&_!=null&&_>b&&(_=b)),{calculatedWidth:j,calculatedHeight:_}},bothOverflow={width:0,height:0,overflow:"visible"},overflowX={width:0,overflowX:"visible"},overflowY={height:0,overflowY:"visible"},noStyle={},getInnerDivStyle=e=>{var{width:i,height:o}=e,d=isPercent(i),h=isPercent(o);return d&&h?bothOverflow:d?overflowX:h?overflowY:noStyle};function getDefaultWidthAndHeight(e){var{width:i,height:o,aspect:d}=e,h=i,g=o;return h===void 0&&g===void 0?(h="100%",g="100%"):h===void 0?h=d&&d>0?void 0:"100%":g===void 0&&(g=d&&d>0?void 0:"100%"),{width:h,height:g}}function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$n.apply(null,arguments)}function ownKeys$v(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$v(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$v(Object(o),!0).forEach(function(d){_defineProperty$y(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$v(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$y(e,i,o){return(i=_toPropertyKey$y(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$y(e){var i=_toPrimitive$y(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$y(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var ResponsiveContainerContext=reactExports.createContext({width:-1,height:-1});function isAcceptableSize(e){return isPositiveNumber(e.width)&&isPositiveNumber(e.height)}function ResponsiveContainerContextProvider(e){var{children:i,width:o,height:d}=e,h=reactExports.useMemo(()=>({width:o,height:d}),[o,d]);return isAcceptableSize(h)?reactExports.createElement(ResponsiveContainerContext.Provider,{value:h},i):null}var useResponsiveContainerContext=()=>reactExports.useContext(ResponsiveContainerContext),SizeDetectorContainer=reactExports.forwardRef((e,i)=>{var{aspect:o,initialDimension:d={width:-1,height:-1},width:h,height:g,minWidth:b=0,minHeight:j,maxHeight:_,children:$,debounce:_e=0,id:et,className:tt,onResize:rt,style:nt={}}=e,it=reactExports.useRef(null),st=reactExports.useRef();st.current=rt,reactExports.useImperativeHandle(i,()=>it.current);var[at,ot]=reactExports.useState({containerWidth:d.width,containerHeight:d.height}),lt=reactExports.useCallback((xt,ft)=>{ot(gt=>{var pt=Math.round(xt),yt=Math.round(ft);return gt.containerWidth===pt&&gt.containerHeight===yt?gt:{containerWidth:pt,containerHeight:yt}})},[]);reactExports.useEffect(()=>{if(it.current==null||typeof ResizeObserver>"u")return noop$2;var xt=yt=>{var bt,{width:St,height:wt}=yt[0].contentRect;lt(St,wt),(bt=st.current)===null||bt===void 0||bt.call(st,St,wt)};_e>0&&(xt=throttle$1(xt,_e,{trailing:!0,leading:!1}));var ft=new ResizeObserver(xt),{width:gt,height:pt}=it.current.getBoundingClientRect();return lt(gt,pt),ft.observe(it.current),()=>{ft.disconnect()}},[lt,_e]);var{containerWidth:ct,containerHeight:ut}=at;warn(!o||o>0,"The aspect(%s) must be greater than zero.",o);var{calculatedWidth:dt,calculatedHeight:mt}=calculateChartDimensions(ct,ut,{width:h,height:g,aspect:o,maxHeight:_});return warn(dt!=null&&dt>0||mt!=null&&mt>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,dt,mt,h,g,b,j,o),reactExports.createElement("div",{id:et?"".concat(et):void 0,className:clsx("recharts-responsive-container",tt),style:_objectSpread$v(_objectSpread$v({},nt),{},{width:h,height:g,minWidth:b,minHeight:j,maxHeight:_}),ref:it},reactExports.createElement("div",{style:getInnerDivStyle({width:h,height:g})},reactExports.createElement(ResponsiveContainerContextProvider,{width:dt,height:mt},$)))}),ResponsiveContainer=reactExports.forwardRef((e,i)=>{var o=useResponsiveContainerContext();if(isPositiveNumber(o.width)&&isPositiveNumber(o.height))return e.children;var{width:d,height:h}=getDefaultWidthAndHeight({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:g,calculatedHeight:b}=calculateChartDimensions(void 0,void 0,{width:d,height:h,aspect:e.aspect,maxHeight:e.maxHeight});return isNumber(g)&&isNumber(b)?reactExports.createElement(ResponsiveContainerContextProvider,{width:g,height:b},e.children):reactExports.createElement(SizeDetectorContainer,_extends$n({},e,{width:d,height:h,ref:i}))});function cartesianViewBoxToTrapezoid(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var useViewBox=()=>{var e,i=useIsPanorama(),o=useAppSelector(selectChartViewBox),d=useAppSelector(selectBrushDimensions),h=(e=useAppSelector(selectBrushSettings))===null||e===void 0?void 0:e.padding;return!i||!d||!h?o:{width:d.width-h.left-h.right,height:d.height-h.top-h.bottom,x:h.left,y:h.top}},manyComponentsThrowErrorsIfOffsetIsUndefined={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},useOffsetInternal=()=>{var e;return(e=useAppSelector(selectChartOffsetInternal))!==null&&e!==void 0?e:manyComponentsThrowErrorsIfOffsetIsUndefined},useChartWidth=()=>useAppSelector(selectChartWidth),useChartHeight=()=>useAppSelector(selectChartHeight),selectChartLayout=e=>e.layout.layoutType,useChartLayout=()=>useAppSelector(selectChartLayout),useIsInChartContext=()=>{var e=useChartLayout();return e!==void 0},ReportChartSize=e=>{var i=useAppDispatch(),o=useIsPanorama(),{width:d,height:h}=e,g=useResponsiveContainerContext(),b=d,j=h;return g&&(b=g.width>0?g.width:d,j=g.height>0?g.height:h),reactExports.useEffect(()=>{!o&&isPositiveNumber(b)&&isPositiveNumber(j)&&i(setChartSize({width:b,height:j}))},[i,o,b,j]),null},NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(e,...i){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf=Object.getPrototypeOf;function isDraft(e){return!!e&&!!e[DRAFT_STATE]}function isDraftable(e){var i;return e?isPlainObject$3(e)||Array.isArray(e)||!!e[DRAFTABLE]||!!((i=e.constructor)!=null&&i[DRAFTABLE])||isMap(e)||isSet(e):!1}var objectCtorString=Object.prototype.constructor.toString(),cachedCtorStrings=new WeakMap;function isPlainObject$3(e){if(!e||typeof e!="object")return!1;const i=Object.getPrototypeOf(e);if(i===null||i===Object.prototype)return!0;const o=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;if(o===Object)return!0;if(typeof o!="function")return!1;let d=cachedCtorStrings.get(o);return d===void 0&&(d=Function.toString.call(o),cachedCtorStrings.set(o,d)),d===objectCtorString}function each(e,i,o=!0){getArchtype(e)===0?(o?Reflect.ownKeys(e):Object.keys(e)).forEach(h=>{i(h,e[h],e)}):e.forEach((d,h)=>i(h,d,e))}function getArchtype(e){const i=e[DRAFT_STATE];return i?i.type_:Array.isArray(e)?1:isMap(e)?2:isSet(e)?3:0}function has(e,i){return getArchtype(e)===2?e.has(i):Object.prototype.hasOwnProperty.call(e,i)}function set(e,i,o){const d=getArchtype(e);d===2?e.set(i,o):d===3?e.add(o):e[i]=o}function is$2(e,i){return e===i?e!==0||1/e===1/i:e!==e&&i!==i}function isMap(e){return e instanceof Map}function isSet(e){return e instanceof Set}function latest(e){return e.copy_||e.base_}function shallowCopy(e,i){if(isMap(e))return new Map(e);if(isSet(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const o=isPlainObject$3(e);if(i===!0||i==="class_only"&&!o){const d=Object.getOwnPropertyDescriptors(e);delete d[DRAFT_STATE];let h=Reflect.ownKeys(d);for(let g=0;g<h.length;g++){const b=h[g],j=d[b];j.writable===!1&&(j.writable=!0,j.configurable=!0),(j.get||j.set)&&(d[b]={configurable:!0,writable:!0,enumerable:j.enumerable,value:e[b]})}return Object.create(getPrototypeOf(e),d)}else{const d=getPrototypeOf(e);if(d!==null&&o)return{...e};const h=Object.create(d);return Object.assign(h,e)}}function freeze(e,i=!1){return isFrozen(e)||isDraft(e)||!isDraftable(e)||(getArchtype(e)>1&&Object.defineProperties(e,{set:dontMutateMethodOverride,add:dontMutateMethodOverride,clear:dontMutateMethodOverride,delete:dontMutateMethodOverride}),Object.freeze(e),i&&Object.values(e).forEach(o=>freeze(o,!0))),e}function dontMutateFrozenCollections(){die(2)}var dontMutateMethodOverride={value:dontMutateFrozenCollections};function isFrozen(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var plugins={};function getPlugin(e){const i=plugins[e];return i||die(0,e),i}var currentScope;function getCurrentScope(){return currentScope}function createScope(e,i){return{drafts_:[],parent_:e,immer_:i,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(e,i){i&&(getPlugin("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=i)}function revokeScope(e){leaveScope(e),e.drafts_.forEach(revokeDraft),e.drafts_=null}function leaveScope(e){e===currentScope&&(currentScope=e.parent_)}function enterScope(e){return currentScope=createScope(currentScope,e)}function revokeDraft(e){const i=e[DRAFT_STATE];i.type_===0||i.type_===1?i.revoke_():i.revoked_=!0}function processResult(e,i){i.unfinalizedDrafts_=i.drafts_.length;const o=i.drafts_[0];return e!==void 0&&e!==o?(o[DRAFT_STATE].modified_&&(revokeScope(i),die(4)),isDraftable(e)&&(e=finalize(i,e),i.parent_||maybeFreeze(i,e)),i.patches_&&getPlugin("Patches").generateReplacementPatches_(o[DRAFT_STATE].base_,e,i.patches_,i.inversePatches_)):e=finalize(i,o,[]),revokeScope(i),i.patches_&&i.patchListener_(i.patches_,i.inversePatches_),e!==NOTHING?e:void 0}function finalize(e,i,o){if(isFrozen(i))return i;const d=e.immer_.shouldUseStrictIteration(),h=i[DRAFT_STATE];if(!h)return each(i,(g,b)=>finalizeProperty(e,h,i,g,b,o),d),i;if(h.scope_!==e)return i;if(!h.modified_)return maybeFreeze(e,h.base_,!0),h.base_;if(!h.finalized_){h.finalized_=!0,h.scope_.unfinalizedDrafts_--;const g=h.copy_;let b=g,j=!1;h.type_===3&&(b=new Set(g),g.clear(),j=!0),each(b,(_,$)=>finalizeProperty(e,h,g,_,$,o,j),d),maybeFreeze(e,g,!1),o&&e.patches_&&getPlugin("Patches").generatePatches_(h,o,e.patches_,e.inversePatches_)}return h.copy_}function finalizeProperty(e,i,o,d,h,g,b){if(h==null||typeof h!="object"&&!b)return;const j=isFrozen(h);if(!(j&&!b)){if(isDraft(h)){const _=g&&i&&i.type_!==3&&!has(i.assigned_,d)?g.concat(d):void 0,$=finalize(e,h,_);if(set(o,d,$),isDraft($))e.canAutoFreeze_=!1;else return}else b&&o.add(h);if(isDraftable(h)&&!j){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||i&&i.base_&&i.base_[d]===h&&j)return;finalize(e,h),(!i||!i.scope_.parent_)&&typeof d!="symbol"&&(isMap(o)?o.has(d):Object.prototype.propertyIsEnumerable.call(o,d))&&maybeFreeze(e,h)}}}function maybeFreeze(e,i,o=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&freeze(i,o)}function createProxyProxy(e,i){const o=Array.isArray(e),d={type_:o?1:0,scope_:i?i.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:i,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let h=d,g=objectTraps;o&&(h=[d],g=arrayTraps);const{revoke:b,proxy:j}=Proxy.revocable(h,g);return d.draft_=j,d.revoke_=b,j}var objectTraps={get(e,i){if(i===DRAFT_STATE)return e;const o=latest(e);if(!has(o,i))return readPropFromProto(e,o,i);const d=o[i];return e.finalized_||!isDraftable(d)?d:d===peek(e.base_,i)?(prepareCopy(e),e.copy_[i]=createProxy(d,e)):d},has(e,i){return i in latest(e)},ownKeys(e){return Reflect.ownKeys(latest(e))},set(e,i,o){const d=getDescriptorFromProto(latest(e),i);if(d!=null&&d.set)return d.set.call(e.draft_,o),!0;if(!e.modified_){const h=peek(latest(e),i),g=h==null?void 0:h[DRAFT_STATE];if(g&&g.base_===o)return e.copy_[i]=o,e.assigned_[i]=!1,!0;if(is$2(o,h)&&(o!==void 0||has(e.base_,i)))return!0;prepareCopy(e),markChanged(e)}return e.copy_[i]===o&&(o!==void 0||i in e.copy_)||Number.isNaN(o)&&Number.isNaN(e.copy_[i])||(e.copy_[i]=o,e.assigned_[i]=!0),!0},deleteProperty(e,i){return peek(e.base_,i)!==void 0||i in e.base_?(e.assigned_[i]=!1,prepareCopy(e),markChanged(e)):delete e.assigned_[i],e.copy_&&delete e.copy_[i],!0},getOwnPropertyDescriptor(e,i){const o=latest(e),d=Reflect.getOwnPropertyDescriptor(o,i);return d&&{writable:!0,configurable:e.type_!==1||i!=="length",enumerable:d.enumerable,value:o[i]}},defineProperty(){die(11)},getPrototypeOf(e){return getPrototypeOf(e.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(e,i)=>{arrayTraps[e]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}});arrayTraps.deleteProperty=function(e,i){return arrayTraps.set.call(this,e,i,void 0)};arrayTraps.set=function(e,i,o){return objectTraps.set.call(this,e[0],i,o,e[0])};function peek(e,i){const o=e[DRAFT_STATE];return(o?latest(o):e)[i]}function readPropFromProto(e,i,o){var h;const d=getDescriptorFromProto(i,o);return d?"value"in d?d.value:(h=d.get)==null?void 0:h.call(e.draft_):void 0}function getDescriptorFromProto(e,i){if(!(i in e))return;let o=getPrototypeOf(e);for(;o;){const d=Object.getOwnPropertyDescriptor(o,i);if(d)return d;o=getPrototypeOf(o)}}function markChanged(e){e.modified_||(e.modified_=!0,e.parent_&&markChanged(e.parent_))}function prepareCopy(e){e.copy_||(e.copy_=shallowCopy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(i,o,d)=>{if(typeof i=="function"&&typeof o!="function"){const g=o;o=i;const b=this;return function(_=g,...$){return b.produce(_,_e=>o.call(this,_e,...$))}}typeof o!="function"&&die(6),d!==void 0&&typeof d!="function"&&die(7);let h;if(isDraftable(i)){const g=enterScope(this),b=createProxy(i,void 0);let j=!0;try{h=o(b),j=!1}finally{j?revokeScope(g):leaveScope(g)}return usePatchesInScope(g,d),processResult(h,g)}else if(!i||typeof i!="object"){if(h=o(i),h===void 0&&(h=i),h===NOTHING&&(h=void 0),this.autoFreeze_&&freeze(h,!0),d){const g=[],b=[];getPlugin("Patches").generateReplacementPatches_(i,h,g,b),d(g,b)}return h}else die(1,i)},this.produceWithPatches=(i,o)=>{if(typeof i=="function")return(b,...j)=>this.produceWithPatches(b,_=>i(_,...j));let d,h;return[this.produce(i,o,(b,j)=>{d=b,h=j}),d,h]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){isDraftable(e)||die(8),isDraft(e)&&(e=current(e));const i=enterScope(this),o=createProxy(e,void 0);return o[DRAFT_STATE].isManual_=!0,leaveScope(i),o}finishDraft(e,i){const o=e&&e[DRAFT_STATE];(!o||!o.isManual_)&&die(9);const{scope_:d}=o;return usePatchesInScope(d,i),processResult(void 0,d)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,i){let o;for(o=i.length-1;o>=0;o--){const h=i[o];if(h.path.length===0&&h.op==="replace"){e=h.value;break}}o>-1&&(i=i.slice(o+1));const d=getPlugin("Patches").applyPatches_;return isDraft(e)?d(e,i):this.produce(e,h=>d(h,i))}};function createProxy(e,i){const o=isMap(e)?getPlugin("MapSet").proxyMap_(e,i):isSet(e)?getPlugin("MapSet").proxySet_(e,i):createProxyProxy(e,i);return(i?i.scope_:getCurrentScope()).drafts_.push(o),o}function current(e){return isDraft(e)||die(10,e),currentImpl(e)}function currentImpl(e){if(!isDraftable(e)||isFrozen(e))return e;const i=e[DRAFT_STATE];let o,d=!0;if(i){if(!i.modified_)return i.base_;i.finalized_=!0,o=shallowCopy(e,i.scope_.immer_.useStrictShallowCopy_),d=i.scope_.immer_.shouldUseStrictIteration()}else o=shallowCopy(e,!0);return each(o,(h,g)=>{set(o,h,currentImpl(g))},d),i&&(i.finalized_=!1),o}var immer=new Immer2;immer.produce;function castDraft(e){return e}var initialState$a={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},legendSlice=createSlice({name:"legend",initialState:initialState$a,reducers:{setLegendSize(e,i){e.size.width=i.payload.width,e.size.height=i.payload.height},setLegendSettings(e,i){e.settings.align=i.payload.align,e.settings.layout=i.payload.layout,e.settings.verticalAlign=i.payload.verticalAlign,e.settings.itemSorter=i.payload.itemSorter},addLegendPayload:{reducer(e,i){e.payload.push(i.payload)},prepare:prepareAutoBatched()},replaceLegendPayload:{reducer(e,i){var{prev:o,next:d}=i.payload,h=current$1(e).payload.indexOf(o);h>-1&&(e.payload[h]=d)},prepare:prepareAutoBatched()},removeLegendPayload:{reducer(e,i){var o=current$1(e).payload.indexOf(i.payload);o>-1&&e.payload.splice(o,1)},prepare:prepareAutoBatched()}}}),{setLegendSize,setLegendSettings,addLegendPayload,replaceLegendPayload,removeLegendPayload}=legendSlice.actions,legendReducer=legendSlice.reducer;function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$m.apply(null,arguments)}function ownKeys$u(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$u(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$u(Object(o),!0).forEach(function(d){_defineProperty$x(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$u(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$x(e,i,o){return(i=_toPropertyKey$x(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$x(e){var i=_toPrimitive$x(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$x(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function defaultFormatter(e){return Array.isArray(e)&&isNumOrStr(e[0])&&isNumOrStr(e[1])?e.join(" ~ "):e}var DefaultTooltipContent=e=>{var{separator:i=" : ",contentStyle:o={},itemStyle:d={},labelStyle:h={},payload:g,formatter:b,itemSorter:j,wrapperClassName:_,labelClassName:$,label:_e,labelFormatter:et,accessibilityLayer:tt=!1}=e,rt=()=>{if(g&&g.length){var ut={padding:0,margin:0},dt=(j?sortBy$1(g,j):g).map((mt,xt)=>{if(mt.type==="none")return null;var ft=mt.formatter||b||defaultFormatter,{value:gt,name:pt}=mt,yt=gt,bt=pt;if(ft){var St=ft(gt,pt,mt,xt,g);if(Array.isArray(St))[yt,bt]=St;else if(St!=null)yt=St;else return null}var wt=_objectSpread$u({display:"block",paddingTop:4,paddingBottom:4,color:mt.color||"#000"},d);return reactExports.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(xt),style:wt},isNumOrStr(bt)?reactExports.createElement("span",{className:"recharts-tooltip-item-name"},bt):null,isNumOrStr(bt)?reactExports.createElement("span",{className:"recharts-tooltip-item-separator"},i):null,reactExports.createElement("span",{className:"recharts-tooltip-item-value"},yt),reactExports.createElement("span",{className:"recharts-tooltip-item-unit"},mt.unit||""))});return reactExports.createElement("ul",{className:"recharts-tooltip-item-list",style:ut},dt)}return null},nt=_objectSpread$u({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),it=_objectSpread$u({margin:0},h),st=!isNullish(_e),at=st?_e:"",ot=clsx("recharts-default-tooltip",_),lt=clsx("recharts-tooltip-label",$);st&&et&&g!==void 0&&g!==null&&(at=et(_e,g));var ct=tt?{role:"status","aria-live":"assertive"}:{};return reactExports.createElement("div",_extends$m({className:ot,style:nt},ct),reactExports.createElement("p",{className:lt,style:it},reactExports.isValidElement(at)?at:"".concat(at)),rt())},CSS_CLASS_PREFIX="recharts-tooltip-wrapper",TOOLTIP_HIDDEN={visibility:"hidden"};function getTooltipCSSClassName(e){var{coordinate:i,translateX:o,translateY:d}=e;return clsx(CSS_CLASS_PREFIX,{["".concat(CSS_CLASS_PREFIX,"-right")]:isNumber(o)&&i&&isNumber(i.x)&&o>=i.x,["".concat(CSS_CLASS_PREFIX,"-left")]:isNumber(o)&&i&&isNumber(i.x)&&o<i.x,["".concat(CSS_CLASS_PREFIX,"-bottom")]:isNumber(d)&&i&&isNumber(i.y)&&d>=i.y,["".concat(CSS_CLASS_PREFIX,"-top")]:isNumber(d)&&i&&isNumber(i.y)&&d<i.y})}function getTooltipTranslateXY(e){var{allowEscapeViewBox:i,coordinate:o,key:d,offsetTopLeft:h,position:g,reverseDirection:b,tooltipDimension:j,viewBox:_,viewBoxDimension:$}=e;if(g&&isNumber(g[d]))return g[d];var _e=o[d]-j-(h>0?h:0),et=o[d]+h;if(i[d])return b[d]?_e:et;var tt=_[d];if(tt==null)return 0;if(b[d]){var rt=_e,nt=tt;return rt<nt?Math.max(et,tt):Math.max(_e,tt)}if($==null)return 0;var it=et+j,st=tt+$;return it>st?Math.max(_e,tt):Math.max(et,tt)}function getTransformStyle(e){var{translateX:i,translateY:o,useTranslate3d:d}=e;return{transform:d?"translate3d(".concat(i,"px, ").concat(o,"px, 0)"):"translate(".concat(i,"px, ").concat(o,"px)")}}function getTooltipTranslate(e){var{allowEscapeViewBox:i,coordinate:o,offsetTopLeft:d,position:h,reverseDirection:g,tooltipBox:b,useTranslate3d:j,viewBox:_}=e,$,_e,et;return b.height>0&&b.width>0&&o?(_e=getTooltipTranslateXY({allowEscapeViewBox:i,coordinate:o,key:"x",offsetTopLeft:d,position:h,reverseDirection:g,tooltipDimension:b.width,viewBox:_,viewBoxDimension:_.width}),et=getTooltipTranslateXY({allowEscapeViewBox:i,coordinate:o,key:"y",offsetTopLeft:d,position:h,reverseDirection:g,tooltipDimension:b.height,viewBox:_,viewBoxDimension:_.height}),$=getTransformStyle({translateX:_e,translateY:et,useTranslate3d:j})):$=TOOLTIP_HIDDEN,{cssProperties:$,cssClasses:getTooltipCSSClassName({translateX:_e,translateY:et,coordinate:o})}}function ownKeys$t(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$t(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$t(Object(o),!0).forEach(function(d){_defineProperty$w(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$t(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$w(e,i,o){return(i=_toPropertyKey$w(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$w(e){var i=_toPrimitive$w(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$w(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}class TooltipBoundingBox extends reactExports.PureComponent{constructor(){super(...arguments),_defineProperty$w(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),_defineProperty$w(this,"handleKeyDown",i=>{if(i.key==="Escape"){var o,d,h,g;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(d=this.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&o!==void 0?o:0,y:(h=(g=this.props.coordinate)===null||g===void 0?void 0:g.y)!==null&&h!==void 0?h:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var i,o;this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:i,allowEscapeViewBox:o,animationDuration:d,animationEasing:h,children:g,coordinate:b,hasPayload:j,isAnimationActive:_,offset:$,position:_e,reverseDirection:et,useTranslate3d:tt,viewBox:rt,wrapperStyle:nt,lastBoundingBox:it,innerRef:st,hasPortalFromProps:at}=this.props,{cssClasses:ot,cssProperties:lt}=getTooltipTranslate({allowEscapeViewBox:o,coordinate:b,offsetTopLeft:$,position:_e,reverseDirection:et,tooltipBox:{height:it.height,width:it.width},useTranslate3d:tt,viewBox:rt}),ct=at?{}:_objectSpread$t(_objectSpread$t({transition:_&&i?"transform ".concat(d,"ms ").concat(h):void 0},lt),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&j?"visible":"hidden",position:"absolute",top:0,left:0}),ut=_objectSpread$t(_objectSpread$t({},ct),{},{visibility:!this.state.dismissed&&i&&j?"visible":"hidden"},nt);return reactExports.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:ot,style:ut,ref:st},g)}}var useAccessibilityLayer=()=>{var e;return(e=useAppSelector(i=>i.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$l.apply(null,arguments)}function ownKeys$s(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$s(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$s(Object(o),!0).forEach(function(d){_defineProperty$v(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$s(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$v(e,i,o){return(i=_toPropertyKey$v(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$v(e){var i=_toPrimitive$v(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$v(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var CURVE_FACTORIES={curveBasisClosed,curveBasisOpen,curveBasis,curveBumpX:bumpX,curveBumpY:bumpY,curveLinearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},defined=e=>isWellBehavedNumber(e.x)&&isWellBehavedNumber(e.y),areaDefined=e=>e.base!=null&&defined(e.base)&&defined(e),getX=e=>e.x,getY=e=>e.y,getCurveFactory=(e,i)=>{if(typeof e=="function")return e;var o="curve".concat(upperFirst(e));return(o==="curveMonotone"||o==="curveBump")&&i?CURVE_FACTORIES["".concat(o).concat(i==="vertical"?"Y":"X")]:CURVE_FACTORIES[o]||curveLinear},getPath$1=e=>{var{type:i="linear",points:o=[],baseLine:d,layout:h,connectNulls:g=!1}=e,b=getCurveFactory(i,h),j=g?o.filter(defined):o,_;if(Array.isArray(d)){var $=o.map((rt,nt)=>_objectSpread$s(_objectSpread$s({},rt),{},{base:d[nt]}));h==="vertical"?_=shapeArea().y(getY).x1(getX).x0(rt=>rt.base.x):_=shapeArea().x(getX).y1(getY).y0(rt=>rt.base.y);var _e=_.defined(areaDefined).curve(b),et=g?$.filter(areaDefined):$;return _e(et)}h==="vertical"&&isNumber(d)?_=shapeArea().y(getY).x1(getX).x0(d):isNumber(d)?_=shapeArea().x(getX).y1(getY).y0(d):_=shapeLine().x(getX).y(getY);var tt=_.defined(defined).curve(b);return tt(j)},Curve=e=>{var{className:i,points:o,path:d,pathRef:h}=e,g=useChartLayout();if((!o||!o.length)&&!d)return null;var b={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||g,connectNulls:e.connectNulls},j=o&&o.length?getPath$1(b):d;return reactExports.createElement("path",_extends$l({},svgPropertiesNoEvents(e),adaptEventHandlers(e),{className:clsx("recharts-curve",i),d:j===null?void 0:j,ref:h}))},_excluded$i=["x","y","top","left","width","height","className"];function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$k.apply(null,arguments)}function ownKeys$r(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$r(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$r(Object(o),!0).forEach(function(d){_defineProperty$u(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$r(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$u(e,i,o){return(i=_toPropertyKey$u(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$u(e){var i=_toPrimitive$u(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$u(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _objectWithoutProperties$i(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$i(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$i(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}var getPath=(e,i,o,d,h,g)=>"M".concat(e,",").concat(h,"v").concat(d,"M").concat(g,",").concat(i,"h").concat(o),Cross=e=>{var{x:i=0,y:o=0,top:d=0,left:h=0,width:g=0,height:b=0,className:j}=e,_=_objectWithoutProperties$i(e,_excluded$i),$=_objectSpread$r({x:i,y:o,top:d,left:h,width:g,height:b},_);return!isNumber(i)||!isNumber(o)||!isNumber(g)||!isNumber(b)||!isNumber(d)||!isNumber(h)?null:reactExports.createElement("path",_extends$k({},svgPropertiesAndEvents($),{className:clsx("recharts-cross",j),d:getPath(i,o,g,b,d,h)}))};function getCursorRectangle(e,i,o,d){var h=d/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?i.x-h:o.left+.5,y:e==="horizontal"?o.top+.5:i.y-h,width:e==="horizontal"?d:o.width-1,height:e==="horizontal"?o.height-1:d}}function ownKeys$q(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$q(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$q(Object(o),!0).forEach(function(d){_defineProperty$t(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$q(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$t(e,i,o){return(i=_toPropertyKey$t(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$t(e){var i=_toPrimitive$t(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$t(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var getDashCase=e=>e.replace(/([A-Z])/g,i=>"-".concat(i.toLowerCase())),getTransitionVal=(e,i,o)=>e.map(d=>"".concat(getDashCase(d)," ").concat(i,"ms ").concat(o)).join(","),getIntersectionKeys=(e,i)=>[Object.keys(e),Object.keys(i)].reduce((o,d)=>o.filter(h=>d.includes(h))),mapObject=(e,i)=>Object.keys(i).reduce((o,d)=>_objectSpread$q(_objectSpread$q({},o),{},{[d]:e(d,i[d])}),{});function ownKeys$p(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$p(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$p(Object(o),!0).forEach(function(d){_defineProperty$s(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$p(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$s(e,i,o){return(i=_toPropertyKey$s(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$s(e){var i=_toPrimitive$s(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$s(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var alpha=(e,i,o)=>e+(i-e)*o,needContinue=e=>{var{from:i,to:o}=e;return i!==o},calStepperVals=(e,i,o)=>{var d=mapObject((h,g)=>{if(needContinue(g)){var[b,j]=e(g.from,g.to,g.velocity);return _objectSpread$p(_objectSpread$p({},g),{},{from:b,velocity:j})}return g},i);return o<1?mapObject((h,g)=>needContinue(g)&&d[h]!=null?_objectSpread$p(_objectSpread$p({},g),{},{velocity:alpha(g.velocity,d[h].velocity,o),from:alpha(g.from,d[h].from,o)}):g,i):calStepperVals(e,d,o-1)};function createStepperUpdate(e,i,o,d,h,g){var b,j=d.reduce((tt,rt)=>_objectSpread$p(_objectSpread$p({},tt),{},{[rt]:{from:e[rt],velocity:0,to:i[rt]}}),{}),_=()=>mapObject((tt,rt)=>rt.from,j),$=()=>!Object.values(j).filter(needContinue).length,_e=null,et=tt=>{b||(b=tt);var rt=tt-b,nt=rt/o.dt;j=calStepperVals(o,j,nt),h(_objectSpread$p(_objectSpread$p(_objectSpread$p({},e),i),_())),b=tt,$()||(_e=g.setTimeout(et))};return()=>(_e=g.setTimeout(et),()=>{var tt;(tt=_e)===null||tt===void 0||tt()})}function createTimingUpdate(e,i,o,d,h,g,b){var j=null,_=h.reduce((et,tt)=>{var rt=e[tt],nt=i[tt];return rt==null||nt==null?et:_objectSpread$p(_objectSpread$p({},et),{},{[tt]:[rt,nt]})},{}),$,_e=et=>{$||($=et);var tt=(et-$)/d,rt=mapObject((it,st)=>alpha(...st,o(tt)),_);if(g(_objectSpread$p(_objectSpread$p(_objectSpread$p({},e),i),rt)),tt<1)j=b.setTimeout(_e);else{var nt=mapObject((it,st)=>alpha(...st,o(1)),_);g(_objectSpread$p(_objectSpread$p(_objectSpread$p({},e),i),nt))}};return()=>(j=b.setTimeout(_e),()=>{var et;(et=j)===null||et===void 0||et()})}const configUpdate=(e,i,o,d,h,g)=>{var b=getIntersectionKeys(e,i);return o==null?()=>(h(_objectSpread$p(_objectSpread$p({},e),i)),()=>{}):o.isStepper===!0?createStepperUpdate(e,i,o,b,h,g):createTimingUpdate(e,i,o,d,b,h,g)};var ACCURACY=1e-4,cubicBezierFactor=(e,i)=>[0,3*e,3*i-6*e,3*e-3*i+1],evaluatePolynomial=(e,i)=>e.map((o,d)=>o*i**d).reduce((o,d)=>o+d),cubicBezier=(e,i)=>o=>{var d=cubicBezierFactor(e,i);return evaluatePolynomial(d,o)},derivativeCubicBezier=(e,i)=>o=>{var d=cubicBezierFactor(e,i),h=[...d.map((g,b)=>g*b).slice(1),0];return evaluatePolynomial(h,o)},parseCubicBezier=e=>{var i,o=e.split("(");if(o.length!==2||o[0]!=="cubic-bezier")return null;var d=(i=o[1])===null||i===void 0||(i=i.split(")")[0])===null||i===void 0?void 0:i.split(",");if(d==null||d.length!==4)return null;var h=d.map(g=>parseFloat(g));return[h[0],h[1],h[2],h[3]]},getBezierCoordinates=function e(){for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];if(o.length===1)switch(o[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var h=parseCubicBezier(o[0]);if(h)return h}}return o.length===4?o:[0,0,1,1]},createBezierEasing=(e,i,o,d)=>{var h=cubicBezier(e,o),g=cubicBezier(i,d),b=derivativeCubicBezier(e,o),j=$=>$>1?1:$<0?0:$,_=$=>{for(var _e=$>1?1:$,et=_e,tt=0;tt<8;++tt){var rt=h(et)-_e,nt=b(et);if(Math.abs(rt-_e)<ACCURACY||nt<ACCURACY)return g(et);et=j(et-rt/nt)}return g(et)};return _.isStepper=!1,_},configBezier=function e(){return createBezierEasing(...getBezierCoordinates(...arguments))},configSpring=function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:o=100,damping:d=8,dt:h=17}=i,g=(b,j,_)=>{var $=-(b-j)*o,_e=_*d,et=_+($-_e)*h/1e3,tt=_*h/1e3+b;return Math.abs(tt-j)<ACCURACY&&Math.abs(et)<ACCURACY?[j,0]:[tt,et]};return g.isStepper=!0,g.dt=h,g},configEasing=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(e);case"spring":return configSpring();default:if(e.split("(")[0]==="cubic-bezier")return configBezier(e)}return typeof e=="function"?e:null};function createAnimateManager(e){var i,o=()=>null,d=!1,h=null,g=b=>{if(!d){if(Array.isArray(b)){if(!b.length)return;var j=b,[_,...$]=j;if(typeof _=="number"){h=e.setTimeout(g.bind(null,$),_);return}g(_),h=e.setTimeout(g.bind(null,$));return}typeof b=="string"&&(i=b,o(i)),typeof b=="object"&&(i=b,o(i)),typeof b=="function"&&b()}};return{stop:()=>{d=!0},start:b=>{d=!1,h&&(h(),h=null),g(b)},subscribe:b=>(o=b,()=>{o=()=>null}),getTimeoutController:()=>e}}class RequestAnimationFrameTimeoutController{setTimeout(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=performance.now(),h=null,g=b=>{b-d>=o?i(b):typeof requestAnimationFrame=="function"&&(h=requestAnimationFrame(g))};return h=requestAnimationFrame(g),()=>{h!=null&&cancelAnimationFrame(h)}}}function createDefaultAnimationManager(){return createAnimateManager(new RequestAnimationFrameTimeoutController)}var AnimationManagerContext=reactExports.createContext(createDefaultAnimationManager);function useAnimationManager(e,i){var o=reactExports.useContext(AnimationManagerContext);return reactExports.useMemo(()=>i??o(e),[e,i,o])}var parseIsSsrByDefault=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Global={devToolsEnabled:!0,isSsr:parseIsSsrByDefault()},defaultJavascriptAnimateProps={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},from={t:0},to={t:1};function JavascriptAnimate(e){var i=resolveDefaultProps(e,defaultJavascriptAnimateProps),{isActive:o,canBegin:d,duration:h,easing:g,begin:b,onAnimationEnd:j,onAnimationStart:_,children:$}=i,_e=o==="auto"?!Global.isSsr:o,et=useAnimationManager(i.animationId,i.animationManager),[tt,rt]=reactExports.useState(_e?from:to),nt=reactExports.useRef(null);return reactExports.useEffect(()=>{_e||rt(to)},[_e]),reactExports.useEffect(()=>{if(!_e||!d)return noop$2;var it=configUpdate(from,to,configEasing(g),h,rt,et.getTimeoutController()),st=()=>{nt.current=it()};return et.start([_,b,st,h,j]),()=>{et.stop(),nt.current&&nt.current(),j()}},[_e,d,h,g,b,_,j,et]),$(tt.t)}function useAnimationId(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",o=reactExports.useRef(uniqueId(i)),d=reactExports.useRef(e);return d.current!==e&&(o.current=uniqueId(i),d.current=e),o.current}var _excluded$h=["radius"],_excluded2$9=["radius"],_templateObject$2,_templateObject2$2,_templateObject3$2,_templateObject4$2,_templateObject5$2,_templateObject6$1,_templateObject7$1,_templateObject8,_templateObject9,_templateObject0;function ownKeys$o(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$o(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$o(Object(o),!0).forEach(function(d){_defineProperty$r(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$o(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$r(e,i,o){return(i=_toPropertyKey$r(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$r(e){var i=_toPrimitive$r(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$r(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$j.apply(null,arguments)}function _objectWithoutProperties$h(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$h(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$h(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}function _taggedTemplateLiteral$2(e,i){return i||(i=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(i)}}))}var getRectanglePath=(e,i,o,d,h)=>{var g=round$1(o),b=round$1(d),j=Math.min(Math.abs(g)/2,Math.abs(b)/2),_=b>=0?1:-1,$=g>=0?1:-1,_e=b>=0&&g>=0||b<0&&g<0?1:0,et;if(j>0&&h instanceof Array){for(var tt=[0,0,0,0],rt=0,nt=4;rt<nt;rt++)tt[rt]=h[rt]>j?j:h[rt];et=roundTemplateLiteral(_templateObject$2||(_templateObject$2=_taggedTemplateLiteral$2(["M",",",""])),e,i+_*tt[0]),tt[0]>0&&(et+=roundTemplateLiteral(_templateObject2$2||(_templateObject2$2=_taggedTemplateLiteral$2(["A ",",",",0,0,",",",",",""])),tt[0],tt[0],_e,e+$*tt[0],i)),et+=roundTemplateLiteral(_templateObject3$2||(_templateObject3$2=_taggedTemplateLiteral$2(["L ",",",""])),e+o-$*tt[1],i),tt[1]>0&&(et+=roundTemplateLiteral(_templateObject4$2||(_templateObject4$2=_taggedTemplateLiteral$2(["A ",",",",0,0,",`,
        `,",",""])),tt[1],tt[1],_e,e+o,i+_*tt[1])),et+=roundTemplateLiteral(_templateObject5$2||(_templateObject5$2=_taggedTemplateLiteral$2(["L ",",",""])),e+o,i+d-_*tt[2]),tt[2]>0&&(et+=roundTemplateLiteral(_templateObject6$1||(_templateObject6$1=_taggedTemplateLiteral$2(["A ",",",",0,0,",`,
        `,",",""])),tt[2],tt[2],_e,e+o-$*tt[2],i+d)),et+=roundTemplateLiteral(_templateObject7$1||(_templateObject7$1=_taggedTemplateLiteral$2(["L ",",",""])),e+$*tt[3],i+d),tt[3]>0&&(et+=roundTemplateLiteral(_templateObject8||(_templateObject8=_taggedTemplateLiteral$2(["A ",",",",0,0,",`,
        `,",",""])),tt[3],tt[3],_e,e,i+d-_*tt[3])),et+="Z"}else if(j>0&&h===+h&&h>0){var it=Math.min(j,h);et=roundTemplateLiteral(_templateObject9||(_templateObject9=_taggedTemplateLiteral$2(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,i+_*it,it,it,_e,e+$*it,i,e+o-$*it,i,it,it,_e,e+o,i+_*it,e+o,i+d-_*it,it,it,_e,e+o-$*it,i+d,e+$*it,i+d,it,it,_e,e,i+d-_*it)}else et=roundTemplateLiteral(_templateObject0||(_templateObject0=_taggedTemplateLiteral$2(["M ",","," h "," v "," h "," Z"])),e,i,o,d,-o);return et},defaultRectangleProps={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=e=>{var i=resolveDefaultProps(e,defaultRectangleProps),o=reactExports.useRef(null),[d,h]=reactExports.useState(-1);reactExports.useEffect(()=>{if(o.current&&o.current.getTotalLength)try{var kt=o.current.getTotalLength();kt&&h(kt)}catch{}},[]);var{x:g,y:b,width:j,height:_,radius:$,className:_e}=i,{animationEasing:et,animationDuration:tt,animationBegin:rt,isAnimationActive:nt,isUpdateAnimationActive:it}=i,st=reactExports.useRef(j),at=reactExports.useRef(_),ot=reactExports.useRef(g),lt=reactExports.useRef(b),ct=reactExports.useMemo(()=>({x:g,y:b,width:j,height:_,radius:$}),[g,b,j,_,$]),ut=useAnimationId(ct,"rectangle-");if(g!==+g||b!==+b||j!==+j||_!==+_||j===0||_===0)return null;var dt=clsx("recharts-rectangle",_e);if(!it){var mt=svgPropertiesAndEvents(i),xt=_objectWithoutProperties$h(mt,_excluded$h);return reactExports.createElement("path",_extends$j({},xt,{x:round$1(g),y:round$1(b),width:round$1(j),height:round$1(_),radius:typeof $=="number"?$:void 0,className:dt,d:getRectanglePath(g,b,j,_,$)}))}var ft=st.current,gt=at.current,pt=ot.current,yt=lt.current,bt="0px ".concat(d===-1?1:d,"px"),St="".concat(d,"px 0px"),wt=getTransitionVal(["strokeDasharray"],tt,typeof et=="string"?et:defaultRectangleProps.animationEasing);return reactExports.createElement(JavascriptAnimate,{animationId:ut,key:ut,canBegin:d>0,duration:tt,easing:et,isActive:it,begin:rt},kt=>{var Et=interpolate$1(ft,j,kt),jt=interpolate$1(gt,_,kt),Rt=interpolate$1(pt,g,kt),At=interpolate$1(yt,b,kt);o.current&&(st.current=Et,at.current=jt,ot.current=Rt,lt.current=At);var Dt;nt?kt>0?Dt={transition:wt,strokeDasharray:St}:Dt={strokeDasharray:bt}:Dt={strokeDasharray:St};var Nt=svgPropertiesAndEvents(i),zt=_objectWithoutProperties$h(Nt,_excluded2$9);return reactExports.createElement("path",_extends$j({},zt,{radius:typeof $=="number"?$:void 0,className:dt,d:getRectanglePath(Rt,At,Et,jt,$),ref:o,style:_objectSpread$o(_objectSpread$o({},Dt),i.style)}))})};function ownKeys$n(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$n(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$n(Object(o),!0).forEach(function(d){_defineProperty$q(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$n(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$q(e,i,o){return(i=_toPropertyKey$q(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$q(e){var i=_toPrimitive$q(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$q(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var RADIAN=Math.PI/180,radianToDegree=e=>e*180/Math.PI,polarToCartesian=(e,i,o,d)=>({x:e+Math.cos(-RADIAN*d)*o,y:i+Math.sin(-RADIAN*d)*o}),getMaxRadius=function e(i,o){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(i-(d.left||0)-(d.right||0)),Math.abs(o-(d.top||0)-(d.bottom||0)))/2},distanceBetweenPoints=(e,i)=>{var{x:o,y:d}=e,{x:h,y:g}=i;return Math.sqrt((o-h)**2+(d-g)**2)},getAngleOfPoint=(e,i)=>{var{x:o,y:d}=e,{cx:h,cy:g}=i,b=distanceBetweenPoints({x:o,y:d},{x:h,y:g});if(b<=0)return{radius:b,angle:0};var j=(o-h)/b,_=Math.acos(j);return d>g&&(_=2*Math.PI-_),{radius:b,angle:radianToDegree(_),angleInRadian:_}},formatAngleOfSector=e=>{var{startAngle:i,endAngle:o}=e,d=Math.floor(i/360),h=Math.floor(o/360),g=Math.min(d,h);return{startAngle:i-g*360,endAngle:o-g*360}},reverseFormatAngleOfSector=(e,i)=>{var{startAngle:o,endAngle:d}=i,h=Math.floor(o/360),g=Math.floor(d/360),b=Math.min(h,g);return e+b*360},inRangeOfSector=(e,i)=>{var{chartX:o,chartY:d}=e,{radius:h,angle:g}=getAngleOfPoint({x:o,y:d},i),{innerRadius:b,outerRadius:j}=i;if(h<b||h>j||h===0)return null;var{startAngle:_,endAngle:$}=formatAngleOfSector(i),_e=g,et;if(_<=$){for(;_e>$;)_e-=360;for(;_e<_;)_e+=360;et=_e>=_&&_e<=$}else{for(;_e>_;)_e-=360;for(;_e<$;)_e+=360;et=_e>=$&&_e<=_}return et?_objectSpread$n(_objectSpread$n({},i),{},{radius:h,angle:reverseFormatAngleOfSector(_e,i)}):null};function getRadialCursorPoints(e){var{cx:i,cy:o,radius:d,startAngle:h,endAngle:g}=e,b=polarToCartesian(i,o,d,h),j=polarToCartesian(i,o,d,g);return{points:[b,j],cx:i,cy:o,radius:d,startAngle:h,endAngle:g}}var _templateObject$1,_templateObject2$1,_templateObject3$1,_templateObject4$1,_templateObject5$1,_templateObject6,_templateObject7;function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$i.apply(null,arguments)}function _taggedTemplateLiteral$1(e,i){return i||(i=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(i)}}))}var getDeltaAngle$1=(e,i)=>{var o=mathSign(i-e),d=Math.min(Math.abs(i-e),359.999);return o*d},getTangentCircle=e=>{var{cx:i,cy:o,radius:d,angle:h,sign:g,isExternal:b,cornerRadius:j,cornerIsExternal:_}=e,$=j*(b?1:-1)+d,_e=Math.asin(j/$)/RADIAN,et=_?h:h+g*_e,tt=polarToCartesian(i,o,$,et),rt=polarToCartesian(i,o,d,et),nt=_?h-g*_e:h,it=polarToCartesian(i,o,$*Math.cos(_e*RADIAN),nt);return{center:tt,circleTangency:rt,lineTangency:it,theta:_e}},getSectorPath=e=>{var{cx:i,cy:o,innerRadius:d,outerRadius:h,startAngle:g,endAngle:b}=e,j=getDeltaAngle$1(g,b),_=g+j,$=polarToCartesian(i,o,h,g),_e=polarToCartesian(i,o,h,_),et=roundTemplateLiteral(_templateObject$1||(_templateObject$1=_taggedTemplateLiteral$1(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),$.x,$.y,h,h,+(Math.abs(j)>180),+(g>_),_e.x,_e.y);if(d>0){var tt=polarToCartesian(i,o,d,g),rt=polarToCartesian(i,o,d,_);et+=roundTemplateLiteral(_templateObject2$1||(_templateObject2$1=_taggedTemplateLiteral$1(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),rt.x,rt.y,d,d,+(Math.abs(j)>180),+(g<=_),tt.x,tt.y)}else et+=roundTemplateLiteral(_templateObject3$1||(_templateObject3$1=_taggedTemplateLiteral$1(["L ",","," Z"])),i,o);return et},getSectorWithCorner=e=>{var{cx:i,cy:o,innerRadius:d,outerRadius:h,cornerRadius:g,forceCornerRadius:b,cornerIsExternal:j,startAngle:_,endAngle:$}=e,_e=mathSign($-_),{circleTangency:et,lineTangency:tt,theta:rt}=getTangentCircle({cx:i,cy:o,radius:h,angle:_,sign:_e,cornerRadius:g,cornerIsExternal:j}),{circleTangency:nt,lineTangency:it,theta:st}=getTangentCircle({cx:i,cy:o,radius:h,angle:$,sign:-_e,cornerRadius:g,cornerIsExternal:j}),at=j?Math.abs(_-$):Math.abs(_-$)-rt-st;if(at<0)return b?roundTemplateLiteral(_templateObject4$1||(_templateObject4$1=_taggedTemplateLiteral$1(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),tt.x,tt.y,g,g,g*2,g,g,-g*2):getSectorPath({cx:i,cy:o,innerRadius:d,outerRadius:h,startAngle:_,endAngle:$});var ot=roundTemplateLiteral(_templateObject5$1||(_templateObject5$1=_taggedTemplateLiteral$1(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),tt.x,tt.y,g,g,+(_e<0),et.x,et.y,h,h,+(at>180),+(_e<0),nt.x,nt.y,g,g,+(_e<0),it.x,it.y);if(d>0){var{circleTangency:lt,lineTangency:ct,theta:ut}=getTangentCircle({cx:i,cy:o,radius:d,angle:_,sign:_e,isExternal:!0,cornerRadius:g,cornerIsExternal:j}),{circleTangency:dt,lineTangency:mt,theta:xt}=getTangentCircle({cx:i,cy:o,radius:d,angle:$,sign:-_e,isExternal:!0,cornerRadius:g,cornerIsExternal:j}),ft=j?Math.abs(_-$):Math.abs(_-$)-ut-xt;if(ft<0&&g===0)return"".concat(ot,"L").concat(i,",").concat(o,"Z");ot+=roundTemplateLiteral(_templateObject6||(_templateObject6=_taggedTemplateLiteral$1(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),mt.x,mt.y,g,g,+(_e<0),dt.x,dt.y,d,d,+(ft>180),+(_e>0),lt.x,lt.y,g,g,+(_e<0),ct.x,ct.y)}else ot+=roundTemplateLiteral(_templateObject7||(_templateObject7=_taggedTemplateLiteral$1(["L",",","Z"])),i,o);return ot},defaultSectorProps={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=e=>{var i=resolveDefaultProps(e,defaultSectorProps),{cx:o,cy:d,innerRadius:h,outerRadius:g,cornerRadius:b,forceCornerRadius:j,cornerIsExternal:_,startAngle:$,endAngle:_e,className:et}=i;if(g<h||$===_e)return null;var tt=clsx("recharts-sector",et),rt=g-h,nt=getPercentValue(b,rt,0,!0),it;return nt>0&&Math.abs($-_e)<360?it=getSectorWithCorner({cx:o,cy:d,innerRadius:h,outerRadius:g,cornerRadius:Math.min(nt,rt/2),forceCornerRadius:j,cornerIsExternal:_,startAngle:$,endAngle:_e}):it=getSectorPath({cx:o,cy:d,innerRadius:h,outerRadius:g,startAngle:$,endAngle:_e}),reactExports.createElement("path",_extends$i({},svgPropertiesAndEvents(i),{className:tt,d:it}))};function getCursorPoints(e,i,o){if(e==="horizontal")return[{x:i.x,y:o.top},{x:i.x,y:o.top+o.height}];if(e==="vertical")return[{x:o.left,y:i.y},{x:o.left+o.width,y:i.y}];if(isPolarCoordinate(i)){if(e==="centric"){var{cx:d,cy:h,innerRadius:g,outerRadius:b,angle:j}=i,_=polarToCartesian(d,h,g,j),$=polarToCartesian(d,h,b,j);return[{x:_.x,y:_.y},{x:$.x,y:$.y}]}return getRadialCursorPoints(i)}}var range$4={},toFinite={},toNumber={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=isSymbol;function o(d){return i.isSymbol(d)?NaN:Number(d)}e.toNumber=o})(toNumber);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=toNumber;function o(d){return d?(d=i.toNumber(d),d===1/0||d===-1/0?(d<0?-1:1)*Number.MAX_VALUE:d===d?d:0):d===0?d:0}e.toFinite=o})(toFinite);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=isIterateeCall,o=toFinite;function d(h,g,b){b&&typeof b!="number"&&i.isIterateeCall(h,g,b)&&(g=b=void 0),h=o.toFinite(h),g===void 0?(g=h,h=0):g=o.toFinite(g),b=b===void 0?h<g?1:-1:o.toFinite(b);const j=Math.max(Math.ceil((g-h)/(b||1)),0),_=new Array(j);for(let $=0;$<j;$++)_[$]=h,h+=b;return _}e.range=d})(range$4);var range$2=range$4.range;const range$3=getDefaultExportFromCjs(range$2);function ascending(e,i){return e==null||i==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function descending(e,i){return e==null||i==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function bisector(e){let i,o,d;e.length!==2?(i=ascending,o=(j,_)=>ascending(e(j),_),d=(j,_)=>e(j)-_):(i=e===ascending||e===descending?e:zero$1,o=e,d=e);function h(j,_,$=0,_e=j.length){if($<_e){if(i(_,_)!==0)return _e;do{const et=$+_e>>>1;o(j[et],_)<0?$=et+1:_e=et}while($<_e)}return $}function g(j,_,$=0,_e=j.length){if($<_e){if(i(_,_)!==0)return _e;do{const et=$+_e>>>1;o(j[et],_)<=0?$=et+1:_e=et}while($<_e)}return $}function b(j,_,$=0,_e=j.length){const et=h(j,_,$,_e-1);return et>$&&d(j[et-1],_)>-d(j[et],_)?et-1:et}return{left:h,center:b,right:g}}function zero$1(){return 0}function number$2(e){return e===null?NaN:+e}function*numbers(e,i){for(let o of e)o!=null&&(o=+o)>=o&&(yield o)}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$2).center;class InternMap extends Map{constructor(i,o=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:o}}),i!=null)for(const[d,h]of i)this.set(d,h)}get(i){return super.get(intern_get(this,i))}has(i){return super.has(intern_get(this,i))}set(i,o){return super.set(intern_set(this,i),o)}delete(i){return super.delete(intern_delete(this,i))}}function intern_get({_intern:e,_key:i},o){const d=i(o);return e.has(d)?e.get(d):o}function intern_set({_intern:e,_key:i},o){const d=i(o);return e.has(d)?e.get(d):(e.set(d,o),o)}function intern_delete({_intern:e,_key:i},o){const d=i(o);return e.has(d)&&(o=e.get(d),e.delete(d)),o}function keyof(e){return e!==null&&typeof e=="object"?e.valueOf():e}function compareDefined(e=ascending){if(e===ascending)return ascendingDefined;if(typeof e!="function")throw new TypeError("compare is not a function");return(i,o)=>{const d=e(i,o);return d||d===0?d:(e(o,o)===0)-(e(i,i)===0)}}function ascendingDefined(e,i){return(e==null||!(e>=e))-(i==null||!(i>=i))||(e<i?-1:e>i?1:0)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(e,i,o){const d=(i-e)/Math.max(0,o),h=Math.floor(Math.log10(d)),g=d/Math.pow(10,h),b=g>=e10?10:g>=e5?5:g>=e2?2:1;let j,_,$;return h<0?($=Math.pow(10,-h)/b,j=Math.round(e*$),_=Math.round(i*$),j/$<e&&++j,_/$>i&&--_,$=-$):($=Math.pow(10,h)*b,j=Math.round(e/$),_=Math.round(i/$),j*$<e&&++j,_*$>i&&--_),_<j&&.5<=o&&o<2?tickSpec(e,i,o*2):[j,_,$]}function ticks(e,i,o){if(i=+i,e=+e,o=+o,!(o>0))return[];if(e===i)return[e];const d=i<e,[h,g,b]=d?tickSpec(i,e,o):tickSpec(e,i,o);if(!(g>=h))return[];const j=g-h+1,_=new Array(j);if(d)if(b<0)for(let $=0;$<j;++$)_[$]=(g-$)/-b;else for(let $=0;$<j;++$)_[$]=(g-$)*b;else if(b<0)for(let $=0;$<j;++$)_[$]=(h+$)/-b;else for(let $=0;$<j;++$)_[$]=(h+$)*b;return _}function tickIncrement(e,i,o){return i=+i,e=+e,o=+o,tickSpec(e,i,o)[2]}function tickStep(e,i,o){i=+i,e=+e,o=+o;const d=i<e,h=d?tickIncrement(i,e,o):tickIncrement(e,i,o);return(d?-1:1)*(h<0?1/-h:h)}function max(e,i){let o;for(const d of e)d!=null&&(o<d||o===void 0&&d>=d)&&(o=d);return o}function min(e,i){let o;for(const d of e)d!=null&&(o>d||o===void 0&&d>=d)&&(o=d);return o}function quickselect(e,i,o=0,d=1/0,h){if(i=Math.floor(i),o=Math.floor(Math.max(0,o)),d=Math.floor(Math.min(e.length-1,d)),!(o<=i&&i<=d))return e;for(h=h===void 0?ascendingDefined:compareDefined(h);d>o;){if(d-o>600){const _=d-o+1,$=i-o+1,_e=Math.log(_),et=.5*Math.exp(2*_e/3),tt=.5*Math.sqrt(_e*et*(_-et)/_)*($-_/2<0?-1:1),rt=Math.max(o,Math.floor(i-$*et/_+tt)),nt=Math.min(d,Math.floor(i+(_-$)*et/_+tt));quickselect(e,i,rt,nt,h)}const g=e[i];let b=o,j=d;for(swap(e,o,i),h(e[d],g)>0&&swap(e,o,d);b<j;){for(swap(e,b,j),++b,--j;h(e[b],g)<0;)++b;for(;h(e[j],g)>0;)--j}h(e[o],g)===0?swap(e,o,j):(++j,swap(e,j,d)),j<=i&&(o=j+1),i<=j&&(d=j-1)}return e}function swap(e,i,o){const d=e[i];e[i]=e[o],e[o]=d}function quantile$1(e,i,o){if(e=Float64Array.from(numbers(e)),!(!(d=e.length)||isNaN(i=+i))){if(i<=0||d<2)return min(e);if(i>=1)return max(e);var d,h=(d-1)*i,g=Math.floor(h),b=max(quickselect(e,g).subarray(0,g+1)),j=min(e.subarray(g+1));return b+(j-b)*(h-g)}}function quantileSorted(e,i,o=number$2){if(!(!(d=e.length)||isNaN(i=+i))){if(i<=0||d<2)return+o(e[0],0,e);if(i>=1)return+o(e[d-1],d-1,e);var d,h=(d-1)*i,g=Math.floor(h),b=+o(e[g],g,e),j=+o(e[g+1],g+1,e);return b+(j-b)*(h-g)}}function range$1(e,i,o){e=+e,i=+i,o=(h=arguments.length)<2?(i=e,e=0,1):h<3?1:+o;for(var d=-1,h=Math.max(0,Math.ceil((i-e)/o))|0,g=new Array(h);++d<h;)g[d]=e+d*o;return g}function initRange(e,i){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(i).domain(e);break}return this}function initInterpolator(e,i){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof i=="function"?this.interpolator(i):this.range(i);break}}return this}const implicit=Symbol("implicit");function ordinal(){var e=new InternMap,i=[],o=[],d=implicit;function h(g){let b=e.get(g);if(b===void 0){if(d!==implicit)return d;e.set(g,b=i.push(g)-1)}return o[b%o.length]}return h.domain=function(g){if(!arguments.length)return i.slice();i=[],e=new InternMap;for(const b of g)e.has(b)||e.set(b,i.push(b)-1);return h},h.range=function(g){return arguments.length?(o=Array.from(g),h):o.slice()},h.unknown=function(g){return arguments.length?(d=g,h):d},h.copy=function(){return ordinal(i,o).unknown(d)},initRange.apply(h,arguments),h}function band(){var e=ordinal().unknown(void 0),i=e.domain,o=e.range,d=0,h=1,g,b,j=!1,_=0,$=0,_e=.5;delete e.unknown;function et(){var tt=i().length,rt=h<d,nt=rt?h:d,it=rt?d:h;g=(it-nt)/Math.max(1,tt-_+$*2),j&&(g=Math.floor(g)),nt+=(it-nt-g*(tt-_))*_e,b=g*(1-_),j&&(nt=Math.round(nt),b=Math.round(b));var st=range$1(tt).map(function(at){return nt+g*at});return o(rt?st.reverse():st)}return e.domain=function(tt){return arguments.length?(i(tt),et()):i()},e.range=function(tt){return arguments.length?([d,h]=tt,d=+d,h=+h,et()):[d,h]},e.rangeRound=function(tt){return[d,h]=tt,d=+d,h=+h,j=!0,et()},e.bandwidth=function(){return b},e.step=function(){return g},e.round=function(tt){return arguments.length?(j=!!tt,et()):j},e.padding=function(tt){return arguments.length?(_=Math.min(1,$=+tt),et()):_},e.paddingInner=function(tt){return arguments.length?(_=Math.min(1,tt),et()):_},e.paddingOuter=function(tt){return arguments.length?($=+tt,et()):$},e.align=function(tt){return arguments.length?(_e=Math.max(0,Math.min(1,tt)),et()):_e},e.copy=function(){return band(i(),[d,h]).round(j).paddingInner(_).paddingOuter($).align(_e)},initRange.apply(et(),arguments)}function pointish(e){var i=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pointish(i())},e}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(e,i,o){e.prototype=i.prototype=o,o.constructor=e}function extend(e,i){var o=Object.create(e.prototype);for(var d in i)o[d]=i[d];return o}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(e){var i,o;return e=(e+"").trim().toLowerCase(),(i=reHex.exec(e))?(o=i[1].length,i=parseInt(i[1],16),o===6?rgbn(i):o===3?new Rgb(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):o===8?rgba(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):o===4?rgba(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=reRgbInteger.exec(e))?new Rgb(i[1],i[2],i[3],1):(i=reRgbPercent.exec(e))?new Rgb(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=reRgbaInteger.exec(e))?rgba(i[1],i[2],i[3],i[4]):(i=reRgbaPercent.exec(e))?rgba(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=reHslPercent.exec(e))?hsla(i[1],i[2]/100,i[3]/100,1):(i=reHslaPercent.exec(e))?hsla(i[1],i[2]/100,i[3]/100,i[4]):named.hasOwnProperty(e)?rgbn(named[e]):e==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,e&255,1)}function rgba(e,i,o,d){return d<=0&&(e=i=o=NaN),new Rgb(e,i,o,d)}function rgbConvert(e){return e instanceof Color||(e=color(e)),e?(e=e.rgb(),new Rgb(e.r,e.g,e.b,e.opacity)):new Rgb}function rgb$1(e,i,o,d){return arguments.length===1?rgbConvert(e):new Rgb(e,i,o,d??1)}function Rgb(e,i,o,d){this.r=+e,this.g=+i,this.b=+o,this.opacity=+d}define(Rgb,rgb$1,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${e===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${e===1?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex(e){return e=clampi(e),(e<16?"0":"")+e.toString(16)}function hsla(e,i,o,d){return d<=0?e=i=o=NaN:o<=0||o>=1?e=i=NaN:i<=0&&(e=NaN),new Hsl(e,i,o,d)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;e=e.rgb();var i=e.r/255,o=e.g/255,d=e.b/255,h=Math.min(i,o,d),g=Math.max(i,o,d),b=NaN,j=g-h,_=(g+h)/2;return j?(i===g?b=(o-d)/j+(o<d)*6:o===g?b=(d-i)/j+2:b=(i-o)/j+4,j/=_<.5?g+h:2-g-h,b*=60):j=_>0&&_<1?0:b,new Hsl(b,j,_,e.opacity)}function hsl(e,i,o,d){return arguments.length===1?hslConvert(e):new Hsl(e,i,o,d??1)}function Hsl(e,i,o,d){this.h=+e,this.s=+i,this.l=+o,this.opacity=+d}define(Hsl,hsl,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,i=isNaN(e)||isNaN(this.s)?0:this.s,o=this.l,d=o+(o<.5?o:1-o)*i,h=2*o-d;return new Rgb(hsl2rgb(e>=240?e-240:e+120,h,d),hsl2rgb(e,h,d),hsl2rgb(e<120?e+240:e-120,h,d),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${e===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function clamph(e){return e=(e||0)%360,e<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,i,o){return(e<60?i+(o-i)*e/60:e<180?o:e<240?i+(o-i)*(240-e)/60:i)*255}const constant=e=>()=>e;function linear$1(e,i){return function(o){return e+o*i}}function exponential(e,i,o){return e=Math.pow(e,o),i=Math.pow(i,o)-e,o=1/o,function(d){return Math.pow(e+d*i,o)}}function gamma(e){return(e=+e)==1?nogamma:function(i,o){return o-i?exponential(i,o,e):constant(isNaN(i)?o:i)}}function nogamma(e,i){var o=i-e;return o?linear$1(e,o):constant(isNaN(e)?i:e)}const rgb=function e(i){var o=gamma(i);function d(h,g){var b=o((h=rgb$1(h)).r,(g=rgb$1(g)).r),j=o(h.g,g.g),_=o(h.b,g.b),$=nogamma(h.opacity,g.opacity);return function(_e){return h.r=b(_e),h.g=j(_e),h.b=_(_e),h.opacity=$(_e),h+""}}return d.gamma=e,d}(1);function numberArray(e,i){i||(i=[]);var o=e?Math.min(i.length,e.length):0,d=i.slice(),h;return function(g){for(h=0;h<o;++h)d[h]=e[h]*(1-g)+i[h]*g;return d}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function genericArray(e,i){var o=i?i.length:0,d=e?Math.min(o,e.length):0,h=new Array(d),g=new Array(o),b;for(b=0;b<d;++b)h[b]=interpolate(e[b],i[b]);for(;b<o;++b)g[b]=i[b];return function(j){for(b=0;b<d;++b)g[b]=h[b](j);return g}}function date$1(e,i){var o=new Date;return e=+e,i=+i,function(d){return o.setTime(e*(1-d)+i*d),o}}function interpolateNumber(e,i){return e=+e,i=+i,function(o){return e*(1-o)+i*o}}function object(e,i){var o={},d={},h;(e===null||typeof e!="object")&&(e={}),(i===null||typeof i!="object")&&(i={});for(h in i)h in e?o[h]=interpolate(e[h],i[h]):d[h]=i[h];return function(g){for(h in o)d[h]=o[h](g);return d}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(i){return e(i)+""}}function string(e,i){var o=reA.lastIndex=reB.lastIndex=0,d,h,g,b=-1,j=[],_=[];for(e=e+"",i=i+"";(d=reA.exec(e))&&(h=reB.exec(i));)(g=h.index)>o&&(g=i.slice(o,g),j[b]?j[b]+=g:j[++b]=g),(d=d[0])===(h=h[0])?j[b]?j[b]+=h:j[++b]=h:(j[++b]=null,_.push({i:b,x:interpolateNumber(d,h)})),o=reB.lastIndex;return o<i.length&&(g=i.slice(o),j[b]?j[b]+=g:j[++b]=g),j.length<2?_[0]?one(_[0].x):zero(i):(i=_.length,function($){for(var _e=0,et;_e<i;++_e)j[(et=_[_e]).i]=et.x($);return j.join("")})}function interpolate(e,i){var o=typeof i,d;return i==null||o==="boolean"?constant(i):(o==="number"?interpolateNumber:o==="string"?(d=color(i))?(i=d,rgb):string:i instanceof color?rgb:i instanceof Date?date$1:isNumberArray(i)?numberArray:Array.isArray(i)?genericArray:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?object:interpolateNumber)(e,i)}function interpolateRound(e,i){return e=+e,i=+i,function(o){return Math.round(e*(1-o)+i*o)}}function piecewise(e,i){i===void 0&&(i=e,e=interpolate);for(var o=0,d=i.length-1,h=i[0],g=new Array(d<0?0:d);o<d;)g[o]=e(h,h=i[++o]);return function(b){var j=Math.max(0,Math.min(d-1,Math.floor(b*=d)));return g[j](b-j)}}function constants(e){return function(){return e}}function number$1(e){return+e}var unit=[0,1];function identity$3(e){return e}function normalize(e,i){return(i-=e=+e)?function(o){return(o-e)/i}:constants(isNaN(i)?NaN:.5)}function clamper(e,i){var o;return e>i&&(o=e,e=i,i=o),function(d){return Math.max(e,Math.min(i,d))}}function bimap(e,i,o){var d=e[0],h=e[1],g=i[0],b=i[1];return h<d?(d=normalize(h,d),g=o(b,g)):(d=normalize(d,h),g=o(g,b)),function(j){return g(d(j))}}function polymap(e,i,o){var d=Math.min(e.length,i.length)-1,h=new Array(d),g=new Array(d),b=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),i=i.slice().reverse());++b<d;)h[b]=normalize(e[b],e[b+1]),g[b]=o(i[b],i[b+1]);return function(j){var _=bisectRight(e,j,1,d)-1;return g[_](h[_](j))}}function copy$1(e,i){return i.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer$2(){var e=unit,i=unit,o=interpolate,d,h,g,b=identity$3,j,_,$;function _e(){var tt=Math.min(e.length,i.length);return b!==identity$3&&(b=clamper(e[0],e[tt-1])),j=tt>2?polymap:bimap,_=$=null,et}function et(tt){return tt==null||isNaN(tt=+tt)?g:(_||(_=j(e.map(d),i,o)))(d(b(tt)))}return et.invert=function(tt){return b(h(($||($=j(i,e.map(d),interpolateNumber)))(tt)))},et.domain=function(tt){return arguments.length?(e=Array.from(tt,number$1),_e()):e.slice()},et.range=function(tt){return arguments.length?(i=Array.from(tt),_e()):i.slice()},et.rangeRound=function(tt){return i=Array.from(tt),o=interpolateRound,_e()},et.clamp=function(tt){return arguments.length?(b=tt?!0:identity$3,_e()):b!==identity$3},et.interpolate=function(tt){return arguments.length?(o=tt,_e()):o},et.unknown=function(tt){return arguments.length?(g=tt,et):g},function(tt,rt){return d=tt,h=rt,_e()}}function continuous(){return transformer$2()(identity$3,identity$3)}function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,i){if(!isFinite(e)||e===0)return null;var o=(e=i?e.toExponential(i-1):e.toExponential()).indexOf("e"),d=e.slice(0,o);return[d.length>1?d[0]+d.slice(2):d,+e.slice(o+1)]}function exponent(e){return e=formatDecimalParts(Math.abs(e)),e?e[1]:NaN}function formatGroup(e,i){return function(o,d){for(var h=o.length,g=[],b=0,j=e[0],_=0;h>0&&j>0&&(_+j+1>d&&(j=Math.max(1,d-_)),g.push(o.substring(h-=j,h+j)),!((_+=j+1)>d));)j=e[b=(b+1)%e.length];return g.reverse().join(i)}}function formatNumerals(e){return function(i){return i.replace(/[0-9]/g,function(o){return e[+o]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(i=re.exec(e)))throw new Error("invalid format: "+e);var i;return new FormatSpecifier({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(e){e:for(var i=e.length,o=1,d=-1,h;o<i;++o)switch(e[o]){case".":d=h=o;break;case"0":d===0&&(d=o),h=o;break;default:if(!+e[o])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(h+1):e}var prefixExponent;function formatPrefixAuto(e,i){var o=formatDecimalParts(e,i);if(!o)return prefixExponent=void 0,e.toPrecision(i);var d=o[0],h=o[1],g=h-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(h/3)))*3)+1,b=d.length;return g===b?d:g>b?d+new Array(g-b+1).join("0"):g>0?d.slice(0,g)+"."+d.slice(g):"0."+new Array(1-g).join("0")+formatDecimalParts(e,Math.max(0,i+g-1))[0]}function formatRounded(e,i){var o=formatDecimalParts(e,i);if(!o)return e+"";var d=o[0],h=o[1];return h<0?"0."+new Array(-h).join("0")+d:d.length>h+1?d.slice(0,h+1)+"."+d.slice(h+1):d+new Array(h-d.length+2).join("0")}const formatTypes={"%":(e,i)=>(e*100).toFixed(i),b:e=>Math.round(e).toString(2),c:e=>e+"",d:formatDecimal,e:(e,i)=>e.toExponential(i),f:(e,i)=>e.toFixed(i),g:(e,i)=>e.toPrecision(i),o:e=>Math.round(e).toString(8),p:(e,i)=>formatRounded(e*100,i),r:formatRounded,s:formatPrefixAuto,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity$2(e){return e}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(e){var i=e.grouping===void 0||e.thousands===void 0?identity$2:formatGroup(map$1.call(e.grouping,Number),e.thousands+""),o=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",h=e.decimal===void 0?".":e.decimal+"",g=e.numerals===void 0?identity$2:formatNumerals(map$1.call(e.numerals,String)),b=e.percent===void 0?"%":e.percent+"",j=e.minus===void 0?"":e.minus+"",_=e.nan===void 0?"NaN":e.nan+"";function $(et,tt){et=formatSpecifier(et);var rt=et.fill,nt=et.align,it=et.sign,st=et.symbol,at=et.zero,ot=et.width,lt=et.comma,ct=et.precision,ut=et.trim,dt=et.type;dt==="n"?(lt=!0,dt="g"):formatTypes[dt]||(ct===void 0&&(ct=12),ut=!0,dt="g"),(at||rt==="0"&&nt==="=")&&(at=!0,rt="0",nt="=");var mt=(tt&&tt.prefix!==void 0?tt.prefix:"")+(st==="$"?o:st==="#"&&/[boxX]/.test(dt)?"0"+dt.toLowerCase():""),xt=(st==="$"?d:/[%p]/.test(dt)?b:"")+(tt&&tt.suffix!==void 0?tt.suffix:""),ft=formatTypes[dt],gt=/[defgprs%]/.test(dt);ct=ct===void 0?6:/[gprs]/.test(dt)?Math.max(1,Math.min(21,ct)):Math.max(0,Math.min(20,ct));function pt(yt){var bt=mt,St=xt,wt,kt,Et;if(dt==="c")St=ft(yt)+St,yt="";else{yt=+yt;var jt=yt<0||1/yt<0;if(yt=isNaN(yt)?_:ft(Math.abs(yt),ct),ut&&(yt=formatTrim(yt)),jt&&+yt==0&&it!=="+"&&(jt=!1),bt=(jt?it==="("?it:j:it==="-"||it==="("?"":it)+bt,St=(dt==="s"&&!isNaN(yt)&&prefixExponent!==void 0?prefixes[8+prefixExponent/3]:"")+St+(jt&&it==="("?")":""),gt){for(wt=-1,kt=yt.length;++wt<kt;)if(Et=yt.charCodeAt(wt),48>Et||Et>57){St=(Et===46?h+yt.slice(wt+1):yt.slice(wt))+St,yt=yt.slice(0,wt);break}}}lt&&!at&&(yt=i(yt,1/0));var Rt=bt.length+yt.length+St.length,At=Rt<ot?new Array(ot-Rt+1).join(rt):"";switch(lt&&at&&(yt=i(At+yt,At.length?ot-St.length:1/0),At=""),nt){case"<":yt=bt+yt+St+At;break;case"=":yt=bt+At+yt+St;break;case"^":yt=At.slice(0,Rt=At.length>>1)+bt+yt+St+At.slice(Rt);break;default:yt=At+bt+yt+St;break}return g(yt)}return pt.toString=function(){return et+""},pt}function _e(et,tt){var rt=Math.max(-8,Math.min(8,Math.floor(exponent(tt)/3)))*3,nt=Math.pow(10,-rt),it=$((et=formatSpecifier(et),et.type="f",et),{suffix:prefixes[8+rt/3]});return function(st){return it(nt*st)}}return{format:$,formatPrefix:_e}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(e){return locale$1=formatLocale$1(e),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(i)/3)))*3-exponent(Math.abs(e)))}function precisionRound(e,i){return e=Math.abs(e),i=Math.abs(i)-e,Math.max(0,exponent(i)-exponent(e))+1}function tickFormat(e,i,o,d){var h=tickStep(e,i,o),g;switch(d=formatSpecifier(d??",f"),d.type){case"s":{var b=Math.max(Math.abs(e),Math.abs(i));return d.precision==null&&!isNaN(g=precisionPrefix(h,b))&&(d.precision=g),formatPrefix(d,b)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(g=precisionRound(h,Math.max(Math.abs(e),Math.abs(i))))&&(d.precision=g-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(g=precisionFixed(h))&&(d.precision=g-(d.type==="%")*2);break}}return format(d)}function linearish(e){var i=e.domain;return e.ticks=function(o){var d=i();return ticks(d[0],d[d.length-1],o??10)},e.tickFormat=function(o,d){var h=i();return tickFormat(h[0],h[h.length-1],o??10,d)},e.nice=function(o){o==null&&(o=10);var d=i(),h=0,g=d.length-1,b=d[h],j=d[g],_,$,_e=10;for(j<b&&($=b,b=j,j=$,$=h,h=g,g=$);_e-- >0;){if($=tickIncrement(b,j,o),$===_)return d[h]=b,d[g]=j,i(d);if($>0)b=Math.floor(b/$)*$,j=Math.ceil(j/$)*$;else if($<0)b=Math.ceil(b*$)/$,j=Math.floor(j*$)/$;else break;_=$}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy$1(e,linear())},initRange.apply(e,arguments),linearish(e)}function identity$1(e){var i;function o(d){return d==null||isNaN(d=+d)?i:d}return o.invert=o,o.domain=o.range=function(d){return arguments.length?(e=Array.from(d,number$1),o):e.slice()},o.unknown=function(d){return arguments.length?(i=d,o):i},o.copy=function(){return identity$1(e).unknown(i)},e=arguments.length?Array.from(e,number$1):[0,1],linearish(o)}function nice(e,i){e=e.slice();var o=0,d=e.length-1,h=e[o],g=e[d],b;return g<h&&(b=o,o=d,d=b,b=h,h=g,g=b),e[o]=i.floor(h),e[d]=i.ceil(g),e}function transformLog(e){return Math.log(e)}function transformExp(e){return Math.exp(e)}function transformLogn(e){return-Math.log(-e)}function transformExpn(e){return-Math.exp(-e)}function pow10(e){return isFinite(e)?+("1e"+e):e<0?0:e}function powp(e){return e===10?pow10:e===Math.E?Math.exp:i=>Math.pow(e,i)}function logp(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),i=>Math.log(i)/e)}function reflect(e){return(i,o)=>-e(-i,o)}function loggish(e){const i=e(transformLog,transformExp),o=i.domain;let d=10,h,g;function b(){return h=logp(d),g=powp(d),o()[0]<0?(h=reflect(h),g=reflect(g),e(transformLogn,transformExpn)):e(transformLog,transformExp),i}return i.base=function(j){return arguments.length?(d=+j,b()):d},i.domain=function(j){return arguments.length?(o(j),b()):o()},i.ticks=j=>{const _=o();let $=_[0],_e=_[_.length-1];const et=_e<$;et&&([$,_e]=[_e,$]);let tt=h($),rt=h(_e),nt,it;const st=j==null?10:+j;let at=[];if(!(d%1)&&rt-tt<st){if(tt=Math.floor(tt),rt=Math.ceil(rt),$>0){for(;tt<=rt;++tt)for(nt=1;nt<d;++nt)if(it=tt<0?nt/g(-tt):nt*g(tt),!(it<$)){if(it>_e)break;at.push(it)}}else for(;tt<=rt;++tt)for(nt=d-1;nt>=1;--nt)if(it=tt>0?nt/g(-tt):nt*g(tt),!(it<$)){if(it>_e)break;at.push(it)}at.length*2<st&&(at=ticks($,_e,st))}else at=ticks(tt,rt,Math.min(rt-tt,st)).map(g);return et?at.reverse():at},i.tickFormat=(j,_)=>{if(j==null&&(j=10),_==null&&(_=d===10?"s":","),typeof _!="function"&&(!(d%1)&&(_=formatSpecifier(_)).precision==null&&(_.trim=!0),_=format(_)),j===1/0)return _;const $=Math.max(1,d*j/i.ticks().length);return _e=>{let et=_e/g(Math.round(h(_e)));return et*d<d-.5&&(et*=d),et<=$?_(_e):""}},i.nice=()=>o(nice(o(),{floor:j=>g(Math.floor(h(j))),ceil:j=>g(Math.ceil(h(j)))})),i}function log(){const e=loggish(transformer$2()).domain([1,10]);return e.copy=()=>copy$1(e,log()).base(e.base()),initRange.apply(e,arguments),e}function transformSymlog(e){return function(i){return Math.sign(i)*Math.log1p(Math.abs(i/e))}}function transformSymexp(e){return function(i){return Math.sign(i)*Math.expm1(Math.abs(i))*e}}function symlogish(e){var i=1,o=e(transformSymlog(i),transformSymexp(i));return o.constant=function(d){return arguments.length?e(transformSymlog(i=+d),transformSymexp(i)):i},linearish(o)}function symlog(){var e=symlogish(transformer$2());return e.copy=function(){return copy$1(e,symlog()).constant(e.constant())},initRange.apply(e,arguments)}function transformPow(e){return function(i){return i<0?-Math.pow(-i,e):Math.pow(i,e)}}function transformSqrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function transformSquare(e){return e<0?-e*e:e*e}function powish(e){var i=e(identity$3,identity$3),o=1;function d(){return o===1?e(identity$3,identity$3):o===.5?e(transformSqrt,transformSquare):e(transformPow(o),transformPow(1/o))}return i.exponent=function(h){return arguments.length?(o=+h,d()):o},linearish(i)}function pow(){var e=powish(transformer$2());return e.copy=function(){return copy$1(e,pow()).exponent(e.exponent())},initRange.apply(e,arguments),e}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(e){return Math.sign(e)*e*e}function unsquare(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function radial(){var e=continuous(),i=[0,1],o=!1,d;function h(g){var b=unsquare(e(g));return isNaN(b)?d:o?Math.round(b):b}return h.invert=function(g){return e.invert(square(g))},h.domain=function(g){return arguments.length?(e.domain(g),h):e.domain()},h.range=function(g){return arguments.length?(e.range((i=Array.from(g,number$1)).map(square)),h):i.slice()},h.rangeRound=function(g){return h.range(g).round(!0)},h.round=function(g){return arguments.length?(o=!!g,h):o},h.clamp=function(g){return arguments.length?(e.clamp(g),h):e.clamp()},h.unknown=function(g){return arguments.length?(d=g,h):d},h.copy=function(){return radial(e.domain(),i).round(o).clamp(e.clamp()).unknown(d)},initRange.apply(h,arguments),linearish(h)}function quantile(){var e=[],i=[],o=[],d;function h(){var b=0,j=Math.max(1,i.length);for(o=new Array(j-1);++b<j;)o[b-1]=quantileSorted(e,b/j);return g}function g(b){return b==null||isNaN(b=+b)?d:i[bisectRight(o,b)]}return g.invertExtent=function(b){var j=i.indexOf(b);return j<0?[NaN,NaN]:[j>0?o[j-1]:e[0],j<o.length?o[j]:e[e.length-1]]},g.domain=function(b){if(!arguments.length)return e.slice();e=[];for(let j of b)j!=null&&!isNaN(j=+j)&&e.push(j);return e.sort(ascending),h()},g.range=function(b){return arguments.length?(i=Array.from(b),h()):i.slice()},g.unknown=function(b){return arguments.length?(d=b,g):d},g.quantiles=function(){return o.slice()},g.copy=function(){return quantile().domain(e).range(i).unknown(d)},initRange.apply(g,arguments)}function quantize(){var e=0,i=1,o=1,d=[.5],h=[0,1],g;function b(_){return _!=null&&_<=_?h[bisectRight(d,_,0,o)]:g}function j(){var _=-1;for(d=new Array(o);++_<o;)d[_]=((_+1)*i-(_-o)*e)/(o+1);return b}return b.domain=function(_){return arguments.length?([e,i]=_,e=+e,i=+i,j()):[e,i]},b.range=function(_){return arguments.length?(o=(h=Array.from(_)).length-1,j()):h.slice()},b.invertExtent=function(_){var $=h.indexOf(_);return $<0?[NaN,NaN]:$<1?[e,d[0]]:$>=o?[d[o-1],i]:[d[$-1],d[$]]},b.unknown=function(_){return arguments.length&&(g=_),b},b.thresholds=function(){return d.slice()},b.copy=function(){return quantize().domain([e,i]).range(h).unknown(g)},initRange.apply(linearish(b),arguments)}function threshold(){var e=[.5],i=[0,1],o,d=1;function h(g){return g!=null&&g<=g?i[bisectRight(e,g,0,d)]:o}return h.domain=function(g){return arguments.length?(e=Array.from(g),d=Math.min(e.length,i.length-1),h):e.slice()},h.range=function(g){return arguments.length?(i=Array.from(g),d=Math.min(e.length,i.length-1),h):i.slice()},h.invertExtent=function(g){var b=i.indexOf(g);return[e[b-1],e[b]]},h.unknown=function(g){return arguments.length?(o=g,h):o},h.copy=function(){return threshold().domain(e).range(i).unknown(o)},initRange.apply(h,arguments)}const t0=new Date,t1=new Date;function timeInterval(e,i,o,d){function h(g){return e(g=arguments.length===0?new Date:new Date(+g)),g}return h.floor=g=>(e(g=new Date(+g)),g),h.ceil=g=>(e(g=new Date(g-1)),i(g,1),e(g),g),h.round=g=>{const b=h(g),j=h.ceil(g);return g-b<j-g?b:j},h.offset=(g,b)=>(i(g=new Date(+g),b==null?1:Math.floor(b)),g),h.range=(g,b,j)=>{const _=[];if(g=h.ceil(g),j=j==null?1:Math.floor(j),!(g<b)||!(j>0))return _;let $;do _.push($=new Date(+g)),i(g,j),e(g);while($<g&&g<b);return _},h.filter=g=>timeInterval(b=>{if(b>=b)for(;e(b),!g(b);)b.setTime(b-1)},(b,j)=>{if(b>=b)if(j<0)for(;++j<=0;)for(;i(b,-1),!g(b););else for(;--j>=0;)for(;i(b,1),!g(b););}),o&&(h.count=(g,b)=>(t0.setTime(+g),t1.setTime(+b),e(t0),e(t1),Math.floor(o(t0,t1))),h.every=g=>(g=Math.floor(g),!isFinite(g)||!(g>0)?null:g>1?h.filter(d?b=>d(b)%g===0:b=>h.count(0,b)%g===0):h)),h}const millisecond=timeInterval(()=>{},(e,i)=>{e.setTime(+e+i)},(e,i)=>i-e);millisecond.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?timeInterval(i=>{i.setTime(Math.floor(i/e)*e)},(i,o)=>{i.setTime(+i+o*e)},(i,o)=>(o-i)/e):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(e=>{e.setTime(e-e.getMilliseconds())},(e,i)=>{e.setTime(+e+i*durationSecond)},(e,i)=>(i-e)/durationSecond,e=>e.getUTCSeconds());second.range;const timeMinute=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond)},(e,i)=>{e.setTime(+e+i*durationMinute)},(e,i)=>(i-e)/durationMinute,e=>e.getMinutes());timeMinute.range;const utcMinute=timeInterval(e=>{e.setUTCSeconds(0,0)},(e,i)=>{e.setTime(+e+i*durationMinute)},(e,i)=>(i-e)/durationMinute,e=>e.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond-e.getMinutes()*durationMinute)},(e,i)=>{e.setTime(+e+i*durationHour)},(e,i)=>(i-e)/durationHour,e=>e.getHours());timeHour.range;const utcHour=timeInterval(e=>{e.setUTCMinutes(0,0,0)},(e,i)=>{e.setTime(+e+i*durationHour)},(e,i)=>(i-e)/durationHour,e=>e.getUTCHours());utcHour.range;const timeDay=timeInterval(e=>e.setHours(0,0,0,0),(e,i)=>e.setDate(e.getDate()+i),(e,i)=>(i-e-(i.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationDay,e=>e.getDate()-1);timeDay.range;const utcDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCDate(e.getUTCDate()+i)},(e,i)=>(i-e)/durationDay,e=>e.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCDate(e.getUTCDate()+i)},(e,i)=>(i-e)/durationDay,e=>Math.floor(e/durationDay));unixDay.range;function timeWeekday(e){return timeInterval(i=>{i.setDate(i.getDate()-(i.getDay()+7-e)%7),i.setHours(0,0,0,0)},(i,o)=>{i.setDate(i.getDate()+o*7)},(i,o)=>(o-i-(o.getTimezoneOffset()-i.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(e){return timeInterval(i=>{i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-e)%7),i.setUTCHours(0,0,0,0)},(i,o)=>{i.setUTCDate(i.getUTCDate()+o*7)},(i,o)=>(o-i)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,i)=>{e.setMonth(e.getMonth()+i)},(e,i)=>i.getMonth()-e.getMonth()+(i.getFullYear()-e.getFullYear())*12,e=>e.getMonth());timeMonth.range;const utcMonth=timeInterval(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCMonth(e.getUTCMonth()+i)},(e,i)=>i.getUTCMonth()-e.getUTCMonth()+(i.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());utcMonth.range;const timeYear=timeInterval(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,i)=>{e.setFullYear(e.getFullYear()+i)},(e,i)=>i.getFullYear()-e.getFullYear(),e=>e.getFullYear());timeYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(i=>{i.setFullYear(Math.floor(i.getFullYear()/e)*e),i.setMonth(0,1),i.setHours(0,0,0,0)},(i,o)=>{i.setFullYear(i.getFullYear()+o*e)});timeYear.range;const utcYear=timeInterval(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCFullYear(e.getUTCFullYear()+i)},(e,i)=>i.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());utcYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(i=>{i.setUTCFullYear(Math.floor(i.getUTCFullYear()/e)*e),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},(i,o)=>{i.setUTCFullYear(i.getUTCFullYear()+o*e)});utcYear.range;function ticker(e,i,o,d,h,g){const b=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[g,1,durationMinute],[g,5,5*durationMinute],[g,15,15*durationMinute],[g,30,30*durationMinute],[h,1,durationHour],[h,3,3*durationHour],[h,6,6*durationHour],[h,12,12*durationHour],[d,1,durationDay],[d,2,2*durationDay],[o,1,durationWeek],[i,1,durationMonth],[i,3,3*durationMonth],[e,1,durationYear]];function j($,_e,et){const tt=_e<$;tt&&([$,_e]=[_e,$]);const rt=et&&typeof et.range=="function"?et:_($,_e,et),nt=rt?rt.range($,+_e+1):[];return tt?nt.reverse():nt}function _($,_e,et){const tt=Math.abs(_e-$)/et,rt=bisector(([,,st])=>st).right(b,tt);if(rt===b.length)return e.every(tickStep($/durationYear,_e/durationYear,et));if(rt===0)return millisecond.every(Math.max(tickStep($,_e,et),1));const[nt,it]=b[tt/b[rt-1][2]<b[rt][2]/tt?rt-1:rt];return nt.every(it)}return[j,_]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(e){if(0<=e.y&&e.y<100){var i=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return i.setFullYear(e.y),i}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var i=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return i.setUTCFullYear(e.y),i}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,i,o){return{y:e,m:i,d:o,H:0,M:0,S:0,L:0}}function formatLocale(e){var i=e.dateTime,o=e.date,d=e.time,h=e.periods,g=e.days,b=e.shortDays,j=e.months,_=e.shortMonths,$=formatRe(h),_e=formatLookup(h),et=formatRe(g),tt=formatLookup(g),rt=formatRe(b),nt=formatLookup(b),it=formatRe(j),st=formatLookup(j),at=formatRe(_),ot=formatLookup(_),lt={a:Et,A:jt,b:Rt,B:At,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:Dt,q:Nt,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},ct={a:zt,A:Vt,b:Gt,B:Mt,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:Wt,q:Zt,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},ut={a:gt,A:pt,b:yt,B:bt,c:St,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:ft,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:wt,X:kt,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};lt.x=dt(o,lt),lt.X=dt(d,lt),lt.c=dt(i,lt),ct.x=dt(o,ct),ct.X=dt(d,ct),ct.c=dt(i,ct);function dt(Ct,Ut){return function(Kt){var $t=[],Jt=-1,Qt=0,er=Ct.length,Xt,rr,nr;for(Kt instanceof Date||(Kt=new Date(+Kt));++Jt<er;)Ct.charCodeAt(Jt)===37&&($t.push(Ct.slice(Qt,Jt)),(rr=pads[Xt=Ct.charAt(++Jt)])!=null?Xt=Ct.charAt(++Jt):rr=Xt==="e"?" ":"0",(nr=Ut[Xt])&&(Xt=nr(Kt,rr)),$t.push(Xt),Qt=Jt+1);return $t.push(Ct.slice(Qt,Jt)),$t.join("")}}function mt(Ct,Ut){return function(Kt){var $t=newDate(1900,void 0,1),Jt=xt($t,Ct,Kt+="",0),Qt,er;if(Jt!=Kt.length)return null;if("Q"in $t)return new Date($t.Q);if("s"in $t)return new Date($t.s*1e3+("L"in $t?$t.L:0));if(Ut&&!("Z"in $t)&&($t.Z=0),"p"in $t&&($t.H=$t.H%12+$t.p*12),$t.m===void 0&&($t.m="q"in $t?$t.q:0),"V"in $t){if($t.V<1||$t.V>53)return null;"w"in $t||($t.w=1),"Z"in $t?(Qt=utcDate(newDate($t.y,0,1)),er=Qt.getUTCDay(),Qt=er>4||er===0?utcMonday.ceil(Qt):utcMonday(Qt),Qt=utcDay.offset(Qt,($t.V-1)*7),$t.y=Qt.getUTCFullYear(),$t.m=Qt.getUTCMonth(),$t.d=Qt.getUTCDate()+($t.w+6)%7):(Qt=localDate(newDate($t.y,0,1)),er=Qt.getDay(),Qt=er>4||er===0?timeMonday.ceil(Qt):timeMonday(Qt),Qt=timeDay.offset(Qt,($t.V-1)*7),$t.y=Qt.getFullYear(),$t.m=Qt.getMonth(),$t.d=Qt.getDate()+($t.w+6)%7)}else("W"in $t||"U"in $t)&&("w"in $t||($t.w="u"in $t?$t.u%7:"W"in $t?1:0),er="Z"in $t?utcDate(newDate($t.y,0,1)).getUTCDay():localDate(newDate($t.y,0,1)).getDay(),$t.m=0,$t.d="W"in $t?($t.w+6)%7+$t.W*7-(er+5)%7:$t.w+$t.U*7-(er+6)%7);return"Z"in $t?($t.H+=$t.Z/100|0,$t.M+=$t.Z%100,utcDate($t)):localDate($t)}}function xt(Ct,Ut,Kt,$t){for(var Jt=0,Qt=Ut.length,er=Kt.length,Xt,rr;Jt<Qt;){if($t>=er)return-1;if(Xt=Ut.charCodeAt(Jt++),Xt===37){if(Xt=Ut.charAt(Jt++),rr=ut[Xt in pads?Ut.charAt(Jt++):Xt],!rr||($t=rr(Ct,Kt,$t))<0)return-1}else if(Xt!=Kt.charCodeAt($t++))return-1}return $t}function ft(Ct,Ut,Kt){var $t=$.exec(Ut.slice(Kt));return $t?(Ct.p=_e.get($t[0].toLowerCase()),Kt+$t[0].length):-1}function gt(Ct,Ut,Kt){var $t=rt.exec(Ut.slice(Kt));return $t?(Ct.w=nt.get($t[0].toLowerCase()),Kt+$t[0].length):-1}function pt(Ct,Ut,Kt){var $t=et.exec(Ut.slice(Kt));return $t?(Ct.w=tt.get($t[0].toLowerCase()),Kt+$t[0].length):-1}function yt(Ct,Ut,Kt){var $t=at.exec(Ut.slice(Kt));return $t?(Ct.m=ot.get($t[0].toLowerCase()),Kt+$t[0].length):-1}function bt(Ct,Ut,Kt){var $t=it.exec(Ut.slice(Kt));return $t?(Ct.m=st.get($t[0].toLowerCase()),Kt+$t[0].length):-1}function St(Ct,Ut,Kt){return xt(Ct,i,Ut,Kt)}function wt(Ct,Ut,Kt){return xt(Ct,o,Ut,Kt)}function kt(Ct,Ut,Kt){return xt(Ct,d,Ut,Kt)}function Et(Ct){return b[Ct.getDay()]}function jt(Ct){return g[Ct.getDay()]}function Rt(Ct){return _[Ct.getMonth()]}function At(Ct){return j[Ct.getMonth()]}function Dt(Ct){return h[+(Ct.getHours()>=12)]}function Nt(Ct){return 1+~~(Ct.getMonth()/3)}function zt(Ct){return b[Ct.getUTCDay()]}function Vt(Ct){return g[Ct.getUTCDay()]}function Gt(Ct){return _[Ct.getUTCMonth()]}function Mt(Ct){return j[Ct.getUTCMonth()]}function Wt(Ct){return h[+(Ct.getUTCHours()>=12)]}function Zt(Ct){return 1+~~(Ct.getUTCMonth()/3)}return{format:function(Ct){var Ut=dt(Ct+="",lt);return Ut.toString=function(){return Ct},Ut},parse:function(Ct){var Ut=mt(Ct+="",!1);return Ut.toString=function(){return Ct},Ut},utcFormat:function(Ct){var Ut=dt(Ct+="",ct);return Ut.toString=function(){return Ct},Ut},utcParse:function(Ct){var Ut=mt(Ct+="",!0);return Ut.toString=function(){return Ct},Ut}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(e,i,o){var d=e<0?"-":"",h=(d?-e:e)+"",g=h.length;return d+(g<o?new Array(o-g+1).join(i)+h:h)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){return new Map(e.map((i,o)=>[i.toLowerCase(),o]))}function parseWeekdayNumberSunday(e,i,o){var d=numberRe.exec(i.slice(o,o+1));return d?(e.w=+d[0],o+d[0].length):-1}function parseWeekdayNumberMonday(e,i,o){var d=numberRe.exec(i.slice(o,o+1));return d?(e.u=+d[0],o+d[0].length):-1}function parseWeekNumberSunday(e,i,o){var d=numberRe.exec(i.slice(o,o+2));return d?(e.U=+d[0],o+d[0].length):-1}function parseWeekNumberISO(e,i,o){var d=numberRe.exec(i.slice(o,o+2));return d?(e.V=+d[0],o+d[0].length):-1}function parseWeekNumberMonday(e,i,o){var d=numberRe.exec(i.slice(o,o+2));return d?(e.W=+d[0],o+d[0].length):-1}function parseFullYear(e,i,o){var d=numberRe.exec(i.slice(o,o+4));return d?(e.y=+d[0],o+d[0].length):-1}function parseYear(e,i,o){var d=numberRe.exec(i.slice(o,o+2));return d?(e.y=+d[0]+(+d[0]>68?1900:2e3),o+d[0].length):-1}function parseZone(e,i,o){var d=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(o,o+6));return d?(e.Z=d[1]?0:-(d[2]+(d[3]||"00")),o+d[0].length):-1}function parseQuarter(e,i,o){var d=numberRe.exec(i.slice(o,o+1));return d?(e.q=d[0]*3-3,o+d[0].length):-1}function parseMonthNumber(e,i,o){var d=numberRe.exec(i.slice(o,o+2));return d?(e.m=d[0]-1,o+d[0].length):-1}function parseDayOfMonth(e,i,o){var d=numberRe.exec(i.slice(o,o+2));return d?(e.d=+d[0],o+d[0].length):-1}function parseDayOfYear(e,i,o){var d=numberRe.exec(i.slice(o,o+3));return d?(e.m=0,e.d=+d[0],o+d[0].length):-1}function parseHour24(e,i,o){var d=numberRe.exec(i.slice(o,o+2));return d?(e.H=+d[0],o+d[0].length):-1}function parseMinutes(e,i,o){var d=numberRe.exec(i.slice(o,o+2));return d?(e.M=+d[0],o+d[0].length):-1}function parseSeconds(e,i,o){var d=numberRe.exec(i.slice(o,o+2));return d?(e.S=+d[0],o+d[0].length):-1}function parseMilliseconds(e,i,o){var d=numberRe.exec(i.slice(o,o+3));return d?(e.L=+d[0],o+d[0].length):-1}function parseMicroseconds(e,i,o){var d=numberRe.exec(i.slice(o,o+6));return d?(e.L=Math.floor(d[0]/1e3),o+d[0].length):-1}function parseLiteralPercent(e,i,o){var d=percentRe.exec(i.slice(o,o+1));return d?o+d[0].length:-1}function parseUnixTimestamp(e,i,o){var d=numberRe.exec(i.slice(o));return d?(e.Q=+d[0],o+d[0].length):-1}function parseUnixTimestampSeconds(e,i,o){var d=numberRe.exec(i.slice(o));return d?(e.s=+d[0],o+d[0].length):-1}function formatDayOfMonth(e,i){return pad(e.getDate(),i,2)}function formatHour24(e,i){return pad(e.getHours(),i,2)}function formatHour12(e,i){return pad(e.getHours()%12||12,i,2)}function formatDayOfYear(e,i){return pad(1+timeDay.count(timeYear(e),e),i,3)}function formatMilliseconds(e,i){return pad(e.getMilliseconds(),i,3)}function formatMicroseconds(e,i){return formatMilliseconds(e,i)+"000"}function formatMonthNumber(e,i){return pad(e.getMonth()+1,i,2)}function formatMinutes(e,i){return pad(e.getMinutes(),i,2)}function formatSeconds(e,i){return pad(e.getSeconds(),i,2)}function formatWeekdayNumberMonday(e){var i=e.getDay();return i===0?7:i}function formatWeekNumberSunday(e,i){return pad(timeSunday.count(timeYear(e)-1,e),i,2)}function dISO(e){var i=e.getDay();return i>=4||i===0?timeThursday(e):timeThursday.ceil(e)}function formatWeekNumberISO(e,i){return e=dISO(e),pad(timeThursday.count(timeYear(e),e)+(timeYear(e).getDay()===4),i,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,i){return pad(timeMonday.count(timeYear(e)-1,e),i,2)}function formatYear(e,i){return pad(e.getFullYear()%100,i,2)}function formatYearISO(e,i){return e=dISO(e),pad(e.getFullYear()%100,i,2)}function formatFullYear(e,i){return pad(e.getFullYear()%1e4,i,4)}function formatFullYearISO(e,i){var o=e.getDay();return e=o>=4||o===0?timeThursday(e):timeThursday.ceil(e),pad(e.getFullYear()%1e4,i,4)}function formatZone(e){var i=e.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+pad(i/60|0,"0",2)+pad(i%60,"0",2)}function formatUTCDayOfMonth(e,i){return pad(e.getUTCDate(),i,2)}function formatUTCHour24(e,i){return pad(e.getUTCHours(),i,2)}function formatUTCHour12(e,i){return pad(e.getUTCHours()%12||12,i,2)}function formatUTCDayOfYear(e,i){return pad(1+utcDay.count(utcYear(e),e),i,3)}function formatUTCMilliseconds(e,i){return pad(e.getUTCMilliseconds(),i,3)}function formatUTCMicroseconds(e,i){return formatUTCMilliseconds(e,i)+"000"}function formatUTCMonthNumber(e,i){return pad(e.getUTCMonth()+1,i,2)}function formatUTCMinutes(e,i){return pad(e.getUTCMinutes(),i,2)}function formatUTCSeconds(e,i){return pad(e.getUTCSeconds(),i,2)}function formatUTCWeekdayNumberMonday(e){var i=e.getUTCDay();return i===0?7:i}function formatUTCWeekNumberSunday(e,i){return pad(utcSunday.count(utcYear(e)-1,e),i,2)}function UTCdISO(e){var i=e.getUTCDay();return i>=4||i===0?utcThursday(e):utcThursday.ceil(e)}function formatUTCWeekNumberISO(e,i){return e=UTCdISO(e),pad(utcThursday.count(utcYear(e),e)+(utcYear(e).getUTCDay()===4),i,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,i){return pad(utcMonday.count(utcYear(e)-1,e),i,2)}function formatUTCYear(e,i){return pad(e.getUTCFullYear()%100,i,2)}function formatUTCYearISO(e,i){return e=UTCdISO(e),pad(e.getUTCFullYear()%100,i,2)}function formatUTCFullYear(e,i){return pad(e.getUTCFullYear()%1e4,i,4)}function formatUTCFullYearISO(e,i){var o=e.getUTCDay();return e=o>=4||o===0?utcThursday(e):utcThursday.ceil(e),pad(e.getUTCFullYear()%1e4,i,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(e){return locale=formatLocale(e),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(e){return new Date(e)}function number(e){return e instanceof Date?+e:+new Date(+e)}function calendar(e,i,o,d,h,g,b,j,_,$){var _e=continuous(),et=_e.invert,tt=_e.domain,rt=$(".%L"),nt=$(":%S"),it=$("%I:%M"),st=$("%I %p"),at=$("%a %d"),ot=$("%b %d"),lt=$("%B"),ct=$("%Y");function ut(dt){return(_(dt)<dt?rt:j(dt)<dt?nt:b(dt)<dt?it:g(dt)<dt?st:d(dt)<dt?h(dt)<dt?at:ot:o(dt)<dt?lt:ct)(dt)}return _e.invert=function(dt){return new Date(et(dt))},_e.domain=function(dt){return arguments.length?tt(Array.from(dt,number)):tt().map(date)},_e.ticks=function(dt){var mt=tt();return e(mt[0],mt[mt.length-1],dt??10)},_e.tickFormat=function(dt,mt){return mt==null?ut:$(mt)},_e.nice=function(dt){var mt=tt();return(!dt||typeof dt.range!="function")&&(dt=i(mt[0],mt[mt.length-1],dt??10)),dt?tt(nice(mt,dt)):_e},_e.copy=function(){return copy$1(_e,calendar(e,i,o,d,h,g,b,j,_,$))},_e}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var e=0,i=1,o,d,h,g,b=identity$3,j=!1,_;function $(et){return et==null||isNaN(et=+et)?_:b(h===0?.5:(et=(g(et)-o)*h,j?Math.max(0,Math.min(1,et)):et))}$.domain=function(et){return arguments.length?([e,i]=et,o=g(e=+e),d=g(i=+i),h=o===d?0:1/(d-o),$):[e,i]},$.clamp=function(et){return arguments.length?(j=!!et,$):j},$.interpolator=function(et){return arguments.length?(b=et,$):b};function _e(et){return function(tt){var rt,nt;return arguments.length?([rt,nt]=tt,b=et(rt,nt),$):[b(0),b(1)]}}return $.range=_e(interpolate),$.rangeRound=_e(interpolateRound),$.unknown=function(et){return arguments.length?(_=et,$):_},function(et){return g=et,o=et(e),d=et(i),h=o===d?0:1/(d-o),$}}function copy(e,i){return i.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sequential(){var e=linearish(transformer$1()(identity$3));return e.copy=function(){return copy(e,sequential())},initInterpolator.apply(e,arguments)}function sequentialLog(){var e=loggish(transformer$1()).domain([1,10]);return e.copy=function(){return copy(e,sequentialLog()).base(e.base())},initInterpolator.apply(e,arguments)}function sequentialSymlog(){var e=symlogish(transformer$1());return e.copy=function(){return copy(e,sequentialSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function sequentialPow(){var e=powish(transformer$1());return e.copy=function(){return copy(e,sequentialPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var e=[],i=identity$3;function o(d){if(d!=null&&!isNaN(d=+d))return i((bisectRight(e,d,1)-1)/(e.length-1))}return o.domain=function(d){if(!arguments.length)return e.slice();e=[];for(let h of d)h!=null&&!isNaN(h=+h)&&e.push(h);return e.sort(ascending),o},o.interpolator=function(d){return arguments.length?(i=d,o):i},o.range=function(){return e.map((d,h)=>i(h/(e.length-1)))},o.quantiles=function(d){return Array.from({length:d+1},(h,g)=>quantile$1(e,g/d))},o.copy=function(){return sequentialQuantile(i).domain(e)},initInterpolator.apply(o,arguments)}function transformer(){var e=0,i=.5,o=1,d=1,h,g,b,j,_,$=identity$3,_e,et=!1,tt;function rt(it){return isNaN(it=+it)?tt:(it=.5+((it=+_e(it))-g)*(d*it<d*g?j:_),$(et?Math.max(0,Math.min(1,it)):it))}rt.domain=function(it){return arguments.length?([e,i,o]=it,h=_e(e=+e),g=_e(i=+i),b=_e(o=+o),j=h===g?0:.5/(g-h),_=g===b?0:.5/(b-g),d=g<h?-1:1,rt):[e,i,o]},rt.clamp=function(it){return arguments.length?(et=!!it,rt):et},rt.interpolator=function(it){return arguments.length?($=it,rt):$};function nt(it){return function(st){var at,ot,lt;return arguments.length?([at,ot,lt]=st,$=piecewise(it,[at,ot,lt]),rt):[$(0),$(.5),$(1)]}}return rt.range=nt(interpolate),rt.rangeRound=nt(interpolateRound),rt.unknown=function(it){return arguments.length?(tt=it,rt):tt},function(it){return _e=it,h=it(e),g=it(i),b=it(o),j=h===g?0:.5/(g-h),_=g===b?0:.5/(b-g),d=g<h?-1:1,rt}}function diverging(){var e=linearish(transformer()(identity$3));return e.copy=function(){return copy(e,diverging())},initInterpolator.apply(e,arguments)}function divergingLog(){var e=loggish(transformer()).domain([.1,1,10]);return e.copy=function(){return copy(e,divergingLog()).base(e.base())},initInterpolator.apply(e,arguments)}function divergingSymlog(){var e=symlogish(transformer());return e.copy=function(){return copy(e,divergingSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function divergingPow(){var e=powish(transformer());return e.copy=function(){return copy(e,divergingPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}const d3Scales=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:diverging,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$1,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleRadial:radial,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time,scaleUtc:utcTime,tickFormat},Symbol.toStringTag,{value:"Module"}));var selectChartDataWithIndexes=e=>e.chartData,selectChartDataAndAlwaysIgnoreIndexes=createSelector([selectChartDataWithIndexes],e=>{var i=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:i,dataStartIndex:0}}),selectChartDataWithIndexesIfNotInPanoramaPosition4=(e,i,o,d)=>d?selectChartDataAndAlwaysIgnoreIndexes(e):selectChartDataWithIndexes(e),selectChartDataWithIndexesIfNotInPanoramaPosition3=(e,i,o)=>o?selectChartDataAndAlwaysIgnoreIndexes(e):selectChartDataWithIndexes(e);function isWellFormedNumberDomain(e){if(Array.isArray(e)&&e.length===2){var[i,o]=e;if(isWellBehavedNumber(i)&&isWellBehavedNumber(o))return!0}return!1}function extendDomain(e,i,o){return o?e:[Math.min(e[0],i[0]),Math.max(e[1],i[1])]}function numericalDomainSpecifiedWithoutRequiringData(e,i){if(i&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[o,d]=e,h,g;if(isWellBehavedNumber(o))h=o;else if(typeof o=="function")return;if(isWellBehavedNumber(d))g=d;else if(typeof d=="function")return;var b=[h,g];if(isWellFormedNumberDomain(b))return b}}function parseNumericalUserDomain(e,i,o){if(!(!o&&i==null)){if(typeof e=="function"&&i!=null)try{var d=e(i,o);if(isWellFormedNumberDomain(d))return extendDomain(d,i,o)}catch{}if(Array.isArray(e)&&e.length===2){var[h,g]=e,b,j;if(h==="auto")i!=null&&(b=Math.min(...i));else if(isNumber(h))b=h;else if(typeof h=="function")try{i!=null&&(b=h(i==null?void 0:i[0]))}catch{}else if(typeof h=="string"&&MIN_VALUE_REG.test(h)){var _=MIN_VALUE_REG.exec(h);if(_==null||_[1]==null||i==null)b=void 0;else{var $=+_[1];b=i[0]-$}}else b=i==null?void 0:i[0];if(g==="auto")i!=null&&(j=Math.max(...i));else if(isNumber(g))j=g;else if(typeof g=="function")try{i!=null&&(j=g(i==null?void 0:i[1]))}catch{}else if(typeof g=="string"&&MAX_VALUE_REG.test(g)){var _e=MAX_VALUE_REG.exec(g);if(_e==null||_e[1]==null||i==null)j=void 0;else{var et=+_e[1];j=i[1]+et}}else j=i==null?void 0:i[1];var tt=[b,j];if(isWellFormedNumberDomain(tt))return i==null?tt:extendDomain(tt,i,o)}}}var MAX_DIGITS=1e9,defaults={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Decimal,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",exponentOutOfRange=decimalError+"Exponent out of range: ",mathfloor=Math.floor,mathpow=Math.pow,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,MAX_E=mathfloor(MAX_SAFE_INTEGER/LOG_BASE),P={};P.absoluteValue=P.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};P.comparedTo=P.cmp=function(e){var i,o,d,h,g=this;if(e=new g.constructor(e),g.s!==e.s)return g.s||-e.s;if(g.e!==e.e)return g.e>e.e^g.s<0?1:-1;for(d=g.d.length,h=e.d.length,i=0,o=d<h?d:h;i<o;++i)if(g.d[i]!==e.d[i])return g.d[i]>e.d[i]^g.s<0?1:-1;return d===h?0:d>h^g.s<0?1:-1};P.decimalPlaces=P.dp=function(){var e=this,i=e.d.length-1,o=(i-e.e)*LOG_BASE;if(i=e.d[i],i)for(;i%10==0;i/=10)o--;return o<0?0:o};P.dividedBy=P.div=function(e){return divide(this,new this.constructor(e))};P.dividedToIntegerBy=P.idiv=function(e){var i=this,o=i.constructor;return round(divide(i,new o(e),0,1),o.precision)};P.equals=P.eq=function(e){return!this.cmp(e)};P.exponent=function(){return getBase10Exponent(this)};P.greaterThan=P.gt=function(e){return this.cmp(e)>0};P.greaterThanOrEqualTo=P.gte=function(e){return this.cmp(e)>=0};P.isInteger=P.isint=function(){return this.e>this.d.length-2};P.isNegative=P.isneg=function(){return this.s<0};P.isPositive=P.ispos=function(){return this.s>0};P.isZero=function(){return this.s===0};P.lessThan=P.lt=function(e){return this.cmp(e)<0};P.lessThanOrEqualTo=P.lte=function(e){return this.cmp(e)<1};P.logarithm=P.log=function(e){var i,o=this,d=o.constructor,h=d.precision,g=h+5;if(e===void 0)e=new d(10);else if(e=new d(e),e.s<1||e.eq(ONE))throw Error(decimalError+"NaN");if(o.s<1)throw Error(decimalError+(o.s?"NaN":"-Infinity"));return o.eq(ONE)?new d(0):(external=!1,i=divide(ln(o,g),ln(e,g),g),external=!0,round(i,h))};P.minus=P.sub=function(e){var i=this;return e=new i.constructor(e),i.s==e.s?subtract(i,e):add(i,(e.s=-e.s,e))};P.modulo=P.mod=function(e){var i,o=this,d=o.constructor,h=d.precision;if(e=new d(e),!e.s)throw Error(decimalError+"NaN");return o.s?(external=!1,i=divide(o,e,0,1).times(e),external=!0,o.minus(i)):round(new d(o),h)};P.naturalExponential=P.exp=function(){return exp(this)};P.naturalLogarithm=P.ln=function(){return ln(this)};P.negated=P.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};P.plus=P.add=function(e){var i=this;return e=new i.constructor(e),i.s==e.s?add(i,e):subtract(i,(e.s=-e.s,e))};P.precision=P.sd=function(e){var i,o,d,h=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(invalidArgument+e);if(i=getBase10Exponent(h)+1,d=h.d.length-1,o=d*LOG_BASE+1,d=h.d[d],d){for(;d%10==0;d/=10)o--;for(d=h.d[0];d>=10;d/=10)o++}return e&&i>o?i:o};P.squareRoot=P.sqrt=function(){var e,i,o,d,h,g,b,j=this,_=j.constructor;if(j.s<1){if(!j.s)return new _(0);throw Error(decimalError+"NaN")}for(e=getBase10Exponent(j),external=!1,h=Math.sqrt(+j),h==0||h==1/0?(i=digitsToString(j.d),(i.length+e)%2==0&&(i+="0"),h=Math.sqrt(i),e=mathfloor((e+1)/2)-(e<0||e%2),h==1/0?i="5e"+e:(i=h.toExponential(),i=i.slice(0,i.indexOf("e")+1)+e),d=new _(i)):d=new _(h.toString()),o=_.precision,h=b=o+3;;)if(g=d,d=g.plus(divide(j,g,b+2)).times(.5),digitsToString(g.d).slice(0,b)===(i=digitsToString(d.d)).slice(0,b)){if(i=i.slice(b-3,b+1),h==b&&i=="4999"){if(round(g,o+1,0),g.times(g).eq(j)){d=g;break}}else if(i!="9999")break;b+=4}return external=!0,round(d,o)};P.times=P.mul=function(e){var i,o,d,h,g,b,j,_,$,_e=this,et=_e.constructor,tt=_e.d,rt=(e=new et(e)).d;if(!_e.s||!e.s)return new et(0);for(e.s*=_e.s,o=_e.e+e.e,_=tt.length,$=rt.length,_<$&&(g=tt,tt=rt,rt=g,b=_,_=$,$=b),g=[],b=_+$,d=b;d--;)g.push(0);for(d=$;--d>=0;){for(i=0,h=_+d;h>d;)j=g[h]+rt[d]*tt[h-d-1]+i,g[h--]=j%BASE|0,i=j/BASE|0;g[h]=(g[h]+i)%BASE|0}for(;!g[--b];)g.pop();return i?++o:g.shift(),e.d=g,e.e=o,external?round(e,et.precision):e};P.toDecimalPlaces=P.todp=function(e,i){var o=this,d=o.constructor;return o=new d(o),e===void 0?o:(checkInt32(e,0,MAX_DIGITS),i===void 0?i=d.rounding:checkInt32(i,0,8),round(o,e+getBase10Exponent(o)+1,i))};P.toExponential=function(e,i){var o,d=this,h=d.constructor;return e===void 0?o=toString(d,!0):(checkInt32(e,0,MAX_DIGITS),i===void 0?i=h.rounding:checkInt32(i,0,8),d=round(new h(d),e+1,i),o=toString(d,!0,e+1)),o};P.toFixed=function(e,i){var o,d,h=this,g=h.constructor;return e===void 0?toString(h):(checkInt32(e,0,MAX_DIGITS),i===void 0?i=g.rounding:checkInt32(i,0,8),d=round(new g(h),e+getBase10Exponent(h)+1,i),o=toString(d.abs(),!1,e+getBase10Exponent(d)+1),h.isneg()&&!h.isZero()?"-"+o:o)};P.toInteger=P.toint=function(){var e=this,i=e.constructor;return round(new i(e),getBase10Exponent(e)+1,i.rounding)};P.toNumber=function(){return+this};P.toPower=P.pow=function(e){var i,o,d,h,g,b,j=this,_=j.constructor,$=12,_e=+(e=new _(e));if(!e.s)return new _(ONE);if(j=new _(j),!j.s){if(e.s<1)throw Error(decimalError+"Infinity");return j}if(j.eq(ONE))return j;if(d=_.precision,e.eq(ONE))return round(j,d);if(i=e.e,o=e.d.length-1,b=i>=o,g=j.s,b){if((o=_e<0?-_e:_e)<=MAX_SAFE_INTEGER){for(h=new _(ONE),i=Math.ceil(d/LOG_BASE+4),external=!1;o%2&&(h=h.times(j),truncate(h.d,i)),o=mathfloor(o/2),o!==0;)j=j.times(j),truncate(j.d,i);return external=!0,e.s<0?new _(ONE).div(h):round(h,d)}}else if(g<0)throw Error(decimalError+"NaN");return g=g<0&&e.d[Math.max(i,o)]&1?-1:1,j.s=1,external=!1,h=e.times(ln(j,d+$)),external=!0,h=exp(h),h.s=g,h};P.toPrecision=function(e,i){var o,d,h=this,g=h.constructor;return e===void 0?(o=getBase10Exponent(h),d=toString(h,o<=g.toExpNeg||o>=g.toExpPos)):(checkInt32(e,1,MAX_DIGITS),i===void 0?i=g.rounding:checkInt32(i,0,8),h=round(new g(h),e,i),o=getBase10Exponent(h),d=toString(h,e<=o||o<=g.toExpNeg,e)),d};P.toSignificantDigits=P.tosd=function(e,i){var o=this,d=o.constructor;return e===void 0?(e=d.precision,i=d.rounding):(checkInt32(e,1,MAX_DIGITS),i===void 0?i=d.rounding:checkInt32(i,0,8)),round(new d(o),e,i)};P.toString=P.valueOf=P.val=P.toJSON=P[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,i=getBase10Exponent(e),o=e.constructor;return toString(e,i<=o.toExpNeg||i>=o.toExpPos)};function add(e,i){var o,d,h,g,b,j,_,$,_e=e.constructor,et=_e.precision;if(!e.s||!i.s)return i.s||(i=new _e(e)),external?round(i,et):i;if(_=e.d,$=i.d,b=e.e,h=i.e,_=_.slice(),g=b-h,g){for(g<0?(d=_,g=-g,j=$.length):(d=$,h=b,j=_.length),b=Math.ceil(et/LOG_BASE),j=b>j?b+1:j+1,g>j&&(g=j,d.length=1),d.reverse();g--;)d.push(0);d.reverse()}for(j=_.length,g=$.length,j-g<0&&(g=j,d=$,$=_,_=d),o=0;g;)o=(_[--g]=_[g]+$[g]+o)/BASE|0,_[g]%=BASE;for(o&&(_.unshift(o),++h),j=_.length;_[--j]==0;)_.pop();return i.d=_,i.e=h,external?round(i,et):i}function checkInt32(e,i,o){if(e!==~~e||e<i||e>o)throw Error(invalidArgument+e)}function digitsToString(e){var i,o,d,h=e.length-1,g="",b=e[0];if(h>0){for(g+=b,i=1;i<h;i++)d=e[i]+"",o=LOG_BASE-d.length,o&&(g+=getZeroString(o)),g+=d;b=e[i],d=b+"",o=LOG_BASE-d.length,o&&(g+=getZeroString(o))}else if(b===0)return"0";for(;b%10===0;)b/=10;return g+b}var divide=function(){function e(d,h){var g,b=0,j=d.length;for(d=d.slice();j--;)g=d[j]*h+b,d[j]=g%BASE|0,b=g/BASE|0;return b&&d.unshift(b),d}function i(d,h,g,b){var j,_;if(g!=b)_=g>b?1:-1;else for(j=_=0;j<g;j++)if(d[j]!=h[j]){_=d[j]>h[j]?1:-1;break}return _}function o(d,h,g){for(var b=0;g--;)d[g]-=b,b=d[g]<h[g]?1:0,d[g]=b*BASE+d[g]-h[g];for(;!d[0]&&d.length>1;)d.shift()}return function(d,h,g,b){var j,_,$,_e,et,tt,rt,nt,it,st,at,ot,lt,ct,ut,dt,mt,xt,ft=d.constructor,gt=d.s==h.s?1:-1,pt=d.d,yt=h.d;if(!d.s)return new ft(d);if(!h.s)throw Error(decimalError+"Division by zero");for(_=d.e-h.e,mt=yt.length,ut=pt.length,rt=new ft(gt),nt=rt.d=[],$=0;yt[$]==(pt[$]||0);)++$;if(yt[$]>(pt[$]||0)&&--_,g==null?ot=g=ft.precision:b?ot=g+(getBase10Exponent(d)-getBase10Exponent(h))+1:ot=g,ot<0)return new ft(0);if(ot=ot/LOG_BASE+2|0,$=0,mt==1)for(_e=0,yt=yt[0],ot++;($<ut||_e)&&ot--;$++)lt=_e*BASE+(pt[$]||0),nt[$]=lt/yt|0,_e=lt%yt|0;else{for(_e=BASE/(yt[0]+1)|0,_e>1&&(yt=e(yt,_e),pt=e(pt,_e),mt=yt.length,ut=pt.length),ct=mt,it=pt.slice(0,mt),st=it.length;st<mt;)it[st++]=0;xt=yt.slice(),xt.unshift(0),dt=yt[0],yt[1]>=BASE/2&&++dt;do _e=0,j=i(yt,it,mt,st),j<0?(at=it[0],mt!=st&&(at=at*BASE+(it[1]||0)),_e=at/dt|0,_e>1?(_e>=BASE&&(_e=BASE-1),et=e(yt,_e),tt=et.length,st=it.length,j=i(et,it,tt,st),j==1&&(_e--,o(et,mt<tt?xt:yt,tt))):(_e==0&&(j=_e=1),et=yt.slice()),tt=et.length,tt<st&&et.unshift(0),o(it,et,st),j==-1&&(st=it.length,j=i(yt,it,mt,st),j<1&&(_e++,o(it,mt<st?xt:yt,st))),st=it.length):j===0&&(_e++,it=[0]),nt[$++]=_e,j&&it[0]?it[st++]=pt[ct]||0:(it=[pt[ct]],st=1);while((ct++<ut||it[0]!==void 0)&&ot--)}return nt[0]||nt.shift(),rt.e=_,round(rt,b?g+getBase10Exponent(rt)+1:g)}}();function exp(e,i){var o,d,h,g,b,j,_=0,$=0,_e=e.constructor,et=_e.precision;if(getBase10Exponent(e)>16)throw Error(exponentOutOfRange+getBase10Exponent(e));if(!e.s)return new _e(ONE);for(i==null?(external=!1,j=et):j=i,b=new _e(.03125);e.abs().gte(.1);)e=e.times(b),$+=5;for(d=Math.log(mathpow(2,$))/Math.LN10*2+5|0,j+=d,o=h=g=new _e(ONE),_e.precision=j;;){if(h=round(h.times(e),j),o=o.times(++_),b=g.plus(divide(h,o,j)),digitsToString(b.d).slice(0,j)===digitsToString(g.d).slice(0,j)){for(;$--;)g=round(g.times(g),j);return _e.precision=et,i==null?(external=!0,round(g,et)):g}g=b}}function getBase10Exponent(e){for(var i=e.e*LOG_BASE,o=e.d[0];o>=10;o/=10)i++;return i}function getLn10(e,i,o){if(i>e.LN10.sd())throw external=!0,o&&(e.precision=o),Error(decimalError+"LN10 precision limit exceeded");return round(new e(e.LN10),i)}function getZeroString(e){for(var i="";e--;)i+="0";return i}function ln(e,i){var o,d,h,g,b,j,_,$,_e,et=1,tt=10,rt=e,nt=rt.d,it=rt.constructor,st=it.precision;if(rt.s<1)throw Error(decimalError+(rt.s?"NaN":"-Infinity"));if(rt.eq(ONE))return new it(0);if(i==null?(external=!1,$=st):$=i,rt.eq(10))return i==null&&(external=!0),getLn10(it,$);if($+=tt,it.precision=$,o=digitsToString(nt),d=o.charAt(0),g=getBase10Exponent(rt),Math.abs(g)<15e14){for(;d<7&&d!=1||d==1&&o.charAt(1)>3;)rt=rt.times(e),o=digitsToString(rt.d),d=o.charAt(0),et++;g=getBase10Exponent(rt),d>1?(rt=new it("0."+o),g++):rt=new it(d+"."+o.slice(1))}else return _=getLn10(it,$+2,st).times(g+""),rt=ln(new it(d+"."+o.slice(1)),$-tt).plus(_),it.precision=st,i==null?(external=!0,round(rt,st)):rt;for(j=b=rt=divide(rt.minus(ONE),rt.plus(ONE),$),_e=round(rt.times(rt),$),h=3;;){if(b=round(b.times(_e),$),_=j.plus(divide(b,new it(h),$)),digitsToString(_.d).slice(0,$)===digitsToString(j.d).slice(0,$))return j=j.times(2),g!==0&&(j=j.plus(getLn10(it,$+2,st).times(g+""))),j=divide(j,new it(et),$),it.precision=st,i==null?(external=!0,round(j,st)):j;j=_,h+=2}}function parseDecimal(e,i){var o,d,h;for((o=i.indexOf("."))>-1&&(i=i.replace(".","")),(d=i.search(/e/i))>0?(o<0&&(o=d),o+=+i.slice(d+1),i=i.substring(0,d)):o<0&&(o=i.length),d=0;i.charCodeAt(d)===48;)++d;for(h=i.length;i.charCodeAt(h-1)===48;)--h;if(i=i.slice(d,h),i){if(h-=d,o=o-d-1,e.e=mathfloor(o/LOG_BASE),e.d=[],d=(o+1)%LOG_BASE,o<0&&(d+=LOG_BASE),d<h){for(d&&e.d.push(+i.slice(0,d)),h-=LOG_BASE;d<h;)e.d.push(+i.slice(d,d+=LOG_BASE));i=i.slice(d),d=LOG_BASE-i.length}else d-=h;for(;d--;)i+="0";if(e.d.push(+i),external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+o)}else e.s=0,e.e=0,e.d=[0];return e}function round(e,i,o){var d,h,g,b,j,_,$,_e,et=e.d;for(b=1,g=et[0];g>=10;g/=10)b++;if(d=i-b,d<0)d+=LOG_BASE,h=i,$=et[_e=0];else{if(_e=Math.ceil((d+1)/LOG_BASE),g=et.length,_e>=g)return e;for($=g=et[_e],b=1;g>=10;g/=10)b++;d%=LOG_BASE,h=d-LOG_BASE+b}if(o!==void 0&&(g=mathpow(10,b-h-1),j=$/g%10|0,_=i<0||et[_e+1]!==void 0||$%g,_=o<4?(j||_)&&(o==0||o==(e.s<0?3:2)):j>5||j==5&&(o==4||_||o==6&&(d>0?h>0?$/mathpow(10,b-h):0:et[_e-1])%10&1||o==(e.s<0?8:7))),i<1||!et[0])return _?(g=getBase10Exponent(e),et.length=1,i=i-g-1,et[0]=mathpow(10,(LOG_BASE-i%LOG_BASE)%LOG_BASE),e.e=mathfloor(-i/LOG_BASE)||0):(et.length=1,et[0]=e.e=e.s=0),e;if(d==0?(et.length=_e,g=1,_e--):(et.length=_e+1,g=mathpow(10,LOG_BASE-d),et[_e]=h>0?($/mathpow(10,b-h)%mathpow(10,h)|0)*g:0),_)for(;;)if(_e==0){(et[0]+=g)==BASE&&(et[0]=1,++e.e);break}else{if(et[_e]+=g,et[_e]!=BASE)break;et[_e--]=0,g=1}for(d=et.length;et[--d]===0;)et.pop();if(external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(e));return e}function subtract(e,i){var o,d,h,g,b,j,_,$,_e,et,tt=e.constructor,rt=tt.precision;if(!e.s||!i.s)return i.s?i.s=-i.s:i=new tt(e),external?round(i,rt):i;if(_=e.d,et=i.d,d=i.e,$=e.e,_=_.slice(),b=$-d,b){for(_e=b<0,_e?(o=_,b=-b,j=et.length):(o=et,d=$,j=_.length),h=Math.max(Math.ceil(rt/LOG_BASE),j)+2,b>h&&(b=h,o.length=1),o.reverse(),h=b;h--;)o.push(0);o.reverse()}else{for(h=_.length,j=et.length,_e=h<j,_e&&(j=h),h=0;h<j;h++)if(_[h]!=et[h]){_e=_[h]<et[h];break}b=0}for(_e&&(o=_,_=et,et=o,i.s=-i.s),j=_.length,h=et.length-j;h>0;--h)_[j++]=0;for(h=et.length;h>b;){if(_[--h]<et[h]){for(g=h;g&&_[--g]===0;)_[g]=BASE-1;--_[g],_[h]+=BASE}_[h]-=et[h]}for(;_[--j]===0;)_.pop();for(;_[0]===0;_.shift())--d;return _[0]?(i.d=_,i.e=d,external?round(i,rt):i):new tt(0)}function toString(e,i,o){var d,h=getBase10Exponent(e),g=digitsToString(e.d),b=g.length;return i?(o&&(d=o-b)>0?g=g.charAt(0)+"."+g.slice(1)+getZeroString(d):b>1&&(g=g.charAt(0)+"."+g.slice(1)),g=g+(h<0?"e":"e+")+h):h<0?(g="0."+getZeroString(-h-1)+g,o&&(d=o-b)>0&&(g+=getZeroString(d))):h>=b?(g+=getZeroString(h+1-b),o&&(d=o-h-1)>0&&(g=g+"."+getZeroString(d))):((d=h+1)<b&&(g=g.slice(0,d)+"."+g.slice(d)),o&&(d=o-b)>0&&(h+1===b&&(g+="."),g+=getZeroString(d))),e.s<0?"-"+g:g}function truncate(e,i){if(e.length>i)return e.length=i,!0}function clone(e){var i,o,d;function h(g){var b=this;if(!(b instanceof h))return new h(g);if(b.constructor=h,g instanceof h){b.s=g.s,b.e=g.e,b.d=(g=g.d)?g.slice():g;return}if(typeof g=="number"){if(g*0!==0)throw Error(invalidArgument+g);if(g>0)b.s=1;else if(g<0)g=-g,b.s=-1;else{b.s=0,b.e=0,b.d=[0];return}if(g===~~g&&g<1e7){b.e=0,b.d=[g];return}return parseDecimal(b,g.toString())}else if(typeof g!="string")throw Error(invalidArgument+g);if(g.charCodeAt(0)===45?(g=g.slice(1),b.s=-1):b.s=1,isDecimal.test(g))parseDecimal(b,g);else throw Error(invalidArgument+g)}if(h.prototype=P,h.ROUND_UP=0,h.ROUND_DOWN=1,h.ROUND_CEIL=2,h.ROUND_FLOOR=3,h.ROUND_HALF_UP=4,h.ROUND_HALF_DOWN=5,h.ROUND_HALF_EVEN=6,h.ROUND_HALF_CEIL=7,h.ROUND_HALF_FLOOR=8,h.clone=clone,h.config=h.set=config,e===void 0&&(e={}),e)for(d=["precision","rounding","toExpNeg","toExpPos","LN10"],i=0;i<d.length;)e.hasOwnProperty(o=d[i++])||(e[o]=this[o]);return h.config(e),h}function config(e){if(!e||typeof e!="object")throw Error(decimalError+"Object expected");var i,o,d,h=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(i=0;i<h.length;i+=3)if((d=e[o=h[i]])!==void 0)if(mathfloor(d)===d&&d>=h[i+1]&&d<=h[i+2])this[o]=d;else throw Error(invalidArgument+o+": "+d);if((d=e[o="LN10"])!==void 0)if(d==Math.LN10)this[o]=new this(d);else throw Error(invalidArgument+o+": "+d);return this}var Decimal=clone(defaults);ONE=new Decimal(1);const Decimal$1=Decimal;var identity=e=>e,PLACE_HOLDER={"@@functional/placeholder":!0},isPlaceHolder=e=>e===PLACE_HOLDER,curry0=e=>function i(){return arguments.length===0||arguments.length===1&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?i:e(...arguments)},curryN=(e,i)=>e===1?i:curry0(function(){for(var o=arguments.length,d=new Array(o),h=0;h<o;h++)d[h]=arguments[h];var g=d.filter(b=>b!==PLACE_HOLDER).length;return g>=e?i(...d):curryN(e-g,curry0(function(){for(var b=arguments.length,j=new Array(b),_=0;_<b;_++)j[_]=arguments[_];var $=d.map(_e=>isPlaceHolder(_e)?j.shift():_e);return i(...$,...j)}))}),curry=e=>curryN(e.length,e),range=(e,i)=>{for(var o=[],d=e;d<i;++d)o[d-e]=d;return o},map=curry((e,i)=>Array.isArray(i)?i.map(e):Object.keys(i).map(o=>i[o]).map(e)),compose=function e(){for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];if(!o.length)return identity;var h=o.reverse(),g=h[0],b=h.slice(1);return function(){return b.reduce((j,_)=>_(j),g(...arguments))}};function getDigitCount(e){var i;return e===0?i=1:i=Math.floor(new Decimal$1(e).abs().log(10).toNumber())+1,i}function rangeStep(e,i,o){for(var d=new Decimal$1(e),h=0,g=[];d.lt(i)&&h<1e5;)g.push(d.toNumber()),d=d.add(o),h++;return g}var getValidInterval=e=>{var[i,o]=e,[d,h]=[i,o];return i>o&&([d,h]=[o,i]),[d,h]},getFormatStep=(e,i,o)=>{if(e.lte(0))return new Decimal$1(0);var d=getDigitCount(e.toNumber()),h=new Decimal$1(10).pow(d),g=e.div(h),b=d!==1?.05:.1,j=new Decimal$1(Math.ceil(g.div(b).toNumber())).add(o).mul(b),_=j.mul(h);return i?new Decimal$1(_.toNumber()):new Decimal$1(Math.ceil(_.toNumber()))},getTickOfSingleValue=(e,i,o)=>{var d=new Decimal$1(1),h=new Decimal$1(e);if(!h.isint()&&o){var g=Math.abs(e);g<1?(d=new Decimal$1(10).pow(getDigitCount(e)-1),h=new Decimal$1(Math.floor(h.div(d).toNumber())).mul(d)):g>1&&(h=new Decimal$1(Math.floor(e)))}else e===0?h=new Decimal$1(Math.floor((i-1)/2)):o||(h=new Decimal$1(Math.floor(e)));var b=Math.floor((i-1)/2),j=compose(map(_=>h.add(new Decimal$1(_-b).mul(d)).toNumber()),range);return j(0,i)},_calculateStep=function e(i,o,d,h){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((o-i)/(d-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var b=getFormatStep(new Decimal$1(o).sub(i).div(d-1),h,g),j;i<=0&&o>=0?j=new Decimal$1(0):(j=new Decimal$1(i).add(o).div(2),j=j.sub(new Decimal$1(j).mod(b)));var _=Math.ceil(j.sub(i).div(b).toNumber()),$=Math.ceil(new Decimal$1(o).sub(j).div(b).toNumber()),_e=_+$+1;return _e>d?_calculateStep(i,o,d,h,g+1):(_e<d&&($=o>0?$+(d-_e):$,_=o>0?_:_+(d-_e)),{step:b,tickMin:j.sub(new Decimal$1(_).mul(b)),tickMax:j.add(new Decimal$1($).mul(b))})},getNiceTickValues=function e(i){var[o,d]=i,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,b=Math.max(h,2),[j,_]=getValidInterval([o,d]);if(j===-1/0||_===1/0){var $=_===1/0?[j,...range(0,h-1).map(()=>1/0)]:[...range(0,h-1).map(()=>-1/0),_];return o>d?$.reverse():$}if(j===_)return getTickOfSingleValue(j,h,g);var{step:_e,tickMin:et,tickMax:tt}=_calculateStep(j,_,b,g,0),rt=rangeStep(et,tt.add(new Decimal$1(.1).mul(_e)),_e);return o>d?rt.reverse():rt},getTickValuesFixedDomain=function e(i,o){var[d,h]=i,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[b,j]=getValidInterval([d,h]);if(b===-1/0||j===1/0)return[d,h];if(b===j)return[b];var _=Math.max(o,2),$=getFormatStep(new Decimal$1(j).sub(b).div(_-1),g,0),_e=[...rangeStep(new Decimal$1(b),new Decimal$1(j),$),j];return g===!1&&(_e=_e.map(et=>Math.round(et))),d>h?_e.reverse():_e},selectRootMaxBarSize=e=>e.rootProps.maxBarSize,selectBarGap=e=>e.rootProps.barGap,selectBarCategoryGap=e=>e.rootProps.barCategoryGap,selectRootBarSize=e=>e.rootProps.barSize,selectStackOffsetType=e=>e.rootProps.stackOffset,selectReverseStackOrder=e=>e.rootProps.reverseStackOrder,selectChartName=e=>e.options.chartName,selectSyncId=e=>e.rootProps.syncId,selectSyncMethod=e=>e.rootProps.syncMethod,selectEventEmitter=e=>e.options.eventEmitter,DefaultZIndexes={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},defaultPolarAngleAxisProps={allowDecimals:!1,allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,axisLineType:"polygon",cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category",zIndex:DefaultZIndexes.axis},defaultPolarRadiusAxisProps={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,includeHidden:!1,hide:!1,label:!1,orientation:"right",radiusAxisId:0,reversed:!1,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number",zIndex:DefaultZIndexes.axis},combineAxisRangeWithReverse=(e,i)=>{if(!(!e||!i))return e!=null&&e.reversed?[i[1],i[0]]:i},implicitAngleAxis={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:defaultPolarAngleAxisProps.angleAxisId,includeHidden:!1,name:void 0,reversed:defaultPolarAngleAxisProps.reversed,scale:defaultPolarAngleAxisProps.scale,tick:defaultPolarAngleAxisProps.tick,tickCount:void 0,ticks:void 0,type:defaultPolarAngleAxisProps.type,unit:void 0},implicitRadiusAxis={allowDataOverflow:defaultPolarRadiusAxisProps.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:defaultPolarRadiusAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarRadiusAxisProps.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarRadiusAxisProps.scale,tick:defaultPolarRadiusAxisProps.tick,tickCount:defaultPolarRadiusAxisProps.tickCount,ticks:void 0,type:defaultPolarRadiusAxisProps.type,unit:void 0},implicitRadialBarAngleAxis={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:defaultPolarAngleAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarAngleAxisProps.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarAngleAxisProps.scale,tick:defaultPolarAngleAxisProps.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},implicitRadialBarRadiusAxis={allowDataOverflow:defaultPolarRadiusAxisProps.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:defaultPolarRadiusAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarRadiusAxisProps.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarRadiusAxisProps.scale,tick:defaultPolarRadiusAxisProps.tick,tickCount:defaultPolarRadiusAxisProps.tickCount,ticks:void 0,type:"category",unit:void 0},selectAngleAxis=(e,i)=>e.polarAxis.angleAxis[i]!=null?e.polarAxis.angleAxis[i]:e.layout.layoutType==="radial"?implicitRadialBarAngleAxis:implicitAngleAxis,selectRadiusAxis=(e,i)=>e.polarAxis.radiusAxis[i]!=null?e.polarAxis.radiusAxis[i]:e.layout.layoutType==="radial"?implicitRadialBarRadiusAxis:implicitRadiusAxis,selectPolarOptions=e=>e.polarOptions,selectMaxRadius=createSelector([selectChartWidth,selectChartHeight,selectChartOffsetInternal],getMaxRadius),selectInnerRadius=createSelector([selectPolarOptions,selectMaxRadius],(e,i)=>{if(e!=null)return getPercentValue(e.innerRadius,i,0)}),selectOuterRadius=createSelector([selectPolarOptions,selectMaxRadius],(e,i)=>{if(e!=null)return getPercentValue(e.outerRadius,i,i*.8)}),combineAngleAxisRange=e=>{if(e==null)return[0,0];var{startAngle:i,endAngle:o}=e;return[i,o]},selectAngleAxisRange=createSelector([selectPolarOptions],combineAngleAxisRange);createSelector([selectAngleAxis,selectAngleAxisRange],combineAxisRangeWithReverse);var selectRadiusAxisRange=createSelector([selectMaxRadius,selectInnerRadius,selectOuterRadius],(e,i,o)=>{if(!(e==null||i==null||o==null))return[i,o]});createSelector([selectRadiusAxis,selectRadiusAxisRange],combineAxisRangeWithReverse);var selectPolarViewBox=createSelector([selectChartLayout,selectPolarOptions,selectInnerRadius,selectOuterRadius,selectChartWidth,selectChartHeight],(e,i,o,d,h,g)=>{if(!(e!=="centric"&&e!=="radial"||i==null||o==null||d==null)){var{cx:b,cy:j,startAngle:_,endAngle:$}=i;return{cx:getPercentValue(b,h,h/2),cy:getPercentValue(j,g,g/2),innerRadius:o,outerRadius:d,startAngle:_,endAngle:$,clockWise:!1}}}),pickAxisType=(e,i)=>i,pickAxisId=(e,i,o)=>o;function getStackSeriesIdentifier(e){return e==null?void 0:e.id}function combineDisplayedStackedData(e,i,o){var{chartData:d=[]}=i,{allowDuplicatedCategory:h,dataKey:g}=o,b=new Map;return e.forEach(j=>{var _,$=(_=j.data)!==null&&_!==void 0?_:d;if(!($==null||$.length===0)){var _e=getStackSeriesIdentifier(j);$.forEach((et,tt)=>{var rt=g==null||h?tt:String(getValueByDataKey(et,g,null)),nt=getValueByDataKey(et,j.dataKey,0),it;b.has(rt)?it=b.get(rt):it={},Object.assign(it,{[_e]:nt}),b.set(rt,it)})}}),Array.from(b.values())}function isStacked(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var numberDomainEqualityCheck=(e,i)=>e===i?!0:e==null||i==null?!1:e[0]===i[0]&&e[1]===i[1];function emptyArraysAreEqualCheck(e,i){return Array.isArray(e)&&Array.isArray(i)&&e.length===0&&i.length===0?!0:e===i}function arrayContentsAreEqualCheck(e,i){if(e.length===i.length){for(var o=0;o<e.length;o++)if(e[o]!==i[o])return!1;return!0}return!1}var selectTooltipAxisType=e=>{var i=selectChartLayout(e);return i==="horizontal"?"xAxis":i==="vertical"?"yAxis":i==="centric"?"angleAxis":"radiusAxis"},selectTooltipAxisId=e=>e.tooltip.settings.axisId;function ownKeys$m(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$m(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$m(Object(o),!0).forEach(function(d){_defineProperty$p(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$m(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$p(e,i,o){return(i=_toPropertyKey$p(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$p(e){var i=_toPrimitive$p(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$p(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var defaultNumericDomain=[0,"auto"],implicitXAxis={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},selectXAxisSettingsNoDefaults=(e,i)=>e.cartesianAxis.xAxis[i],selectXAxisSettings=(e,i)=>{var o=selectXAxisSettingsNoDefaults(e,i);return o??implicitXAxis},implicitYAxis={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:defaultNumericDomain,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:DEFAULT_Y_AXIS_WIDTH},selectYAxisSettingsNoDefaults=(e,i)=>e.cartesianAxis.yAxis[i],selectYAxisSettings=(e,i)=>{var o=selectYAxisSettingsNoDefaults(e,i);return o??implicitYAxis},implicitZAxis={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},selectZAxisSettings=(e,i)=>{var o=e.cartesianAxis.zAxis[i];return o??implicitZAxis},selectBaseAxis=(e,i,o)=>{switch(i){case"xAxis":return selectXAxisSettings(e,o);case"yAxis":return selectYAxisSettings(e,o);case"zAxis":return selectZAxisSettings(e,o);case"angleAxis":return selectAngleAxis(e,o);case"radiusAxis":return selectRadiusAxis(e,o);default:throw new Error("Unexpected axis type: ".concat(i))}},selectCartesianAxisSettings=(e,i,o)=>{switch(i){case"xAxis":return selectXAxisSettings(e,o);case"yAxis":return selectYAxisSettings(e,o);default:throw new Error("Unexpected axis type: ".concat(i))}},selectAxisSettings=(e,i,o)=>{switch(i){case"xAxis":return selectXAxisSettings(e,o);case"yAxis":return selectYAxisSettings(e,o);case"angleAxis":return selectAngleAxis(e,o);case"radiusAxis":return selectRadiusAxis(e,o);default:throw new Error("Unexpected axis type: ".concat(i))}},selectHasBar=e=>e.graphicalItems.cartesianItems.some(i=>i.type==="bar")||e.graphicalItems.polarItems.some(i=>i.type==="radialBar");function itemAxisPredicate(e,i){return o=>{switch(e){case"xAxis":return"xAxisId"in o&&o.xAxisId===i;case"yAxis":return"yAxisId"in o&&o.yAxisId===i;case"zAxis":return"zAxisId"in o&&o.zAxisId===i;case"angleAxis":return"angleAxisId"in o&&o.angleAxisId===i;case"radiusAxis":return"radiusAxisId"in o&&o.radiusAxisId===i;default:return!1}}}var selectUnfilteredCartesianItems=e=>e.graphicalItems.cartesianItems,selectAxisPredicate=createSelector([pickAxisType,pickAxisId],itemAxisPredicate),combineGraphicalItemsSettings=(e,i,o)=>e.filter(o).filter(d=>(i==null?void 0:i.includeHidden)===!0?!0:!d.hide),selectCartesianItemsSettings=createSelector([selectUnfilteredCartesianItems,selectBaseAxis,selectAxisPredicate],combineGraphicalItemsSettings,{memoizeOptions:{resultEqualityCheck:emptyArraysAreEqualCheck}}),selectStackedCartesianItemsSettings=createSelector([selectCartesianItemsSettings],e=>e.filter(i=>i.type==="area"||i.type==="bar").filter(isStacked)),filterGraphicalNotStackedItems=e=>e.filter(i=>!("stackId"in i)||i.stackId===void 0),selectCartesianItemsSettingsExceptStacked=createSelector([selectCartesianItemsSettings],filterGraphicalNotStackedItems),combineGraphicalItemsData=e=>e.map(i=>i.data).filter(Boolean).flat(1),selectCartesianGraphicalItemsData=createSelector([selectCartesianItemsSettings],combineGraphicalItemsData,{memoizeOptions:{resultEqualityCheck:emptyArraysAreEqualCheck}}),combineDisplayedData=(e,i)=>{var{chartData:o=[],dataStartIndex:d,dataEndIndex:h}=i;return e.length>0?e:o.slice(d,h+1)},selectDisplayedData=createSelector([selectCartesianGraphicalItemsData,selectChartDataWithIndexesIfNotInPanoramaPosition4],combineDisplayedData),combineAppliedValues=(e,i,o)=>(i==null?void 0:i.dataKey)!=null?e.map(d=>({value:getValueByDataKey(d,i.dataKey)})):o.length>0?o.map(d=>d.dataKey).flatMap(d=>e.map(h=>({value:getValueByDataKey(h,d)}))):e.map(d=>({value:d})),selectAllAppliedValues=createSelector([selectDisplayedData,selectBaseAxis,selectCartesianItemsSettings],combineAppliedValues);function isErrorBarRelevantForAxisType(e,i){switch(e){case"xAxis":return i.direction==="x";case"yAxis":return i.direction==="y";default:return!1}}function makeNumber(e){if(isNumOrStr(e)||e instanceof Date){var i=Number(e);if(isWellBehavedNumber(i))return i}}function makeDomain(e){if(Array.isArray(e)){var i=[makeNumber(e[0]),makeNumber(e[1])];return isWellFormedNumberDomain(i)?i:void 0}var o=makeNumber(e);if(o!=null)return[o,o]}function onlyAllowNumbers(e){return e.map(makeNumber).filter(isNotNil)}function getErrorDomainByDataKey(e,i,o){return!o||typeof i!="number"||isNan(i)?[]:o.length?onlyAllowNumbers(o.flatMap(d=>{var h=getValueByDataKey(e,d.dataKey),g,b;if(Array.isArray(h)?[g,b]=h:g=b=h,!(!isWellBehavedNumber(g)||!isWellBehavedNumber(b)))return[i-g,i+b]})):[]}var selectTooltipAxis=e=>{var i=selectTooltipAxisType(e),o=selectTooltipAxisId(e);return selectAxisSettings(e,i,o)},selectTooltipAxisDataKey=createSelector([selectTooltipAxis],e=>e==null?void 0:e.dataKey),selectDisplayedStackedData=createSelector([selectStackedCartesianItemsSettings,selectChartDataWithIndexesIfNotInPanoramaPosition4,selectTooltipAxis],combineDisplayedStackedData),combineStackGroups=(e,i,o,d)=>{var h={},g=i.reduce((b,j)=>{if(j.stackId==null)return b;var _=b[j.stackId];return _==null&&(_=[]),_.push(j),b[j.stackId]=_,b},h);return Object.fromEntries(Object.entries(g).map(b=>{var[j,_]=b,$=d?[..._].reverse():_,_e=$.map(getStackSeriesIdentifier);return[j,{stackedData:getStackedData(e,_e,o),graphicalItems:$}]}))},selectStackGroups=createSelector([selectDisplayedStackedData,selectStackedCartesianItemsSettings,selectStackOffsetType,selectReverseStackOrder],combineStackGroups),combineDomainOfStackGroups=(e,i,o,d)=>{var{dataStartIndex:h,dataEndIndex:g}=i;if(d==null&&o!=="zAxis"){var b=getDomainOfStackGroups(e,h,g);if(!(b!=null&&b[0]===0&&b[1]===0))return b}},selectAllowsDataOverflow=createSelector([selectBaseAxis],e=>e.allowDataOverflow),getDomainDefinition=e=>{var i;if(e==null||!("domain"in e))return defaultNumericDomain;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var o=onlyAllowNumbers(e.ticks);return[Math.min(...o),Math.max(...o)]}if(e.type==="category")return e.ticks.map(String)}return(i=e==null?void 0:e.domain)!==null&&i!==void 0?i:defaultNumericDomain},selectDomainDefinition=createSelector([selectBaseAxis],getDomainDefinition),selectDomainFromUserPreference=createSelector([selectDomainDefinition,selectAllowsDataOverflow],numericalDomainSpecifiedWithoutRequiringData),selectDomainOfStackGroups=createSelector([selectStackGroups,selectChartDataWithIndexes,pickAxisType,selectDomainFromUserPreference],combineDomainOfStackGroups,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),selectAllErrorBarSettings=e=>e.errorBars,combineRelevantErrorBarSettings=(e,i,o)=>e.flatMap(d=>i[d.id]).filter(Boolean).filter(d=>isErrorBarRelevantForAxisType(o,d)),mergeDomains=function e(){for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];var h=o.filter(Boolean);if(h.length!==0){var g=h.flat(),b=Math.min(...g),j=Math.max(...g);return[b,j]}},combineDomainOfAllAppliedNumericalValuesIncludingErrorValues=(e,i,o,d,h)=>{var g,b;if(o.length>0&&e.forEach(j=>{o.forEach(_=>{var $,_e,et=($=d[_.id])===null||$===void 0?void 0:$.filter(at=>isErrorBarRelevantForAxisType(h,at)),tt=getValueByDataKey(j,(_e=i.dataKey)!==null&&_e!==void 0?_e:_.dataKey),rt=getErrorDomainByDataKey(j,tt,et);if(rt.length>=2){var nt=Math.min(...rt),it=Math.max(...rt);(g==null||nt<g)&&(g=nt),(b==null||it>b)&&(b=it)}var st=makeDomain(tt);st!=null&&(g=g==null?st[0]:Math.min(g,st[0]),b=b==null?st[1]:Math.max(b,st[1]))})}),(i==null?void 0:i.dataKey)!=null&&e.forEach(j=>{var _=makeDomain(getValueByDataKey(j,i.dataKey));_!=null&&(g=g==null?_[0]:Math.min(g,_[0]),b=b==null?_[1]:Math.max(b,_[1]))}),isWellBehavedNumber(g)&&isWellBehavedNumber(b))return[g,b]},selectDomainOfAllAppliedNumericalValuesIncludingErrorValues$1=createSelector([selectDisplayedData,selectBaseAxis,selectCartesianItemsSettingsExceptStacked,selectAllErrorBarSettings,pickAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}});function onlyAllowNumbersAndStringsAndDates(e){var{value:i}=e;if(isNumOrStr(i)||i instanceof Date)return i}var computeDomainOfTypeCategory=(e,i,o)=>{var d=e.map(onlyAllowNumbersAndStringsAndDates).filter(h=>h!=null);return o&&(i.dataKey==null||i.allowDuplicatedCategory&&hasDuplicate(d))?range$3(0,e.length):i.allowDuplicatedCategory?d:Array.from(new Set(d))},selectReferenceDots=e=>e.referenceElements.dots,filterReferenceElements=(e,i,o)=>e.filter(d=>d.ifOverflow==="extendDomain").filter(d=>i==="xAxis"?d.xAxisId===o:d.yAxisId===o),selectReferenceDotsByAxis=createSelector([selectReferenceDots,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceAreas=e=>e.referenceElements.areas,selectReferenceAreasByAxis=createSelector([selectReferenceAreas,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceLines=e=>e.referenceElements.lines,selectReferenceLinesByAxis=createSelector([selectReferenceLines,pickAxisType,pickAxisId],filterReferenceElements),combineDotsDomain=(e,i)=>{if(e!=null){var o=onlyAllowNumbers(e.map(d=>i==="xAxis"?d.x:d.y));if(o.length!==0)return[Math.min(...o),Math.max(...o)]}},selectReferenceDotsDomain=createSelector(selectReferenceDotsByAxis,pickAxisType,combineDotsDomain),combineAreasDomain=(e,i)=>{if(e!=null){var o=onlyAllowNumbers(e.flatMap(d=>[i==="xAxis"?d.x1:d.y1,i==="xAxis"?d.x2:d.y2]));if(o.length!==0)return[Math.min(...o),Math.max(...o)]}},selectReferenceAreasDomain=createSelector([selectReferenceAreasByAxis,pickAxisType],combineAreasDomain);function extractXCoordinates(e){var i;if(e.x!=null)return onlyAllowNumbers([e.x]);var o=(i=e.segment)===null||i===void 0?void 0:i.map(d=>d.x);return o==null||o.length===0?[]:onlyAllowNumbers(o)}function extractYCoordinates(e){var i;if(e.y!=null)return onlyAllowNumbers([e.y]);var o=(i=e.segment)===null||i===void 0?void 0:i.map(d=>d.y);return o==null||o.length===0?[]:onlyAllowNumbers(o)}var combineLinesDomain=(e,i)=>{if(e!=null){var o=e.flatMap(d=>i==="xAxis"?extractXCoordinates(d):extractYCoordinates(d));if(o.length!==0)return[Math.min(...o),Math.max(...o)]}},selectReferenceLinesDomain=createSelector([selectReferenceLinesByAxis,pickAxisType],combineLinesDomain),selectReferenceElementsDomain=createSelector(selectReferenceDotsDomain,selectReferenceLinesDomain,selectReferenceAreasDomain,(e,i,o)=>mergeDomains(e,o,i)),combineNumericalDomain=(e,i,o,d,h,g,b,j)=>{if(o!=null)return o;var _=b==="vertical"&&j==="xAxis"||b==="horizontal"&&j==="yAxis",$=_?mergeDomains(d,g,h):mergeDomains(g,h);return parseNumericalUserDomain(i,$,e.allowDataOverflow)},selectNumericalDomain=createSelector([selectBaseAxis,selectDomainDefinition,selectDomainFromUserPreference,selectDomainOfStackGroups,selectDomainOfAllAppliedNumericalValuesIncludingErrorValues$1,selectReferenceElementsDomain,selectChartLayout,pickAxisType],combineNumericalDomain,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),expandDomain=[0,1],combineAxisDomain=(e,i,o,d,h,g,b)=>{if(!((e==null||o==null||o.length===0)&&b===void 0)){var{dataKey:j,type:_}=e,$=isCategoricalAxis(i,g);if($&&j==null){var _e;return range$3(0,(_e=o==null?void 0:o.length)!==null&&_e!==void 0?_e:0)}return _==="category"?computeDomainOfTypeCategory(d,e,$):h==="expand"?expandDomain:b}},selectAxisDomain=createSelector([selectBaseAxis,selectChartLayout,selectDisplayedData,selectAllAppliedValues,selectStackOffsetType,pickAxisType,selectNumericalDomain],combineAxisDomain),combineRealScaleType=(e,i,o,d,h)=>{if(e!=null){var{scale:g,type:b}=e;if(g==="auto")return i==="radial"&&h==="radiusAxis"?"band":i==="radial"&&h==="angleAxis"?"linear":b==="category"&&d&&(d.indexOf("LineChart")>=0||d.indexOf("AreaChart")>=0||d.indexOf("ComposedChart")>=0&&!o)?"point":b==="category"?"band":"linear";if(typeof g=="string"){var j="scale".concat(upperFirst(g));return j in d3Scales?j:"point"}}},selectRealScaleType=createSelector([selectBaseAxis,selectChartLayout,selectHasBar,selectChartName,pickAxisType],combineRealScaleType);function getD3ScaleFromType(e){if(e!=null){if(e in d3Scales)return d3Scales[e]();var i="scale".concat(upperFirst(e));if(i in d3Scales)return d3Scales[i]()}}function combineScaleFunction(e,i,o,d){if(!(o==null||d==null)){if(typeof e.scale=="function")return e.scale.copy().domain(o).range(d);var h=getD3ScaleFromType(i);if(h!=null){var g=h.domain(o).range(d);return checkDomainOfScale(g),g}}}var combineNiceTicks=(e,i,o)=>{var d=getDomainDefinition(i);if(!(o!=="auto"&&o!=="linear")){if(i!=null&&i.tickCount&&Array.isArray(d)&&(d[0]==="auto"||d[1]==="auto")&&isWellFormedNumberDomain(e))return getNiceTickValues(e,i.tickCount,i.allowDecimals);if(i!=null&&i.tickCount&&i.type==="number"&&isWellFormedNumberDomain(e))return getTickValuesFixedDomain(e,i.tickCount,i.allowDecimals)}},selectNiceTicks=createSelector([selectAxisDomain,selectAxisSettings,selectRealScaleType],combineNiceTicks),combineAxisDomainWithNiceTicks=(e,i,o,d)=>{if(d!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&isWellFormedNumberDomain(i)&&Array.isArray(o)&&o.length>0){var h=i[0],g=o[0],b=i[1],j=o[o.length-1];return[Math.min(h,g),Math.max(b,j)]}return i},selectAxisDomainIncludingNiceTicks=createSelector([selectBaseAxis,selectAxisDomain,selectNiceTicks,pickAxisType],combineAxisDomainWithNiceTicks),selectSmallestDistanceBetweenValues=createSelector(selectAllAppliedValues,selectBaseAxis,(e,i)=>{if(!(!i||i.type!=="number")){var o=1/0,d=Array.from(onlyAllowNumbers(e.map(et=>et.value))).sort((et,tt)=>et-tt),h=d[0],g=d[d.length-1];if(h==null||g==null)return 1/0;var b=g-h;if(b===0)return 1/0;for(var j=0;j<d.length-1;j++){var _=d[j],$=d[j+1];if(!(_==null||$==null)){var _e=$-_;o=Math.min(o,_e)}}return o/b}}),selectCalculatedPadding=createSelector(selectSmallestDistanceBetweenValues,selectChartLayout,selectBarCategoryGap,selectChartOffsetInternal,(e,i,o,d,h)=>h,(e,i,o,d,h)=>{if(!isWellBehavedNumber(e))return 0;var g=i==="vertical"?d.height:d.width;if(h==="gap")return e*g/2;if(h==="no-gap"){var b=getPercentValue(o,e*g),j=e*g/2;return j-b-(j-b)/g*b}return 0}),selectCalculatedXAxisPadding=(e,i,o)=>{var d=selectXAxisSettings(e,i);return d==null||typeof d.padding!="string"?0:selectCalculatedPadding(e,"xAxis",i,o,d.padding)},selectCalculatedYAxisPadding=(e,i,o)=>{var d=selectYAxisSettings(e,i);return d==null||typeof d.padding!="string"?0:selectCalculatedPadding(e,"yAxis",i,o,d.padding)},selectXAxisPadding=createSelector(selectXAxisSettings,selectCalculatedXAxisPadding,(e,i)=>{var o,d;if(e==null)return{left:0,right:0};var{padding:h}=e;return typeof h=="string"?{left:i,right:i}:{left:((o=h.left)!==null&&o!==void 0?o:0)+i,right:((d=h.right)!==null&&d!==void 0?d:0)+i}}),selectYAxisPadding=createSelector(selectYAxisSettings,selectCalculatedYAxisPadding,(e,i)=>{var o,d;if(e==null)return{top:0,bottom:0};var{padding:h}=e;return typeof h=="string"?{top:i,bottom:i}:{top:((o=h.top)!==null&&o!==void 0?o:0)+i,bottom:((d=h.bottom)!==null&&d!==void 0?d:0)+i}}),combineXAxisRange=createSelector([selectChartOffsetInternal,selectXAxisPadding,selectBrushDimensions,selectBrushSettings,(e,i,o)=>o],(e,i,o,d,h)=>{var{padding:g}=d;return h?[g.left,o.width-g.right]:[e.left+i.left,e.left+e.width-i.right]}),combineYAxisRange=createSelector([selectChartOffsetInternal,selectChartLayout,selectYAxisPadding,selectBrushDimensions,selectBrushSettings,(e,i,o)=>o],(e,i,o,d,h,g)=>{var{padding:b}=h;return g?[d.height-b.bottom,b.top]:i==="horizontal"?[e.top+e.height-o.bottom,e.top+o.top]:[e.top+o.top,e.top+e.height-o.bottom]}),selectAxisRange=(e,i,o,d)=>{var h;switch(i){case"xAxis":return combineXAxisRange(e,o,d);case"yAxis":return combineYAxisRange(e,o,d);case"zAxis":return(h=selectZAxisSettings(e,o))===null||h===void 0?void 0:h.range;case"angleAxis":return selectAngleAxisRange(e);case"radiusAxis":return selectRadiusAxisRange(e,o);default:return}},selectAxisRangeWithReverse=createSelector([selectBaseAxis,selectAxisRange],combineAxisRangeWithReverse),selectAxisScale=createSelector([selectBaseAxis,selectRealScaleType,selectAxisDomainIncludingNiceTicks,selectAxisRangeWithReverse],combineScaleFunction);createSelector([selectCartesianItemsSettings,selectAllErrorBarSettings,pickAxisType],combineRelevantErrorBarSettings);function compareIds(e,i){return e.id<i.id?-1:e.id>i.id?1:0}var pickAxisOrientation=(e,i)=>i,pickMirror=(e,i,o)=>o,selectAllXAxesWithOffsetType=createSelector(selectAllXAxes,pickAxisOrientation,pickMirror,(e,i,o)=>e.filter(d=>d.orientation===i).filter(d=>d.mirror===o).sort(compareIds)),selectAllYAxesWithOffsetType=createSelector(selectAllYAxes,pickAxisOrientation,pickMirror,(e,i,o)=>e.filter(d=>d.orientation===i).filter(d=>d.mirror===o).sort(compareIds)),getXAxisSize=(e,i)=>({width:e.width,height:i.height}),getYAxisSize=(e,i)=>{var o=typeof i.width=="number"?i.width:DEFAULT_Y_AXIS_WIDTH;return{width:o,height:e.height}},selectXAxisSize=createSelector(selectChartOffsetInternal,selectXAxisSettings,getXAxisSize),combineXAxisPositionStartingPoint=(e,i,o)=>{switch(i){case"top":return e.top;case"bottom":return o-e.bottom;default:return 0}},combineYAxisPositionStartingPoint=(e,i,o)=>{switch(i){case"left":return e.left;case"right":return o-e.right;default:return 0}},selectAllXAxesOffsetSteps=createSelector(selectChartHeight,selectChartOffsetInternal,selectAllXAxesWithOffsetType,pickAxisOrientation,pickMirror,(e,i,o,d,h)=>{var g={},b;return o.forEach(j=>{var _=getXAxisSize(i,j);b==null&&(b=combineXAxisPositionStartingPoint(i,d,e));var $=d==="top"&&!h||d==="bottom"&&h;g[j.id]=b-Number($)*_.height,b+=($?-1:1)*_.height}),g}),selectAllYAxesOffsetSteps=createSelector(selectChartWidth,selectChartOffsetInternal,selectAllYAxesWithOffsetType,pickAxisOrientation,pickMirror,(e,i,o,d,h)=>{var g={},b;return o.forEach(j=>{var _=getYAxisSize(i,j);b==null&&(b=combineYAxisPositionStartingPoint(i,d,e));var $=d==="left"&&!h||d==="right"&&h;g[j.id]=b-Number($)*_.width,b+=($?-1:1)*_.width}),g}),selectXAxisOffsetSteps=(e,i)=>{var o=selectXAxisSettings(e,i);if(o!=null)return selectAllXAxesOffsetSteps(e,o.orientation,o.mirror)},selectXAxisPosition=createSelector([selectChartOffsetInternal,selectXAxisSettings,selectXAxisOffsetSteps,(e,i)=>i],(e,i,o,d)=>{if(i!=null){var h=o==null?void 0:o[d];return h==null?{x:e.left,y:0}:{x:e.left,y:h}}}),selectYAxisOffsetSteps=(e,i)=>{var o=selectYAxisSettings(e,i);if(o!=null)return selectAllYAxesOffsetSteps(e,o.orientation,o.mirror)},selectYAxisPosition=createSelector([selectChartOffsetInternal,selectYAxisSettings,selectYAxisOffsetSteps,(e,i)=>i],(e,i,o,d)=>{if(i!=null){var h=o==null?void 0:o[d];return h==null?{x:0,y:e.top}:{x:h,y:e.top}}}),selectYAxisSize=createSelector(selectChartOffsetInternal,selectYAxisSettings,(e,i)=>{var o=typeof i.width=="number"?i.width:DEFAULT_Y_AXIS_WIDTH;return{width:o,height:e.height}}),selectCartesianAxisSize=(e,i,o)=>{switch(i){case"xAxis":return selectXAxisSize(e,o).width;case"yAxis":return selectYAxisSize(e,o).height;default:return}},combineDuplicateDomain=(e,i,o,d)=>{if(o!=null){var{allowDuplicatedCategory:h,type:g,dataKey:b}=o,j=isCategoricalAxis(e,d),_=i.map($=>$.value);if(b&&j&&g==="category"&&h&&hasDuplicate(_))return _}},selectDuplicateDomain=createSelector([selectChartLayout,selectAllAppliedValues,selectBaseAxis,pickAxisType],combineDuplicateDomain),combineCategoricalDomain=(e,i,o,d)=>{if(!(o==null||o.dataKey==null)){var{type:h,scale:g}=o,b=isCategoricalAxis(e,d);if(b&&(h==="number"||g!=="auto"))return i.map(j=>j.value)}},selectCategoricalDomain=createSelector([selectChartLayout,selectAllAppliedValues,selectAxisSettings,pickAxisType],combineCategoricalDomain),selectAxisPropsNeededForCartesianGridTicksGenerator=createSelector([selectChartLayout,selectCartesianAxisSettings,selectRealScaleType,selectAxisScale,selectDuplicateDomain,selectCategoricalDomain,selectAxisRange,selectNiceTicks,pickAxisType],(e,i,o,d,h,g,b,j,_)=>{if(i!=null){var $=isCategoricalAxis(e,_);return{angle:i.angle,interval:i.interval,minTickGap:i.minTickGap,orientation:i.orientation,tick:i.tick,tickCount:i.tickCount,tickFormatter:i.tickFormatter,ticks:i.ticks,type:i.type,unit:i.unit,axisType:_,categoricalDomain:g,duplicateDomain:h,isCategorical:$,niceTicks:j,range:b,realScaleType:o,scale:d}}}),combineAxisTicks=(e,i,o,d,h,g,b,j,_)=>{if(!(i==null||d==null)){var $=isCategoricalAxis(e,_),{type:_e,ticks:et,tickCount:tt}=i,rt=o==="scaleBand"&&typeof d.bandwidth=="function"?d.bandwidth()/2:2,nt=_e==="category"&&d.bandwidth?d.bandwidth()/rt:0;nt=_==="angleAxis"&&g!=null&&g.length>=2?mathSign(g[0]-g[1])*2*nt:nt;var it=et||h;if(it){var st=it.map((at,ot)=>{var lt=b?b.indexOf(at):at;return{index:ot,coordinate:d(lt)+nt,value:at,offset:nt}});return st.filter(at=>isWellBehavedNumber(at.coordinate))}return $&&j?j.map((at,ot)=>({coordinate:d(at)+nt,value:at,index:ot,offset:nt})).filter(at=>isWellBehavedNumber(at.coordinate)):d.ticks?d.ticks(tt).map(at=>({coordinate:d(at)+nt,value:at,offset:nt})):d.domain().map((at,ot)=>({coordinate:d(at)+nt,value:b?b[at]:at,index:ot,offset:nt}))}},selectTicksOfAxis=createSelector([selectChartLayout,selectAxisSettings,selectRealScaleType,selectAxisScale,selectNiceTicks,selectAxisRange,selectDuplicateDomain,selectCategoricalDomain,pickAxisType],combineAxisTicks),combineGraphicalItemTicks=(e,i,o,d,h,g,b)=>{if(!(i==null||o==null||d==null||d[0]===d[1])){var j=isCategoricalAxis(e,b),{tickCount:_}=i,$=0;return $=b==="angleAxis"&&(d==null?void 0:d.length)>=2?mathSign(d[0]-d[1])*2*$:$,j&&g?g.map((_e,et)=>({coordinate:o(_e)+$,value:_e,index:et,offset:$})):o.ticks?o.ticks(_).map(_e=>({coordinate:o(_e)+$,value:_e,offset:$})):o.domain().map((_e,et)=>({coordinate:o(_e)+$,value:h?h[_e]:_e,index:et,offset:$}))}},selectTicksOfGraphicalItem=createSelector([selectChartLayout,selectAxisSettings,selectAxisScale,selectAxisRange,selectDuplicateDomain,selectCategoricalDomain,pickAxisType],combineGraphicalItemTicks),selectAxisWithScale=createSelector(selectBaseAxis,selectAxisScale,(e,i)=>{if(!(e==null||i==null))return _objectSpread$m(_objectSpread$m({},e),{},{scale:i})}),selectZAxisScale=createSelector([selectBaseAxis,selectRealScaleType,selectAxisDomain,selectAxisRangeWithReverse],combineScaleFunction);createSelector((e,i,o)=>selectZAxisSettings(e,o),selectZAxisScale,(e,i)=>{if(!(e==null||i==null))return _objectSpread$m(_objectSpread$m({},e),{},{scale:i})});var selectChartDirection=createSelector([selectChartLayout,selectAllXAxes,selectAllYAxes],(e,i,o)=>{switch(e){case"horizontal":return i.some(d=>d.reversed)?"right-to-left":"left-to-right";case"vertical":return o.some(d=>d.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),selectDefaultTooltipEventType=e=>e.options.defaultTooltipEventType,selectValidateTooltipEventTypes=e=>e.options.validateTooltipEventTypes;function combineTooltipEventType(e,i,o){if(e==null)return i;var d=e?"axis":"item";return o==null?i:o.includes(d)?d:i}function selectTooltipEventType$1(e,i){var o=selectDefaultTooltipEventType(e),d=selectValidateTooltipEventTypes(e);return combineTooltipEventType(i,o,d)}function useTooltipEventType(e){return useAppSelector(i=>selectTooltipEventType$1(i,e))}var combineActiveLabel=(e,i)=>{var o,d=Number(i);if(!(isNan(d)||i==null))return d>=0?e==null||(o=e[d])===null||o===void 0?void 0:o.value:void 0},selectTooltipSettings=e=>e.tooltip.settings,noInteraction={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},initialState$9={itemInteraction:{click:noInteraction,hover:noInteraction},axisInteraction:{click:noInteraction,hover:noInteraction},keyboardInteraction:noInteraction,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},tooltipSlice=createSlice({name:"tooltip",initialState:initialState$9,reducers:{addTooltipEntrySettings:{reducer(e,i){e.tooltipItemPayloads.push(i.payload)},prepare:prepareAutoBatched()},replaceTooltipEntrySettings:{reducer(e,i){var{prev:o,next:d}=i.payload,h=current$1(e).tooltipItemPayloads.indexOf(o);h>-1&&(e.tooltipItemPayloads[h]=d)},prepare:prepareAutoBatched()},removeTooltipEntrySettings:{reducer(e,i){var o=current$1(e).tooltipItemPayloads.indexOf(i.payload);o>-1&&e.tooltipItemPayloads.splice(o,1)},prepare:prepareAutoBatched()},setTooltipSettingsState(e,i){e.settings=i.payload},setActiveMouseOverItemIndex(e,i){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=i.payload.activeIndex,e.itemInteraction.hover.dataKey=i.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=i.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=i.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,i){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=i.payload.activeIndex,e.itemInteraction.click.dataKey=i.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=i.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=i.payload.activeCoordinate},setMouseOverAxisIndex(e,i){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=i.payload.activeIndex,e.axisInteraction.hover.dataKey=i.payload.activeDataKey,e.axisInteraction.hover.coordinate=i.payload.activeCoordinate},setMouseClickAxisIndex(e,i){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=i.payload.activeIndex,e.axisInteraction.click.dataKey=i.payload.activeDataKey,e.axisInteraction.click.coordinate=i.payload.activeCoordinate},setSyncInteraction(e,i){e.syncInteraction=i.payload},setKeyboardInteraction(e,i){e.keyboardInteraction.active=i.payload.active,e.keyboardInteraction.index=i.payload.activeIndex,e.keyboardInteraction.coordinate=i.payload.activeCoordinate}}}),{addTooltipEntrySettings,replaceTooltipEntrySettings,removeTooltipEntrySettings,setTooltipSettingsState,setActiveMouseOverItemIndex,mouseLeaveItem,mouseLeaveChart,setActiveClickItemIndex,setMouseOverAxisIndex,setMouseClickAxisIndex,setSyncInteraction,setKeyboardInteraction}=tooltipSlice.actions,tooltipReducer=tooltipSlice.reducer;function ownKeys$l(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$l(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$l(Object(o),!0).forEach(function(d){_defineProperty$o(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$l(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$o(e,i,o){return(i=_toPropertyKey$o(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$o(e){var i=_toPrimitive$o(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$o(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function chooseAppropriateMouseInteraction(e,i,o){return i==="axis"?o==="click"?e.axisInteraction.click:e.axisInteraction.hover:o==="click"?e.itemInteraction.click:e.itemInteraction.hover}function hasBeenActivePreviously(e){return e.index!=null}var combineTooltipInteractionState=(e,i,o,d)=>{if(i==null)return noInteraction;var h=chooseAppropriateMouseInteraction(e,i,o);if(h==null)return noInteraction;if(h.active)return h;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var g=e.settings.active===!0;if(hasBeenActivePreviously(h)){if(g)return _objectSpread$l(_objectSpread$l({},h),{},{active:!0})}else if(d!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:d,graphicalItemId:void 0};return _objectSpread$l(_objectSpread$l({},noInteraction),{},{coordinate:h.coordinate})};function toFiniteNumber(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var i=e.valueOf();return Number.isFinite(i)?i:void 0}var o=Number(e);return Number.isFinite(o)?o:void 0}function isValueWithinNumberDomain(e,i){var o=toFiniteNumber(e),d=i[0],h=i[1];if(o===void 0)return!1;var g=Math.min(d,h),b=Math.max(d,h);return o>=g&&o<=b}function isValueWithinDomain(e,i,o){if(o==null||i==null)return!0;var d=getValueByDataKey(e,i);return d==null||!isWellFormedNumberDomain(o)?!0:isValueWithinNumberDomain(d,o)}var combineActiveTooltipIndex=(e,i,o,d)=>{var h=e==null?void 0:e.index;if(h==null)return null;var g=Number(h);if(!isWellBehavedNumber(g))return h;var b=0,j=1/0;i.length>0&&(j=i.length-1);var _=Math.max(b,Math.min(g,j)),$=i[_];return $==null||isValueWithinDomain($,o,d)?String(_):null},combineCoordinateForDefaultIndex=(e,i,o,d,h,g,b,j)=>{if(!(g==null||j==null)){var _=b[0],$=_==null?void 0:j(_.positions,g);if($!=null)return $;var _e=h==null?void 0:h[Number(g)];if(_e)switch(o){case"horizontal":return{x:_e.coordinate,y:(d.top+i)/2};default:return{x:(d.left+e)/2,y:_e.coordinate}}}},combineTooltipPayloadConfigurations=(e,i,o,d)=>{if(i==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var h;if(o==="hover"?h=e.itemInteraction.hover.graphicalItemId:h=e.itemInteraction.click.graphicalItemId,h==null&&d!=null){var g=e.tooltipItemPayloads[0];return g!=null?[g]:[]}return e.tooltipItemPayloads.filter(b=>{var j;return((j=b.settings)===null||j===void 0?void 0:j.graphicalItemId)===h})},selectTooltipPayloadSearcher=e=>e.options.tooltipPayloadSearcher,selectTooltipState=e=>e.tooltip;function ownKeys$k(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$k(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$k(Object(o),!0).forEach(function(d){_defineProperty$n(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$k(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$n(e,i,o){return(i=_toPropertyKey$n(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$n(e){var i=_toPrimitive$n(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$n(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function selectFinalData(e,i){return e??i}var combineTooltipPayload=(e,i,o,d,h,g,b)=>{if(!(i==null||g==null)){var{chartData:j,computedData:_,dataStartIndex:$,dataEndIndex:_e}=o,et=[];return e.reduce((tt,rt)=>{var nt,{dataDefinedOnItem:it,settings:st}=rt,at=selectFinalData(it,j),ot=Array.isArray(at)?getSliced(at,$,_e):at,lt=(nt=st==null?void 0:st.dataKey)!==null&&nt!==void 0?nt:d,ct=st==null?void 0:st.nameKey,ut;if(d&&Array.isArray(ot)&&!Array.isArray(ot[0])&&b==="axis"?ut=findEntryInArray(ot,d,h):ut=g(ot,i,_,ct),Array.isArray(ut))ut.forEach(mt=>{var xt=_objectSpread$k(_objectSpread$k({},st),{},{name:mt.name,unit:mt.unit,color:void 0,fill:void 0});tt.push(getTooltipEntry({tooltipEntrySettings:xt,dataKey:mt.dataKey,payload:mt.payload,value:getValueByDataKey(mt.payload,mt.dataKey),name:mt.name}))});else{var dt;tt.push(getTooltipEntry({tooltipEntrySettings:st,dataKey:lt,payload:ut,value:getValueByDataKey(ut,lt),name:(dt=getValueByDataKey(ut,ct))!==null&&dt!==void 0?dt:st==null?void 0:st.name}))}return tt},et)}},selectTooltipAxisRealScaleType=createSelector([selectTooltipAxis,selectChartLayout,selectHasBar,selectChartName,selectTooltipAxisType],combineRealScaleType),selectAllUnfilteredGraphicalItems=createSelector([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,i)=>[...e,...i]),selectTooltipAxisPredicate=createSelector([selectTooltipAxisType,selectTooltipAxisId],itemAxisPredicate),selectAllGraphicalItemsSettings=createSelector([selectAllUnfilteredGraphicalItems,selectTooltipAxis,selectTooltipAxisPredicate],combineGraphicalItemsSettings,{memoizeOptions:{resultEqualityCheck:emptyArraysAreEqualCheck}}),selectAllStackedGraphicalItemsSettings=createSelector([selectAllGraphicalItemsSettings],e=>e.filter(isStacked)),selectTooltipGraphicalItemsData=createSelector([selectAllGraphicalItemsSettings],combineGraphicalItemsData,{memoizeOptions:{resultEqualityCheck:emptyArraysAreEqualCheck}}),selectTooltipDisplayedData=createSelector([selectTooltipGraphicalItemsData,selectChartDataWithIndexes],combineDisplayedData),selectTooltipStackedData=createSelector([selectAllStackedGraphicalItemsSettings,selectChartDataWithIndexes,selectTooltipAxis],combineDisplayedStackedData),selectAllTooltipAppliedValues=createSelector([selectTooltipDisplayedData,selectTooltipAxis,selectAllGraphicalItemsSettings],combineAppliedValues),selectTooltipAxisDomainDefinition=createSelector([selectTooltipAxis],getDomainDefinition),selectTooltipDataOverflow=createSelector([selectTooltipAxis],e=>e.allowDataOverflow),selectTooltipDomainFromUserPreferences=createSelector([selectTooltipAxisDomainDefinition,selectTooltipDataOverflow],numericalDomainSpecifiedWithoutRequiringData),selectAllStackedGraphicalItems=createSelector([selectAllGraphicalItemsSettings],e=>e.filter(isStacked)),selectTooltipStackGroups=createSelector([selectTooltipStackedData,selectAllStackedGraphicalItems,selectStackOffsetType,selectReverseStackOrder],combineStackGroups),selectTooltipDomainOfStackGroups=createSelector([selectTooltipStackGroups,selectChartDataWithIndexes,selectTooltipAxisType,selectTooltipDomainFromUserPreferences],combineDomainOfStackGroups),selectTooltipItemsSettingsExceptStacked=createSelector([selectAllGraphicalItemsSettings],filterGraphicalNotStackedItems),selectDomainOfAllAppliedNumericalValuesIncludingErrorValues=createSelector([selectTooltipDisplayedData,selectTooltipAxis,selectTooltipItemsSettingsExceptStacked,selectAllErrorBarSettings,selectTooltipAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),selectReferenceDotsByTooltipAxis=createSelector([selectReferenceDots,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceDotsDomain=createSelector([selectReferenceDotsByTooltipAxis,selectTooltipAxisType],combineDotsDomain),selectReferenceAreasByTooltipAxis=createSelector([selectReferenceAreas,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceAreasDomain=createSelector([selectReferenceAreasByTooltipAxis,selectTooltipAxisType],combineAreasDomain),selectReferenceLinesByTooltipAxis=createSelector([selectReferenceLines,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceLinesDomain=createSelector([selectReferenceLinesByTooltipAxis,selectTooltipAxisType],combineLinesDomain),selectTooltipReferenceElementsDomain=createSelector([selectTooltipReferenceDotsDomain,selectTooltipReferenceLinesDomain,selectTooltipReferenceAreasDomain],mergeDomains),selectTooltipNumericalDomain=createSelector([selectTooltipAxis,selectTooltipAxisDomainDefinition,selectTooltipDomainFromUserPreferences,selectTooltipDomainOfStackGroups,selectDomainOfAllAppliedNumericalValuesIncludingErrorValues,selectTooltipReferenceElementsDomain,selectChartLayout,selectTooltipAxisType],combineNumericalDomain),selectTooltipAxisDomain=createSelector([selectTooltipAxis,selectChartLayout,selectTooltipDisplayedData,selectAllTooltipAppliedValues,selectStackOffsetType,selectTooltipAxisType,selectTooltipNumericalDomain],combineAxisDomain),selectTooltipNiceTicks=createSelector([selectTooltipAxisDomain,selectTooltipAxis,selectTooltipAxisRealScaleType],combineNiceTicks),selectTooltipAxisDomainIncludingNiceTicks=createSelector([selectTooltipAxis,selectTooltipAxisDomain,selectTooltipNiceTicks,selectTooltipAxisType],combineAxisDomainWithNiceTicks),selectTooltipAxisRange=e=>{var i=selectTooltipAxisType(e),o=selectTooltipAxisId(e),d=!1;return selectAxisRange(e,i,o,d)},selectTooltipAxisRangeWithReverse=createSelector([selectTooltipAxis,selectTooltipAxisRange],combineAxisRangeWithReverse),selectTooltipAxisScale=createSelector([selectTooltipAxis,selectTooltipAxisRealScaleType,selectTooltipAxisDomainIncludingNiceTicks,selectTooltipAxisRangeWithReverse],combineScaleFunction),selectTooltipDuplicateDomain=createSelector([selectChartLayout,selectAllTooltipAppliedValues,selectTooltipAxis,selectTooltipAxisType],combineDuplicateDomain),selectTooltipCategoricalDomain=createSelector([selectChartLayout,selectAllTooltipAppliedValues,selectTooltipAxis,selectTooltipAxisType],combineCategoricalDomain),combineTicksOfTooltipAxis=(e,i,o,d,h,g,b,j)=>{if(i){var{type:_}=i,$=isCategoricalAxis(e,j);if(d){var _e=o==="scaleBand"&&d.bandwidth?d.bandwidth()/2:2,et=_==="category"&&d.bandwidth?d.bandwidth()/_e:0;return et=j==="angleAxis"&&h!=null&&(h==null?void 0:h.length)>=2?mathSign(h[0]-h[1])*2*et:et,$&&b?b.map((tt,rt)=>({coordinate:d(tt)+et,value:tt,index:rt,offset:et})):d.domain().map((tt,rt)=>({coordinate:d(tt)+et,value:g?g[tt]:tt,index:rt,offset:et}))}}},selectTooltipAxisTicks=createSelector([selectChartLayout,selectTooltipAxis,selectTooltipAxisRealScaleType,selectTooltipAxisScale,selectTooltipAxisRange,selectTooltipDuplicateDomain,selectTooltipCategoricalDomain,selectTooltipAxisType],combineTicksOfTooltipAxis),selectTooltipEventType=createSelector([selectDefaultTooltipEventType,selectValidateTooltipEventTypes,selectTooltipSettings],(e,i,o)=>combineTooltipEventType(o.shared,e,i)),selectTooltipTrigger=e=>e.tooltip.settings.trigger,selectDefaultIndex=e=>e.tooltip.settings.defaultIndex,selectTooltipInteractionState$1=createSelector([selectTooltipState,selectTooltipEventType,selectTooltipTrigger,selectDefaultIndex],combineTooltipInteractionState),selectActiveTooltipIndex=createSelector([selectTooltipInteractionState$1,selectTooltipDisplayedData,selectTooltipAxisDataKey,selectTooltipAxisDomain],combineActiveTooltipIndex),selectActiveLabel$1=createSelector([selectTooltipAxisTicks,selectActiveTooltipIndex],combineActiveLabel),selectActiveTooltipDataKey=createSelector([selectTooltipInteractionState$1],e=>{if(e)return e.dataKey});createSelector([selectTooltipInteractionState$1],e=>{if(e)return e.graphicalItemId});var selectTooltipPayloadConfigurations$1=createSelector([selectTooltipState,selectTooltipEventType,selectTooltipTrigger,selectDefaultIndex],combineTooltipPayloadConfigurations),selectTooltipCoordinateForDefaultIndex=createSelector([selectChartWidth,selectChartHeight,selectChartLayout,selectChartOffsetInternal,selectTooltipAxisTicks,selectDefaultIndex,selectTooltipPayloadConfigurations$1,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),selectActiveTooltipCoordinate=createSelector([selectTooltipInteractionState$1,selectTooltipCoordinateForDefaultIndex],(e,i)=>e!=null&&e.coordinate?e.coordinate:i),selectIsTooltipActive$1=createSelector([selectTooltipInteractionState$1],e=>{var i;return(i=e==null?void 0:e.active)!==null&&i!==void 0?i:!1}),selectActiveTooltipPayload=createSelector([selectTooltipPayloadConfigurations$1,selectActiveTooltipIndex,selectChartDataWithIndexes,selectTooltipAxisDataKey,selectActiveLabel$1,selectTooltipPayloadSearcher,selectTooltipEventType],combineTooltipPayload),selectActiveTooltipDataPoints=createSelector([selectActiveTooltipPayload],e=>{if(e!=null){var i=e.map(o=>o.payload).filter(o=>o!=null);return Array.from(new Set(i))}});function ownKeys$j(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$j(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$j(Object(o),!0).forEach(function(d){_defineProperty$m(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$j(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$m(e,i,o){return(i=_toPropertyKey$m(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$m(e){var i=_toPrimitive$m(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$m(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var useTooltipAxis=()=>useAppSelector(selectTooltipAxis),useTooltipAxisBandSize=()=>{var e=useTooltipAxis(),i=useAppSelector(selectTooltipAxisTicks),o=useAppSelector(selectTooltipAxisScale);return getBandSizeOfAxis(!e||!o?void 0:_objectSpread$j(_objectSpread$j({},e),{},{scale:o}),i)};function ownKeys$i(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$i(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$i(Object(o),!0).forEach(function(d){_defineProperty$l(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$i(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$l(e,i,o){return(i=_toPropertyKey$l(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$l(e){var i=_toPrimitive$l(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$l(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var getActiveCartesianCoordinate=(e,i,o,d)=>{var h=i.find(g=>g&&g.index===o);if(h){if(e==="horizontal")return{x:h.coordinate,y:d.chartY};if(e==="vertical")return{x:d.chartX,y:h.coordinate}}return{x:0,y:0}},getActivePolarCoordinate=(e,i,o,d)=>{var h=i.find($=>$&&$.index===o);if(h){if(e==="centric"){var g=h.coordinate,{radius:b}=d;return _objectSpread$i(_objectSpread$i(_objectSpread$i({},d),polarToCartesian(d.cx,d.cy,b,g)),{},{angle:g,radius:b})}var j=h.coordinate,{angle:_}=d;return _objectSpread$i(_objectSpread$i(_objectSpread$i({},d),polarToCartesian(d.cx,d.cy,j,_)),{},{angle:_,radius:j})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function isInCartesianRange(e,i){var{chartX:o,chartY:d}=e;return o>=i.left&&o<=i.left+i.width&&d>=i.top&&d<=i.top+i.height}var calculateActiveTickIndex=(e,i,o,d,h)=>{var g,b=(g=i==null?void 0:i.length)!==null&&g!==void 0?g:0;if(b<=1||e==null)return 0;if(d==="angleAxis"&&h!=null&&Math.abs(Math.abs(h[1]-h[0])-360)<=1e-6)for(var j=0;j<b;j++){var _,$,_e,et,tt,rt=j>0?(_=o[j-1])===null||_===void 0?void 0:_.coordinate:($=o[b-1])===null||$===void 0?void 0:$.coordinate,nt=(_e=o[j])===null||_e===void 0?void 0:_e.coordinate,it=j>=b-1?(et=o[0])===null||et===void 0?void 0:et.coordinate:(tt=o[j+1])===null||tt===void 0?void 0:tt.coordinate,st=void 0;if(!(rt==null||nt==null||it==null))if(mathSign(nt-rt)!==mathSign(it-nt)){var at=[];if(mathSign(it-nt)===mathSign(h[1]-h[0])){st=it;var ot=nt+h[1]-h[0];at[0]=Math.min(ot,(ot+rt)/2),at[1]=Math.max(ot,(ot+rt)/2)}else{st=rt;var lt=it+h[1]-h[0];at[0]=Math.min(nt,(lt+nt)/2),at[1]=Math.max(nt,(lt+nt)/2)}var ct=[Math.min(nt,(st+nt)/2),Math.max(nt,(st+nt)/2)];if(e>ct[0]&&e<=ct[1]||e>=at[0]&&e<=at[1]){var ut;return(ut=o[j])===null||ut===void 0?void 0:ut.index}}else{var dt=Math.min(rt,it),mt=Math.max(rt,it);if(e>(dt+nt)/2&&e<=(mt+nt)/2){var xt;return(xt=o[j])===null||xt===void 0?void 0:xt.index}}}else if(i)for(var ft=0;ft<b;ft++){var gt=i[ft];if(gt!=null){var pt=i[ft+1],yt=i[ft-1];if(ft===0&&pt!=null&&e<=(gt.coordinate+pt.coordinate)/2||ft===b-1&&yt!=null&&e>(gt.coordinate+yt.coordinate)/2||ft>0&&ft<b-1&&yt!=null&&pt!=null&&e>(gt.coordinate+yt.coordinate)/2&&e<=(gt.coordinate+pt.coordinate)/2)return gt.index}}return-1},useChartName=()=>useAppSelector(selectChartName),pickTooltipEventType=(e,i)=>i,pickTrigger=(e,i,o)=>o,pickDefaultIndex=(e,i,o,d)=>d,selectOrderedTooltipTicks=createSelector(selectTooltipAxisTicks,e=>sortBy$1(e,i=>i.coordinate)),selectTooltipInteractionState=createSelector([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipInteractionState),selectActiveIndex=createSelector([selectTooltipInteractionState,selectTooltipDisplayedData,selectTooltipAxisDataKey,selectTooltipAxisDomain],combineActiveTooltipIndex),selectTooltipDataKey=(e,i,o)=>{if(i!=null){var d=selectTooltipState(e);return i==="axis"?o==="hover"?d.axisInteraction.hover.dataKey:d.axisInteraction.click.dataKey:o==="hover"?d.itemInteraction.hover.dataKey:d.itemInteraction.click.dataKey}},selectTooltipPayloadConfigurations=createSelector([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipPayloadConfigurations),selectCoordinateForDefaultIndex=createSelector([selectChartWidth,selectChartHeight,selectChartLayout,selectChartOffsetInternal,selectTooltipAxisTicks,pickDefaultIndex,selectTooltipPayloadConfigurations,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),selectActiveCoordinate=createSelector([selectTooltipInteractionState,selectCoordinateForDefaultIndex],(e,i)=>{var o;return(o=e.coordinate)!==null&&o!==void 0?o:i}),selectActiveLabel=createSelector([selectTooltipAxisTicks,selectActiveIndex],combineActiveLabel),selectTooltipPayload=createSelector([selectTooltipPayloadConfigurations,selectActiveIndex,selectChartDataWithIndexes,selectTooltipAxisDataKey,selectActiveLabel,selectTooltipPayloadSearcher,pickTooltipEventType],combineTooltipPayload),selectIsTooltipActive=createSelector([selectTooltipInteractionState,selectActiveIndex],(e,i)=>({isActive:e.active&&i!=null,activeIndex:i})),combineActiveCartesianProps=(e,i,o,d,h,g,b)=>{if(!(!e||!o||!d||!h)&&isInCartesianRange(e,b)){var j=calculateCartesianTooltipPos(e,i),_=calculateActiveTickIndex(j,g,h,o,d),$=getActiveCartesianCoordinate(i,h,_,e);return{activeIndex:String(_),activeCoordinate:$}}},combineActivePolarProps=(e,i,o,d,h,g,b)=>{if(!(!e||!d||!h||!g||!o)){var j=inRangeOfSector(e,o);if(j){var _=calculatePolarTooltipPos(j,i),$=calculateActiveTickIndex(_,b,g,d,h),_e=getActivePolarCoordinate(i,g,$,j);return{activeIndex:String($),activeCoordinate:_e}}}},combineActiveProps=(e,i,o,d,h,g,b,j)=>{if(!(!e||!i||!d||!h||!g))return i==="horizontal"||i==="vertical"?combineActiveCartesianProps(e,i,d,h,g,b,j):combineActivePolarProps(e,i,o,d,h,g,b)},selectZIndexPortalElement=createSelector(e=>e.zIndex.zIndexMap,(e,i)=>i,(e,i,o)=>o,(e,i,o)=>{if(i!=null){var d=e[i];if(d!=null)return o?d.panoramaElement:d.element}}),selectAllRegisteredZIndexes=createSelector(e=>e.zIndex.zIndexMap,e=>{var i=Object.keys(e).map(d=>parseInt(d,10)).concat(Object.values(DefaultZIndexes)),o=Array.from(new Set(i));return o.sort((d,h)=>d-h)},{memoizeOptions:{resultEqualityCheck:arrayContentsAreEqualCheck}});function ownKeys$h(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$h(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$h(Object(o),!0).forEach(function(d){_defineProperty$k(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$h(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$k(e,i,o){return(i=_toPropertyKey$k(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$k(e){var i=_toPrimitive$k(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$k(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var seed={},initialState$8={zIndexMap:Object.values(DefaultZIndexes).reduce((e,i)=>_objectSpread$h(_objectSpread$h({},e),{},{[i]:{element:void 0,panoramaElement:void 0,consumers:0}}),seed)},defaultZIndexSet=new Set(Object.values(DefaultZIndexes));function isDefaultZIndex(e){return defaultZIndexSet.has(e)}var zIndexSlice=createSlice({name:"zIndex",initialState:initialState$8,reducers:{registerZIndexPortal:{reducer:(e,i)=>{var{zIndex:o}=i.payload;e.zIndexMap[o]?e.zIndexMap[o].consumers+=1:e.zIndexMap[o]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:prepareAutoBatched()},unregisterZIndexPortal:{reducer:(e,i)=>{var{zIndex:o}=i.payload;e.zIndexMap[o]&&(e.zIndexMap[o].consumers-=1,e.zIndexMap[o].consumers<=0&&!isDefaultZIndex(o)&&delete e.zIndexMap[o])},prepare:prepareAutoBatched()},registerZIndexPortalElement:{reducer:(e,i)=>{var{zIndex:o,element:d,isPanorama:h}=i.payload;e.zIndexMap[o]?h?e.zIndexMap[o].panoramaElement=d:e.zIndexMap[o].element=d:e.zIndexMap[o]={consumers:0,element:h?void 0:d,panoramaElement:h?d:void 0}},prepare:prepareAutoBatched()},unregisterZIndexPortalElement:{reducer:(e,i)=>{var{zIndex:o}=i.payload;e.zIndexMap[o]&&(i.payload.isPanorama?e.zIndexMap[o].panoramaElement=void 0:e.zIndexMap[o].element=void 0)},prepare:prepareAutoBatched()}}}),{registerZIndexPortal,unregisterZIndexPortal,registerZIndexPortalElement,unregisterZIndexPortalElement}=zIndexSlice.actions,zIndexReducer=zIndexSlice.reducer;function ZIndexLayer(e){var{zIndex:i,children:o}=e,d=useIsInChartContext(),h=d&&i!==void 0&&i!==0,g=useIsPanorama(),b=useAppDispatch();reactExports.useLayoutEffect(()=>h?(b(registerZIndexPortal({zIndex:i})),()=>{b(unregisterZIndexPortal({zIndex:i}))}):noop$2,[b,i,h]);var j=useAppSelector(_=>selectZIndexPortalElement(_,i,g));return h?j?reactDomExports.createPortal(o,j):null:o}function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$h.apply(null,arguments)}function ownKeys$g(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$g(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$g(Object(o),!0).forEach(function(d){_defineProperty$j(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$g(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$j(e,i,o){return(i=_toPropertyKey$j(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$j(e){var i=_toPrimitive$j(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$j(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function RenderCursor(e){var{cursor:i,cursorComp:o,cursorProps:d}=e;return reactExports.isValidElement(i)?reactExports.cloneElement(i,d):reactExports.createElement(o,d)}function CursorInternal(e){var i,{coordinate:o,payload:d,index:h,offset:g,tooltipAxisBandSize:b,layout:j,cursor:_,tooltipEventType:$,chartName:_e}=e,et=o,tt=d,rt=h;if(!_||!et||_e!=="ScatterChart"&&$!=="axis")return null;var nt,it,st;if(_e==="ScatterChart")nt=et,it=Cross,st=DefaultZIndexes.cursorLine;else if(_e==="BarChart")nt=getCursorRectangle(j,et,g,b),it=Rectangle,st=DefaultZIndexes.cursorRectangle;else if(j==="radial"&&isPolarCoordinate(et)){var{cx:at,cy:ot,radius:lt,startAngle:ct,endAngle:ut}=getRadialCursorPoints(et);nt={cx:at,cy:ot,startAngle:ct,endAngle:ut,innerRadius:lt,outerRadius:lt},it=Sector,st=DefaultZIndexes.cursorLine}else nt={points:getCursorPoints(j,et,g)},it=Curve,st=DefaultZIndexes.cursorLine;var dt=typeof _=="object"&&"className"in _?_.className:void 0,mt=_objectSpread$g(_objectSpread$g(_objectSpread$g(_objectSpread$g({stroke:"#ccc",pointerEvents:"none"},g),nt),svgPropertiesNoEventsFromUnknown(_)),{},{payload:tt,payloadIndex:rt,className:clsx("recharts-tooltip-cursor",dt)});return reactExports.createElement(ZIndexLayer,{zIndex:(i=e.zIndex)!==null&&i!==void 0?i:st},reactExports.createElement(RenderCursor,{cursor:_,cursorComp:it,cursorProps:mt}))}function Cursor(e){var i=useTooltipAxisBandSize(),o=useOffsetInternal(),d=useChartLayout(),h=useChartName();return i==null||o==null||d==null||h==null?null:reactExports.createElement(CursorInternal,_extends$h({},e,{offset:o,layout:d,tooltipAxisBandSize:i,chartName:h}))}var TooltipPortalContext=reactExports.createContext(null),useTooltipPortal=()=>reactExports.useContext(TooltipPortalContext),eventemitter3={exports:{}};(function(e){var i=Object.prototype.hasOwnProperty,o="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(o=!1));function h(_,$,_e){this.fn=_,this.context=$,this.once=_e||!1}function g(_,$,_e,et,tt){if(typeof _e!="function")throw new TypeError("The listener must be a function");var rt=new h(_e,et||_,tt),nt=o?o+$:$;return _._events[nt]?_._events[nt].fn?_._events[nt]=[_._events[nt],rt]:_._events[nt].push(rt):(_._events[nt]=rt,_._eventsCount++),_}function b(_,$){--_._eventsCount===0?_._events=new d:delete _._events[$]}function j(){this._events=new d,this._eventsCount=0}j.prototype.eventNames=function(){var $=[],_e,et;if(this._eventsCount===0)return $;for(et in _e=this._events)i.call(_e,et)&&$.push(o?et.slice(1):et);return Object.getOwnPropertySymbols?$.concat(Object.getOwnPropertySymbols(_e)):$},j.prototype.listeners=function($){var _e=o?o+$:$,et=this._events[_e];if(!et)return[];if(et.fn)return[et.fn];for(var tt=0,rt=et.length,nt=new Array(rt);tt<rt;tt++)nt[tt]=et[tt].fn;return nt},j.prototype.listenerCount=function($){var _e=o?o+$:$,et=this._events[_e];return et?et.fn?1:et.length:0},j.prototype.emit=function($,_e,et,tt,rt,nt){var it=o?o+$:$;if(!this._events[it])return!1;var st=this._events[it],at=arguments.length,ot,lt;if(st.fn){switch(st.once&&this.removeListener($,st.fn,void 0,!0),at){case 1:return st.fn.call(st.context),!0;case 2:return st.fn.call(st.context,_e),!0;case 3:return st.fn.call(st.context,_e,et),!0;case 4:return st.fn.call(st.context,_e,et,tt),!0;case 5:return st.fn.call(st.context,_e,et,tt,rt),!0;case 6:return st.fn.call(st.context,_e,et,tt,rt,nt),!0}for(lt=1,ot=new Array(at-1);lt<at;lt++)ot[lt-1]=arguments[lt];st.fn.apply(st.context,ot)}else{var ct=st.length,ut;for(lt=0;lt<ct;lt++)switch(st[lt].once&&this.removeListener($,st[lt].fn,void 0,!0),at){case 1:st[lt].fn.call(st[lt].context);break;case 2:st[lt].fn.call(st[lt].context,_e);break;case 3:st[lt].fn.call(st[lt].context,_e,et);break;case 4:st[lt].fn.call(st[lt].context,_e,et,tt);break;default:if(!ot)for(ut=1,ot=new Array(at-1);ut<at;ut++)ot[ut-1]=arguments[ut];st[lt].fn.apply(st[lt].context,ot)}}return!0},j.prototype.on=function($,_e,et){return g(this,$,_e,et,!1)},j.prototype.once=function($,_e,et){return g(this,$,_e,et,!0)},j.prototype.removeListener=function($,_e,et,tt){var rt=o?o+$:$;if(!this._events[rt])return this;if(!_e)return b(this,rt),this;var nt=this._events[rt];if(nt.fn)nt.fn===_e&&(!tt||nt.once)&&(!et||nt.context===et)&&b(this,rt);else{for(var it=0,st=[],at=nt.length;it<at;it++)(nt[it].fn!==_e||tt&&!nt[it].once||et&&nt[it].context!==et)&&st.push(nt[it]);st.length?this._events[rt]=st.length===1?st[0]:st:b(this,rt)}return this},j.prototype.removeAllListeners=function($){var _e;return $?(_e=o?o+$:$,this._events[_e]&&b(this,_e)):(this._events=new d,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=o,j.EventEmitter=j,e.exports=j})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var eventCenter=new EventEmitter,TOOLTIP_SYNC_EVENT="recharts.syncEvent.tooltip",BRUSH_SYNC_EVENT="recharts.syncEvent.brush";function arrayTooltipSearcher(e,i){if(i){var o=Number.parseInt(i,10);if(!isNan(o))return e==null?void 0:e[o]}}var initialState$7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},optionsSlice=createSlice({name:"options",initialState:initialState$7,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),optionsReducer=optionsSlice.reducer,{createEventEmitter}=optionsSlice.actions;function selectSynchronisedTooltipState(e){return e.tooltip.syncInteraction}var initialChartDataState={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},chartDataSlice=createSlice({name:"chartData",initialState:initialChartDataState,reducers:{setChartData(e,i){if(e.chartData=i.payload,i.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}i.payload.length>0&&e.dataEndIndex!==i.payload.length-1&&(e.dataEndIndex=i.payload.length-1)},setComputedData(e,i){e.computedData=i.payload},setDataStartEndIndexes(e,i){var{startIndex:o,endIndex:d}=i.payload;o!=null&&(e.dataStartIndex=o),d!=null&&(e.dataEndIndex=d)}}}),{setChartData,setDataStartEndIndexes,setComputedData}=chartDataSlice.actions,chartDataReducer=chartDataSlice.reducer,_excluded$g=["x","y"];function ownKeys$f(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$f(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$f(Object(o),!0).forEach(function(d){_defineProperty$i(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$f(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$i(e,i,o){return(i=_toPropertyKey$i(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$i(e){var i=_toPrimitive$i(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$i(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _objectWithoutProperties$g(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$g(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$g(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}function useTooltipSyncEventsListener(){var e=useAppSelector(selectSyncId),i=useAppSelector(selectEventEmitter),o=useAppDispatch(),d=useAppSelector(selectSyncMethod),h=useAppSelector(selectTooltipAxisTicks),g=useChartLayout(),b=useViewBox(),j=useAppSelector(_=>_.rootProps.className);reactExports.useEffect(()=>{if(e==null)return noop$2;var _=($,_e,et)=>{if(i!==et&&e===$){if(d==="index"){var tt;if(b&&_e!==null&&_e!==void 0&&(tt=_e.payload)!==null&&tt!==void 0&&tt.coordinate&&_e.payload.sourceViewBox){var rt=_e.payload.coordinate,{x:nt,y:it}=rt,st=_objectWithoutProperties$g(rt,_excluded$g),{x:at,y:ot,width:lt,height:ct}=_e.payload.sourceViewBox,ut=_objectSpread$f(_objectSpread$f({},st),{},{x:b.x+(lt?(nt-at)/lt:0)*b.width,y:b.y+(ct?(it-ot)/ct:0)*b.height});o(_objectSpread$f(_objectSpread$f({},_e),{},{payload:_objectSpread$f(_objectSpread$f({},_e.payload),{},{coordinate:ut})}))}else o(_e);return}if(h!=null){var dt;if(typeof d=="function"){var mt={activeTooltipIndex:_e.payload.index==null?void 0:Number(_e.payload.index),isTooltipActive:_e.payload.active,activeIndex:_e.payload.index==null?void 0:Number(_e.payload.index),activeLabel:_e.payload.label,activeDataKey:_e.payload.dataKey,activeCoordinate:_e.payload.coordinate},xt=d(h,mt);dt=h[xt]}else d==="value"&&(dt=h.find(kt=>String(kt.value)===_e.payload.label));var{coordinate:ft}=_e.payload;if(dt==null||_e.payload.active===!1||ft==null||b==null){o(setSyncInteraction({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:gt,y:pt}=ft,yt=Math.min(gt,b.x+b.width),bt=Math.min(pt,b.y+b.height),St={x:g==="horizontal"?dt.coordinate:yt,y:g==="horizontal"?bt:dt.coordinate},wt=setSyncInteraction({active:_e.payload.active,coordinate:St,dataKey:_e.payload.dataKey,index:String(dt.index),label:_e.payload.label,sourceViewBox:_e.payload.sourceViewBox,graphicalItemId:_e.payload.graphicalItemId});o(wt)}}};return eventCenter.on(TOOLTIP_SYNC_EVENT,_),()=>{eventCenter.off(TOOLTIP_SYNC_EVENT,_)}},[j,o,i,e,d,h,g,b])}function useBrushSyncEventsListener(){var e=useAppSelector(selectSyncId),i=useAppSelector(selectEventEmitter),o=useAppDispatch();reactExports.useEffect(()=>{if(e==null)return noop$2;var d=(h,g,b)=>{i!==b&&e===h&&o(setDataStartEndIndexes(g))};return eventCenter.on(BRUSH_SYNC_EVENT,d),()=>{eventCenter.off(BRUSH_SYNC_EVENT,d)}},[o,i,e])}function useSynchronisedEventsFromOtherCharts(){var e=useAppDispatch();reactExports.useEffect(()=>{e(createEventEmitter())},[e]),useTooltipSyncEventsListener(),useBrushSyncEventsListener()}function useTooltipChartSynchronisation(e,i,o,d,h,g){var b=useAppSelector(rt=>selectTooltipDataKey(rt,e,i)),j=useAppSelector(selectEventEmitter),_=useAppSelector(selectSyncId),$=useAppSelector(selectSyncMethod),_e=useAppSelector(selectSynchronisedTooltipState),et=_e==null?void 0:_e.active,tt=useViewBox();reactExports.useEffect(()=>{if(!et&&_!=null&&j!=null){var rt=setSyncInteraction({active:g,coordinate:o,dataKey:b,index:h,label:typeof d=="number"?String(d):d,sourceViewBox:tt,graphicalItemId:void 0});eventCenter.emit(TOOLTIP_SYNC_EVENT,_,rt,j)}},[et,o,b,h,d,j,_,$,g,tt])}function ownKeys$e(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$e(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$e(Object(o),!0).forEach(function(d){_defineProperty$h(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$e(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$h(e,i,o){return(i=_toPropertyKey$h(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$h(e){var i=_toPrimitive$h(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$h(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function defaultUniqBy(e){return e.dataKey}function renderContent(e,i){return reactExports.isValidElement(e)?reactExports.cloneElement(e,i):typeof e=="function"?reactExports.createElement(e,i):reactExports.createElement(DefaultTooltipContent,i)}var emptyPayload=[],defaultTooltipProps={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Tooltip(e){var i,o,d=resolveDefaultProps(e,defaultTooltipProps),{active:h,allowEscapeViewBox:g,animationDuration:b,animationEasing:j,content:_,filterNull:$,isAnimationActive:_e,offset:et,payloadUniqBy:tt,position:rt,reverseDirection:nt,useTranslate3d:it,wrapperStyle:st,cursor:at,shared:ot,trigger:lt,defaultIndex:ct,portal:ut,axisId:dt}=d,mt=useAppDispatch(),xt=typeof ct=="number"?String(ct):ct;reactExports.useEffect(()=>{mt(setTooltipSettingsState({shared:ot,trigger:lt,axisId:dt,active:h,defaultIndex:xt}))},[mt,ot,lt,dt,h,xt]);var ft=useViewBox(),gt=useAccessibilityLayer(),pt=useTooltipEventType(ot),{activeIndex:yt,isActive:bt}=(i=useAppSelector(Wt=>selectIsTooltipActive(Wt,pt,lt,xt)))!==null&&i!==void 0?i:{},St=useAppSelector(Wt=>selectTooltipPayload(Wt,pt,lt,xt)),wt=useAppSelector(Wt=>selectActiveLabel(Wt,pt,lt,xt)),kt=useAppSelector(Wt=>selectActiveCoordinate(Wt,pt,lt,xt)),Et=St,jt=useTooltipPortal(),Rt=(o=h??bt)!==null&&o!==void 0?o:!1,[At,Dt]=useElementOffset([Et,Rt]),Nt=pt==="axis"?wt:void 0;useTooltipChartSynchronisation(pt,lt,kt,Nt,yt,Rt);var zt=ut??jt;if(zt==null||ft==null||pt==null)return null;var Vt=Et??emptyPayload;Rt||(Vt=emptyPayload),$&&Vt.length&&(Vt=getUniqPayload(Vt.filter(Wt=>Wt.value!=null&&(Wt.hide!==!0||d.includeHidden)),tt,defaultUniqBy));var Gt=Vt.length>0,Mt=reactExports.createElement(TooltipBoundingBox,{allowEscapeViewBox:g,animationDuration:b,animationEasing:j,isAnimationActive:_e,active:Rt,coordinate:kt,hasPayload:Gt,offset:et,position:rt,reverseDirection:nt,useTranslate3d:it,viewBox:ft,wrapperStyle:st,lastBoundingBox:At,innerRef:Dt,hasPortalFromProps:!!ut},renderContent(_,_objectSpread$e(_objectSpread$e({},d),{},{payload:Vt,label:Nt,active:Rt,activeIndex:yt,coordinate:kt,accessibilityLayer:gt})));return reactExports.createElement(reactExports.Fragment,null,reactDomExports.createPortal(Mt,zt),Rt&&reactExports.createElement(Cursor,{cursor:at,tooltipEventType:pt,coordinate:kt,payload:Vt,index:yt}))}var Cell=e=>null;Cell.displayName="Cell";function _defineProperty$g(e,i,o){return(i=_toPropertyKey$g(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$g(e){var i=_toPrimitive$g(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$g(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}class LRUCache{constructor(i){_defineProperty$g(this,"cache",new Map),this.maxSize=i}get(i){var o=this.cache.get(i);return o!==void 0&&(this.cache.delete(i),this.cache.set(i,o)),o}set(i,o){if(this.cache.has(i))this.cache.delete(i);else if(this.cache.size>=this.maxSize){var d=this.cache.keys().next().value;d!=null&&this.cache.delete(d)}this.cache.set(i,o)}clear(){this.cache.clear()}size(){return this.cache.size}}function ownKeys$d(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$d(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$d(Object(o),!0).forEach(function(d){_defineProperty$f(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$d(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$f(e,i,o){return(i=_toPropertyKey$f(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$f(e){var i=_toPrimitive$f(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$f(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var defaultConfig={cacheSize:2e3,enableCache:!0},currentConfig=_objectSpread$d({},defaultConfig),stringCache=new LRUCache(currentConfig.cacheSize),SPAN_STYLE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MEASUREMENT_SPAN_ID="recharts_measurement_span";function createCacheKey(e,i){var o=i.fontSize||"",d=i.fontFamily||"",h=i.fontWeight||"",g=i.fontStyle||"",b=i.letterSpacing||"",j=i.textTransform||"";return"".concat(e,"|").concat(o,"|").concat(d,"|").concat(h,"|").concat(g,"|").concat(b,"|").concat(j)}var measureTextWithDOM=(e,i)=>{try{var o=document.getElementById(MEASUREMENT_SPAN_ID);o||(o=document.createElement("span"),o.setAttribute("id",MEASUREMENT_SPAN_ID),o.setAttribute("aria-hidden","true"),document.body.appendChild(o)),Object.assign(o.style,SPAN_STYLE,i),o.textContent="".concat(e);var d=o.getBoundingClientRect();return{width:d.width,height:d.height}}catch{return{width:0,height:0}}},getStringSize=function e(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i==null||Global.isSsr)return{width:0,height:0};if(!currentConfig.enableCache)return measureTextWithDOM(i,o);var d=createCacheKey(i,o),h=stringCache.get(d);if(h)return h;var g=measureTextWithDOM(i,o);return stringCache.set(d,g),g},_DecimalCSS;function _defineProperty$e(e,i,o){return(i=_toPropertyKey$e(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$e(e){var i=_toPrimitive$e(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$e(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var MULTIPLY_OR_DIVIDE_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADD_OR_SUBTRACT_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CSS_LENGTH_UNIT_REGEX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NUM_SPLIT_REGEX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CONVERSION_RATES={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FIXED_CSS_LENGTH_UNITS=["cm","mm","pt","pc","in","Q","px"];function isSupportedUnit(e){return FIXED_CSS_LENGTH_UNITS.includes(e)}var STR_NAN="NaN";function convertToPx(e,i){return e*CONVERSION_RATES[i]}class DecimalCSS{static parse(i){var o,[,d,h]=(o=NUM_SPLIT_REGEX.exec(i))!==null&&o!==void 0?o:[];return d==null?DecimalCSS.NaN:new DecimalCSS(parseFloat(d),h??"")}constructor(i,o){this.num=i,this.unit=o,this.num=i,this.unit=o,isNan(i)&&(this.unit=""),o!==""&&!CSS_LENGTH_UNIT_REGEX.test(o)&&(this.num=NaN,this.unit=""),isSupportedUnit(o)&&(this.num=convertToPx(i,o),this.unit="px")}add(i){return this.unit!==i.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num+i.num,this.unit)}subtract(i){return this.unit!==i.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num-i.num,this.unit)}multiply(i){return this.unit!==""&&i.unit!==""&&this.unit!==i.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num*i.num,this.unit||i.unit)}divide(i){return this.unit!==""&&i.unit!==""&&this.unit!==i.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num/i.num,this.unit||i.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return isNan(this.num)}}_DecimalCSS=DecimalCSS;_defineProperty$e(DecimalCSS,"NaN",new _DecimalCSS(NaN,""));function calculateArithmetic(e){if(e==null||e.includes(STR_NAN))return STR_NAN;for(var i=e;i.includes("*")||i.includes("/");){var o,[,d,h,g]=(o=MULTIPLY_OR_DIVIDE_REGEX.exec(i))!==null&&o!==void 0?o:[],b=DecimalCSS.parse(d??""),j=DecimalCSS.parse(g??""),_=h==="*"?b.multiply(j):b.divide(j);if(_.isNaN())return STR_NAN;i=i.replace(MULTIPLY_OR_DIVIDE_REGEX,_.toString())}for(;i.includes("+")||/.-\d+(?:\.\d+)?/.test(i);){var $,[,_e,et,tt]=($=ADD_OR_SUBTRACT_REGEX.exec(i))!==null&&$!==void 0?$:[],rt=DecimalCSS.parse(_e??""),nt=DecimalCSS.parse(tt??""),it=et==="+"?rt.add(nt):rt.subtract(nt);if(it.isNaN())return STR_NAN;i=i.replace(ADD_OR_SUBTRACT_REGEX,it.toString())}return i}var PARENTHESES_REGEX=/\(([^()]*)\)/;function calculateParentheses(e){for(var i=e,o;(o=PARENTHESES_REGEX.exec(i))!=null;){var[,d]=o;i=i.replace(PARENTHESES_REGEX,calculateArithmetic(d))}return i}function evaluateExpression(e){var i=e.replace(/\s+/g,"");return i=calculateParentheses(i),i=calculateArithmetic(i),i}function safeEvaluateExpression(e){try{return evaluateExpression(e)}catch{return STR_NAN}}function reduceCSSCalc(e){var i=safeEvaluateExpression(e.slice(5,-1));return i===STR_NAN?"":i}var _excluded$f=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],_excluded2$8=["dx","dy","angle","className","breakAll"];function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$g.apply(null,arguments)}function _objectWithoutProperties$f(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$f(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$f(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}var BREAKING_SPACES=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=e=>{var{children:i,breakAll:o,style:d}=e;try{var h=[];isNullish(i)||(o?h=i.toString().split(""):h=i.toString().split(BREAKING_SPACES));var g=h.map(j=>({word:j,width:getStringSize(j,d).width})),b=o?0:getStringSize("",d).width;return{wordsWithComputedWidth:g,spaceWidth:b}}catch{return null}};function isValidTextAnchor(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var calculate=(e,i,o,d)=>e.reduce((h,g)=>{var{word:b,width:j}=g,_=h[h.length-1];if(_&&j!=null&&(i==null||d||_.width+j+o<Number(i)))_.words.push(b),_.width+=j+o;else{var $={words:[b],width:j};h.push($)}return h},[]),findLongestLine=e=>e.reduce((i,o)=>i.width>o.width?i:o),suffix="",checkOverflow=(e,i,o,d,h,g,b,j)=>{var _=e.slice(0,i),$=calculateWordWidths({breakAll:o,style:d,children:_+suffix});if(!$)return[!1,[]];var _e=calculate($.wordsWithComputedWidth,g,b,j),et=_e.length>h||findLongestLine(_e).width>Number(g);return[et,_e]},calculateWordsByLines=(e,i,o,d,h)=>{var{maxLines:g,children:b,style:j,breakAll:_}=e,$=isNumber(g),_e=String(b),et=calculate(i,d,o,h);if(!$||h)return et;var tt=et.length>g||findLongestLine(et).width>Number(d);if(!tt)return et;for(var rt=0,nt=_e.length-1,it=0,st;rt<=nt&&it<=_e.length-1;){var at=Math.floor((rt+nt)/2),ot=at-1,[lt,ct]=checkOverflow(_e,ot,_,j,g,d,o,h),[ut]=checkOverflow(_e,at,_,j,g,d,o,h);if(!lt&&!ut&&(rt=at+1),lt&&ut&&(nt=at-1),!lt&&ut){st=ct;break}it++}return st||et},getWordsWithoutCalculate=e=>{var i=isNullish(e)?[]:e.toString().split(BREAKING_SPACES);return[{words:i,width:void 0}]},getWordsByLines=e=>{var{width:i,scaleToFit:o,children:d,style:h,breakAll:g,maxLines:b}=e;if((i||o)&&!Global.isSsr){var j,_,$=calculateWordWidths({breakAll:g,children:d,style:h});if($){var{wordsWithComputedWidth:_e,spaceWidth:et}=$;j=_e,_=et}else return getWordsWithoutCalculate(d);return calculateWordsByLines({breakAll:g,children:d,maxLines:b,style:h},j,_,i,!!o)}return getWordsWithoutCalculate(d)},DEFAULT_FILL="#808080",textDefaultProps={angle:0,breakAll:!1,capHeight:"0.71em",fill:DEFAULT_FILL,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Text=reactExports.forwardRef((e,i)=>{var o=resolveDefaultProps(e,textDefaultProps),{x:d,y:h,lineHeight:g,capHeight:b,fill:j,scaleToFit:_,textAnchor:$,verticalAnchor:_e}=o,et=_objectWithoutProperties$f(o,_excluded$f),tt=reactExports.useMemo(()=>getWordsByLines({breakAll:et.breakAll,children:et.children,maxLines:et.maxLines,scaleToFit:_,style:et.style,width:et.width}),[et.breakAll,et.children,et.maxLines,_,et.style,et.width]),{dx:rt,dy:nt,angle:it,className:st,breakAll:at}=et,ot=_objectWithoutProperties$f(et,_excluded2$8);if(!isNumOrStr(d)||!isNumOrStr(h)||tt.length===0)return null;var lt=Number(d)+(isNumber(rt)?rt:0),ct=Number(h)+(isNumber(nt)?nt:0);if(!isWellBehavedNumber(lt)||!isWellBehavedNumber(ct))return null;var ut;switch(_e){case"start":ut=reduceCSSCalc("calc(".concat(b,")"));break;case"middle":ut=reduceCSSCalc("calc(".concat((tt.length-1)/2," * -").concat(g," + (").concat(b," / 2))"));break;default:ut=reduceCSSCalc("calc(".concat(tt.length-1," * -").concat(g,")"));break}var dt=[];if(_){var mt=tt[0].width,{width:xt}=et;dt.push("scale(".concat(isNumber(xt)&&isNumber(mt)?xt/mt:1,")"))}return it&&dt.push("rotate(".concat(it,", ").concat(lt,", ").concat(ct,")")),dt.length&&(ot.transform=dt.join(" ")),reactExports.createElement("text",_extends$g({},svgPropertiesAndEvents(ot),{ref:i,x:lt,y:ct,className:clsx("recharts-text",st),textAnchor:$,fill:j.includes("url")?DEFAULT_FILL:j}),tt.map((ft,gt)=>{var pt=ft.words.join(at?"":" ");return reactExports.createElement("tspan",{x:lt,dy:gt===0?ut:g,key:"".concat(pt,"-").concat(gt)},pt)}))});Text.displayName="Text";var _excluded$e=["labelRef"],_excluded2$7=["content"];function _objectWithoutProperties$e(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$e(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$e(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}function ownKeys$c(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$c(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$c(Object(o),!0).forEach(function(d){_defineProperty$d(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$c(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$d(e,i,o){return(i=_toPropertyKey$d(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$d(e){var i=_toPrimitive$d(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$d(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$f.apply(null,arguments)}var CartesianLabelContext=reactExports.createContext(null),CartesianLabelContextProvider=e=>{var{x:i,y:o,upperWidth:d,lowerWidth:h,width:g,height:b,children:j}=e,_=reactExports.useMemo(()=>({x:i,y:o,upperWidth:d,lowerWidth:h,width:g,height:b}),[i,o,d,h,g,b]);return reactExports.createElement(CartesianLabelContext.Provider,{value:_},j)},useCartesianLabelContext=()=>{var e=reactExports.useContext(CartesianLabelContext),i=useViewBox();return e||cartesianViewBoxToTrapezoid(i)},PolarLabelContext=reactExports.createContext(null),usePolarLabelContext=()=>{var e=reactExports.useContext(PolarLabelContext),i=useAppSelector(selectPolarViewBox);return e||i},getLabel=e=>{var{value:i,formatter:o}=e,d=isNullish(e.children)?i:e.children;return typeof o=="function"?o(d):d},isLabelContentAFunction=e=>e!=null&&typeof e=="function",getDeltaAngle=(e,i)=>{var o=mathSign(i-e),d=Math.min(Math.abs(i-e),360);return o*d},renderRadialLabel=(e,i,o,d,h)=>{var{offset:g,className:b}=e,{cx:j,cy:_,innerRadius:$,outerRadius:_e,startAngle:et,endAngle:tt,clockWise:rt}=h,nt=($+_e)/2,it=getDeltaAngle(et,tt),st=it>=0?1:-1,at,ot;switch(i){case"insideStart":at=et+st*g,ot=rt;break;case"insideEnd":at=tt-st*g,ot=!rt;break;case"end":at=tt+st*g,ot=rt;break;default:throw new Error("Unsupported position ".concat(i))}ot=it<=0?ot:!ot;var lt=polarToCartesian(j,_,nt,at),ct=polarToCartesian(j,_,nt,at+(ot?1:-1)*359),ut="M".concat(lt.x,",").concat(lt.y,`
    A`).concat(nt,",").concat(nt,",0,1,").concat(ot?0:1,`,
    `).concat(ct.x,",").concat(ct.y),dt=isNullish(e.id)?uniqueId("recharts-radial-line-"):e.id;return reactExports.createElement("text",_extends$f({},d,{dominantBaseline:"central",className:clsx("recharts-radial-bar-label",b)}),reactExports.createElement("defs",null,reactExports.createElement("path",{id:dt,d:ut})),reactExports.createElement("textPath",{xlinkHref:"#".concat(dt)},o))},getAttrsOfPolarLabel=(e,i,o)=>{var{cx:d,cy:h,innerRadius:g,outerRadius:b,startAngle:j,endAngle:_}=e,$=(j+_)/2;if(o==="outside"){var{x:_e,y:et}=polarToCartesian(d,h,b+i,$);return{x:_e,y:et,textAnchor:_e>=d?"start":"end",verticalAnchor:"middle"}}if(o==="center")return{x:d,y:h,textAnchor:"middle",verticalAnchor:"middle"};if(o==="centerTop")return{x:d,y:h,textAnchor:"middle",verticalAnchor:"start"};if(o==="centerBottom")return{x:d,y:h,textAnchor:"middle",verticalAnchor:"end"};var tt=(g+b)/2,{x:rt,y:nt}=polarToCartesian(d,h,tt,$);return{x:rt,y:nt,textAnchor:"middle",verticalAnchor:"middle"}},isPolar=e=>"cx"in e&&isNumber(e.cx),getAttrsOfCartesianLabel=(e,i)=>{var{parentViewBox:o,offset:d,position:h}=e,g;o!=null&&!isPolar(o)&&(g=o);var{x:b,y:j,upperWidth:_,lowerWidth:$,height:_e}=i,et=b,tt=b+(_-$)/2,rt=(et+tt)/2,nt=(_+$)/2,it=et+_/2,st=_e>=0?1:-1,at=st*d,ot=st>0?"end":"start",lt=st>0?"start":"end",ct=_>=0?1:-1,ut=ct*d,dt=ct>0?"end":"start",mt=ct>0?"start":"end";if(h==="top"){var xt={x:et+_/2,y:j-at,textAnchor:"middle",verticalAnchor:ot};return _objectSpread$c(_objectSpread$c({},xt),g?{height:Math.max(j-g.y,0),width:_}:{})}if(h==="bottom"){var ft={x:tt+$/2,y:j+_e+at,textAnchor:"middle",verticalAnchor:lt};return _objectSpread$c(_objectSpread$c({},ft),g?{height:Math.max(g.y+g.height-(j+_e),0),width:$}:{})}if(h==="left"){var gt={x:rt-ut,y:j+_e/2,textAnchor:dt,verticalAnchor:"middle"};return _objectSpread$c(_objectSpread$c({},gt),g?{width:Math.max(gt.x-g.x,0),height:_e}:{})}if(h==="right"){var pt={x:rt+nt+ut,y:j+_e/2,textAnchor:mt,verticalAnchor:"middle"};return _objectSpread$c(_objectSpread$c({},pt),g?{width:Math.max(g.x+g.width-pt.x,0),height:_e}:{})}var yt=g?{width:nt,height:_e}:{};return h==="insideLeft"?_objectSpread$c({x:rt+ut,y:j+_e/2,textAnchor:mt,verticalAnchor:"middle"},yt):h==="insideRight"?_objectSpread$c({x:rt+nt-ut,y:j+_e/2,textAnchor:dt,verticalAnchor:"middle"},yt):h==="insideTop"?_objectSpread$c({x:et+_/2,y:j+at,textAnchor:"middle",verticalAnchor:lt},yt):h==="insideBottom"?_objectSpread$c({x:tt+$/2,y:j+_e-at,textAnchor:"middle",verticalAnchor:ot},yt):h==="insideTopLeft"?_objectSpread$c({x:et+ut,y:j+at,textAnchor:mt,verticalAnchor:lt},yt):h==="insideTopRight"?_objectSpread$c({x:et+_-ut,y:j+at,textAnchor:dt,verticalAnchor:lt},yt):h==="insideBottomLeft"?_objectSpread$c({x:tt+ut,y:j+_e-at,textAnchor:mt,verticalAnchor:ot},yt):h==="insideBottomRight"?_objectSpread$c({x:tt+$-ut,y:j+_e-at,textAnchor:dt,verticalAnchor:ot},yt):h&&typeof h=="object"&&(isNumber(h.x)||isPercent(h.x))&&(isNumber(h.y)||isPercent(h.y))?_objectSpread$c({x:b+getPercentValue(h.x,nt),y:j+getPercentValue(h.y,_e),textAnchor:"end",verticalAnchor:"end"},yt):_objectSpread$c({x:it,y:j+_e/2,textAnchor:"middle",verticalAnchor:"middle"},yt)},defaultLabelProps={angle:0,offset:5,zIndex:DefaultZIndexes.label,position:"middle",textBreakAll:!1};function Label(e){var i=resolveDefaultProps(e,defaultLabelProps),{viewBox:o,position:d,value:h,children:g,content:b,className:j="",textBreakAll:_,labelRef:$}=i,_e=usePolarLabelContext(),et=useCartesianLabelContext(),tt=d==="center"?et:_e??et,rt,nt,it;if(o==null?rt=tt:isPolar(o)?rt=o:rt=cartesianViewBoxToTrapezoid(o),!rt||isNullish(h)&&isNullish(g)&&!reactExports.isValidElement(b)&&typeof b!="function")return null;var st=_objectSpread$c(_objectSpread$c({},i),{},{viewBox:rt});if(reactExports.isValidElement(b)){var at=_objectWithoutProperties$e(st,_excluded$e);return reactExports.cloneElement(b,at)}if(typeof b=="function"){var ot=_objectWithoutProperties$e(st,_excluded2$7);if(nt=reactExports.createElement(b,ot),reactExports.isValidElement(nt))return nt}else nt=getLabel(i);var lt=svgPropertiesAndEvents(i);if(isPolar(rt)){if(d==="insideStart"||d==="insideEnd"||d==="end")return renderRadialLabel(i,d,nt,lt,rt);it=getAttrsOfPolarLabel(rt,i.offset,i.position)}else it=getAttrsOfCartesianLabel(i,rt);return reactExports.createElement(ZIndexLayer,{zIndex:i.zIndex},reactExports.createElement(Text,_extends$f({ref:$,className:clsx("recharts-label",j)},lt,it,{textAnchor:isValidTextAnchor(lt.textAnchor)?lt.textAnchor:it.textAnchor,breakAll:_}),nt))}Label.displayName="Label";var parseLabel=(e,i,o)=>{if(!e)return null;var d={viewBox:i,labelRef:o};return e===!0?reactExports.createElement(Label,_extends$f({key:"label-implicit"},d)):isNumOrStr(e)?reactExports.createElement(Label,_extends$f({key:"label-implicit",value:e},d)):reactExports.isValidElement(e)?e.type===Label?reactExports.cloneElement(e,_objectSpread$c({key:"label-implicit"},d)):reactExports.createElement(Label,_extends$f({key:"label-implicit",content:e},d)):isLabelContentAFunction(e)?reactExports.createElement(Label,_extends$f({key:"label-implicit",content:e},d)):e&&typeof e=="object"?reactExports.createElement(Label,_extends$f({},e,{key:"label-implicit"},d)):null};function CartesianLabelFromLabelProp(e){var{label:i,labelRef:o}=e,d=useCartesianLabelContext();return parseLabel(i,d,o)||null}var last$3={},last$2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){return o[o.length-1]}e.last=i})(last$2);var toArray$1={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){return Array.isArray(o)?o:Array.from(o)}e.toArray=i})(toArray$1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const i=last$2,o=toArray$1,d=isArrayLike;function h(g){if(d.isArrayLike(g))return i.last(o.toArray(g))}e.last=h})(last$3);var last=last$3.last;const last$1=getDefaultExportFromCjs(last);var _excluded$d=["valueAccessor"],_excluded2$6=["dataKey","clockWise","id","textBreakAll","zIndex"];function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$e.apply(null,arguments)}function _objectWithoutProperties$d(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$d(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$d(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}var defaultAccessor=e=>Array.isArray(e.value)?last$1(e.value):e.value,CartesianLabelListContext=reactExports.createContext(void 0),CartesianLabelListContextProvider=CartesianLabelListContext.Provider,PolarLabelListContext=reactExports.createContext(void 0);PolarLabelListContext.Provider;function useCartesianLabelListContext(){return reactExports.useContext(CartesianLabelListContext)}function usePolarLabelListContext(){return reactExports.useContext(PolarLabelListContext)}function LabelList(e){var{valueAccessor:i=defaultAccessor}=e,o=_objectWithoutProperties$d(e,_excluded$d),{dataKey:d,clockWise:h,id:g,textBreakAll:b,zIndex:j}=o,_=_objectWithoutProperties$d(o,_excluded2$6),$=useCartesianLabelListContext(),_e=usePolarLabelListContext(),et=$||_e;return!et||!et.length?null:reactExports.createElement(ZIndexLayer,{zIndex:j??DefaultZIndexes.label},reactExports.createElement(Layer,{className:"recharts-label-list"},et.map((tt,rt)=>{var nt,it=isNullish(d)?i(tt,rt):getValueByDataKey(tt&&tt.payload,d),st=isNullish(g)?{}:{id:"".concat(g,"-").concat(rt)};return reactExports.createElement(Label,_extends$e({key:"label-".concat(rt)},svgPropertiesAndEvents(tt),_,st,{fill:(nt=o.fill)!==null&&nt!==void 0?nt:tt.fill,parentViewBox:tt.parentViewBox,value:it,textBreakAll:b,viewBox:tt.viewBox,index:rt,zIndex:0}))})))}LabelList.displayName="LabelList";function LabelListFromLabelProp(e){var{label:i}=e;return i?i===!0?reactExports.createElement(LabelList,{key:"labelList-implicit"}):reactExports.isValidElement(i)||isLabelContentAFunction(i)?reactExports.createElement(LabelList,{key:"labelList-implicit",content:i}):typeof i=="object"?reactExports.createElement(LabelList,_extends$e({key:"labelList-implicit"},i,{type:String(i.type)})):null:null}function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$d.apply(null,arguments)}var Dot=e=>{var{cx:i,cy:o,r:d,className:h}=e,g=clsx("recharts-dot",h);return isNumber(i)&&isNumber(o)&&isNumber(d)?reactExports.createElement("circle",_extends$d({},svgPropertiesNoEvents(e),adaptEventHandlers(e),{className:g,cx:i,cy:o,r:d})):null},initialState$6={radiusAxis:{},angleAxis:{}},polarAxisSlice=createSlice({name:"polarAxis",initialState:initialState$6,reducers:{addRadiusAxis(e,i){e.radiusAxis[i.payload.id]=i.payload},removeRadiusAxis(e,i){delete e.radiusAxis[i.payload.id]},addAngleAxis(e,i){e.angleAxis[i.payload.id]=i.payload},removeAngleAxis(e,i){delete e.angleAxis[i.payload.id]}}}),polarAxisReducer=polarAxisSlice.reducer,reactIs={exports:{}},reactIs_production={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var REACT_ELEMENT_TYPE=Symbol.for("react.transitional.element"),REACT_PORTAL_TYPE=Symbol.for("react.portal"),REACT_FRAGMENT_TYPE=Symbol.for("react.fragment"),REACT_STRICT_MODE_TYPE=Symbol.for("react.strict_mode"),REACT_PROFILER_TYPE=Symbol.for("react.profiler"),REACT_CONSUMER_TYPE=Symbol.for("react.consumer"),REACT_CONTEXT_TYPE=Symbol.for("react.context"),REACT_FORWARD_REF_TYPE=Symbol.for("react.forward_ref"),REACT_SUSPENSE_TYPE=Symbol.for("react.suspense"),REACT_SUSPENSE_LIST_TYPE=Symbol.for("react.suspense_list"),REACT_MEMO_TYPE=Symbol.for("react.memo"),REACT_LAZY_TYPE=Symbol.for("react.lazy"),REACT_VIEW_TRANSITION_TYPE=Symbol.for("react.view_transition"),REACT_CLIENT_REFERENCE=Symbol.for("react.client.reference");function typeOf(e){if(typeof e=="object"&&e!==null){var i=e.$$typeof;switch(i){case REACT_ELEMENT_TYPE:switch(e=e.type,e){case REACT_FRAGMENT_TYPE:case REACT_PROFILER_TYPE:case REACT_STRICT_MODE_TYPE:case REACT_SUSPENSE_TYPE:case REACT_SUSPENSE_LIST_TYPE:case REACT_VIEW_TRANSITION_TYPE:return e;default:switch(e=e&&e.$$typeof,e){case REACT_CONTEXT_TYPE:case REACT_FORWARD_REF_TYPE:case REACT_LAZY_TYPE:case REACT_MEMO_TYPE:return e;case REACT_CONSUMER_TYPE:return e;default:return i}}case REACT_PORTAL_TYPE:return i}}}reactIs_production.ContextConsumer=REACT_CONSUMER_TYPE;reactIs_production.ContextProvider=REACT_CONTEXT_TYPE;reactIs_production.Element=REACT_ELEMENT_TYPE;reactIs_production.ForwardRef=REACT_FORWARD_REF_TYPE;reactIs_production.Fragment=REACT_FRAGMENT_TYPE;reactIs_production.Lazy=REACT_LAZY_TYPE;reactIs_production.Memo=REACT_MEMO_TYPE;reactIs_production.Portal=REACT_PORTAL_TYPE;reactIs_production.Profiler=REACT_PROFILER_TYPE;reactIs_production.StrictMode=REACT_STRICT_MODE_TYPE;reactIs_production.Suspense=REACT_SUSPENSE_TYPE;reactIs_production.SuspenseList=REACT_SUSPENSE_LIST_TYPE;reactIs_production.isContextConsumer=function(e){return typeOf(e)===REACT_CONSUMER_TYPE};reactIs_production.isContextProvider=function(e){return typeOf(e)===REACT_CONTEXT_TYPE};reactIs_production.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===REACT_ELEMENT_TYPE};reactIs_production.isForwardRef=function(e){return typeOf(e)===REACT_FORWARD_REF_TYPE};reactIs_production.isFragment=function(e){return typeOf(e)===REACT_FRAGMENT_TYPE};reactIs_production.isLazy=function(e){return typeOf(e)===REACT_LAZY_TYPE};reactIs_production.isMemo=function(e){return typeOf(e)===REACT_MEMO_TYPE};reactIs_production.isPortal=function(e){return typeOf(e)===REACT_PORTAL_TYPE};reactIs_production.isProfiler=function(e){return typeOf(e)===REACT_PROFILER_TYPE};reactIs_production.isStrictMode=function(e){return typeOf(e)===REACT_STRICT_MODE_TYPE};reactIs_production.isSuspense=function(e){return typeOf(e)===REACT_SUSPENSE_TYPE};reactIs_production.isSuspenseList=function(e){return typeOf(e)===REACT_SUSPENSE_LIST_TYPE};reactIs_production.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===REACT_FRAGMENT_TYPE||e===REACT_PROFILER_TYPE||e===REACT_STRICT_MODE_TYPE||e===REACT_SUSPENSE_TYPE||e===REACT_SUSPENSE_LIST_TYPE||typeof e=="object"&&e!==null&&(e.$$typeof===REACT_LAZY_TYPE||e.$$typeof===REACT_MEMO_TYPE||e.$$typeof===REACT_CONTEXT_TYPE||e.$$typeof===REACT_CONSUMER_TYPE||e.$$typeof===REACT_FORWARD_REF_TYPE||e.$$typeof===REACT_CLIENT_REFERENCE||e.getModuleId!==void 0)};reactIs_production.typeOf=typeOf;reactIs.exports=reactIs_production;var reactIsExports=reactIs.exports,getDisplayName=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",lastChildren=null,lastResult=null,toArray=e=>{if(e===lastChildren&&Array.isArray(lastResult))return lastResult;var i=[];return reactExports.Children.forEach(e,o=>{isNullish(o)||(reactIsExports.isFragment(o)?i=i.concat(toArray(o.props.children)):i.push(o))}),lastResult=i,lastChildren=e,i};function findAllByType(e,i){var o=[],d=[];return Array.isArray(i)?d=i.map(h=>getDisplayName(h)):d=[getDisplayName(i)],toArray(e).forEach(h=>{var g=get$2(h,"type.displayName")||get$2(h,"type.name");g&&d.indexOf(g)!==-1&&o.push(h)}),o}var isClipDot=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,isPlainObject$2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function i(o){var h;if(typeof o!="object"||o==null)return!1;if(Object.getPrototypeOf(o)===null)return!0;if(Object.prototype.toString.call(o)!=="[object Object]"){const g=o[Symbol.toStringTag];return g==null||!((h=Object.getOwnPropertyDescriptor(o,Symbol.toStringTag))!=null&&h.writable)?!1:o.toString()===`[object ${g}]`}let d=o;for(;Object.getPrototypeOf(d)!==null;)d=Object.getPrototypeOf(d);return Object.getPrototypeOf(o)===d}e.isPlainObject=i})(isPlainObject$2);var isPlainObject=isPlainObject$2.isPlainObject;const isPlainObject$1=getDefaultExportFromCjs(isPlainObject);var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;function ownKeys$b(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$b(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$b(Object(o),!0).forEach(function(d){_defineProperty$c(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$b(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$c(e,i,o){return(i=_toPropertyKey$c(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$c(e){var i=_toPrimitive$c(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$c(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$c.apply(null,arguments)}function _taggedTemplateLiteral(e,i){return i||(i=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(i)}}))}var getTrapezoidPath=(e,i,o,d,h)=>{var g=o-d,b;return b=roundTemplateLiteral(_templateObject||(_templateObject=_taggedTemplateLiteral(["M ",",",""])),e,i),b+=roundTemplateLiteral(_templateObject2||(_templateObject2=_taggedTemplateLiteral(["L ",",",""])),e+o,i),b+=roundTemplateLiteral(_templateObject3||(_templateObject3=_taggedTemplateLiteral(["L ",",",""])),e+o-g/2,i+h),b+=roundTemplateLiteral(_templateObject4||(_templateObject4=_taggedTemplateLiteral(["L ",",",""])),e+o-g/2-d,i+h),b+=roundTemplateLiteral(_templateObject5||(_templateObject5=_taggedTemplateLiteral(["L ",","," Z"])),e,i),b},defaultTrapezoidProps={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Trapezoid=e=>{var i=resolveDefaultProps(e,defaultTrapezoidProps),{x:o,y:d,upperWidth:h,lowerWidth:g,height:b,className:j}=i,{animationEasing:_,animationDuration:$,animationBegin:_e,isUpdateAnimationActive:et}=i,tt=reactExports.useRef(null),[rt,nt]=reactExports.useState(-1),it=reactExports.useRef(h),st=reactExports.useRef(g),at=reactExports.useRef(b),ot=reactExports.useRef(o),lt=reactExports.useRef(d),ct=useAnimationId(e,"trapezoid-");if(reactExports.useEffect(()=>{if(tt.current&&tt.current.getTotalLength)try{var St=tt.current.getTotalLength();St&&nt(St)}catch{}},[]),o!==+o||d!==+d||h!==+h||g!==+g||b!==+b||h===0&&g===0||b===0)return null;var ut=clsx("recharts-trapezoid",j);if(!et)return reactExports.createElement("g",null,reactExports.createElement("path",_extends$c({},svgPropertiesAndEvents(i),{className:ut,d:getTrapezoidPath(o,d,h,g,b)})));var dt=it.current,mt=st.current,xt=at.current,ft=ot.current,gt=lt.current,pt="0px ".concat(rt===-1?1:rt,"px"),yt="".concat(rt,"px 0px"),bt=getTransitionVal(["strokeDasharray"],$,_);return reactExports.createElement(JavascriptAnimate,{animationId:ct,key:ct,canBegin:rt>0,duration:$,easing:_,isActive:et,begin:_e},St=>{var wt=interpolate$1(dt,h,St),kt=interpolate$1(mt,g,St),Et=interpolate$1(xt,b,St),jt=interpolate$1(ft,o,St),Rt=interpolate$1(gt,d,St);tt.current&&(it.current=wt,st.current=kt,at.current=Et,ot.current=jt,lt.current=Rt);var At=St>0?{transition:bt,strokeDasharray:yt}:{strokeDasharray:pt};return reactExports.createElement("path",_extends$c({},svgPropertiesAndEvents(i),{className:ut,d:getTrapezoidPath(jt,Rt,wt,kt,Et),ref:tt,style:_objectSpread$b(_objectSpread$b({},At),i.style)}))})},_excluded$c=["option","shapeType","activeClassName"];function _objectWithoutProperties$c(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$c(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$c(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}function ownKeys$a(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$a(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$a(Object(o),!0).forEach(function(d){_defineProperty$b(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$a(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$b(e,i,o){return(i=_toPropertyKey$b(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$b(e){var i=_toPrimitive$b(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$b(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function defaultPropTransformer(e,i){return _objectSpread$a(_objectSpread$a({},i),e)}function isSymbolsProps(e,i){return e==="symbols"}function ShapeSelector(e){var{shapeType:i,elementProps:o}=e;switch(i){case"rectangle":return reactExports.createElement(Rectangle,o);case"trapezoid":return reactExports.createElement(Trapezoid,o);case"sector":return reactExports.createElement(Sector,o);case"symbols":if(isSymbolsProps(i))return reactExports.createElement(Symbols,o);break;case"curve":return reactExports.createElement(Curve,o);default:return null}}function getPropsFromShapeOption(e){return reactExports.isValidElement(e)?e.props:e}function Shape(e){var{option:i,shapeType:o,activeClassName:d="recharts-active-shape"}=e,h=_objectWithoutProperties$c(e,_excluded$c),g;if(reactExports.isValidElement(i))g=reactExports.cloneElement(i,_objectSpread$a(_objectSpread$a({},h),getPropsFromShapeOption(i)));else if(typeof i=="function")g=i(h,h.index);else if(isPlainObject$1(i)&&typeof i!="boolean"){var b=defaultPropTransformer(i,h);g=reactExports.createElement(ShapeSelector,{shapeType:o,elementProps:b})}else{var j=h;g=reactExports.createElement(ShapeSelector,{shapeType:o,elementProps:j})}return h.isActive?reactExports.createElement(Layer,{className:d},g):g}var useMouseEnterItemDispatch=(e,i,o)=>{var d=useAppDispatch();return(h,g)=>b=>{e==null||e(h,g,b),d(setActiveMouseOverItemIndex({activeIndex:String(g),activeDataKey:i,activeCoordinate:h.tooltipPosition,activeGraphicalItemId:o}))}},useMouseLeaveItemDispatch=e=>{var i=useAppDispatch();return(o,d)=>h=>{e==null||e(o,d,h),i(mouseLeaveItem())}},useMouseClickItemDispatch=(e,i,o)=>{var d=useAppDispatch();return(h,g)=>b=>{e==null||e(h,g,b),d(setActiveClickItemIndex({activeIndex:String(g),activeDataKey:i,activeCoordinate:h.tooltipPosition,activeGraphicalItemId:o}))}};function SetTooltipEntrySettings(e){var{tooltipEntrySettings:i}=e,o=useAppDispatch(),d=useIsPanorama(),h=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>{d||(h.current===null?o(addTooltipEntrySettings(i)):h.current!==i&&o(replaceTooltipEntrySettings({prev:h.current,next:i})),h.current=i)},[i,o,d]),reactExports.useLayoutEffect(()=>()=>{h.current&&(o(removeTooltipEntrySettings(h.current)),h.current=null)},[o]),null}function SetLegendPayload(e){var{legendPayload:i}=e,o=useAppDispatch(),d=useIsPanorama(),h=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>{d||(h.current===null?o(addLegendPayload(i)):h.current!==i&&o(replaceLegendPayload({prev:h.current,next:i})),h.current=i)},[o,d,i]),reactExports.useLayoutEffect(()=>()=>{h.current&&(o(removeLegendPayload(h.current)),h.current=null)},[o]),null}var _ref,useIdFallback=()=>{var[e]=reactExports.useState(()=>uniqueId("uid-"));return e},useId=(_ref=React$3.useId)!==null&&_ref!==void 0?_ref:useIdFallback;function useUniqueId(e,i){var o=useId();return i||(e?"".concat(e,"-").concat(o):o)}var GraphicalItemIdContext=reactExports.createContext(void 0),RegisterGraphicalItemId=e=>{var{id:i,type:o,children:d}=e,h=useUniqueId("recharts-".concat(o),i);return reactExports.createElement(GraphicalItemIdContext.Provider,{value:h},d(h))},initialState$5={cartesianItems:[],polarItems:[]},graphicalItemsSlice=createSlice({name:"graphicalItems",initialState:initialState$5,reducers:{addCartesianGraphicalItem:{reducer(e,i){e.cartesianItems.push(i.payload)},prepare:prepareAutoBatched()},replaceCartesianGraphicalItem:{reducer(e,i){var{prev:o,next:d}=i.payload,h=current$1(e).cartesianItems.indexOf(o);h>-1&&(e.cartesianItems[h]=d)},prepare:prepareAutoBatched()},removeCartesianGraphicalItem:{reducer(e,i){var o=current$1(e).cartesianItems.indexOf(i.payload);o>-1&&e.cartesianItems.splice(o,1)},prepare:prepareAutoBatched()},addPolarGraphicalItem:{reducer(e,i){e.polarItems.push(i.payload)},prepare:prepareAutoBatched()},removePolarGraphicalItem:{reducer(e,i){var o=current$1(e).polarItems.indexOf(i.payload);o>-1&&e.polarItems.splice(o,1)},prepare:prepareAutoBatched()}}}),{addCartesianGraphicalItem,replaceCartesianGraphicalItem,removeCartesianGraphicalItem,addPolarGraphicalItem,removePolarGraphicalItem}=graphicalItemsSlice.actions,graphicalItemsReducer=graphicalItemsSlice.reducer,SetCartesianGraphicalItemImpl=e=>{var i=useAppDispatch(),o=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>{o.current===null?i(addCartesianGraphicalItem(e)):o.current!==e&&i(replaceCartesianGraphicalItem({prev:o.current,next:e})),o.current=e},[i,e]),reactExports.useLayoutEffect(()=>()=>{o.current&&(i(removeCartesianGraphicalItem(o.current)),o.current=null)},[i]),null},SetCartesianGraphicalItem=reactExports.memo(SetCartesianGraphicalItemImpl),_excluded$b=["points"];function ownKeys$9(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$9(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$9(Object(o),!0).forEach(function(d){_defineProperty$a(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$9(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$a(e,i,o){return(i=_toPropertyKey$a(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$a(e){var i=_toPrimitive$a(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$a(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$b.apply(null,arguments)}function _objectWithoutProperties$b(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$b(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$b(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}function DotItem(e){var{option:i,dotProps:o,className:d}=e;if(reactExports.isValidElement(i))return reactExports.cloneElement(i,o);if(typeof i=="function")return i(o);var h=clsx(d,typeof i!="boolean"?i.className:""),g=o??{},b=_objectWithoutProperties$b(g,_excluded$b);return reactExports.createElement(Dot,_extends$b({},b,{className:h}))}function shouldRenderDots(e,i){return e==null?!1:i?!0:e.length===1}function Dots(e){var{points:i,dot:o,className:d,dotClassName:h,dataKey:g,baseProps:b,needClip:j,clipPathId:_,zIndex:$=DefaultZIndexes.scatter}=e;if(!shouldRenderDots(i,o))return null;var _e=isClipDot(o),et=svgPropertiesAndEventsFromUnknown(o),tt=i.map((nt,it)=>{var st,at,ot=_objectSpread$9(_objectSpread$9(_objectSpread$9({r:3},b),et),{},{index:it,cx:(st=nt.x)!==null&&st!==void 0?st:void 0,cy:(at=nt.y)!==null&&at!==void 0?at:void 0,dataKey:g,value:nt.value,payload:nt.payload,points:i});return reactExports.createElement(DotItem,{key:"dot-".concat(it),option:o,dotProps:ot,className:h})}),rt={};return j&&_!=null&&(rt.clipPath="url(#clipPath-".concat(_e?"":"dots-").concat(_,")")),reactExports.createElement(ZIndexLayer,{zIndex:$},reactExports.createElement(Layer,_extends$b({className:d},rt),tt))}function ownKeys$8(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$8(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$8(Object(o),!0).forEach(function(d){_defineProperty$9(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$8(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$9(e,i,o){return(i=_toPropertyKey$9(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$9(e){var i=_toPrimitive$9(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$9(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var defaultAxisId=0,initialState$4={xAxis:{},yAxis:{},zAxis:{}},cartesianAxisSlice=createSlice({name:"cartesianAxis",initialState:initialState$4,reducers:{addXAxis:{reducer(e,i){e.xAxis[i.payload.id]=i.payload},prepare:prepareAutoBatched()},replaceXAxis:{reducer(e,i){var{prev:o,next:d}=i.payload;e.xAxis[o.id]!==void 0&&(o.id!==d.id&&delete e.xAxis[o.id],e.xAxis[d.id]=d)},prepare:prepareAutoBatched()},removeXAxis:{reducer(e,i){delete e.xAxis[i.payload.id]},prepare:prepareAutoBatched()},addYAxis:{reducer(e,i){e.yAxis[i.payload.id]=i.payload},prepare:prepareAutoBatched()},replaceYAxis:{reducer(e,i){var{prev:o,next:d}=i.payload;e.yAxis[o.id]!==void 0&&(o.id!==d.id&&delete e.yAxis[o.id],e.yAxis[d.id]=d)},prepare:prepareAutoBatched()},removeYAxis:{reducer(e,i){delete e.yAxis[i.payload.id]},prepare:prepareAutoBatched()},addZAxis:{reducer(e,i){e.zAxis[i.payload.id]=i.payload},prepare:prepareAutoBatched()},replaceZAxis:{reducer(e,i){var{prev:o,next:d}=i.payload;e.zAxis[o.id]!==void 0&&(o.id!==d.id&&delete e.zAxis[o.id],e.zAxis[d.id]=d)},prepare:prepareAutoBatched()},removeZAxis:{reducer(e,i){delete e.zAxis[i.payload.id]},prepare:prepareAutoBatched()},updateYAxisWidth(e,i){var{id:o,width:d}=i.payload,h=e.yAxis[o];if(h){var g=h.widthHistory||[];if(g.length===3&&g[0]===g[2]&&d===g[1]&&d!==h.width&&Math.abs(d-g[0])<=1)return;var b=[...g,d].slice(-3);e.yAxis[o]=_objectSpread$8(_objectSpread$8({},e.yAxis[o]),{},{width:d,widthHistory:b})}}}}),{addXAxis,replaceXAxis,removeXAxis,addYAxis,replaceYAxis,removeYAxis,addZAxis,replaceZAxis,removeZAxis,updateYAxisWidth}=cartesianAxisSlice.actions,cartesianAxisReducer=cartesianAxisSlice.reducer,selectChartOffset=createSelector([selectChartOffsetInternal],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),selectPlotArea=createSelector([selectChartOffset,selectChartWidth,selectChartHeight],(e,i,o)=>{if(!(!e||i==null||o==null))return{x:e.left,y:e.top,width:Math.max(0,i-e.left-e.right),height:Math.max(0,o-e.top-e.bottom)}}),usePlotArea=()=>useAppSelector(selectPlotArea),useActiveTooltipDataPoints=()=>useAppSelector(selectActiveTooltipDataPoints);function ownKeys$7(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$7(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$7(Object(o),!0).forEach(function(d){_defineProperty$8(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$7(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$8(e,i,o){return(i=_toPropertyKey$8(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$8(e){var i=_toPrimitive$8(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$8(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var ActivePoint=e=>{var{point:i,childIndex:o,mainColor:d,activeDot:h,dataKey:g,clipPath:b}=e;if(h===!1||i.x==null||i.y==null)return null;var j={index:o,dataKey:g,cx:i.x,cy:i.y,r:4,fill:d??"none",strokeWidth:2,stroke:"#fff",payload:i.payload,value:i.value},_=_objectSpread$7(_objectSpread$7(_objectSpread$7({},j),svgPropertiesNoEventsFromUnknown(h)),adaptEventHandlers(h)),$;return reactExports.isValidElement(h)?$=reactExports.cloneElement(h,_):typeof h=="function"?$=h(_):$=reactExports.createElement(Dot,_),reactExports.createElement(Layer,{className:"recharts-active-dot",clipPath:b},$)};function ActivePoints(e){var{points:i,mainColor:o,activeDot:d,itemDataKey:h,clipPath:g,zIndex:b=DefaultZIndexes.activeDot}=e,j=useAppSelector(selectActiveTooltipIndex),_=useActiveTooltipDataPoints();if(i==null||_==null)return null;var $=i.find(_e=>_.includes(_e.payload));return isNullish($)?null:reactExports.createElement(ZIndexLayer,{zIndex:b},reactExports.createElement(ActivePoint,{point:$,childIndex:Number(j),mainColor:o,dataKey:h,activeDot:d,clipPath:g}))}var getBarSize=(e,i,o)=>{var d=o??e;if(!isNullish(d))return getPercentValue(d,i,0)},combineBarSizeList=(e,i,o)=>{var d={},h=e.filter(isStacked),g=e.filter($=>$.stackId==null),b=h.reduce(($,_e)=>($[_e.stackId]||($[_e.stackId]=[]),$[_e.stackId].push(_e),$),d),j=Object.entries(b).map($=>{var[_e,et]=$,tt=et.map(nt=>nt.dataKey),rt=getBarSize(i,o,et[0].barSize);return{stackId:_e,dataKeys:tt,barSize:rt}}),_=g.map($=>{var _e=[$.dataKey].filter(tt=>tt!=null),et=getBarSize(i,o,$.barSize);return{stackId:void 0,dataKeys:_e,barSize:et}});return[...j,..._]};function ownKeys$6(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$6(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$6(Object(o),!0).forEach(function(d){_defineProperty$7(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$6(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$7(e,i,o){return(i=_toPropertyKey$7(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$7(e){var i=_toPrimitive$7(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$7(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function getBarPositions(e,i,o,d,h){var g=d.length;if(!(g<1)){var b=getPercentValue(e,o,0,!0),j,_=[];if(isWellBehavedNumber(d[0].barSize)){var $=!1,_e=o/g,et=d.reduce((at,ot)=>at+(ot.barSize||0),0);et+=(g-1)*b,et>=o&&(et-=(g-1)*b,b=0),et>=o&&_e>0&&($=!0,_e*=.9,et=g*_e);var tt=(o-et)/2>>0,rt={offset:tt-b,size:0};j=d.reduce((at,ot)=>{var lt,ct={stackId:ot.stackId,dataKeys:ot.dataKeys,position:{offset:rt.offset+rt.size+b,size:$?_e:(lt=ot.barSize)!==null&&lt!==void 0?lt:0}},ut=[...at,ct];return rt=ut[ut.length-1].position,ut},_)}else{var nt=getPercentValue(i,o,0,!0);o-2*nt-(g-1)*b<=0&&(b=0);var it=(o-2*nt-(g-1)*b)/g;it>1&&(it>>=0);var st=isWellBehavedNumber(h)?Math.min(it,h):it;j=d.reduce((at,ot,lt)=>[...at,{stackId:ot.stackId,dataKeys:ot.dataKeys,position:{offset:nt+(it+b)*lt+(it-st)/2,size:st}}],_)}return j}}var combineAllBarPositions=(e,i,o,d,h,g,b)=>{var j=isNullish(b)?i:b,_=getBarPositions(o,d,h!==g?h:g,e,j);return h!==g&&_!=null&&(_=_.map($=>_objectSpread$6(_objectSpread$6({},$),{},{position:_objectSpread$6(_objectSpread$6({},$.position),{},{offset:$.position.offset-h/2})}))),_},combineStackedData=(e,i)=>{var o=getStackSeriesIdentifier(i);if(!(!e||o==null||i==null)){var{stackId:d}=i;if(d!=null){var h=e[d];if(h){var{stackedData:g}=h;if(g)return g.find(b=>b.key===o)}}}};function getZIndexFromUnknown(e,i){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&isWellBehavedNumber(e.zIndex)?e.zIndex:i}var ChartDataContextProvider=e=>{var{chartData:i}=e,o=useAppDispatch(),d=useIsPanorama();return reactExports.useEffect(()=>d?()=>{}:(o(setChartData(i)),()=>{o(setChartData(void 0))}),[i,o,d]),null},initialState$3={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},brushSlice=createSlice({name:"brush",initialState:initialState$3,reducers:{setBrushSettings(e,i){return i.payload==null?initialState$3:i.payload}}}),brushReducer=brushSlice.reducer;function _defineProperty$6(e,i,o){return(i=_toPropertyKey$6(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$6(e){var i=_toPrimitive$6(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$6(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}class ScaleHelper{static create(i){return new ScaleHelper(i)}constructor(i){this.scale=i}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(i){var{bandAware:o,position:d}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i!==void 0){if(d)switch(d){case"start":return this.scale(i);case"middle":{var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(i)+h}case"end":{var g=this.bandwidth?this.bandwidth():0;return this.scale(i)+g}default:return this.scale(i)}if(o){var b=this.bandwidth?this.bandwidth()/2:0;return this.scale(i)+b}return this.scale(i)}}isInRange(i){var o=this.range(),d=o[0],h=o[o.length-1];return d<=h?i>=d&&i<=h:i>=h&&i<=d}}_defineProperty$6(ScaleHelper,"EPS",1e-4);function normalizeAngle(e){return(e%180+180)%180}var getAngledRectangleWidth=function e(i){var{width:o,height:d}=i,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,g=normalizeAngle(h),b=g*Math.PI/180,j=Math.atan(d/o),_=b>j&&b<Math.PI-j?d/Math.sin(b):o/Math.cos(b);return Math.abs(_)},initialState$2={dots:[],areas:[],lines:[]},referenceElementsSlice=createSlice({name:"referenceElements",initialState:initialState$2,reducers:{addDot:(e,i)=>{e.dots.push(i.payload)},removeDot:(e,i)=>{var o=current$1(e).dots.findIndex(d=>d===i.payload);o!==-1&&e.dots.splice(o,1)},addArea:(e,i)=>{e.areas.push(i.payload)},removeArea:(e,i)=>{var o=current$1(e).areas.findIndex(d=>d===i.payload);o!==-1&&e.areas.splice(o,1)},addLine:(e,i)=>{e.lines.push(i.payload)},removeLine:(e,i)=>{var o=current$1(e).lines.findIndex(d=>d===i.payload);o!==-1&&e.lines.splice(o,1)}}}),referenceElementsReducer=referenceElementsSlice.reducer,ClipPathIdContext=reactExports.createContext(void 0),ClipPathProvider=e=>{var{children:i}=e,[o]=reactExports.useState("".concat(uniqueId("recharts"),"-clip")),d=usePlotArea();if(d==null)return null;var{x:h,y:g,width:b,height:j}=d;return reactExports.createElement(ClipPathIdContext.Provider,{value:o},reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:o},reactExports.createElement("rect",{x:h,y:g,height:j,width:b}))),i)};function getEveryNth(e,i){if(i<1)return[];if(i===1)return e;for(var o=[],d=0;d<e.length;d+=i){var h=e[d];h!==void 0&&o.push(h)}return o}function getAngledTickWidth(e,i,o){var d={width:e.width+i.width,height:e.height+i.height};return getAngledRectangleWidth(d,o)}function getTickBoundaries(e,i,o){var d=o==="width",{x:h,y:g,width:b,height:j}=e;return i===1?{start:d?h:g,end:d?h+b:g+j}:{start:d?h+b:g+j,end:d?h:g}}function isVisible(e,i,o,d,h){if(e*i<e*d||e*i>e*h)return!1;var g=o();return e*(i-e*g/2-d)>=0&&e*(i+e*g/2-h)<=0}function getNumberIntervalTicks(e,i){return getEveryNth(e,i+1)}function getEquidistantTicks(e,i,o,d,h){for(var g=(d||[]).slice(),{start:b,end:j}=i,_=0,$=1,_e=b,et=function(){var nt=d==null?void 0:d[_];if(nt===void 0)return{v:getEveryNth(d,$)};var it=_,st,at=()=>(st===void 0&&(st=o(nt,it)),st),ot=nt.coordinate,lt=_===0||isVisible(e,ot,at,_e,j);lt||(_=0,_e=b,$+=1),lt&&(_e=ot+e*(at()/2+h),_+=$)},tt;$<=g.length;)if(tt=et(),tt)return tt.v;return[]}function getEquidistantPreserveEndTicks(e,i,o,d,h){var g=(d||[]).slice(),b=g.length;if(b===0)return[];for(var{start:j,end:_}=i,$=1;$<=b;$++){for(var _e=(b-1)%$,et=j,tt=!0,rt=function(){var ot=d[nt],lt=nt,ct,ut=()=>(ct===void 0&&(ct=o(ot,lt)),ct),dt=ot.coordinate,mt=nt===_e||isVisible(e,dt,ut,et,_);if(!mt)return tt=!1,1;mt&&(et=dt+e*(ut()/2+h))},nt=_e;nt<b&&!rt();nt+=$);if(tt){for(var it=[],st=_e;st<b;st+=$)it.push(d[st]);return it}}return[]}function ownKeys$5(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$5(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$5(Object(o),!0).forEach(function(d){_defineProperty$5(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$5(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$5(e,i,o){return(i=_toPropertyKey$5(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$5(e){var i=_toPrimitive$5(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$5(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function getTicksEnd(e,i,o,d,h){for(var g=(d||[]).slice(),b=g.length,{start:j}=i,{end:_}=i,$=function(tt){var rt=g[tt],nt,it=()=>(nt===void 0&&(nt=o(rt,tt)),nt);if(tt===b-1){var st=e*(rt.coordinate+e*it()/2-_);g[tt]=rt=_objectSpread$5(_objectSpread$5({},rt),{},{tickCoord:st>0?rt.coordinate-st*e:rt.coordinate})}else g[tt]=rt=_objectSpread$5(_objectSpread$5({},rt),{},{tickCoord:rt.coordinate});if(rt.tickCoord!=null){var at=isVisible(e,rt.tickCoord,it,j,_);at&&(_=rt.tickCoord-e*(it()/2+h),g[tt]=_objectSpread$5(_objectSpread$5({},rt),{},{isShow:!0}))}},_e=b-1;_e>=0;_e--)$(_e);return g}function getTicksStart(e,i,o,d,h,g){var b=(d||[]).slice(),j=b.length,{start:_,end:$}=i;if(g){var _e=d[j-1],et=o(_e,j-1),tt=e*(_e.coordinate+e*et/2-$);if(b[j-1]=_e=_objectSpread$5(_objectSpread$5({},_e),{},{tickCoord:tt>0?_e.coordinate-tt*e:_e.coordinate}),_e.tickCoord!=null){var rt=isVisible(e,_e.tickCoord,()=>et,_,$);rt&&($=_e.tickCoord-e*(et/2+h),b[j-1]=_objectSpread$5(_objectSpread$5({},_e),{},{isShow:!0}))}}for(var nt=g?j-1:j,it=function(ot){var lt=b[ot],ct,ut=()=>(ct===void 0&&(ct=o(lt,ot)),ct);if(ot===0){var dt=e*(lt.coordinate-e*ut()/2-_);b[ot]=lt=_objectSpread$5(_objectSpread$5({},lt),{},{tickCoord:dt<0?lt.coordinate-dt*e:lt.coordinate})}else b[ot]=lt=_objectSpread$5(_objectSpread$5({},lt),{},{tickCoord:lt.coordinate});if(lt.tickCoord!=null){var mt=isVisible(e,lt.tickCoord,ut,_,$);mt&&(_=lt.tickCoord+e*(ut()/2+h),b[ot]=_objectSpread$5(_objectSpread$5({},lt),{},{isShow:!0}))}},st=0;st<nt;st++)it(st);return b}function getTicks(e,i,o){var{tick:d,ticks:h,viewBox:g,minTickGap:b,orientation:j,interval:_,tickFormatter:$,unit:_e,angle:et}=e;if(!h||!h.length||!d)return[];if(isNumber(_)||Global.isSsr){var tt;return(tt=getNumberIntervalTicks(h,isNumber(_)?_:0))!==null&&tt!==void 0?tt:[]}var rt=[],nt=j==="top"||j==="bottom"?"width":"height",it=_e&&nt==="width"?getStringSize(_e,{fontSize:i,letterSpacing:o}):{width:0,height:0},st=(lt,ct)=>{var ut=typeof $=="function"?$(lt.value,ct):lt.value;return nt==="width"?getAngledTickWidth(getStringSize(ut,{fontSize:i,letterSpacing:o}),it,et):getStringSize(ut,{fontSize:i,letterSpacing:o})[nt]},at=h.length>=2?mathSign(h[1].coordinate-h[0].coordinate):1,ot=getTickBoundaries(g,at,nt);return _==="equidistantPreserveStart"?getEquidistantTicks(at,ot,st,h,b):_==="equidistantPreserveEnd"?getEquidistantPreserveEndTicks(at,ot,st,h,b):(_==="preserveStart"||_==="preserveStartEnd"?rt=getTicksStart(at,ot,st,h,b,_==="preserveStartEnd"):rt=getTicksEnd(at,ot,st,h,b),rt.filter(lt=>lt.isShow))}var getCalculatedYAxisWidth=e=>{var{ticks:i,label:o,labelGapWithTick:d=5,tickSize:h=0,tickMargin:g=0}=e,b=0;if(i){Array.from(i).forEach(_e=>{if(_e){var et=_e.getBoundingClientRect();et.width>b&&(b=et.width)}});var j=o?o.getBoundingClientRect().width:0,_=h+g,$=b+_+j+(o?d:0);return Math.round($)}return 0},_excluded$a=["axisLine","width","height","className","hide","ticks","axisType"];function _objectWithoutProperties$a(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$a(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$a(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$a.apply(null,arguments)}function ownKeys$4(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$4(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$4(Object(o),!0).forEach(function(d){_defineProperty$4(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$4(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$4(e,i,o){return(i=_toPropertyKey$4(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$4(e){var i=_toPrimitive$4(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$4(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var defaultCartesianAxisProps={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:DefaultZIndexes.axis};function AxisLine(e){var{x:i,y:o,width:d,height:h,orientation:g,mirror:b,axisLine:j,otherSvgProps:_}=e;if(!j)return null;var $=_objectSpread$4(_objectSpread$4(_objectSpread$4({},_),svgPropertiesNoEvents(j)),{},{fill:"none"});if(g==="top"||g==="bottom"){var _e=+(g==="top"&&!b||g==="bottom"&&b);$=_objectSpread$4(_objectSpread$4({},$),{},{x1:i,y1:o+_e*h,x2:i+d,y2:o+_e*h})}else{var et=+(g==="left"&&!b||g==="right"&&b);$=_objectSpread$4(_objectSpread$4({},$),{},{x1:i+et*d,y1:o,x2:i+et*d,y2:o+h})}return reactExports.createElement("line",_extends$a({},$,{className:clsx("recharts-cartesian-axis-line",get$2(j,"className"))}))}function getTickLineCoord(e,i,o,d,h,g,b,j,_){var $,_e,et,tt,rt,nt,it=j?-1:1,st=e.tickSize||b,at=isNumber(e.tickCoord)?e.tickCoord:e.coordinate;switch(g){case"top":$=_e=e.coordinate,tt=o+ +!j*h,et=tt-it*st,nt=et-it*_,rt=at;break;case"left":et=tt=e.coordinate,_e=i+ +!j*d,$=_e-it*st,rt=$-it*_,nt=at;break;case"right":et=tt=e.coordinate,_e=i+ +j*d,$=_e+it*st,rt=$+it*_,nt=at;break;default:$=_e=e.coordinate,tt=o+ +j*h,et=tt+it*st,nt=et+it*_,rt=at;break}return{line:{x1:$,y1:et,x2:_e,y2:tt},tick:{x:rt,y:nt}}}function getTickTextAnchor(e,i){switch(e){case"left":return i?"start":"end";case"right":return i?"end":"start";default:return"middle"}}function getTickVerticalAnchor(e,i){switch(e){case"left":case"right":return"middle";case"top":return i?"start":"end";default:return i?"end":"start"}}function TickItem(e){var{option:i,tickProps:o,value:d}=e,h,g=clsx(o.className,"recharts-cartesian-axis-tick-value");if(reactExports.isValidElement(i))h=reactExports.cloneElement(i,_objectSpread$4(_objectSpread$4({},o),{},{className:g}));else if(typeof i=="function")h=i(_objectSpread$4(_objectSpread$4({},o),{},{className:g}));else{var b="recharts-cartesian-axis-tick-value";typeof i!="boolean"&&(b=clsx(b,i==null?void 0:i.className)),h=reactExports.createElement(Text,_extends$a({},o,{className:b}),d)}return h}var Ticks=reactExports.forwardRef((e,i)=>{var{ticks:o=[],tick:d,tickLine:h,stroke:g,tickFormatter:b,unit:j,padding:_,tickTextProps:$,orientation:_e,mirror:et,x:tt,y:rt,width:nt,height:it,tickSize:st,tickMargin:at,fontSize:ot,letterSpacing:lt,getTicksConfig:ct,events:ut,axisType:dt}=e,mt=getTicks(_objectSpread$4(_objectSpread$4({},ct),{},{ticks:o}),ot,lt),xt=getTickTextAnchor(_e,et),ft=getTickVerticalAnchor(_e,et),gt=svgPropertiesNoEvents(ct),pt=svgPropertiesNoEventsFromUnknown(d),yt={};typeof h=="object"&&(yt=h);var bt=_objectSpread$4(_objectSpread$4({},gt),{},{fill:"none"},yt),St=mt.map(Et=>_objectSpread$4({entry:Et},getTickLineCoord(Et,tt,rt,nt,it,_e,st,et,at))),wt=St.map(Et=>{var{entry:jt,line:Rt}=Et;return reactExports.createElement(Layer,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(jt.value,"-").concat(jt.coordinate,"-").concat(jt.tickCoord)},h&&reactExports.createElement("line",_extends$a({},bt,Rt,{className:clsx("recharts-cartesian-axis-tick-line",get$2(h,"className"))})))}),kt=St.map((Et,jt)=>{var{entry:Rt,tick:At}=Et,Dt=_objectSpread$4(_objectSpread$4(_objectSpread$4(_objectSpread$4({textAnchor:xt,verticalAnchor:ft},gt),{},{stroke:"none",fill:g},pt),At),{},{index:jt,payload:Rt,visibleTicksCount:mt.length,tickFormatter:b,padding:_},$);return reactExports.createElement(Layer,_extends$a({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Rt.value,"-").concat(Rt.coordinate,"-").concat(Rt.tickCoord)},adaptEventsOfChild(ut,Rt,jt)),d&&reactExports.createElement(TickItem,{option:d,tickProps:Dt,value:"".concat(typeof b=="function"?b(Rt.value,jt):Rt.value).concat(j||"")}))});return reactExports.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(dt,"-ticks")},kt.length>0&&reactExports.createElement(ZIndexLayer,{zIndex:DefaultZIndexes.label},reactExports.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(dt,"-tick-labels"),ref:i},kt)),wt.length>0&&reactExports.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(dt,"-tick-lines")},wt))}),CartesianAxisComponent=reactExports.forwardRef((e,i)=>{var{axisLine:o,width:d,height:h,className:g,hide:b,ticks:j,axisType:_}=e,$=_objectWithoutProperties$a(e,_excluded$a),[_e,et]=reactExports.useState(""),[tt,rt]=reactExports.useState(""),nt=reactExports.useRef(null);reactExports.useImperativeHandle(i,()=>({getCalculatedWidth:()=>{var st;return getCalculatedYAxisWidth({ticks:nt.current,label:(st=e.labelRef)===null||st===void 0?void 0:st.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var it=reactExports.useCallback(st=>{if(st){var at=st.getElementsByClassName("recharts-cartesian-axis-tick-value");nt.current=at;var ot=at[0];if(ot){var lt=window.getComputedStyle(ot),ct=lt.fontSize,ut=lt.letterSpacing;(ct!==_e||ut!==tt)&&(et(ct),rt(ut))}}},[_e,tt]);return b||d!=null&&d<=0||h!=null&&h<=0?null:reactExports.createElement(ZIndexLayer,{zIndex:e.zIndex},reactExports.createElement(Layer,{className:clsx("recharts-cartesian-axis",g)},reactExports.createElement(AxisLine,{x:e.x,y:e.y,width:d,height:h,orientation:e.orientation,mirror:e.mirror,axisLine:o,otherSvgProps:svgPropertiesNoEvents(e)}),reactExports.createElement(Ticks,{ref:it,axisType:_,events:$,fontSize:_e,getTicksConfig:e,height:e.height,letterSpacing:tt,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:j,unit:e.unit,width:e.width,x:e.x,y:e.y}),reactExports.createElement(CartesianLabelContextProvider,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},reactExports.createElement(CartesianLabelFromLabelProp,{label:e.label,labelRef:e.labelRef}),e.children)))}),CartesianAxis=reactExports.forwardRef((e,i)=>{var o=resolveDefaultProps(e,defaultCartesianAxisProps);return reactExports.createElement(CartesianAxisComponent,_extends$a({},o,{ref:i}))});CartesianAxis.displayName="CartesianAxis";var _excluded$9=["x1","y1","x2","y2","key"],_excluded2$5=["offset"],_excluded3$2=["xAxisId","yAxisId"],_excluded4$1=["xAxisId","yAxisId"];function ownKeys$3(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$3(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$3(Object(o),!0).forEach(function(d){_defineProperty$3(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$3(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$3(e,i,o){return(i=_toPropertyKey$3(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$3(e){var i=_toPrimitive$3(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$3(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$9.apply(null,arguments)}function _objectWithoutProperties$9(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$9(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$9(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}var Background=e=>{var{fill:i}=e;if(!i||i==="none")return null;var{fillOpacity:o,x:d,y:h,width:g,height:b,ry:j}=e;return reactExports.createElement("rect",{x:d,y:h,ry:j,width:g,height:b,stroke:"none",fill:i,fillOpacity:o,className:"recharts-cartesian-grid-bg"})};function LineItem(e){var{option:i,lineItemProps:o}=e,d;if(reactExports.isValidElement(i))d=reactExports.cloneElement(i,o);else if(typeof i=="function")d=i(o);else{var h,{x1:g,y1:b,x2:j,y2:_,key:$}=o,_e=_objectWithoutProperties$9(o,_excluded$9),et=(h=svgPropertiesNoEvents(_e))!==null&&h!==void 0?h:{},tt=_objectWithoutProperties$9(et,_excluded2$5);d=reactExports.createElement("line",_extends$9({},tt,{x1:g,y1:b,x2:j,y2:_,fill:"none",key:$}))}return d}function HorizontalGridLines(e){var{x:i,width:o,horizontal:d=!0,horizontalPoints:h}=e;if(!d||!h||!h.length)return null;var g=_objectWithoutProperties$9(e,_excluded3$2),b=h.map((j,_)=>{var $=_objectSpread$3(_objectSpread$3({},g),{},{x1:i,y1:j,x2:i+o,y2:j,key:"line-".concat(_),index:_});return reactExports.createElement(LineItem,{key:"line-".concat(_),option:d,lineItemProps:$})});return reactExports.createElement("g",{className:"recharts-cartesian-grid-horizontal"},b)}function VerticalGridLines(e){var{y:i,height:o,vertical:d=!0,verticalPoints:h}=e;if(!d||!h||!h.length)return null;var g=_objectWithoutProperties$9(e,_excluded4$1),b=h.map((j,_)=>{var $=_objectSpread$3(_objectSpread$3({},g),{},{x1:j,y1:i,x2:j,y2:i+o,key:"line-".concat(_),index:_});return reactExports.createElement(LineItem,{option:d,lineItemProps:$,key:"line-".concat(_)})});return reactExports.createElement("g",{className:"recharts-cartesian-grid-vertical"},b)}function HorizontalStripes(e){var{horizontalFill:i,fillOpacity:o,x:d,y:h,width:g,height:b,horizontalPoints:j,horizontal:_=!0}=e;if(!_||!i||!i.length||j==null)return null;var $=j.map(et=>Math.round(et+h-h)).sort((et,tt)=>et-tt);h!==$[0]&&$.unshift(0);var _e=$.map((et,tt)=>{var rt=!$[tt+1],nt=rt?h+b-et:$[tt+1]-et;if(nt<=0)return null;var it=tt%i.length;return reactExports.createElement("rect",{key:"react-".concat(tt),y:et,x:d,height:nt,width:g,stroke:"none",fill:i[it],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return reactExports.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},_e)}function VerticalStripes(e){var{vertical:i=!0,verticalFill:o,fillOpacity:d,x:h,y:g,width:b,height:j,verticalPoints:_}=e;if(!i||!o||!o.length)return null;var $=_.map(et=>Math.round(et+h-h)).sort((et,tt)=>et-tt);h!==$[0]&&$.unshift(0);var _e=$.map((et,tt)=>{var rt=!$[tt+1],nt=rt?h+b-et:$[tt+1]-et;if(nt<=0)return null;var it=tt%o.length;return reactExports.createElement("rect",{key:"react-".concat(tt),x:et,y:g,width:nt,height:j,stroke:"none",fill:o[it],fillOpacity:d,className:"recharts-cartesian-grid-bg"})});return reactExports.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},_e)}var defaultVerticalCoordinatesGenerator=(e,i)=>{var{xAxis:o,width:d,height:h,offset:g}=e;return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({},defaultCartesianAxisProps),o),{},{ticks:getTicksOfAxis(o),viewBox:{x:0,y:0,width:d,height:h}})),g.left,g.left+g.width,i)},defaultHorizontalCoordinatesGenerator=(e,i)=>{var{yAxis:o,width:d,height:h,offset:g}=e;return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({},defaultCartesianAxisProps),o),{},{ticks:getTicksOfAxis(o),viewBox:{x:0,y:0,width:d,height:h}})),g.top,g.top+g.height,i)},defaultCartesianGridProps={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:DefaultZIndexes.grid};function CartesianGrid(e){var i=useChartWidth(),o=useChartHeight(),d=useOffsetInternal(),h=_objectSpread$3(_objectSpread$3({},resolveDefaultProps(e,defaultCartesianGridProps)),{},{x:isNumber(e.x)?e.x:d.left,y:isNumber(e.y)?e.y:d.top,width:isNumber(e.width)?e.width:d.width,height:isNumber(e.height)?e.height:d.height}),{xAxisId:g,yAxisId:b,x:j,y:_,width:$,height:_e,syncWithTicks:et,horizontalValues:tt,verticalValues:rt}=h,nt=useIsPanorama(),it=useAppSelector(ft=>selectAxisPropsNeededForCartesianGridTicksGenerator(ft,"xAxis",g,nt)),st=useAppSelector(ft=>selectAxisPropsNeededForCartesianGridTicksGenerator(ft,"yAxis",b,nt));if(!isPositiveNumber($)||!isPositiveNumber(_e)||!isNumber(j)||!isNumber(_))return null;var at=h.verticalCoordinatesGenerator||defaultVerticalCoordinatesGenerator,ot=h.horizontalCoordinatesGenerator||defaultHorizontalCoordinatesGenerator,{horizontalPoints:lt,verticalPoints:ct}=h;if((!lt||!lt.length)&&typeof ot=="function"){var ut=tt&&tt.length,dt=ot({yAxis:st?_objectSpread$3(_objectSpread$3({},st),{},{ticks:ut?tt:st.ticks}):void 0,width:i??$,height:o??_e,offset:d},ut?!0:et);warn(Array.isArray(dt),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof dt,"]")),Array.isArray(dt)&&(lt=dt)}if((!ct||!ct.length)&&typeof at=="function"){var mt=rt&&rt.length,xt=at({xAxis:it?_objectSpread$3(_objectSpread$3({},it),{},{ticks:mt?rt:it.ticks}):void 0,width:i??$,height:o??_e,offset:d},mt?!0:et);warn(Array.isArray(xt),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof xt,"]")),Array.isArray(xt)&&(ct=xt)}return reactExports.createElement(ZIndexLayer,{zIndex:h.zIndex},reactExports.createElement("g",{className:"recharts-cartesian-grid"},reactExports.createElement(Background,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),reactExports.createElement(HorizontalStripes,_extends$9({},h,{horizontalPoints:lt})),reactExports.createElement(VerticalStripes,_extends$9({},h,{verticalPoints:ct})),reactExports.createElement(HorizontalGridLines,_extends$9({},h,{offset:d,horizontalPoints:lt,xAxis:it,yAxis:st})),reactExports.createElement(VerticalGridLines,_extends$9({},h,{offset:d,verticalPoints:ct,xAxis:it,yAxis:st}))))}CartesianGrid.displayName="CartesianGrid";var initialState$1={},errorBarSlice=createSlice({name:"errorBars",initialState:initialState$1,reducers:{addErrorBar:(e,i)=>{var{itemId:o,errorBar:d}=i.payload;e[o]||(e[o]=[]),e[o].push(d)},replaceErrorBar:(e,i)=>{var{itemId:o,prev:d,next:h}=i.payload;e[o]&&(e[o]=e[o].map(g=>g.dataKey===d.dataKey&&g.direction===d.direction?h:g))},removeErrorBar:(e,i)=>{var{itemId:o,errorBar:d}=i.payload;e[o]&&(e[o]=e[o].filter(h=>h.dataKey!==d.dataKey||h.direction!==d.direction))}}}),errorBarReducer=errorBarSlice.reducer,_excluded$8=["children"];function _objectWithoutProperties$8(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$8(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$8(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}var initialContextState={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ErrorBarContext=reactExports.createContext(initialContextState);function SetErrorBarContext(e){var{children:i}=e,o=_objectWithoutProperties$8(e,_excluded$8);return reactExports.createElement(ErrorBarContext.Provider,{value:o},i)}function useNeedsClip(e,i){var o,d,h=useAppSelector($=>selectXAxisSettings($,e)),g=useAppSelector($=>selectYAxisSettings($,i)),b=(o=h==null?void 0:h.allowDataOverflow)!==null&&o!==void 0?o:implicitXAxis.allowDataOverflow,j=(d=g==null?void 0:g.allowDataOverflow)!==null&&d!==void 0?d:implicitYAxis.allowDataOverflow,_=b||j;return{needClip:_,needClipX:b,needClipY:j}}function GraphicalItemClipPath(e){var{xAxisId:i,yAxisId:o,clipPathId:d}=e,h=usePlotArea(),{needClipX:g,needClipY:b,needClip:j}=useNeedsClip(i,o);if(!j||!h)return null;var{x:_,y:$,width:_e,height:et}=h;return reactExports.createElement("clipPath",{id:"clipPath-".concat(d)},reactExports.createElement("rect",{x:g?_:_-_e/2,y:b?$:$-et/2,width:g?_e:_e*2,height:b?et:et*2}))}var selectXAxisWithScale$1=(e,i,o,d)=>selectAxisWithScale(e,"xAxis",i,d),selectXAxisTicks$1=(e,i,o,d)=>selectTicksOfGraphicalItem(e,"xAxis",i,d),selectYAxisWithScale$1=(e,i,o,d)=>selectAxisWithScale(e,"yAxis",o,d),selectYAxisTicks$1=(e,i,o,d)=>selectTicksOfGraphicalItem(e,"yAxis",o,d),selectBandSize=createSelector([selectChartLayout,selectXAxisWithScale$1,selectYAxisWithScale$1,selectXAxisTicks$1,selectYAxisTicks$1],(e,i,o,d,h)=>isCategoricalAxis(e,"xAxis")?getBandSizeOfAxis(i,d,!1):getBandSizeOfAxis(o,h,!1)),pickLineId=(e,i,o,d,h)=>h;function isLineSettings(e){return e.type==="line"}var selectSynchronisedLineSettings=createSelector([selectUnfilteredCartesianItems,pickLineId],(e,i)=>e.filter(isLineSettings).find(o=>o.id===i)),selectLinePoints=createSelector([selectChartLayout,selectXAxisWithScale$1,selectYAxisWithScale$1,selectXAxisTicks$1,selectYAxisTicks$1,selectSynchronisedLineSettings,selectBandSize,selectChartDataWithIndexesIfNotInPanoramaPosition4],(e,i,o,d,h,g,b,j)=>{var{chartData:_,dataStartIndex:$,dataEndIndex:_e}=j;if(!(g==null||i==null||o==null||d==null||h==null||d.length===0||h.length===0||b==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:et,data:tt}=g,rt;if(tt!=null&&tt.length>0?rt=tt:rt=_==null?void 0:_.slice($,_e+1),rt!=null)return computeLinePoints({layout:e,xAxis:i,yAxis:o,xAxisTicks:d,yAxisTicks:h,dataKey:et,bandSize:b,displayedData:rt})}});function getRadiusAndStrokeWidthFromDot(e){var i=svgPropertiesNoEventsFromUnknown(e),o=3,d=2;if(i!=null){var{r:h,strokeWidth:g}=i,b=Number(h),j=Number(g);return(Number.isNaN(b)||b<0)&&(b=o),(Number.isNaN(j)||j<0)&&(j=d),{r:b,strokeWidth:j}}return{r:o,strokeWidth:d}}var useSyncExternalStoreWithSelector_production={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports;function is$1(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var objectIs=typeof Object.is=="function"?Object.is:is$1,useSyncExternalStore=React.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;useSyncExternalStoreWithSelector_production.useSyncExternalStoreWithSelector=function(e,i,o,d,h){var g=useRef(null);if(g.current===null){var b={hasValue:!1,value:null};g.current=b}else b=g.current;g=useMemo(function(){function _(rt){if(!$){if($=!0,_e=rt,rt=d(rt),h!==void 0&&b.hasValue){var nt=b.value;if(h(nt,rt))return et=nt}return et=rt}if(nt=et,objectIs(_e,rt))return nt;var it=d(rt);return h!==void 0&&h(nt,it)?(_e=rt,nt):(_e=rt,et=it)}var $=!1,_e,et,tt=o===void 0?null:o;return[function(){return _(i())},tt===null?void 0:function(){return _(tt())}]},[i,o,d,h]);var j=useSyncExternalStore(e,g[0],g[1]);return useEffect(function(){b.hasValue=!0,b.value=j},[j]),useDebugValue(j),j};function defaultNoopBatch(e){e()}function createListenerCollection(){let e=null,i=null;return{clear(){e=null,i=null},notify(){defaultNoopBatch(()=>{let o=e;for(;o;)o.callback(),o=o.next})},get(){const o=[];let d=e;for(;d;)o.push(d),d=d.next;return o},subscribe(o){let d=!0;const h=i={callback:o,next:null,prev:i};return h.prev?h.prev.next=h:e=h,function(){!d||e===null||(d=!1,h.next?h.next.prev=h.prev:i=h.prev,h.prev?h.prev.next=h.next:e=h.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(e,i){let o,d=nullListeners,h=0,g=!1;function b(it){_e();const st=d.subscribe(it);let at=!1;return()=>{at||(at=!0,st(),et())}}function j(){d.notify()}function _(){nt.onStateChange&&nt.onStateChange()}function $(){return g}function _e(){h++,o||(o=e.subscribe(_),d=createListenerCollection())}function et(){h--,o&&h===0&&(o(),o=void 0,d.clear(),d=nullListeners)}function tt(){g||(g=!0,_e())}function rt(){g&&(g=!1,et())}const nt={addNestedSub:b,notifyNestedSubs:j,handleChangeWrapper:_,isSubscribed:$,trySubscribe:tt,tryUnsubscribe:rt,getListeners:()=>d};return nt}var canUseDOM=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isDOM=canUseDOM(),isRunningInReactNative=()=>typeof navigator<"u"&&navigator.product==="ReactNative",isReactNative=isRunningInReactNative(),getUseIsomorphicLayoutEffect=()=>isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,useIsomorphicLayoutEffect=getUseIsomorphicLayoutEffect();function is(e,i){return e===i?e!==0||i!==0||1/e===1/i:e!==e&&i!==i}function shallowEqual(e,i){if(is(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;const o=Object.keys(e),d=Object.keys(i);if(o.length!==d.length)return!1;for(let h=0;h<o.length;h++)if(!Object.prototype.hasOwnProperty.call(i,o[h])||!is(e[o[h]],i[o[h]]))return!1;return!0}var ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext(){if(!reactExports.createContext)return{};const e=gT[ContextKey]??(gT[ContextKey]=new Map);let i=e.get(reactExports.createContext);return i||(i=reactExports.createContext(null),e.set(reactExports.createContext,i)),i}var ReactReduxContext=getContext();function Provider(e){const{children:i,context:o,serverState:d,store:h}=e,g=reactExports.useMemo(()=>{const _=createSubscription(h);return{store:h,subscription:_,getServerState:d?()=>d:void 0}},[h,d]),b=reactExports.useMemo(()=>h.getState(),[h]);useIsomorphicLayoutEffect(()=>{const{subscription:_}=g;return _.onStateChange=_.notifyNestedSubs,_.trySubscribe(),b!==h.getState()&&_.notifyNestedSubs(),()=>{_.tryUnsubscribe(),_.onStateChange=void 0}},[g,b]);const j=o||ReactReduxContext;return reactExports.createElement(j.Provider,{value:g},i)}var Provider_default=Provider,propsToShallowCompare=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function sameValueZero(e,i){return e==null&&i==null?!0:typeof e=="number"&&typeof i=="number"?e===i||e!==e&&i!==i:e===i}function propsAreEqual(e,i){var o=new Set([...Object.keys(e),...Object.keys(i)]);for(var d of o)if(propsToShallowCompare.has(d)){if(e[d]==null&&i[d]==null)continue;if(!shallowEqual(e[d],i[d]))return!1}else if(!sameValueZero(e[d],i[d]))return!1;return!0}var _excluded$7=["id"],_excluded2$4=["type","layout","connectNulls","needClip","shape"],_excluded3$1=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$8.apply(null,arguments)}function ownKeys$2(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$2(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$2(Object(o),!0).forEach(function(d){_defineProperty$2(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$2(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$2(e,i,o){return(i=_toPropertyKey$2(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$2(e){var i=_toPrimitive$2(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$2(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _objectWithoutProperties$7(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$7(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$7(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}var computeLegendPayloadFromAreaData=e=>{var{dataKey:i,name:o,stroke:d,legendType:h,hide:g}=e;return[{inactive:g,dataKey:i,type:h,color:d,value:getTooltipNameProp(o,i),payload:e}]},SetLineTooltipEntrySettings=reactExports.memo(e=>{var{dataKey:i,data:o,stroke:d,strokeWidth:h,fill:g,name:b,hide:j,unit:_,tooltipType:$,id:_e}=e,et={dataDefinedOnItem:o,positions:void 0,settings:{stroke:d,strokeWidth:h,fill:g,dataKey:i,nameKey:void 0,name:getTooltipNameProp(b,i),hide:j,type:$,color:d,unit:_,graphicalItemId:_e}};return reactExports.createElement(SetTooltipEntrySettings,{tooltipEntrySettings:et})}),generateSimpleStrokeDasharray=(e,i)=>"".concat(i,"px ").concat(e-i,"px");function repeat(e,i){for(var o=e.length%2!==0?[...e,0]:e,d=[],h=0;h<i;++h)d=[...d,...o];return d}var getStrokeDasharray=(e,i,o)=>{var d=o.reduce((et,tt)=>et+tt);if(!d)return generateSimpleStrokeDasharray(i,e);for(var h=Math.floor(e/d),g=e%d,b=i-e,j=[],_=0,$=0;_<o.length;$+=o[_],++_)if($+o[_]>g){j=[...o.slice(0,_),g-$];break}var _e=j.length%2===0?[0,b]:[b];return[...repeat(o,h),...j,..._e].map(et=>"".concat(et,"px")).join(", ")};function LineDotsWrapper(e){var{clipPathId:i,points:o,props:d}=e,{dot:h,dataKey:g,needClip:b}=d,j=_objectWithoutProperties$7(d,_excluded$7),_=svgPropertiesNoEvents(j);return reactExports.createElement(Dots,{points:o,dot:h,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:g,baseProps:_,needClip:b,clipPathId:i})}function LineLabelListProvider(e){var{showLabels:i,children:o,points:d}=e,h=reactExports.useMemo(()=>d==null?void 0:d.map(g=>{var b,j,_={x:(b=g.x)!==null&&b!==void 0?b:0,y:(j=g.y)!==null&&j!==void 0?j:0,width:0,lowerWidth:0,upperWidth:0,height:0};return _objectSpread$2(_objectSpread$2({},_),{},{value:g.value,payload:g.payload,viewBox:_,parentViewBox:void 0,fill:void 0})}),[d]);return reactExports.createElement(CartesianLabelListContextProvider,{value:i?h:void 0},o)}function StaticCurve(e){var{clipPathId:i,pathRef:o,points:d,strokeDasharray:h,props:g}=e,{type:b,layout:j,connectNulls:_,needClip:$,shape:_e}=g,et=_objectWithoutProperties$7(g,_excluded2$4),tt=_objectSpread$2(_objectSpread$2({},svgPropertiesAndEvents(et)),{},{fill:"none",className:"recharts-line-curve",clipPath:$?"url(#clipPath-".concat(i,")"):void 0,points:d,type:b,layout:j,connectNulls:_,strokeDasharray:h??g.strokeDasharray});return reactExports.createElement(reactExports.Fragment,null,(d==null?void 0:d.length)>1&&reactExports.createElement(Shape,_extends$8({shapeType:"curve",option:_e},tt,{pathRef:o})),reactExports.createElement(LineDotsWrapper,{points:d,clipPathId:i,props:g}))}function getTotalLength(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function CurveWithAnimation(e){var{clipPathId:i,props:o,pathRef:d,previousPointsRef:h,longestAnimatedLengthRef:g}=e,{points:b,strokeDasharray:j,isAnimationActive:_,animationBegin:$,animationDuration:_e,animationEasing:et,animateNewValues:tt,width:rt,height:nt,onAnimationEnd:it,onAnimationStart:st}=o,at=h.current,ot=useAnimationId(b,"recharts-line-"),lt=reactExports.useRef(ot),[ct,ut]=reactExports.useState(!1),dt=!ct,mt=reactExports.useCallback(()=>{typeof it=="function"&&it(),ut(!1)},[it]),xt=reactExports.useCallback(()=>{typeof st=="function"&&st(),ut(!0)},[st]),ft=getTotalLength(d.current),gt=reactExports.useRef(0);lt.current!==ot&&(gt.current=g.current,lt.current=ot);var pt=gt.current;return reactExports.createElement(LineLabelListProvider,{points:b,showLabels:dt},o.children,reactExports.createElement(JavascriptAnimate,{animationId:ot,begin:$,duration:_e,isActive:_,easing:et,onAnimationEnd:mt,onAnimationStart:xt,key:ot},yt=>{var bt=interpolate$1(pt,ft+pt,yt),St=Math.min(bt,ft),wt;if(_)if(j){var kt="".concat(j).split(/[,\s]+/gim).map(Rt=>parseFloat(Rt));wt=getStrokeDasharray(St,ft,kt)}else wt=generateSimpleStrokeDasharray(ft,St);else wt=j==null?void 0:String(j);if(yt>0&&ft>0&&(h.current=b,g.current=Math.max(g.current,St)),at){var Et=at.length/b.length,jt=yt===1?b:b.map((Rt,At)=>{var Dt=Math.floor(At*Et);if(at[Dt]){var Nt=at[Dt];return _objectSpread$2(_objectSpread$2({},Rt),{},{x:interpolate$1(Nt.x,Rt.x,yt),y:interpolate$1(Nt.y,Rt.y,yt)})}return tt?_objectSpread$2(_objectSpread$2({},Rt),{},{x:interpolate$1(rt*2,Rt.x,yt),y:interpolate$1(nt/2,Rt.y,yt)}):_objectSpread$2(_objectSpread$2({},Rt),{},{x:Rt.x,y:Rt.y})});return h.current=jt,reactExports.createElement(StaticCurve,{props:o,points:jt,clipPathId:i,pathRef:d,strokeDasharray:wt})}return reactExports.createElement(StaticCurve,{props:o,points:b,clipPathId:i,pathRef:d,strokeDasharray:wt})}),reactExports.createElement(LabelListFromLabelProp,{label:o.label}))}function RenderCurve(e){var{clipPathId:i,props:o}=e,d=reactExports.useRef(null),h=reactExports.useRef(0),g=reactExports.useRef(null);return reactExports.createElement(CurveWithAnimation,{props:o,clipPathId:i,previousPointsRef:d,longestAnimatedLengthRef:h,pathRef:g})}var errorBarDataPointFormatter$1=(e,i)=>{var o,d;return{x:(o=e.x)!==null&&o!==void 0?o:void 0,y:(d=e.y)!==null&&d!==void 0?d:void 0,value:e.value,errorVal:getValueByDataKey(e.payload,i)}};class LineWithState extends reactExports.Component{render(){var{hide:i,dot:o,points:d,className:h,xAxisId:g,yAxisId:b,top:j,left:_,width:$,height:_e,id:et,needClip:tt,zIndex:rt}=this.props;if(i)return null;var nt=clsx("recharts-line",h),it=et,{r:st,strokeWidth:at}=getRadiusAndStrokeWidthFromDot(o),ot=isClipDot(o),lt=st*2+at,ct=tt?"url(#clipPath-".concat(ot?"":"dots-").concat(it,")"):void 0;return reactExports.createElement(ZIndexLayer,{zIndex:rt},reactExports.createElement(Layer,{className:nt},tt&&reactExports.createElement("defs",null,reactExports.createElement(GraphicalItemClipPath,{clipPathId:it,xAxisId:g,yAxisId:b}),!ot&&reactExports.createElement("clipPath",{id:"clipPath-dots-".concat(it)},reactExports.createElement("rect",{x:_-lt/2,y:j-lt/2,width:$+lt,height:_e+lt}))),reactExports.createElement(SetErrorBarContext,{xAxisId:g,yAxisId:b,data:d,dataPointFormatter:errorBarDataPointFormatter$1,errorBarOffset:0},reactExports.createElement(RenderCurve,{props:this.props,clipPathId:it}))),reactExports.createElement(ActivePoints,{activeDot:this.props.activeDot,points:d,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:ct}))}}var defaultLineProps={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:DefaultZIndexes.line,type:"linear"};function LineImpl(e){var i=resolveDefaultProps(e,defaultLineProps),{activeDot:o,animateNewValues:d,animationBegin:h,animationDuration:g,animationEasing:b,connectNulls:j,dot:_,hide:$,isAnimationActive:_e,label:et,legendType:tt,xAxisId:rt,yAxisId:nt,id:it}=i,st=_objectWithoutProperties$7(i,_excluded3$1),{needClip:at}=useNeedsClip(rt,nt),ot=usePlotArea(),lt=useChartLayout(),ct=useIsPanorama(),ut=useAppSelector(gt=>selectLinePoints(gt,rt,nt,ct,it));if(lt!=="horizontal"&&lt!=="vertical"||ut==null||ot==null)return null;var{height:dt,width:mt,x:xt,y:ft}=ot;return reactExports.createElement(LineWithState,_extends$8({},st,{id:it,connectNulls:j,dot:_,activeDot:o,animateNewValues:d,animationBegin:h,animationDuration:g,animationEasing:b,isAnimationActive:_e,hide:$,label:et,legendType:tt,xAxisId:rt,yAxisId:nt,points:ut,layout:lt,height:dt,width:mt,left:xt,top:ft,needClip:at}))}function computeLinePoints(e){var{layout:i,xAxis:o,yAxis:d,xAxisTicks:h,yAxisTicks:g,dataKey:b,bandSize:j,displayedData:_}=e;return _.map(($,_e)=>{var et=getValueByDataKey($,b);if(i==="horizontal"){var tt=getCateCoordinateOfLine({axis:o,ticks:h,bandSize:j,entry:$,index:_e}),rt=isNullish(et)?null:d.scale(et);return{x:tt,y:rt,value:et,payload:$}}var nt=isNullish(et)?null:o.scale(et),it=getCateCoordinateOfLine({axis:d,ticks:g,bandSize:j,entry:$,index:_e});return nt==null||it==null?null:{x:nt,y:it,value:et,payload:$}}).filter(Boolean)}function LineFn(e){var i=resolveDefaultProps(e,defaultLineProps),o=useIsPanorama();return reactExports.createElement(RegisterGraphicalItemId,{id:i.id,type:"line"},d=>reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetLegendPayload,{legendPayload:computeLegendPayloadFromAreaData(i)}),reactExports.createElement(SetLineTooltipEntrySettings,{dataKey:i.dataKey,data:i.data,stroke:i.stroke,strokeWidth:i.strokeWidth,fill:i.fill,name:i.name,hide:i.hide,unit:i.unit,tooltipType:i.tooltipType,id:d}),reactExports.createElement(SetCartesianGraphicalItem,{type:"line",id:d,data:i.data,xAxisId:i.xAxisId,yAxisId:i.yAxisId,zAxisId:0,dataKey:i.dataKey,hide:i.hide,isPanorama:o}),reactExports.createElement(LineImpl,_extends$8({},i,{id:d}))))}var Line=reactExports.memo(LineFn,propsAreEqual);Line.displayName="Line";function selectXAxisIdFromGraphicalItemId(e,i){var o,d;return(o=(d=e.graphicalItems.cartesianItems.find(h=>h.id===i))===null||d===void 0?void 0:d.xAxisId)!==null&&o!==void 0?o:defaultAxisId}function selectYAxisIdFromGraphicalItemId(e,i){var o,d;return(o=(d=e.graphicalItems.cartesianItems.find(h=>h.id===i))===null||d===void 0?void 0:d.yAxisId)!==null&&o!==void 0?o:defaultAxisId}var prefix="Invariant failed";function invariant(e,i){throw new Error(prefix)}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$7.apply(null,arguments)}function BarRectangle(e){return reactExports.createElement(Shape,_extends$7({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var minPointSizeCallback=function e(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(d,h)=>{if(isNumber(i))return i;var g=isNumber(d)||isNullish(d);return g?i(d,h):(g||invariant(),o)}},pickIsPanorama=(e,i,o)=>o,pickBarId=(e,i)=>i,selectSynchronisedBarSettings=createSelector([selectUnfilteredCartesianItems,pickBarId],(e,i)=>e.filter(o=>o.type==="bar").find(o=>o.id===i)),selectMaxBarSize=createSelector([selectSynchronisedBarSettings],e=>e==null?void 0:e.maxBarSize),pickCells=(e,i,o,d)=>d,selectAllVisibleBars=createSelector([selectChartLayout,selectUnfilteredCartesianItems,selectXAxisIdFromGraphicalItemId,selectYAxisIdFromGraphicalItemId,pickIsPanorama],(e,i,o,d,h)=>i.filter(g=>e==="horizontal"?g.xAxisId===o:g.yAxisId===d).filter(g=>g.isPanorama===h).filter(g=>g.hide===!1).filter(g=>g.type==="bar")),selectBarStackGroups=(e,i,o)=>{var d=selectChartLayout(e),h=selectXAxisIdFromGraphicalItemId(e,i),g=selectYAxisIdFromGraphicalItemId(e,i);if(!(h==null||g==null))return d==="horizontal"?selectStackGroups(e,"yAxis",g,o):selectStackGroups(e,"xAxis",h,o)},selectBarCartesianAxisSize=(e,i)=>{var o=selectChartLayout(e),d=selectXAxisIdFromGraphicalItemId(e,i),h=selectYAxisIdFromGraphicalItemId(e,i);if(!(d==null||h==null))return o==="horizontal"?selectCartesianAxisSize(e,"xAxis",d):selectCartesianAxisSize(e,"yAxis",h)},selectBarSizeList=createSelector([selectAllVisibleBars,selectRootBarSize,selectBarCartesianAxisSize],combineBarSizeList),selectBarBandSize=(e,i,o)=>{var d,h,g=selectSynchronisedBarSettings(e,i);if(g!=null){var b=selectXAxisIdFromGraphicalItemId(e,i),j=selectYAxisIdFromGraphicalItemId(e,i);if(!(b==null||j==null)){var _=selectChartLayout(e),$=selectRootMaxBarSize(e),{maxBarSize:_e}=g,et=isNullish(_e)?$:_e,tt,rt;return _==="horizontal"?(tt=selectAxisWithScale(e,"xAxis",b,o),rt=selectTicksOfGraphicalItem(e,"xAxis",b,o)):(tt=selectAxisWithScale(e,"yAxis",j,o),rt=selectTicksOfGraphicalItem(e,"yAxis",j,o)),(d=(h=getBandSizeOfAxis(tt,rt,!0))!==null&&h!==void 0?h:et)!==null&&d!==void 0?d:0}}},selectAxisBandSize=(e,i,o)=>{var d=selectChartLayout(e),h=selectXAxisIdFromGraphicalItemId(e,i),g=selectYAxisIdFromGraphicalItemId(e,i);if(!(h==null||g==null)){var b,j;return d==="horizontal"?(b=selectAxisWithScale(e,"xAxis",h,o),j=selectTicksOfGraphicalItem(e,"xAxis",h,o)):(b=selectAxisWithScale(e,"yAxis",g,o),j=selectTicksOfGraphicalItem(e,"yAxis",g,o)),getBandSizeOfAxis(b,j)}},selectAllBarPositions=createSelector([selectBarSizeList,selectRootMaxBarSize,selectBarGap,selectBarCategoryGap,selectBarBandSize,selectAxisBandSize,selectMaxBarSize],combineAllBarPositions),selectXAxisWithScale=(e,i,o)=>{var d=selectXAxisIdFromGraphicalItemId(e,i);if(d!=null)return selectAxisWithScale(e,"xAxis",d,o)},selectYAxisWithScale=(e,i,o)=>{var d=selectYAxisIdFromGraphicalItemId(e,i);if(d!=null)return selectAxisWithScale(e,"yAxis",d,o)},selectXAxisTicks=(e,i,o)=>{var d=selectXAxisIdFromGraphicalItemId(e,i);if(d!=null)return selectTicksOfGraphicalItem(e,"xAxis",d,o)},selectYAxisTicks=(e,i,o)=>{var d=selectYAxisIdFromGraphicalItemId(e,i);if(d!=null)return selectTicksOfGraphicalItem(e,"yAxis",d,o)},selectBarPosition=createSelector([selectAllBarPositions,selectSynchronisedBarSettings],(e,i)=>{if(!(e==null||i==null)){var o=e.find(d=>d.stackId===i.stackId&&i.dataKey!=null&&d.dataKeys.includes(i.dataKey));if(o!=null)return o.position}}),selectStackedDataOfItem=createSelector([selectBarStackGroups,selectSynchronisedBarSettings],combineStackedData),selectBarRectangles=createSelector([selectChartOffsetInternal,selectAxisViewBox,selectXAxisWithScale,selectYAxisWithScale,selectXAxisTicks,selectYAxisTicks,selectBarPosition,selectChartLayout,selectChartDataWithIndexesIfNotInPanoramaPosition3,selectAxisBandSize,selectStackedDataOfItem,selectSynchronisedBarSettings,pickCells],(e,i,o,d,h,g,b,j,_,$,_e,et,tt)=>{var{chartData:rt,dataStartIndex:nt,dataEndIndex:it}=_;if(!(et==null||b==null||i==null||j!=="horizontal"&&j!=="vertical"||o==null||d==null||h==null||g==null||$==null)){var{data:st}=et,at;if(st!=null&&st.length>0?at=st:at=rt==null?void 0:rt.slice(nt,it+1),at!=null)return computeBarRectangles({layout:j,barSettings:et,pos:b,parentViewBox:i,bandSize:$,xAxis:o,yAxis:d,xAxisTicks:h,yAxisTicks:g,stackedData:_e,displayedData:at,offset:e,cells:tt,dataStartIndex:nt})}}),_excluded$6=["index"];function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$6.apply(null,arguments)}function _objectWithoutProperties$6(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$6(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$6(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}var BarStackContext=reactExports.createContext(void 0),useStackId=e=>{var i=reactExports.useContext(BarStackContext);if(i!=null)return i.stackId;if(e!=null)return getNormalizedStackId(e)},getClipPathId=(e,i)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(i),useBarStackClipPathUrl=e=>{var i=reactExports.useContext(BarStackContext);if(i!=null){var{stackId:o}=i;return"url(#".concat(getClipPathId(o,e),")")}},BarStackClipLayer=e=>{var{index:i}=e,o=_objectWithoutProperties$6(e,_excluded$6),d=useBarStackClipPathUrl(i);return reactExports.createElement(Layer,_extends$6({className:"recharts-bar-stack-layer",clipPath:d},o))},_excluded$5=["onMouseEnter","onMouseLeave","onClick"],_excluded2$3=["value","background","tooltipPosition"],_excluded3=["id"],_excluded4=["onMouseEnter","onClick","onMouseLeave"];function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$5.apply(null,arguments)}function ownKeys$1(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread$1(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$1(Object(o),!0).forEach(function(d){_defineProperty$1(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$1(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty$1(e,i,o){return(i=_toPropertyKey$1(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey$1(e){var i=_toPrimitive$1(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive$1(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _objectWithoutProperties$5(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$5(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$5(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}var computeLegendPayloadFromBarData=e=>{var{dataKey:i,name:o,fill:d,legendType:h,hide:g}=e;return[{inactive:g,dataKey:i,type:h,color:d,value:getTooltipNameProp(o,i),payload:e}]},SetBarTooltipEntrySettings=reactExports.memo(e=>{var{dataKey:i,stroke:o,strokeWidth:d,fill:h,name:g,hide:b,unit:j,tooltipType:_,id:$}=e,_e={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:o,strokeWidth:d,fill:h,dataKey:i,nameKey:void 0,name:getTooltipNameProp(g,i),hide:b,type:_,color:h,unit:j,graphicalItemId:$}};return reactExports.createElement(SetTooltipEntrySettings,{tooltipEntrySettings:_e})});function BarBackground(e){var i=useAppSelector(selectActiveTooltipIndex),{data:o,dataKey:d,background:h,allOtherBarProps:g}=e,{onMouseEnter:b,onMouseLeave:j,onClick:_}=g,$=_objectWithoutProperties$5(g,_excluded$5),_e=useMouseEnterItemDispatch(b,d,g.id),et=useMouseLeaveItemDispatch(j),tt=useMouseClickItemDispatch(_,d,g.id);if(!h||o==null)return null;var rt=svgPropertiesNoEventsFromUnknown(h);return reactExports.createElement(ZIndexLayer,{zIndex:getZIndexFromUnknown(h,DefaultZIndexes.barBackground)},o.map((nt,it)=>{var{value:st,background:at,tooltipPosition:ot}=nt,lt=_objectWithoutProperties$5(nt,_excluded2$3);if(!at)return null;var ct=_e(nt,it),ut=et(nt,it),dt=tt(nt,it),mt=_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1({option:h,isActive:String(it)===i},lt),{},{fill:"#eee"},at),rt),adaptEventsOfChild($,nt,it)),{},{onMouseEnter:ct,onMouseLeave:ut,onClick:dt,dataKey:d,index:it,className:"recharts-bar-background-rectangle"});return reactExports.createElement(BarRectangle,_extends$5({key:"background-bar-".concat(it)},mt))}))}function BarLabelListProvider(e){var{showLabels:i,children:o,rects:d}=e,h=d==null?void 0:d.map(g=>{var b={x:g.x,y:g.y,width:g.width,lowerWidth:g.width,upperWidth:g.width,height:g.height};return _objectSpread$1(_objectSpread$1({},b),{},{value:g.value,payload:g.payload,parentViewBox:g.parentViewBox,viewBox:b,fill:g.fill})});return reactExports.createElement(CartesianLabelListContextProvider,{value:i?h:void 0},o)}function BarRectangleWithActiveState(e){var{shape:i,activeBar:o,baseProps:d,entry:h,index:g,dataKey:b}=e,j=useAppSelector(selectActiveTooltipIndex),_=useAppSelector(selectActiveTooltipDataKey),$=o&&String(g)===j&&(_==null||b===_),_e=$?o:i;return $?reactExports.createElement(ZIndexLayer,{zIndex:DefaultZIndexes.activeBar},reactExports.createElement(BarRectangle,_extends$5({},d,{name:String(d.name)},h,{isActive:$,option:_e,index:g,dataKey:b}))):reactExports.createElement(BarRectangle,_extends$5({},d,{name:String(d.name)},h,{isActive:$,option:_e,index:g,dataKey:b}))}function BarRectangleNeverActive(e){var{shape:i,baseProps:o,entry:d,index:h,dataKey:g}=e;return reactExports.createElement(BarRectangle,_extends$5({},o,{name:String(o.name)},d,{isActive:!1,option:i,index:h,dataKey:g}))}function BarRectangles(e){var i,{data:o,props:d}=e,h=(i=svgPropertiesNoEvents(d))!==null&&i!==void 0?i:{},{id:g}=h,b=_objectWithoutProperties$5(h,_excluded3),{shape:j,dataKey:_,activeBar:$}=d,{onMouseEnter:_e,onClick:et,onMouseLeave:tt}=d,rt=_objectWithoutProperties$5(d,_excluded4),nt=useMouseEnterItemDispatch(_e,_,g),it=useMouseLeaveItemDispatch(tt),st=useMouseClickItemDispatch(et,_,g);return o?reactExports.createElement(reactExports.Fragment,null,o.map((at,ot)=>reactExports.createElement(BarStackClipLayer,_extends$5({index:ot,key:"rectangle-".concat(at==null?void 0:at.x,"-").concat(at==null?void 0:at.y,"-").concat(at==null?void 0:at.value,"-").concat(ot),className:"recharts-bar-rectangle"},adaptEventsOfChild(rt,at,ot),{onMouseEnter:nt(at,ot),onMouseLeave:it(at,ot),onClick:st(at,ot)}),$?reactExports.createElement(BarRectangleWithActiveState,{shape:j,activeBar:$,baseProps:b,entry:at,index:ot,dataKey:_}):reactExports.createElement(BarRectangleNeverActive,{shape:j,baseProps:b,entry:at,index:ot,dataKey:_})))):null}function RectanglesWithAnimation(e){var{props:i,previousRectanglesRef:o}=e,{data:d,layout:h,isAnimationActive:g,animationBegin:b,animationDuration:j,animationEasing:_,onAnimationEnd:$,onAnimationStart:_e}=i,et=o.current,tt=useAnimationId(i,"recharts-bar-"),[rt,nt]=reactExports.useState(!1),it=!rt,st=reactExports.useCallback(()=>{typeof $=="function"&&$(),nt(!1)},[$]),at=reactExports.useCallback(()=>{typeof _e=="function"&&_e(),nt(!0)},[_e]);return reactExports.createElement(BarLabelListProvider,{showLabels:it,rects:d},reactExports.createElement(JavascriptAnimate,{animationId:tt,begin:b,duration:j,isActive:g,easing:_,onAnimationEnd:st,onAnimationStart:at,key:tt},ot=>{var lt=ot===1?d:d==null?void 0:d.map((ct,ut)=>{var dt=et&&et[ut];if(dt)return _objectSpread$1(_objectSpread$1({},ct),{},{x:interpolate$1(dt.x,ct.x,ot),y:interpolate$1(dt.y,ct.y,ot),width:interpolate$1(dt.width,ct.width,ot),height:interpolate$1(dt.height,ct.height,ot)});if(h==="horizontal"){var mt=interpolate$1(0,ct.height,ot),xt=interpolate$1(ct.stackedBarStart,ct.y,ot);return _objectSpread$1(_objectSpread$1({},ct),{},{y:xt,height:mt})}var ft=interpolate$1(0,ct.width,ot),gt=interpolate$1(ct.stackedBarStart,ct.x,ot);return _objectSpread$1(_objectSpread$1({},ct),{},{width:ft,x:gt})});return ot>0&&(o.current=lt??null),lt==null?null:reactExports.createElement(Layer,null,reactExports.createElement(BarRectangles,{props:i,data:lt}))}),reactExports.createElement(LabelListFromLabelProp,{label:i.label}),i.children)}function RenderRectangles(e){var i=reactExports.useRef(null);return reactExports.createElement(RectanglesWithAnimation,{previousRectanglesRef:i,props:e})}var defaultMinPointSize=0,errorBarDataPointFormatter=(e,i)=>{var o=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:o,errorVal:getValueByDataKey(e,i)}};class BarWithState extends reactExports.PureComponent{render(){var{hide:i,data:o,dataKey:d,className:h,xAxisId:g,yAxisId:b,needClip:j,background:_,id:$}=this.props;if(i||o==null)return null;var _e=clsx("recharts-bar",h),et=$;return reactExports.createElement(Layer,{className:_e,id:$},j&&reactExports.createElement("defs",null,reactExports.createElement(GraphicalItemClipPath,{clipPathId:et,xAxisId:g,yAxisId:b})),reactExports.createElement(Layer,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(et,")"):void 0},reactExports.createElement(BarBackground,{data:o,dataKey:d,background:_,allOtherBarProps:this.props}),reactExports.createElement(RenderRectangles,this.props)))}}var defaultBarProps={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:defaultMinPointSize,xAxisId:0,yAxisId:0,zIndex:DefaultZIndexes.bar};function BarImpl(e){var{xAxisId:i,yAxisId:o,hide:d,legendType:h,minPointSize:g,activeBar:b,animationBegin:j,animationDuration:_,animationEasing:$,isAnimationActive:_e}=e,{needClip:et}=useNeedsClip(i,o),tt=useChartLayout(),rt=useIsPanorama(),nt=findAllByType(e.children,Cell),it=useAppSelector(ot=>selectBarRectangles(ot,e.id,rt,nt));if(tt!=="vertical"&&tt!=="horizontal")return null;var st,at=it==null?void 0:it[0];return at==null||at.height==null||at.width==null?st=0:st=tt==="vertical"?at.height/2:at.width/2,reactExports.createElement(SetErrorBarContext,{xAxisId:i,yAxisId:o,data:it,dataPointFormatter:errorBarDataPointFormatter,errorBarOffset:st},reactExports.createElement(BarWithState,_extends$5({},e,{layout:tt,needClip:et,data:it,xAxisId:i,yAxisId:o,hide:d,legendType:h,minPointSize:g,activeBar:b,animationBegin:j,animationDuration:_,animationEasing:$,isAnimationActive:_e})))}function computeBarRectangles(e){var{layout:i,barSettings:{dataKey:o,minPointSize:d},pos:h,bandSize:g,xAxis:b,yAxis:j,xAxisTicks:_,yAxisTicks:$,stackedData:_e,displayedData:et,offset:tt,cells:rt,parentViewBox:nt,dataStartIndex:it}=e,st=i==="horizontal"?j:b,at=_e?st.scale.domain():null,ot=getBaseValueOfBar({numericAxis:st}),lt=st.scale(ot);return et.map((ct,ut)=>{var dt,mt,xt,ft,gt,pt;if(_e){var yt=_e[ut+it];if(yt==null)return null;dt=truncateByDomain(yt,at)}else dt=getValueByDataKey(ct,o),Array.isArray(dt)||(dt=[ot,dt]);var bt=minPointSizeCallback(d,defaultMinPointSize)(dt[1],ut);if(i==="horizontal"){var St,[wt,kt]=[j.scale(dt[0]),j.scale(dt[1])];mt=getCateCoordinateOfBar({axis:b,ticks:_,bandSize:g,offset:h.offset,entry:ct,index:ut}),xt=(St=kt??wt)!==null&&St!==void 0?St:void 0,ft=h.size;var Et=wt-kt;if(gt=isNan(Et)?0:Et,pt={x:mt,y:tt.top,width:ft,height:tt.height},Math.abs(bt)>0&&Math.abs(gt)<Math.abs(bt)){var jt=mathSign(gt||bt)*(Math.abs(bt)-Math.abs(gt));xt-=jt,gt+=jt}}else{var[Rt,At]=[b.scale(dt[0]),b.scale(dt[1])];if(mt=Rt,xt=getCateCoordinateOfBar({axis:j,ticks:$,bandSize:g,offset:h.offset,entry:ct,index:ut}),ft=At-Rt,gt=h.size,pt={x:tt.left,y:xt,width:tt.width,height:gt},Math.abs(bt)>0&&Math.abs(ft)<Math.abs(bt)){var Dt=mathSign(ft||bt)*(Math.abs(bt)-Math.abs(ft));ft+=Dt}}if(mt==null||xt==null||ft==null||gt==null)return null;var Nt=_objectSpread$1(_objectSpread$1({},ct),{},{stackedBarStart:lt,x:mt,y:xt,width:ft,height:gt,value:_e?dt:dt[1],payload:ct,background:pt,tooltipPosition:{x:mt+ft/2,y:xt+gt/2},parentViewBox:nt},rt&&rt[ut]&&rt[ut].props);return Nt}).filter(Boolean)}function BarFn(e){var i=resolveDefaultProps(e,defaultBarProps),o=useStackId(i.stackId),d=useIsPanorama();return reactExports.createElement(RegisterGraphicalItemId,{id:i.id,type:"bar"},h=>reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetLegendPayload,{legendPayload:computeLegendPayloadFromBarData(i)}),reactExports.createElement(SetBarTooltipEntrySettings,{dataKey:i.dataKey,stroke:i.stroke,strokeWidth:i.strokeWidth,fill:i.fill,name:i.name,hide:i.hide,unit:i.unit,tooltipType:i.tooltipType,id:h}),reactExports.createElement(SetCartesianGraphicalItem,{type:"bar",id:h,data:void 0,xAxisId:i.xAxisId,yAxisId:i.yAxisId,zAxisId:0,dataKey:i.dataKey,stackId:o,hide:i.hide,barSize:i.barSize,minPointSize:i.minPointSize,maxBarSize:i.maxBarSize,isPanorama:d}),reactExports.createElement(ZIndexLayer,{zIndex:i.zIndex},reactExports.createElement(BarImpl,_extends$5({},i,{id:h})))))}var Bar=reactExports.memo(BarFn,propsAreEqual);Bar.displayName="Bar";var _excluded$4=["domain","range"],_excluded2$2=["domain","range"];function _objectWithoutProperties$4(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$4(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$4(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}function shortArraysAreEqual(e,i){return e===i?!0:Array.isArray(e)&&e.length===2&&Array.isArray(i)&&i.length===2?e[0]===i[0]&&e[1]===i[1]:!1}function axisPropsAreEqual(e,i){if(e===i)return!0;var{domain:o,range:d}=e,h=_objectWithoutProperties$4(e,_excluded$4),{domain:g,range:b}=i,j=_objectWithoutProperties$4(i,_excluded2$2);return!shortArraysAreEqual(o,g)||!shortArraysAreEqual(d,b)?!1:propsAreEqual(h,j)}var _excluded$3=["dangerouslySetInnerHTML","ticks","scale"],_excluded2$1=["id","scale"];function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$4.apply(null,arguments)}function _objectWithoutProperties$3(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$3(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$3(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}function SetXAxisSettings(e){var i=useAppDispatch(),o=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>{o.current===null?i(addXAxis(e)):o.current!==e&&i(replaceXAxis({prev:o.current,next:e})),o.current=e},[e,i]),reactExports.useLayoutEffect(()=>()=>{o.current&&(i(removeXAxis(o.current)),o.current=null)},[i]),null}var XAxisImpl=e=>{var{xAxisId:i,className:o}=e,d=useAppSelector(selectAxisViewBox),h=useIsPanorama(),g="xAxis",b=useAppSelector(tt=>selectTicksOfAxis(tt,g,i,h)),j=useAppSelector(tt=>selectXAxisSize(tt,i)),_=useAppSelector(tt=>selectXAxisPosition(tt,i)),$=useAppSelector(tt=>selectXAxisSettingsNoDefaults(tt,i));if(j==null||_==null||$==null)return null;var _e=_objectWithoutProperties$3(e,_excluded$3),et=_objectWithoutProperties$3($,_excluded2$1);return reactExports.createElement(CartesianAxis,_extends$4({},_e,et,{x:_.x,y:_.y,width:j.width,height:j.height,className:clsx("recharts-".concat(g," ").concat(g),o),viewBox:d,ticks:b,axisType:g}))},xAxisDefaultProps={allowDataOverflow:implicitXAxis.allowDataOverflow,allowDecimals:implicitXAxis.allowDecimals,allowDuplicatedCategory:implicitXAxis.allowDuplicatedCategory,angle:implicitXAxis.angle,axisLine:defaultCartesianAxisProps.axisLine,height:implicitXAxis.height,hide:!1,includeHidden:implicitXAxis.includeHidden,interval:implicitXAxis.interval,minTickGap:implicitXAxis.minTickGap,mirror:implicitXAxis.mirror,orientation:implicitXAxis.orientation,padding:implicitXAxis.padding,reversed:implicitXAxis.reversed,scale:implicitXAxis.scale,tick:implicitXAxis.tick,tickCount:implicitXAxis.tickCount,tickLine:defaultCartesianAxisProps.tickLine,tickSize:defaultCartesianAxisProps.tickSize,type:implicitXAxis.type,xAxisId:0},XAxisSettingsDispatcher=e=>{var i=resolveDefaultProps(e,xAxisDefaultProps);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetXAxisSettings,{allowDataOverflow:i.allowDataOverflow,allowDecimals:i.allowDecimals,allowDuplicatedCategory:i.allowDuplicatedCategory,angle:i.angle,dataKey:i.dataKey,domain:i.domain,height:i.height,hide:i.hide,id:i.xAxisId,includeHidden:i.includeHidden,interval:i.interval,minTickGap:i.minTickGap,mirror:i.mirror,name:i.name,orientation:i.orientation,padding:i.padding,reversed:i.reversed,scale:i.scale,tick:i.tick,tickCount:i.tickCount,tickFormatter:i.tickFormatter,ticks:i.ticks,type:i.type,unit:i.unit}),reactExports.createElement(XAxisImpl,i))},XAxis=reactExports.memo(XAxisSettingsDispatcher,axisPropsAreEqual);XAxis.displayName="XAxis";var _excluded$2=["dangerouslySetInnerHTML","ticks","scale"],_excluded2=["id","scale"];function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$3.apply(null,arguments)}function _objectWithoutProperties$2(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$2(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$2(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}function SetYAxisSettings(e){var i=useAppDispatch(),o=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>{o.current===null?i(addYAxis(e)):o.current!==e&&i(replaceYAxis({prev:o.current,next:e})),o.current=e},[e,i]),reactExports.useLayoutEffect(()=>()=>{o.current&&(i(removeYAxis(o.current)),o.current=null)},[i]),null}var YAxisImpl=e=>{var{yAxisId:i,className:o,width:d,label:h}=e,g=reactExports.useRef(null),b=reactExports.useRef(null),j=useAppSelector(selectAxisViewBox),_=useIsPanorama(),$=useAppDispatch(),_e="yAxis",et=useAppSelector(at=>selectYAxisSize(at,i)),tt=useAppSelector(at=>selectYAxisPosition(at,i)),rt=useAppSelector(at=>selectTicksOfAxis(at,_e,i,_)),nt=useAppSelector(at=>selectYAxisSettingsNoDefaults(at,i));if(reactExports.useLayoutEffect(()=>{if(!(d!=="auto"||!et||isLabelContentAFunction(h)||reactExports.isValidElement(h)||nt==null)){var at=g.current;if(at){var ot=at.getCalculatedWidth();Math.round(et.width)!==Math.round(ot)&&$(updateYAxisWidth({id:i,width:ot}))}}},[rt,et,$,h,i,d,nt]),et==null||tt==null||nt==null)return null;var it=_objectWithoutProperties$2(e,_excluded$2),st=_objectWithoutProperties$2(nt,_excluded2);return reactExports.createElement(CartesianAxis,_extends$3({},it,st,{ref:g,labelRef:b,x:tt.x,y:tt.y,tickTextProps:d==="auto"?{width:void 0}:{width:d},width:et.width,height:et.height,className:clsx("recharts-".concat(_e," ").concat(_e),o),viewBox:j,ticks:rt,axisType:_e}))},yAxisDefaultProps={allowDataOverflow:implicitYAxis.allowDataOverflow,allowDecimals:implicitYAxis.allowDecimals,allowDuplicatedCategory:implicitYAxis.allowDuplicatedCategory,angle:implicitYAxis.angle,axisLine:defaultCartesianAxisProps.axisLine,hide:!1,includeHidden:implicitYAxis.includeHidden,interval:implicitYAxis.interval,minTickGap:implicitYAxis.minTickGap,mirror:implicitYAxis.mirror,orientation:implicitYAxis.orientation,padding:implicitYAxis.padding,reversed:implicitYAxis.reversed,scale:implicitYAxis.scale,tick:implicitYAxis.tick,tickCount:implicitYAxis.tickCount,tickLine:defaultCartesianAxisProps.tickLine,tickSize:defaultCartesianAxisProps.tickSize,type:implicitYAxis.type,width:implicitYAxis.width,yAxisId:0},YAxisSettingsDispatcher=e=>{var i=resolveDefaultProps(e,yAxisDefaultProps);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetYAxisSettings,{interval:i.interval,id:i.yAxisId,scale:i.scale,type:i.type,domain:i.domain,allowDataOverflow:i.allowDataOverflow,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,padding:i.padding,includeHidden:i.includeHidden,reversed:i.reversed,ticks:i.ticks,width:i.width,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:i.angle,minTickGap:i.minTickGap,tick:i.tick,tickFormatter:i.tickFormatter}),reactExports.createElement(YAxisImpl,i))},YAxis=reactExports.memo(YAxisSettingsDispatcher,axisPropsAreEqual);YAxis.displayName="YAxis";var pickChartPointer=(e,i)=>i,selectActivePropsFromChartPointer=createSelector([pickChartPointer,selectChartLayout,selectPolarViewBox,selectTooltipAxisType,selectTooltipAxisRangeWithReverse,selectTooltipAxisTicks,selectOrderedTooltipTicks,selectChartOffsetInternal],combineActiveProps),getChartPointer=e=>{var i=e.currentTarget.getBoundingClientRect(),o=i.width/e.currentTarget.offsetWidth,d=i.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-i.left)/o),chartY:Math.round((e.clientY-i.top)/d)}},mouseClickAction=createAction("mouseClick"),mouseClickMiddleware=createListenerMiddleware();mouseClickMiddleware.startListening({actionCreator:mouseClickAction,effect:(e,i)=>{var o=e.payload,d=selectActivePropsFromChartPointer(i.getState(),getChartPointer(o));(d==null?void 0:d.activeIndex)!=null&&i.dispatch(setMouseClickAxisIndex({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate}))}});var mouseMoveAction=createAction("mouseMove"),mouseMoveMiddleware=createListenerMiddleware(),rafId=null;mouseMoveMiddleware.startListening({actionCreator:mouseMoveAction,effect:(e,i)=>{var o=e.payload;rafId!==null&&cancelAnimationFrame(rafId);var d=getChartPointer(o);rafId=requestAnimationFrame(()=>{var h=i.getState(),g=selectTooltipEventType$1(h,h.tooltip.settings.shared);if(g==="axis"){var b=selectActivePropsFromChartPointer(h,d);(b==null?void 0:b.activeIndex)!=null?i.dispatch(setMouseOverAxisIndex({activeIndex:b.activeIndex,activeDataKey:void 0,activeCoordinate:b.activeCoordinate})):i.dispatch(mouseLeaveChart())}rafId=null})}});function reduxDevtoolsJsonStringifyReplacer(e,i){return i instanceof HTMLElement?"HTMLElement <".concat(i.tagName,' class="').concat(i.className,'">'):i===window?"global.window":e==="children"&&typeof i=="object"&&i!==null?"<<CHILDREN>>":i}var initialState={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},rootPropsSlice=createSlice({name:"rootProps",initialState,reducers:{updateOptions:(e,i)=>{var o;e.accessibilityLayer=i.payload.accessibilityLayer,e.barCategoryGap=i.payload.barCategoryGap,e.barGap=(o=i.payload.barGap)!==null&&o!==void 0?o:initialState.barGap,e.barSize=i.payload.barSize,e.maxBarSize=i.payload.maxBarSize,e.stackOffset=i.payload.stackOffset,e.syncId=i.payload.syncId,e.syncMethod=i.payload.syncMethod,e.className=i.payload.className,e.baseValue=i.payload.baseValue,e.reverseStackOrder=i.payload.reverseStackOrder}}}),rootPropsReducer=rootPropsSlice.reducer,{updateOptions}=rootPropsSlice.actions,polarOptionsSlice=createSlice({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,i)=>i.payload}}),polarOptionsReducer=polarOptionsSlice.reducer,keyDownAction=createAction("keyDown"),focusAction=createAction("focus"),keyboardEventsMiddleware=createListenerMiddleware();keyboardEventsMiddleware.startListening({actionCreator:keyDownAction,effect:(e,i)=>{var o=i.getState(),d=o.rootProps.accessibilityLayer!==!1;if(d){var{keyboardInteraction:h}=o.tooltip,g=e.payload;if(!(g!=="ArrowRight"&&g!=="ArrowLeft"&&g!=="Enter")){var b=combineActiveTooltipIndex(h,selectTooltipDisplayedData(o),selectTooltipAxisDataKey(o),selectTooltipAxisDomain(o)),j=b==null?-1:Number(b);if(!(!Number.isFinite(j)||j<0)){var _=selectTooltipAxisTicks(o);if(g==="Enter"){var $=selectCoordinateForDefaultIndex(o,"axis","hover",String(h.index));i.dispatch(setKeyboardInteraction({active:!h.active,activeIndex:h.index,activeCoordinate:$}));return}var _e=selectChartDirection(o),et=_e==="left-to-right"?1:-1,tt=g==="ArrowRight"?1:-1,rt=j+tt*et;if(!(_==null||rt>=_.length||rt<0)){var nt=selectCoordinateForDefaultIndex(o,"axis","hover",String(rt));i.dispatch(setKeyboardInteraction({active:!0,activeIndex:rt.toString(),activeCoordinate:nt}))}}}}}});keyboardEventsMiddleware.startListening({actionCreator:focusAction,effect:(e,i)=>{var o=i.getState(),d=o.rootProps.accessibilityLayer!==!1;if(d){var{keyboardInteraction:h}=o.tooltip;if(!h.active&&h.index==null){var g="0",b=selectCoordinateForDefaultIndex(o,"axis","hover",String(g));i.dispatch(setKeyboardInteraction({active:!0,activeIndex:g,activeCoordinate:b}))}}}});var externalEventAction=createAction("externalEvent"),externalEventsMiddleware=createListenerMiddleware(),rafIdMap=new Map;externalEventsMiddleware.startListening({actionCreator:externalEventAction,effect:(e,i)=>{var{handler:o,reactEvent:d}=e.payload;if(o!=null){d.persist();var h=d.type,g=rafIdMap.get(h);g!==void 0&&cancelAnimationFrame(g);var b=requestAnimationFrame(()=>{try{var j=i.getState(),_={activeCoordinate:selectActiveTooltipCoordinate(j),activeDataKey:selectActiveTooltipDataKey(j),activeIndex:selectActiveTooltipIndex(j),activeLabel:selectActiveLabel$1(j),activeTooltipIndex:selectActiveTooltipIndex(j),isTooltipActive:selectIsTooltipActive$1(j)};o(_,d)}finally{rafIdMap.delete(h)}});rafIdMap.set(h,b)}}});var selectAllTooltipPayloadConfiguration=createSelector([selectTooltipState],e=>e.tooltipItemPayloads),selectTooltipCoordinate=createSelector([selectAllTooltipPayloadConfiguration,selectTooltipPayloadSearcher,(e,i)=>i,(e,i,o)=>o],(e,i,o,d)=>{var h=e.find(j=>j.settings.graphicalItemId===d);if(h!=null){var{positions:g}=h;if(g!=null){var b=i(g,o);return b}}}),touchEventAction=createAction("touchMove"),touchEventMiddleware=createListenerMiddleware();touchEventMiddleware.startListening({actionCreator:touchEventAction,effect:(e,i)=>{var o=e.payload;if(!(o.touches==null||o.touches.length===0)){var d=i.getState(),h=selectTooltipEventType$1(d,d.tooltip.settings.shared);if(h==="axis"){var g=o.touches[0];if(g==null)return;var b=selectActivePropsFromChartPointer(d,getChartPointer({clientX:g.clientX,clientY:g.clientY,currentTarget:o.currentTarget}));(b==null?void 0:b.activeIndex)!=null&&i.dispatch(setMouseOverAxisIndex({activeIndex:b.activeIndex,activeDataKey:void 0,activeCoordinate:b.activeCoordinate}))}else if(h==="item"){var j,_=o.touches[0];if(document.elementFromPoint==null||_==null)return;var $=document.elementFromPoint(_.clientX,_.clientY);if(!$||!$.getAttribute)return;var _e=$.getAttribute(DATA_ITEM_INDEX_ATTRIBUTE_NAME),et=(j=$.getAttribute(DATA_ITEM_GRAPHICAL_ITEM_ID_ATTRIBUTE_NAME))!==null&&j!==void 0?j:void 0,tt=selectAllGraphicalItemsSettings(d).find(it=>it.id===et);if(_e==null||tt==null||et==null)return;var{dataKey:rt}=tt,nt=selectTooltipCoordinate(d,_e,et);i.dispatch(setActiveMouseOverItemIndex({activeDataKey:rt,activeIndex:_e,activeCoordinate:nt,activeGraphicalItemId:et}))}}}});var rootReducer=combineReducers({brush:brushReducer,cartesianAxis:cartesianAxisReducer,chartData:chartDataReducer,errorBars:errorBarReducer,graphicalItems:graphicalItemsReducer,layout:chartLayoutReducer,legend:legendReducer,options:optionsReducer,polarAxis:polarAxisReducer,polarOptions:polarOptionsReducer,referenceElements:referenceElementsReducer,rootProps:rootPropsReducer,tooltip:tooltipReducer,zIndex:zIndexReducer}),createRechartsStore=function e(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return configureStore({reducer:rootReducer,preloadedState:i,middleware:d=>{var h;return d({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((h="es6")!==null&&h!==void 0?h:"")}).concat([mouseClickMiddleware.middleware,mouseMoveMiddleware.middleware,keyboardEventsMiddleware.middleware,externalEventsMiddleware.middleware,touchEventMiddleware.middleware])},enhancers:d=>{var h=d;return typeof d=="function"&&(h=d()),h.concat(autoBatchEnhancer({type:"raf"}))},devTools:{serialize:{replacer:reduxDevtoolsJsonStringifyReplacer},name:"recharts-".concat(o)}})};function RechartsStoreProvider(e){var{preloadedState:i,children:o,reduxStoreName:d}=e,h=useIsPanorama(),g=reactExports.useRef(null);if(h)return o;g.current==null&&(g.current=createRechartsStore(i,d));var b=RechartsReduxContext;return reactExports.createElement(Provider_default,{context:b,store:g.current},o)}function ReportMainChartPropsImpl(e){var{layout:i,margin:o}=e,d=useAppDispatch(),h=useIsPanorama();return reactExports.useEffect(()=>{h||(d(setLayout(i)),d(setMargin(o)))},[d,h,i,o]),null}var ReportMainChartProps=reactExports.memo(ReportMainChartPropsImpl,propsAreEqual);function ReportChartProps(e){var i=useAppDispatch();return reactExports.useEffect(()=>{i(updateOptions(e))},[i,e]),null}function ZIndexSvgPortal(e){var{zIndex:i,isPanorama:o}=e,d=reactExports.useRef(null),h=useAppDispatch();return reactExports.useLayoutEffect(()=>(d.current&&h(registerZIndexPortalElement({zIndex:i,element:d.current,isPanorama:o})),()=>{h(unregisterZIndexPortalElement({zIndex:i,isPanorama:o}))}),[h,i,o]),reactExports.createElement("g",{tabIndex:-1,ref:d})}function AllZIndexPortals(e){var{children:i,isPanorama:o}=e,d=useAppSelector(selectAllRegisteredZIndexes);if(!d||d.length===0)return i;var h=d.filter(b=>b<0),g=d.filter(b=>b>0);return reactExports.createElement(reactExports.Fragment,null,h.map(b=>reactExports.createElement(ZIndexSvgPortal,{key:b,zIndex:b,isPanorama:o})),i,g.map(b=>reactExports.createElement(ZIndexSvgPortal,{key:b,zIndex:b,isPanorama:o})))}var _excluded$1=["children"];function _objectWithoutProperties$1(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose$1(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose$1(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$2.apply(null,arguments)}var FULL_WIDTH_AND_HEIGHT={width:"100%",height:"100%",display:"block"},MainChartSurface=reactExports.forwardRef((e,i)=>{var o=useChartWidth(),d=useChartHeight(),h=useAccessibilityLayer();if(!isPositiveNumber(o)||!isPositiveNumber(d))return null;var{children:g,otherAttributes:b,title:j,desc:_}=e,$,_e;return b!=null&&(typeof b.tabIndex=="number"?$=b.tabIndex:$=h?0:void 0,typeof b.role=="string"?_e=b.role:_e=h?"application":void 0),reactExports.createElement(Surface,_extends$2({},b,{title:j,desc:_,role:_e,tabIndex:$,width:o,height:d,style:FULL_WIDTH_AND_HEIGHT,ref:i}),g)}),BrushPanoramaSurface=e=>{var{children:i}=e,o=useAppSelector(selectBrushDimensions);if(!o)return null;var{width:d,height:h,y:g,x:b}=o;return reactExports.createElement(Surface,{width:d,height:h,x:b,y:g},i)},RootSurface=reactExports.forwardRef((e,i)=>{var{children:o}=e,d=_objectWithoutProperties$1(e,_excluded$1),h=useIsPanorama();return h?reactExports.createElement(BrushPanoramaSurface,null,reactExports.createElement(AllZIndexPortals,{isPanorama:!0},o)):reactExports.createElement(MainChartSurface,_extends$2({ref:i},d),reactExports.createElement(AllZIndexPortals,{isPanorama:!1},o))});function useReportScale(){var e=useAppDispatch(),[i,o]=reactExports.useState(null),d=useAppSelector(selectContainerScale);return reactExports.useEffect(()=>{if(i!=null){var h=i.getBoundingClientRect(),g=h.width/i.offsetWidth;isWellBehavedNumber(g)&&g!==d&&e(setScale(g))}},[i,e,d]),o}function ownKeys(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),o.push.apply(o,d)}return o}function _objectSpread(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(o),!0).forEach(function(d){_defineProperty(e,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(o,d))})}return e}function _defineProperty(e,i,o){return(i=_toPropertyKey(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function _toPropertyKey(e){var i=_toPrimitive(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var d=o.call(e,i||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends$1.apply(null,arguments)}var EventSynchronizer=()=>(useSynchronisedEventsFromOtherCharts(),null);function getNumberOrZero(e){if(typeof e=="number")return e;if(typeof e=="string"){var i=parseFloat(e);if(!Number.isNaN(i))return i}return 0}var ResponsiveDiv=reactExports.forwardRef((e,i)=>{var o,d,h=reactExports.useRef(null),[g,b]=reactExports.useState({containerWidth:getNumberOrZero((o=e.style)===null||o===void 0?void 0:o.width),containerHeight:getNumberOrZero((d=e.style)===null||d===void 0?void 0:d.height)}),j=reactExports.useCallback(($,_e)=>{b(et=>{var tt=Math.round($),rt=Math.round(_e);return et.containerWidth===tt&&et.containerHeight===rt?et:{containerWidth:tt,containerHeight:rt}})},[]),_=reactExports.useCallback($=>{if(typeof i=="function"&&i($),$!=null&&typeof ResizeObserver<"u"){var{width:_e,height:et}=$.getBoundingClientRect();j(_e,et);var tt=nt=>{var{width:it,height:st}=nt[0].contentRect;j(it,st)},rt=new ResizeObserver(tt);rt.observe($),h.current=rt}},[i,j]);return reactExports.useEffect(()=>()=>{var $=h.current;$!=null&&$.disconnect()},[j]),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:g.containerWidth,height:g.containerHeight}),reactExports.createElement("div",_extends$1({ref:_},e)))}),ReadSizeOnceDiv=reactExports.forwardRef((e,i)=>{var{width:o,height:d}=e,[h,g]=reactExports.useState({containerWidth:getNumberOrZero(o),containerHeight:getNumberOrZero(d)}),b=reactExports.useCallback((_,$)=>{g(_e=>{var et=Math.round(_),tt=Math.round($);return _e.containerWidth===et&&_e.containerHeight===tt?_e:{containerWidth:et,containerHeight:tt}})},[]),j=reactExports.useCallback(_=>{if(typeof i=="function"&&i(_),_!=null){var{width:$,height:_e}=_.getBoundingClientRect();b($,_e)}},[i,b]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:h.containerWidth,height:h.containerHeight}),reactExports.createElement("div",_extends$1({ref:j},e)))}),StaticDiv=reactExports.forwardRef((e,i)=>{var{width:o,height:d}=e;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:o,height:d}),reactExports.createElement("div",_extends$1({ref:i},e)))}),NonResponsiveDiv=reactExports.forwardRef((e,i)=>{var{width:o,height:d}=e;return isPercent(o)||isPercent(d)?reactExports.createElement(ReadSizeOnceDiv,_extends$1({},e,{ref:i})):reactExports.createElement(StaticDiv,_extends$1({},e,{ref:i}))});function getWrapperDivComponent(e){return e===!0?ResponsiveDiv:NonResponsiveDiv}var RechartsWrapper=reactExports.forwardRef((e,i)=>{var{children:o,className:d,height:h,onClick:g,onContextMenu:b,onDoubleClick:j,onMouseDown:_,onMouseEnter:$,onMouseLeave:_e,onMouseMove:et,onMouseUp:tt,onTouchEnd:rt,onTouchMove:nt,onTouchStart:it,style:st,width:at,responsive:ot,dispatchTouchEvents:lt=!0}=e,ct=reactExports.useRef(null),ut=useAppDispatch(),[dt,mt]=reactExports.useState(null),[xt,ft]=reactExports.useState(null),gt=useReportScale(),pt=useResponsiveContainerContext(),yt=(pt==null?void 0:pt.width)>0?pt.width:at,bt=(pt==null?void 0:pt.height)>0?pt.height:h,St=reactExports.useCallback(Ct=>{gt(Ct),typeof i=="function"&&i(Ct),mt(Ct),ft(Ct),Ct!=null&&(ct.current=Ct)},[gt,i,mt,ft]),wt=reactExports.useCallback(Ct=>{ut(mouseClickAction(Ct)),ut(externalEventAction({handler:g,reactEvent:Ct}))},[ut,g]),kt=reactExports.useCallback(Ct=>{ut(mouseMoveAction(Ct)),ut(externalEventAction({handler:$,reactEvent:Ct}))},[ut,$]),Et=reactExports.useCallback(Ct=>{ut(mouseLeaveChart()),ut(externalEventAction({handler:_e,reactEvent:Ct}))},[ut,_e]),jt=reactExports.useCallback(Ct=>{ut(mouseMoveAction(Ct)),ut(externalEventAction({handler:et,reactEvent:Ct}))},[ut,et]),Rt=reactExports.useCallback(()=>{ut(focusAction())},[ut]),At=reactExports.useCallback(Ct=>{ut(keyDownAction(Ct.key))},[ut]),Dt=reactExports.useCallback(Ct=>{ut(externalEventAction({handler:b,reactEvent:Ct}))},[ut,b]),Nt=reactExports.useCallback(Ct=>{ut(externalEventAction({handler:j,reactEvent:Ct}))},[ut,j]),zt=reactExports.useCallback(Ct=>{ut(externalEventAction({handler:_,reactEvent:Ct}))},[ut,_]),Vt=reactExports.useCallback(Ct=>{ut(externalEventAction({handler:tt,reactEvent:Ct}))},[ut,tt]),Gt=reactExports.useCallback(Ct=>{ut(externalEventAction({handler:it,reactEvent:Ct}))},[ut,it]),Mt=reactExports.useCallback(Ct=>{lt&&ut(touchEventAction(Ct)),ut(externalEventAction({handler:nt,reactEvent:Ct}))},[ut,lt,nt]),Wt=reactExports.useCallback(Ct=>{ut(externalEventAction({handler:rt,reactEvent:Ct}))},[ut,rt]),Zt=getWrapperDivComponent(ot);return reactExports.createElement(TooltipPortalContext.Provider,{value:dt},reactExports.createElement(LegendPortalContext.Provider,{value:xt},reactExports.createElement(Zt,{width:yt??(st==null?void 0:st.width),height:bt??(st==null?void 0:st.height),className:clsx("recharts-wrapper",d),style:_objectSpread({position:"relative",cursor:"default",width:yt,height:bt},st),onClick:wt,onContextMenu:Dt,onDoubleClick:Nt,onFocus:Rt,onKeyDown:At,onMouseDown:zt,onMouseEnter:kt,onMouseLeave:Et,onMouseMove:jt,onMouseUp:Vt,onTouchEnd:Wt,onTouchMove:Mt,onTouchStart:Gt,ref:St},reactExports.createElement(EventSynchronizer,null),o)))}),_excluded=["width","height","responsive","children","className","style","compact","title","desc"];function _objectWithoutProperties(e,i){if(e==null)return{};var o,d,h=_objectWithoutPropertiesLoose(e,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)o=g[d],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(h[o]=e[o])}return h}function _objectWithoutPropertiesLoose(e,i){if(e==null)return{};var o={};for(var d in e)if({}.hasOwnProperty.call(e,d)){if(i.indexOf(d)!==-1)continue;o[d]=e[d]}return o}var CategoricalChart=reactExports.forwardRef((e,i)=>{var{width:o,height:d,responsive:h,children:g,className:b,style:j,compact:_,title:$,desc:_e}=e,et=_objectWithoutProperties(e,_excluded),tt=svgPropertiesNoEvents(et);return _?reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:o,height:d}),reactExports.createElement(RootSurface,{otherAttributes:tt,title:$,desc:_e},g)):reactExports.createElement(RechartsWrapper,{className:b,style:j,width:o,height:d,responsive:h??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},reactExports.createElement(RootSurface,{otherAttributes:tt,title:$,desc:_e,ref:i},reactExports.createElement(ClipPathProvider,null,g)))});function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var d in o)({}).hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},_extends.apply(null,arguments)}var defaultMargin={top:5,right:5,bottom:5,left:5},defaultCartesianChartProps={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:defaultMargin,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},CartesianChart=reactExports.forwardRef(function e(i,o){var d,h=resolveDefaultProps(i.categoricalChartProps,defaultCartesianChartProps),{chartName:g,defaultTooltipEventType:b,validateTooltipEventTypes:j,tooltipPayloadSearcher:_,categoricalChartProps:$}=i,_e={chartName:g,defaultTooltipEventType:b,validateTooltipEventTypes:j,tooltipPayloadSearcher:_,eventEmitter:void 0};return reactExports.createElement(RechartsStoreProvider,{preloadedState:{options:_e},reduxStoreName:(d=$.id)!==null&&d!==void 0?d:g},reactExports.createElement(ChartDataContextProvider,{chartData:$.data}),reactExports.createElement(ReportMainChartProps,{layout:h.layout,margin:h.margin}),reactExports.createElement(ReportChartProps,{baseValue:h.baseValue,accessibilityLayer:h.accessibilityLayer,barCategoryGap:h.barCategoryGap,maxBarSize:h.maxBarSize,stackOffset:h.stackOffset,barGap:h.barGap,barSize:h.barSize,syncId:h.syncId,syncMethod:h.syncMethod,className:h.className,reverseStackOrder:h.reverseStackOrder}),reactExports.createElement(CategoricalChart,_extends({},h,{ref:o})))}),allowedTooltipTypes$1=["axis"],LineChart=reactExports.forwardRef((e,i)=>reactExports.createElement(CartesianChart,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:allowedTooltipTypes$1,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:e,ref:i})),allowedTooltipTypes=["axis","item"],BarChart=reactExports.forwardRef((e,i)=>reactExports.createElement(CartesianChart,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:allowedTooltipTypes,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:e,ref:i}));function ReadinessChart({aggregates:e,metric:i}){const o=e.map(b=>({date:new Date(b.date).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),readiness:b.readinessPct,attempts:b.attemptsCount,grade9Speed:e.slice(0,e.indexOf(b)+1).reduce((_,$)=>_+$.grade9SpeedCount,0)})),d=()=>i==="readiness"?"Readiness %":i==="attempts"?"Attempts":"Grade 9 Speed (Cumulative)",h=()=>i==="readiness"?"readiness":i==="attempts"?"attempts":"grade9Speed",g=({active:b,payload:j})=>b&&j&&j.length?jsxRuntimeExports.jsxs("div",{className:"p-3 rounded-xl shadow-lg",style:{background:"rgb(var(--surface))",border:"1px solid rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-bold mb-2",style:{color:"rgb(var(--text))"},children:j[0].payload.date}),jsxRuntimeExports.jsxs("p",{className:"text-xs font-semibold",style:{color:"rgb(var(--text-secondary))"},children:[d(),": ",jsxRuntimeExports.jsx("span",{style:{color:"rgb(var(--accent))"},children:j[0].value})]})]}):null;return i==="attempts"?jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:300,children:jsxRuntimeExports.jsxs(BarChart,{data:o,children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"rgba(var(--text-secondary), 0.1)"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"date",tick:{fill:"rgb(var(--text-secondary))",fontSize:12,fontWeight:600},stroke:"rgba(var(--text-secondary), 0.2)"}),jsxRuntimeExports.jsx(YAxis,{tick:{fill:"rgb(var(--text-secondary))",fontSize:12,fontWeight:600},stroke:"rgba(var(--text-secondary), 0.2)"}),jsxRuntimeExports.jsx(Tooltip,{content:jsxRuntimeExports.jsx(g,{})}),jsxRuntimeExports.jsx(Bar,{dataKey:"attempts",fill:"rgb(var(--accent))",radius:[8,8,0,0]})]})}):jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:300,children:jsxRuntimeExports.jsxs(LineChart,{data:o,children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"rgba(var(--text-secondary), 0.1)"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"date",tick:{fill:"rgb(var(--text-secondary))",fontSize:12,fontWeight:600},stroke:"rgba(var(--text-secondary), 0.2)"}),jsxRuntimeExports.jsx(YAxis,{tick:{fill:"rgb(var(--text-secondary))",fontSize:12,fontWeight:600},stroke:"rgba(var(--text-secondary), 0.2)"}),jsxRuntimeExports.jsx(Tooltip,{content:jsxRuntimeExports.jsx(g,{})}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:h(),stroke:"rgb(var(--accent))",strokeWidth:3,dot:{fill:"rgb(var(--accent))",r:4},activeDot:{r:6}})]})})}function ProgressReplay({subjectId:e,quizzes:i,attempts:o}){const[d,h]=reactExports.useState(14),[g,b]=reactExports.useState("timeline"),[j,_]=reactExports.useState("readiness"),[$,_e]=reactExports.useState(null),et=reactExports.useMemo(()=>calculateDailyAggregates(e,i,o,d),[e,i,o,d]),tt=reactExports.useMemo(()=>et.find(at=>at.date===$)||null,[et,$]),rt=reactExports.useMemo(()=>findBestDay(et),[et]),nt=reactExports.useMemo(()=>findLongestStreak(et),[et]),it=reactExports.useMemo(()=>et.find(at=>at.fullGcseAttempted)||null,[et]),st=et.some(at=>at.attemptsCount>0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx(Calendar,{size:28,style:{color:"rgb(var(--accent))"}}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black",style:{color:"rgb(var(--text))"},children:"Progress Replay"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Your training log and readiness trend"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>h(14),className:"px-4 py-2 rounded-lg font-bold text-sm transition-all",style:{background:d===14?"var(--gradient-primary)":"transparent",color:d===14?"white":"rgb(var(--text))"},children:"14d"}),jsxRuntimeExports.jsx("button",{onClick:()=>h(30),className:"px-4 py-2 rounded-lg font-bold text-sm transition-all",style:{background:d===30?"var(--gradient-primary)":"transparent",color:d===30?"white":"rgb(var(--text))"},children:"30d"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>b("timeline"),className:"px-4 py-2 rounded-lg font-bold text-sm transition-all",style:{background:g==="timeline"?"var(--gradient-primary)":"transparent",color:g==="timeline"?"white":"rgb(var(--text))"},children:"Timeline"}),jsxRuntimeExports.jsx("button",{onClick:()=>b("chart"),className:"px-4 py-2 rounded-lg font-bold text-sm transition-all",style:{background:g==="chart"?"var(--gradient-primary)":"transparent",color:g==="chart"?"white":"rgb(var(--text))"},children:"Chart"})]}),g==="chart"&&jsxRuntimeExports.jsxs("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>_("readiness"),className:"px-3 py-2 rounded-lg font-bold text-xs transition-all",style:{background:j==="readiness"?"var(--gradient-primary)":"transparent",color:j==="readiness"?"white":"rgb(var(--text))"},children:"Readiness"}),jsxRuntimeExports.jsx("button",{onClick:()=>_("attempts"),className:"px-3 py-2 rounded-lg font-bold text-xs transition-all",style:{background:j==="attempts"?"var(--gradient-primary)":"transparent",color:j==="attempts"?"white":"rgb(var(--text))"},children:"Attempts"}),jsxRuntimeExports.jsx("button",{onClick:()=>_("grade9Speed"),className:"px-3 py-2 rounded-lg font-bold text-xs transition-all",style:{background:j==="grade9Speed"?"var(--gradient-primary)":"transparent",color:j==="grade9Speed"?"white":"rgb(var(--text))"},children:"G9 Speed"})]})]})]}),st?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[(rt||nt>0||it)&&jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:[rt&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-6 rounded-2xl text-center",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl mx-auto mb-3 flex items-center justify-center",style:{background:"rgba(var(--accent), 0.1)"},children:jsxRuntimeExports.jsx(Award,{size:24,style:{color:"rgb(var(--accent))"}})}),jsxRuntimeExports.jsx("p",{className:"text-lg font-black mb-1",style:{color:"rgb(var(--text))"},children:"Best Day"}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:[new Date(rt.date).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),"  ",rt.grade9SpeedCount>0?`${rt.grade9SpeedCount} Grade 9 Speed`:`${rt.masteryUpgrades} upgrades`]})]}),nt>1&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.05},className:"p-6 rounded-2xl text-center",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl mx-auto mb-3 flex items-center justify-center",style:{background:"rgba(var(--accent), 0.1)"},children:jsxRuntimeExports.jsx(TrendingUp,{size:24,style:{color:"rgb(var(--accent))"}})}),jsxRuntimeExports.jsx("p",{className:"text-lg font-black mb-1",style:{color:"rgb(var(--text))"},children:"Longest Streak"}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:[nt," day",nt!==1?"s":""," in a row"]})]}),it&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},className:"p-6 rounded-2xl text-center",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl mx-auto mb-3 flex items-center justify-center",style:{background:"rgba(var(--accent), 0.1)"},children:jsxRuntimeExports.jsx(Flag,{size:24,style:{color:"rgb(var(--accent))"}})}),jsxRuntimeExports.jsx("p",{className:"text-lg font-black mb-1",style:{color:"rgb(var(--text))"},children:"Boss Day"}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:[new Date(it.date).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),"  ","Full GCSE attempt"]})]})]}),g==="timeline"?jsxRuntimeExports.jsx(TrainingStrip,{aggregates:et,selectedDate:$,onSelectDate:_e}):jsxRuntimeExports.jsx(ReadinessChart,{aggregates:et,metric:j})]}):jsxRuntimeExports.jsxs("div",{className:"text-center py-16",children:[jsxRuntimeExports.jsx(Calendar,{size:64,className:"mx-auto mb-4",style:{color:"rgb(var(--text-secondary))"}}),jsxRuntimeExports.jsx("p",{className:"text-lg font-bold mb-2",style:{color:"rgb(var(--text))"},children:"No training data yet"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Complete a quiz to start your replay"})]})]}),jsxRuntimeExports.jsx(DayDetailDrawer,{day:tt,quizzes:i,allAttempts:o,onClose:()=>_e(null)})]})}function SubjectBreakdownDetail(){const{subjectId:e}=useParams(),i=useNavigate(),[o,d]=reactExports.useState(null),[h,g]=reactExports.useState([]),[b,j]=reactExports.useState([]),[_,$]=reactExports.useState([]),[_e,et]=reactExports.useState(null),[tt,rt]=reactExports.useState([]),[nt,it]=reactExports.useState([]),[st,at]=reactExports.useState(!0),ot=storage.getAllMasteryStates(),lt=storage.getAttempts();reactExports.useEffect(()=>{e&&ct()},[e]);const ct=async()=>{if(e)try{at(!0);const[pt,yt,bt,St]=await Promise.all([db.getSubject(e),db.getQuizzesBySubject(e),db.getTopics(e),db.getUnits(e)]);if(!pt){i("/profile/subjects");return}d(pt),g(yt),j(bt),$(St);const wt=calculateSubjectStats(e,yt,ot,lt);et(wt);const kt=calculateTopicStats(bt,yt,ot,lt);rt(kt);const Et=calculateUnitStats(St,bt,yt,ot);it(Et)}catch(pt){console.error("Error loading subject breakdown:",pt)}finally{at(!1)}},ut=findMostImproved(h,lt),dt=getRecommendedQuiz(h,ot),mt=pt=>{const yt=Math.floor(pt/60),bt=pt%60;return`${yt}:${bt.toString().padStart(2,"0")}`},xt=pt=>pt>=3.5?"rgb(var(--accent))":pt>=2.5?"rgb(34, 197, 94)":pt>=1.5?"rgb(250, 204, 21)":pt>=.5?"rgb(251, 146, 60)":"rgb(150, 150, 150)",ft=[...tt].sort((pt,yt)=>yt.avgMastery-pt.avgMastery).slice(0,5),gt=[...tt].sort((pt,yt)=>pt.avgMastery-yt.avgMastery).slice(0,5);return st?jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-48"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-32"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-96"})]}):!o||!_e?null:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>i("/profile/subjects"),className:"flex items-center gap-2 font-bold transition-all hover:scale-105",style:{color:"rgb(var(--accent))"},children:[jsxRuntimeExports.jsx(ArrowLeft,{size:20}),jsxRuntimeExports.jsx("span",{children:"Back to Subjects"})]}),jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-5",style:{background:`radial-gradient(circle at top right, ${o.themeColor} 0%, transparent 70%)`}}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start md:items-center mb-8",children:[jsxRuntimeExports.jsx("div",{className:"w-24 h-24 rounded-3xl flex items-center justify-center text-5xl",style:{background:`${o.themeColor}20`},children:o.icon}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-black mb-2",style:{color:"rgb(var(--text))"},children:o.name}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold mb-6",style:{color:"rgb(var(--text-secondary))"},children:[o.examBoard,"  ",o.description]}),jsxRuntimeExports.jsx("div",{className:"inline-flex items-center gap-4 px-6 py-3 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-4xl font-black text-gradient",children:[_e.grade9ReadinessPct,"%"]}),jsxRuntimeExports.jsx("p",{className:"text-xs font-bold mt-1",style:{color:"rgb(var(--text-secondary))"},children:"Readiness"})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-4 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-black mb-1",style:{color:"rgb(var(--text))"},children:_e.xpEarned}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"XP Earned"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-black mb-1",style:{color:"rgb(var(--text))"},children:_e.totalAttempts}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Total Attempts"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-black mb-1",style:{color:"rgb(var(--text))"},children:[_e.totalTimeMinutes,"m"]}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Time Spent"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-black mb-1",style:{color:"rgb(var(--text))"},children:_e.totalQuizzes}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"Total Quizzes"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3 mt-6",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>i(`/subjects/${o.id}`),className:"flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all hover:scale-105",style:{background:"var(--gradient-primary)",color:"white"},children:[jsxRuntimeExports.jsx(BookOpen,{size:18}),jsxRuntimeExports.jsx("span",{children:"Go to Subject Library"})]}),dt&&jsxRuntimeExports.jsxs("button",{onClick:()=>i(`/quiz/${dt.quiz.id}`),className:"flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all hover:scale-105",style:{background:"rgb(var(--surface-2))",color:"rgb(var(--text))"},children:[jsxRuntimeExports.jsx(Play,{size:18}),jsxRuntimeExports.jsx("span",{children:"Play Recommended"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black mb-6",style:{color:"rgb(var(--text))"},children:"Mastery Overview"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[{label:"Unseen",count:_e.unseenCount,color:"rgb(150, 150, 150)"},{label:"Learning",count:_e.learningCount,color:"rgb(251, 146, 60)"},{label:"Secure",count:_e.secureCount,color:"rgb(250, 204, 21)"},{label:"Mastered",count:_e.masteredCount,color:"rgb(34, 197, 94)"},{label:"Grade 9 Speed",count:_e.grade9SpeedCount,color:"rgb(var(--accent))"}].map((pt,yt)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:yt*.05},className:"p-6 rounded-2xl text-center",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl mx-auto mb-3 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg",style:{background:pt.color}})}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-black mb-2",style:{color:"rgb(var(--text))"},children:pt.count}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:pt.label})]},pt.label))})]}),jsxRuntimeExports.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black mb-6",style:{color:"rgb(var(--text))"},children:"Strongest Topics"}),ft.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-3",children:ft.map((pt,yt)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:yt*.05},className:"flex items-center justify-between p-4 rounded-xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-black",style:{color:"rgb(var(--text-secondary))"},children:["#",yt+1]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-bold",style:{color:"rgb(var(--text))"},children:pt.topicName}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:[pt.grade9SpeedCount," Grade 9 Speed"]})]})]}),jsxRuntimeExports.jsx("div",{className:"px-3 py-1 rounded-lg text-sm font-bold",style:{background:`${xt(pt.avgMastery)}20`,color:xt(pt.avgMastery)},children:pt.avgMastery.toFixed(1)})]},pt.topicId))}):jsxRuntimeExports.jsx("p",{className:"text-center py-8 font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"No data available"})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black mb-6",style:{color:"rgb(var(--text))"},children:"Weakest Topics"}),gt.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-3",children:gt.map((pt,yt)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:yt*.05},className:"flex items-center justify-between p-4 rounded-xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"font-bold mb-1",style:{color:"rgb(var(--text))"},children:pt.topicName}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:[pt.quizCount," quizzes  ",pt.masteredCount," mastered"]})]}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 rounded-lg font-bold text-sm transition-all hover:scale-105",style:{background:"rgb(var(--accent))",color:"white"},children:"Practice"})]},pt.topicId))}):jsxRuntimeExports.jsx("p",{className:"text-center py-8 font-semibold",style:{color:"rgb(var(--text-secondary))"},children:"No data available"})]})]}),ut.length>0&&jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx(TrendingUp,{size:32,style:{color:"rgb(var(--accent))"}}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black",style:{color:"rgb(var(--text))"},children:"Most Improved"})]}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:ut.slice(0,3).map((pt,yt)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:yt*.1},className:"p-6 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("div",{className:"px-3 py-1 rounded-lg text-sm font-bold",style:{background:"rgba(34, 197, 94, 0.1)",color:"rgb(34, 197, 94)"},children:pt.improvementType==="time"?"Faster":"More Accurate"}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-black text-gradient",children:pt.improvementType==="time"?`-${pt.delta}s`:`+${pt.delta.toFixed(0)}%`})]}),jsxRuntimeExports.jsx("p",{className:"font-bold mb-2",style:{color:"rgb(var(--text))"},children:pt.quizTitle}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold",children:[jsxRuntimeExports.jsx("span",{style:{color:"rgb(var(--text-secondary))"},children:"Before:"}),jsxRuntimeExports.jsx("span",{style:{color:"rgb(var(--text))"},children:pt.improvementType==="time"?mt(pt.before):`${pt.before.toFixed(0)}%`})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold",children:[jsxRuntimeExports.jsx("span",{style:{color:"rgb(var(--text-secondary))"},children:"After:"}),jsxRuntimeExports.jsx("span",{style:{color:"rgb(var(--text))"},children:pt.improvementType==="time"?mt(pt.after):`${pt.after.toFixed(0)}%`})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>i(`/quiz/${pt.quizId}`),className:"w-full mt-4 flex items-center justify-center gap-2 px-4 py-2 rounded-xl font-bold transition-all hover:scale-105",style:{background:"var(--gradient-primary)",color:"white"},children:[jsxRuntimeExports.jsx("span",{children:"Run Again"}),jsxRuntimeExports.jsx(ArrowRight,{size:16})]})]},`${pt.quizId}-${pt.improvementType}`))})]}),jsxRuntimeExports.jsx(ProgressReplay,{subjectId:o.id,quizzes:h,attempts:lt}),dt&&jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black mb-6",style:{color:"rgb(var(--text))"},children:"Recommended Next Sprint"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start md:items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"inline-block px-3 py-1 rounded-lg text-sm font-bold mb-3",style:{background:"rgba(var(--accent), 0.1)",color:"rgb(var(--accent))"},children:dt.reason}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-black mb-2",style:{color:"rgb(var(--text))"},children:dt.quiz.title}),jsxRuntimeExports.jsx("p",{className:"font-semibold mb-4",style:{color:"rgb(var(--text-secondary))"},children:dt.quiz.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm font-semibold",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{size:16,style:{color:"rgb(var(--text-secondary))"}}),jsxRuntimeExports.jsxs("span",{style:{color:"rgb(var(--text))"},children:[Math.ceil(dt.quiz.timeLimitSec/60)," min"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{size:16,style:{color:"rgb(var(--text-secondary))"}}),jsxRuntimeExports.jsxs("span",{style:{color:"rgb(var(--text))"},children:[dt.quiz.promptIds.length," questions"]})]})]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>i(`/quiz/${dt.quiz.id}`),className:"flex items-center gap-2 px-8 py-4 rounded-xl font-bold text-lg transition-all hover:scale-105",style:{background:"var(--gradient-primary)",color:"white"},children:[jsxRuntimeExports.jsx(Play,{size:24}),jsxRuntimeExports.jsx("span",{children:"Start Sprint"})]})]})]}),nt.length>0&&jsxRuntimeExports.jsxs("div",{className:"rounded-3xl p-8",style:{background:"rgb(var(--surface))"},children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black mb-6",style:{color:"rgb(var(--text))"},children:"Unit Breakdown"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:nt.map((pt,yt)=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:yt*.05},className:"p-6 rounded-2xl",style:{background:"rgb(var(--surface-2))"},children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-black mb-2",style:{color:"rgb(var(--text))"},children:pt.unitName}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-semibold",style:{color:"rgb(var(--text-secondary))"},children:[pt.masteredCount," / ",pt.totalQuizzes," mastered",pt.weakestTopic&&`  Weakest: ${pt.weakestTopic.topicName}`]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-4",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-black text-gradient",children:[pt.readinessPct,"%"]}),jsxRuntimeExports.jsx("p",{className:"text-xs font-bold",style:{color:"rgb(var(--text-secondary))"},children:"Readiness"})]})})]})},pt.unitId))})]})]})}const mockLeaderboard=[{id:"1",name:"Emma Johnson",avatar:"",rank:1,weeklyXP:2450,streak:12,readinessPercent:87},{id:"2",name:"You",avatar:"",rank:2,weeklyXP:2100,streak:7,readinessPercent:73},{id:"3",name:"Liam Smith",avatar:"",rank:3,weeklyXP:1980,streak:5,readinessPercent:69},{id:"4",name:"Olivia Brown",avatar:"",rank:4,weeklyXP:1750,streak:9,readinessPercent:78},{id:"5",name:"Noah Wilson",avatar:"",rank:5,weeklyXP:1620,streak:3,readinessPercent:65},{id:"6",name:"Ava Davis",avatar:"",rank:6,weeklyXP:1540,streak:6,readinessPercent:71},{id:"7",name:"James Taylor",avatar:"",rank:7,weeklyXP:1420,streak:4,readinessPercent:68},{id:"8",name:"Sophia Martinez",avatar:"",rank:8,weeklyXP:1350,streak:8,readinessPercent:75}];function LeaderboardPage(){const e=o=>o===1?"from-yellow-500 to-orange-500":o===2?"from-gray-400 to-gray-500":o===3?"from-amber-600 to-amber-700":"from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800",i=o=>o===1?"":o===2?"":o===3?"":o;return jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-xl",children:jsxRuntimeExports.jsx(Trophy,{size:32,className:"text-yellow-600 dark:text-yellow-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white",children:"Leaderboard"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"See how you rank among your friends"})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:mockLeaderboard.slice(0,3).map(o=>jsxRuntimeExports.jsx("div",{className:`bg-gradient-to-br ${e(o.rank)} rounded-2xl p-6 text-white shadow-xl transform ${o.rank===1?"md:scale-105":""}`,children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-5xl mb-2",children:o.avatar}),jsxRuntimeExports.jsx("div",{className:"text-4xl mb-2",children:i(o.rank)}),jsxRuntimeExports.jsx("p",{className:"font-bold text-lg mb-1",children:o.name}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold mb-3",children:[o.weeklyXP," XP"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Flame,{size:16}),jsxRuntimeExports.jsx("span",{children:o.streak})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(TrendingUp,{size:16}),jsxRuntimeExports.jsxs("span",{children:[o.readinessPercent,"%"]})]})]})]})},o.id))}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsx("h2",{className:"font-bold text-gray-900 dark:text-white",children:"Full Rankings"})}),jsxRuntimeExports.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:mockLeaderboard.map(o=>{const d=o.name==="You";return jsxRuntimeExports.jsxs("div",{className:`p-4 flex items-center gap-4 transition-colors ${d?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[jsxRuntimeExports.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${e(o.rank)} flex items-center justify-center text-white font-bold shadow-sm`,children:typeof i(o.rank)=="string"?jsxRuntimeExports.jsx("span",{className:"text-2xl",children:i(o.rank)}):jsxRuntimeExports.jsx("span",{className:"text-lg",children:o.rank})}),jsxRuntimeExports.jsx("div",{className:"text-4xl",children:o.avatar}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:`font-bold ${d?"text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:o.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Trophy,{size:14}),jsxRuntimeExports.jsxs("span",{children:[o.weeklyXP," XP"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Flame,{size:14}),jsxRuntimeExports.jsxs("span",{children:[o.streak," day streak"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Readiness"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[o.readinessPercent,"%"]})]})]},o.id)})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl p-6 text-white shadow-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-2",children:"Compete with Friends"}),jsxRuntimeExports.jsx("p",{className:"text-white/90 mb-4",children:"Stay motivated by comparing your progress with others. Complete more quizzes to climb the leaderboard!"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"Updates weekly"})}),jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"Based on XP earned"})})]})]})]})}function PlaylistCard({playlist:e,quizCount:i,estimatedMinutes:o,onClick:d,variant:h="default"}){const g=h==="featured",b=()=>e.coverStyle==="minimal"?"var(--gradient-muted)":"var(--gradient-primary)";return jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:d,className:`cursor-pointer card-elevated overflow-hidden ${g?"col-span-full md:col-span-1":""}`,children:[jsxRuntimeExports.jsxs("div",{className:`${g?"h-32":"h-24"} flex items-center justify-center relative overflow-hidden`,style:{background:b()},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-10",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"20px 20px"}})}),jsxRuntimeExports.jsx(PlayCircle,{size:g?48:32,className:"text-white relative z-10"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4",children:[e.themeTag&&jsxRuntimeExports.jsx("div",{className:"mb-2",children:jsxRuntimeExports.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded-full",style:{background:"rgb(var(--accent) / 0.1)",color:"rgb(var(--accent))"},children:e.themeTag})}),jsxRuntimeExports.jsx("h3",{className:`font-bold mb-2 ${g?"text-xl":"text-lg"}`,style:{color:"rgb(var(--text))"},children:e.title}),e.description&&jsxRuntimeExports.jsx("p",{className:"text-sm mb-3 line-clamp-2",style:{color:"rgb(var(--text-secondary))"},children:e.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-3 text-sm",style:{color:"rgb(var(--text-secondary))"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Trophy,{size:14}),jsxRuntimeExports.jsxs("span",{children:[i," quizzes"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{size:14}),jsxRuntimeExports.jsxs("span",{children:[o,"m"]})]})]}),jsxRuntimeExports.jsxs("button",{className:"btn-primary w-full flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(PlayCircle,{size:18}),jsxRuntimeExports.jsx("span",{children:"Start Run"}),jsxRuntimeExports.jsx(ChevronRight,{size:18})]})]})]})}function QuizRow({title:e,quizzes:i,onQuizClick:o}){const d=reactExports.useRef(null),h=g=>{if(!d.current)return;const b=400;d.current.scrollBy({left:g==="left"?-b:b,behavior:"smooth"})};return i.length===0?null:jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",style:{color:"rgb(var(--text))"},children:e}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("left"),className:"p-2 rounded-lg hover:bg-opacity-10 transition-colors",style:{color:"rgb(var(--text))"},children:jsxRuntimeExports.jsx(ChevronLeft,{size:24})}),jsxRuntimeExports.jsx("button",{onClick:()=>h("right"),className:"p-2 rounded-lg hover:bg-opacity-10 transition-colors",style:{color:"rgb(var(--text))"},children:jsxRuntimeExports.jsx(ChevronRight,{size:24})})]})]}),jsxRuntimeExports.jsx("div",{ref:d,className:"flex gap-4 overflow-x-auto scrollbar-hide snap-x snap-mandatory pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:i.map(g=>jsxRuntimeExports.jsx("div",{className:"snap-start flex-shrink-0",style:{width:"280px"},children:jsxRuntimeExports.jsx(QuizTile,{quiz:g,onClick:()=>o(g)})},g.id))})]})}function DiscoverPage(){const e=useNavigate(),[i,o]=reactExports.useState(!0),[d,h]=reactExports.useState([]),[g,b]=reactExports.useState([]);reactExports.useEffect(()=>{j()},[]);const j=async()=>{try{const[ut,dt]=await Promise.all([db.getFeaturedPlaylists(),db.getSubjects()]);h(ut);const mt=[];for(const xt of dt){const ft=await db.getQuizzesBySubject(xt.id);mt.push(...ft)}b(mt)}catch(ut){console.error("Failed to load discovery data:",ut)}finally{o(!1)}},_=ut=>({quizCount:6,estimatedMinutes:30}),$=()=>g.filter(ut=>{const dt=storage.getMasteryState(ut.id);return!dt||dt.masteryLevel===0}).slice(0,12),_e=()=>{const ut=g.map(dt=>({quiz:dt,mastery:storage.getMasteryState(dt.id)})).filter(dt=>dt.mastery&&dt.mastery.masteryLevel>0&&dt.mastery.masteryLevel<3);return ut.sort((dt,mt)=>{var ft,gt,pt,yt;const xt=(((ft=dt.mastery)==null?void 0:ft.masteryLevel)||0)-(((gt=mt.mastery)==null?void 0:gt.masteryLevel)||0);return xt!==0?xt:(((pt=dt.mastery)==null?void 0:pt.bestAccuracyPct)||0)-(((yt=mt.mastery)==null?void 0:yt.bestAccuracyPct)||0)}),ut.slice(0,12).map(dt=>dt.quiz)},et=()=>{const ut=g.map(dt=>({quiz:dt,mastery:storage.getMasteryState(dt.id)})).filter(dt=>dt.mastery&&dt.mastery.masteryLevel>0&&dt.mastery.masteryLevel<4);return ut.sort((dt,mt)=>{var gt,pt;const xt=new Date(((gt=dt.mastery)==null?void 0:gt.lastPlayedAt)||0).getTime();return new Date(((pt=mt.mastery)==null?void 0:pt.lastPlayedAt)||0).getTime()-xt}),ut.slice(0,12).map(dt=>dt.quiz)},tt=()=>g.map(dt=>({quiz:dt,mastery:storage.getMasteryState(dt.id)})).filter(dt=>{const mt=dt.mastery;return mt&&mt.bestAccuracyPct===100&&mt.bestTimeSec>dt.quiz.grade9TargetSec}).slice(0,12).map(dt=>dt.quiz),rt=()=>g.filter(ut=>ut.scopeType==="full").slice(0,12),nt=()=>{const ut=g.map(dt=>{const mt=storage.getAttempts().filter(xt=>xt.quizId===dt.id);return{quiz:dt,attemptCount:mt.length}});return ut.sort((dt,mt)=>mt.attemptCount-dt.attemptCount),ut.slice(0,12).map(dt=>dt.quiz)};if(i)return jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-center min-h-[400px]",children:jsxRuntimeExports.jsx("div",{style:{color:"rgb(var(--text-secondary))"},children:"Loading discovery..."})});const it=$(),st=_e(),at=et(),ot=tt(),lt=rt(),ct=nt();return jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Sparkles,{size:32,style:{color:"rgb(var(--accent))"}}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold",style:{color:"rgb(var(--text))"},children:"Discover"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg",style:{color:"rgb(var(--text-secondary))"},children:"Curated runs and personalized recommendations"})]}),d.length>0&&jsxRuntimeExports.jsxs(motion.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(TrendingUp,{size:24,style:{color:"rgb(var(--accent))"}}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",style:{color:"rgb(var(--text))"},children:"Today's Curated Runs"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-12",children:d.slice(0,3).map(ut=>{const dt=_();return jsxRuntimeExports.jsx(PlaylistCard,{playlist:ut,quizCount:dt.quizCount,estimatedMinutes:dt.estimatedMinutes,onClick:()=>e(`/playlists/${ut.id}`),variant:"featured"},ut.id)})})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"space-y-8",children:[st.length>0&&jsxRuntimeExports.jsx(QuizRow,{title:"Because You're Weak Here",quizzes:st,onQuizClick:ut=>e(`/quiz/${ut.id}`)}),it.length>0&&jsxRuntimeExports.jsx(QuizRow,{title:"Unseen Quizzes",quizzes:it,onQuizClick:ut=>e(`/quiz/${ut.id}`)}),at.length>0&&jsxRuntimeExports.jsx(QuizRow,{title:"Finish What You Started",quizzes:at,onQuizClick:ut=>e(`/quiz/${ut.id}`)}),ot.length>0&&jsxRuntimeExports.jsx(QuizRow,{title:"Grade 9 Speed Targets",quizzes:ot,onQuizClick:ut=>e(`/quiz/${ut.id}`)}),lt.length>0&&jsxRuntimeExports.jsx(QuizRow,{title:"Boss Battles",quizzes:lt,onQuizClick:ut=>e(`/quiz/${ut.id}`)}),ct.length>0&&jsxRuntimeExports.jsx(QuizRow,{title:"Trending This Week",quizzes:ct,onQuizClick:ut=>e(`/quiz/${ut.id}`)})]}),it.length===0&&st.length===0&&at.length===0&&jsxRuntimeExports.jsxs("div",{className:"card p-12 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg",style:{color:"rgb(var(--text-secondary))"},children:"Start taking quizzes to get personalized recommendations"}),jsxRuntimeExports.jsx("button",{onClick:()=>e("/subjects"),className:"btn-primary mt-4",children:"Browse Subjects"})]})]})}function PlaylistDetailPage(){const{playlistId:e}=useParams(),i=useNavigate(),[o,d]=reactExports.useState(!0),[h,g]=reactExports.useState(null),[b,j]=reactExports.useState([]);reactExports.useEffect(()=>{_()},[e]);const _=async()=>{if(e)try{const[st,at]=await Promise.all([db.getPlaylist(e),db.getPlaylistQuizzes(e)]);g(st||null),j(at)}catch(st){console.error("Failed to load playlist:",st)}finally{d(!1)}},$=()=>b.filter(st=>{const at=storage.getMasteryState(st.id);return at&&at.masteryLevel>=3}).length,_e=()=>b.reduce((st,at)=>st+Math.ceil(at.timeLimitSec/60),0),et=()=>{for(const st of b){const at=storage.getMasteryState(st.id);if(!at||at.masteryLevel<3)return st}return null},tt=()=>{const st=et();st?i(`/quiz/${st.id}?playlist=${e}`):b.length>0&&i(`/quiz/${b[0].id}?playlist=${e}`)};if(o)return jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-center min-h-[400px]",children:jsxRuntimeExports.jsx("div",{style:{color:"rgb(var(--text-secondary))"},children:"Loading playlist..."})});if(!h)return jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto text-center py-12",children:jsxRuntimeExports.jsx("p",{style:{color:"rgb(var(--text-secondary))"},children:"Playlist not found"})});const rt=$(),nt=_e(),it=et();return jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>i(-1),className:"flex items-center gap-2 text-sm mb-4",style:{color:"rgb(var(--text-secondary))"},children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16}),jsxRuntimeExports.jsx("span",{children:"Back"})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card-elevated p-8",style:{background:"var(--gradient-primary)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[h.themeTag&&jsxRuntimeExports.jsx("div",{className:"mb-3",children:jsxRuntimeExports.jsx("span",{className:"text-xs font-bold px-3 py-1 rounded-full bg-white/20 text-white",children:h.themeTag})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:h.title}),h.description&&jsxRuntimeExports.jsx("p",{className:"text-white/90",children:h.description})]}),jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(PlayCircle,{size:64,className:"text-white/50"})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(Trophy,{size:18,className:"text-white"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-white/80",children:"Quizzes"})]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white stat-number",children:b.length})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(Clock,{size:18,className:"text-white"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-white/80",children:"Time"})]}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-white stat-number",children:[nt,"m"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(CheckCircle,{size:18,className:"text-white"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-white/80",children:"Done"})]}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-white stat-number",children:[rt,"/",b.length]})]})]}),jsxRuntimeExports.jsxs("button",{onClick:tt,className:"w-full bg-white text-lg font-bold py-4 rounded-xl shadow-xl hover:shadow-2xl transition-all flex items-center justify-center gap-2",style:{color:"rgb(var(--accent))"},children:[jsxRuntimeExports.jsx(PlayCircle,{size:24}),jsxRuntimeExports.jsx("span",{children:it?"Start Run":"Replay Run"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold",style:{color:"rgb(var(--text))"},children:"Quizzes in this run"}),b.map((st,at)=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:at*.05},children:jsxRuntimeExports.jsx(QuizTile,{quiz:st,onClick:()=>i(`/quiz/${st.id}?playlist=${e}`)})},st.id))]})]})}function LibraryPage(){const e=useNavigate(),[i,o]=reactExports.useState("saved"),[d,h]=reactExports.useState([]),[g,b]=reactExports.useState([]),[j,_]=reactExports.useState([]),[$,_e]=reactExports.useState(!0);reactExports.useEffect(()=>{et()},[]);const et=async()=>{try{const it=storage.getSavedQuizzes(),st=storage.getAttempts(),at=[...new Set(st.sort((xt,ft)=>new Date(ft.finishedAt).getTime()-new Date(xt.finishedAt).getTime()).slice(0,20).map(xt=>xt.quizId))],ot=Object.keys(storage.getAllMasteryStates()).filter(xt=>{const ft=storage.getMasteryState(xt);return ft&&ft.masteryLevel>=3}),[lt]=await Promise.all([db.getSubjects()]),ct=[];for(const xt of lt){const ft=await db.getQuizzesBySubject(xt.id);ct.push(...ft)}const ut=ct.filter(xt=>it.includes(xt.id)),dt=at.map(xt=>ct.find(ft=>ft.id===xt)).filter(Boolean),mt=ct.filter(xt=>ot.includes(xt.id));h(ut),b(dt),_(mt)}catch(it){console.error("Failed to load library:",it)}finally{_e(!1)}},tt=[{id:"saved",label:"Saved",icon:Bookmark,count:d.length},{id:"recent",label:"Recent",icon:Clock,count:g.length},{id:"completed",label:"Completed",icon:Trophy,count:j.length}],rt=()=>{switch(i){case"saved":return d;case"recent":return g;case"completed":return j}};if($)return jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"h-10 w-48 bg-gray-200 rounded-lg animate-pulse mb-2"}),jsxRuntimeExports.jsx("div",{className:"h-6 w-64 bg-gray-200 rounded-lg animate-pulse"})]}),jsxRuntimeExports.jsx("div",{className:"card p-2",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 h-12 bg-gray-200 rounded-lg animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"flex-1 h-12 bg-gray-200 rounded-lg animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"flex-1 h-12 bg-gray-200 rounded-lg animate-pulse"})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsx(SkeletonQuizTile,{}),jsxRuntimeExports.jsx(SkeletonQuizTile,{}),jsxRuntimeExports.jsx(SkeletonQuizTile,{}),jsxRuntimeExports.jsx(SkeletonQuizTile,{}),jsxRuntimeExports.jsx(SkeletonQuizTile,{}),jsxRuntimeExports.jsx(SkeletonQuizTile,{})]})]});const nt=rt();return jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",style:{color:"rgb(var(--text))"},children:"Library"}),jsxRuntimeExports.jsx("p",{className:"text-base sm:text-lg",style:{color:"rgb(var(--text-secondary))"},children:"Your saved and recent quizzes"})]}),jsxRuntimeExports.jsx("div",{className:"card p-2",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:tt.map(it=>{const st=it.icon,at=i===it.id;return jsxRuntimeExports.jsxs("button",{onClick:()=>o(it.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all focus:outline-none focus:ring-2 focus:ring-blue-500 ${at?"":"hover:bg-gray-50"}`,style:{background:at?"rgb(var(--accent))":"transparent",color:at?"white":"rgb(var(--text-secondary))"},children:[jsxRuntimeExports.jsx(st,{size:18}),jsxRuntimeExports.jsx("span",{children:it.label}),jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold",style:{background:at?"rgba(255,255,255,0.2)":"rgb(var(--muted) / 0.3)",color:at?"white":"rgb(var(--text-secondary))"},children:it.count})]},it.id)})})}),nt.length>0?jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:nt.map((it,st)=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:st*.05},children:jsxRuntimeExports.jsx(QuizTile,{quiz:it,onClick:()=>e(`/quiz/${it.id}`)})},it.id))}):jsxRuntimeExports.jsx(EmptyState,{icon:i==="saved"?Bookmark:i==="recent"?Clock:Trophy,title:i==="saved"?"No saved quizzes yet":i==="recent"?"No recent activity":"No completed quizzes yet",description:i==="saved"?"Save quizzes to practice them later. Browse the discover page to find quizzes to save.":i==="recent"?"Your recently played quizzes will appear here. Start a quiz to see it in this list.":"Complete quizzes to see them here. Master quizzes by achieving high scores consistently.",action:{label:i==="completed"?"Browse Subjects":"Discover Quizzes",onClick:()=>e(i==="completed"?"/subjects":"/discover")}})]})}const ADMIN_PASSCODE="admin123",PASSCODE_KEY="grade9_admin_auth";function AdminLayout({children:e}){const[i,o]=reactExports.useState(!1),[d,h]=reactExports.useState(""),[g,b]=reactExports.useState(""),j=useLocation();reactExports.useEffect(()=>{sessionStorage.getItem(PASSCODE_KEY)===ADMIN_PASSCODE&&o(!0)},[]);const _=et=>{et.preventDefault(),d===ADMIN_PASSCODE?(sessionStorage.setItem(PASSCODE_KEY,d),o(!0),b("")):(b("Invalid passcode"),h(""))},$=()=>{sessionStorage.removeItem(PASSCODE_KEY),o(!1),h("")};if(!i)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 max-w-md w-full shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-6",children:jsxRuntimeExports.jsx("div",{className:"p-4 bg-red-500/10 rounded-xl",children:jsxRuntimeExports.jsx(Lock,{size:48,className:"text-red-600 dark:text-red-400"})})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Admin Access"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"Enter passcode to continue"}),jsxRuntimeExports.jsxs("form",{onSubmit:_,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"password",value:d,onChange:et=>h(et.target.value),placeholder:"Enter passcode",className:"w-full px-4 py-3 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",autoFocus:!0}),g&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2",children:g})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-full px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold transition-colors",children:"Unlock Admin Panel"})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx(Link,{to:"/",className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:" Back to Home"})})]})});const _e=[{path:"/admin",icon:Home,label:"Dashboard"},{path:"/admin/subjects",icon:BookOpen,label:"Subjects"},{path:"/admin/units",icon:Layers,label:"Units"},{path:"/admin/topics",icon:Tag,label:"Topics"},{path:"/admin/prompts",icon:FileText,label:"Prompts"},{path:"/admin/diagrams",icon:Image$1,label:"Diagrams"},{path:"/admin/diagram-templates",icon:PanelsTopLeft,label:"Diagram Templates"},{path:"/admin/ops",icon:Activity,label:"Content Ops"},{path:"/admin/import",icon:Upload,label:"Import"},{path:"/admin/quizzes",icon:Database,label:"Quizzes"},{path:"/admin/playlists",icon:List,label:"Playlists"},{path:"/admin/tools",icon:Wrench,label:"Tools"},{path:"/admin/audit",icon:Shield,label:"Coverage Audit"}];return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsxs("aside",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 min-h-screen fixed left-0 top-0",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Panel"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Grade9 Sprint"})]}),jsxRuntimeExports.jsx("nav",{className:"p-4 space-y-1",children:_e.map(et=>{const tt=et.icon,rt=j.pathname===et.path||j.pathname.startsWith(et.path+"/");return jsxRuntimeExports.jsxs(Link,{to:et.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${rt?"bg-red-500 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[jsxRuntimeExports.jsx(tt,{size:20}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:et.label})]},et.path)})}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("button",{onClick:$,className:"flex items-center gap-3 px-4 py-3 w-full text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors",children:[jsxRuntimeExports.jsx(LogOut,{size:20}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Logout"})]}),jsxRuntimeExports.jsx(Link,{to:"/",className:"flex items-center justify-center gap-2 mt-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:" Back to App"})]})]}),jsxRuntimeExports.jsx("main",{className:"ml-64 flex-1 p-8",children:e||jsxRuntimeExports.jsx(Outlet,{})})]})})}function AdminDashboard(){const[e,i]=reactExports.useState({subjects:0,units:0,topics:0,prompts:0,quizzes:0}),[o,d]=reactExports.useState(!0);reactExports.useEffect(()=>{h()},[]);const h=async()=>{try{const[j,_,$,_e,et]=await Promise.all([db.getSubjects(),Promise.all((await db.getSubjects()).map(tt=>db.getUnits(tt.id))).then(tt=>tt.flat()),Promise.all((await db.getSubjects()).map(tt=>db.getTopics(tt.id))).then(tt=>tt.flat()),Promise.all((await db.getSubjects()).map(tt=>db.getPromptsBySubject(tt.id))).then(tt=>tt.flat()),Promise.all((await db.getSubjects()).map(tt=>db.getQuizzesBySubject(tt.id))).then(tt=>tt.flat())]);i({subjects:j.length,units:_.length,topics:$.length,prompts:_e.length,quizzes:et.length})}catch(j){console.error("Failed to load stats:",j)}finally{d(!1)}},g=[{label:"Subjects",value:e.subjects,icon:BookOpen,color:"from-blue-500 to-cyan-500",link:"/admin/subjects"},{label:"Units",value:e.units,icon:Layers,color:"from-green-500 to-emerald-500",link:"/admin/units"},{label:"Topics",value:e.topics,icon:Tag,color:"from-purple-500 to-pink-500",link:"/admin/topics"},{label:"Prompts",value:e.prompts,icon:FileText,color:"from-orange-500 to-red-500",link:"/admin/prompts"},{label:"Quizzes",value:e.quizzes,icon:Database,color:"from-yellow-500 to-orange-500",link:"/admin/quizzes"}],b=[{label:"Content Coverage",description:"Track coverage across papers and topics",icon:BarChart3,link:"/admin/coverage",color:"indigo"},{label:"Bulk Import",description:"Import prompts from CSV or JSON",icon:Upload,link:"/admin/import",color:"blue"},{label:"Batch Tools",description:"Deduplicate and create quizzes",icon:Wrench,link:"/admin/tools",color:"purple"},{label:"Create Quiz",description:"Build a new quiz manually",icon:Database,link:"/admin/quizzes",color:"green"}];return o?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-96",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}):jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage your Grade9 Sprint content"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:g.map(j=>{const _=j.icon;return jsxRuntimeExports.jsx(Link,{to:j.link,className:"group",children:jsxRuntimeExports.jsxs("div",{className:`bg-gradient-to-br ${j.color} rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all transform hover:scale-105`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx(_,{size:32}),jsxRuntimeExports.jsx(TrendingUp,{size:20,className:"opacity-60"})]}),jsxRuntimeExports.jsx("p",{className:"text-white/80 text-sm font-medium mb-1",children:j.label}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-bold",children:j.value})]})},j.label)})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:b.map(j=>{const _=j.icon,$={indigo:"hover:bg-indigo-50 dark:hover:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800",blue:"hover:bg-blue-50 dark:hover:bg-blue-900/20 border-blue-200 dark:border-blue-800",purple:"hover:bg-purple-50 dark:hover:bg-purple-900/20 border-purple-200 dark:border-purple-800",green:"hover:bg-green-50 dark:hover:bg-green-900/20 border-green-200 dark:border-green-800"};return jsxRuntimeExports.jsx(Link,{to:j.link,className:`block p-4 rounded-lg border transition-colors ${$[j.color]}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(_,{size:24,className:"text-gray-600 dark:text-gray-400 flex-shrink-0 mt-1"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:j.label}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:j.description})]})]})},j.label)})})]})]})}function parseBoolean(e){if(!e)return!1;const i=e.toLowerCase().trim();return["true","1","yes","y","on"].includes(i)}function parseCSV(e){const i=e.trim().split(`
`);if(i.length<2)return[];const o=i[0].split(",").map(h=>h.trim().toLowerCase()),d=[];for(let h=1;h<i.length;h++){const g=parseCSVLine(i[h]),b={};o.forEach((j,_)=>{b[j]=g[_]||""}),b.answers&&typeof b.answers=="string"&&(b.answers=b.answers.split("|").map(j=>j.trim()).filter(Boolean)),d.push({subject:b.subject||"",examBoard:b.examboard||b.exam_board||"",unit:b.unit||"",topic:b.topic||"",type:b.type||"short",question:b.question||"",answers:b.answers||[],hint:b.hint||void 0,explanation:b.explanation||void 0,calculatorAllowed:parseBoolean(b.calculatorallowed||b.calculator_allowed),drawingRecommended:parseBoolean(b.drawingrecommended||b.drawing_recommended)})}return d}function parseCSVLine(e){const i=[];let o="",d=!1;for(let h=0;h<e.length;h++){const g=e[h];g==='"'?d=!d:g===","&&!d?(i.push(o.trim()),o=""):o+=g}return i.push(o.trim()),i}function validateImportRows(e){const i=[],o=["short","mcq","fill","match","label"];return e.forEach((d,h)=>{const g=h+1;d.subject||i.push({row:g,field:"subject",message:"Subject is required"}),d.examBoard||i.push({row:g,field:"examBoard",message:"Exam board is required"}),d.unit||i.push({row:g,field:"unit",message:"Unit is required"}),d.topic||i.push({row:g,field:"topic",message:"Topic is required"}),d.question||i.push({row:g,field:"question",message:"Question is required"}),(!d.answers||d.answers.length===0)&&i.push({row:g,field:"answers",message:"At least one answer is required"}),o.includes(d.type)||i.push({row:g,field:"type",message:`Type must be one of: ${o.join(", ")}`})}),i}function generatePromptHash(e){const i=[e.subject.toLowerCase().trim(),e.unit.toLowerCase().trim(),e.topic.toLowerCase().trim(),e.type,e.question.toLowerCase().trim(),e.answers.map(d=>d.toLowerCase().trim()).sort().join("|")].join("::");let o=0;for(let d=0;d<i.length;d++){const h=i.charCodeAt(d);o=(o<<5)-o+h,o=o&o}return o.toString(36)}function detectDuplicates(e){const i=new Map;e.forEach((d,h)=>{const g=generatePromptHash(d);i.has(g)||i.set(g,[]),i.get(g).push(h)});const o=new Map;return i.forEach((d,h)=>{d.length>1&&o.set(h,d)}),o}async function findOrCreateSubject(e,i,o){const d=o.find(g=>g.name.toLowerCase()===e.toLowerCase()&&g.examBoard.toLowerCase()===i.toLowerCase());if(d)return d;const h=await db.createSubject({name:e,examBoard:i,description:`${e} (${i})`,icon:"",themeColor:"from-gray-500 to-gray-600"});return o.push(h),h}async function findOrCreateUnit(e,i,o){const d=o.find(j=>j.subjectId===i&&j.name.toLowerCase()===e.toLowerCase());if(d)return d;const h=o.filter(j=>j.subjectId===i),g=h.length>0?Math.max(...h.map(j=>j.orderIndex)):0,b=await db.createUnit({subjectId:i,name:e,orderIndex:g+1,description:e});return o.push(b),b}async function findOrCreateTopic(e,i,o,d){const h=d.find(_=>_.unitId===i&&_.name.toLowerCase()===e.toLowerCase());if(h)return h;const g=d.filter(_=>_.unitId===i),b=g.length>0?Math.max(...g.map(_=>_.orderIndex)):0,j=await db.createTopic({subjectId:o,unitId:i,name:e,orderIndex:b+1,description:e});return d.push(j),j}async function importPrompts(e,i=!0,o=!1,d=!1,h){const g={imported:0,skipped:0,updated:0,errors:[],createdSubjects:[],createdUnits:[],createdTopics:[],affectedSubjectIds:[]},b=new Set,j="0d9b0cc0-1779-4097-a684-f41d5b994f50",_=await db.getSubjects(),$=[],_e=[];for(const rt of _){const nt=await db.getUnits(rt.id),it=await db.getTopics(rt.id);$.push(...nt),_e.push(...it)}const et=await Promise.all(_.map(rt=>db.getPromptsBySubject(rt.id))).then(rt=>rt.flat()),tt=new Map(et.map(rt=>{const nt=_.find(ot=>ot.id===rt.subjectId),it=$.find(ot=>ot.id===rt.unitId),st=_e.find(ot=>ot.id===rt.topicId);return!nt||!it||!st?["",null]:[generatePromptHash({subject:nt.name,examBoard:nt.examBoard,unit:it.name,topic:st.name,type:rt.type,question:rt.question,answers:rt.answers}),rt]}).filter(([rt])=>rt!==""));for(let rt=0;rt<e.length;rt++){const nt=e[rt];try{const it=generatePromptHash(nt),st=tt.get(it),at=await findOrCreateSubject(nt.subject,nt.examBoard,_);_.some(dt=>dt.id===at.id)||g.createdSubjects.push(at.name);const ot=await findOrCreateUnit(nt.unit,at.id,$);$.some(dt=>dt.id===ot.id&&g.createdUnits.includes(ot.name))||g.createdUnits.push(ot.name);const lt=await findOrCreateTopic(nt.topic,ot.id,at.id,_e);_e.some(dt=>dt.id===lt.id&&g.createdTopics.includes(lt.name))||g.createdTopics.push(lt.name);const ct=o&&at.id===j;let ut={};if(ct&&(ut.calculatorAllowed=!0),nt.calculatorAllowed!==void 0&&(ut.calculatorAllowed=nt.calculatorAllowed),nt.drawingRecommended!==void 0&&(ut.drawingRecommended=nt.drawingRecommended),nt.diagramMode&&nt.diagramTemplateId&&(ut.diagram={mode:nt.diagramMode,templateId:nt.diagramTemplateId,placement:nt.diagramPlacement||"above",caption:nt.diagramCaption,alt:nt.diagramAlt},nt.diagramParamsJson))try{ut.diagram.params=JSON.parse(nt.diagramParamsJson)}catch(dt){console.warn("Failed to parse diagramParamsJson:",dt)}if(st)if(i){g.skipped++,h&&h({phase:"prompts",currentItem:`Skipping duplicate: ${nt.question.substring(0,50)}...`,processed:rt+1,total:e.length,createdSubjects:g.createdSubjects,createdUnits:g.createdUnits,createdTopics:g.createdTopics,importedPrompts:g.imported,skippedPrompts:g.skipped});continue}else{const mt={...st.meta||{}};if((d||nt.calculatorAllowed!==void 0)&&nt.calculatorAllowed!==void 0&&(mt.calculatorAllowed=nt.calculatorAllowed),(d||nt.drawingRecommended!==void 0)&&nt.drawingRecommended!==void 0&&(mt.drawingRecommended=nt.drawingRecommended),d||nt.diagramMode&&nt.diagramTemplateId)if(nt.diagramMode&&nt.diagramTemplateId){if(mt.diagram={mode:nt.diagramMode,templateId:nt.diagramTemplateId,placement:nt.diagramPlacement||"above",caption:nt.diagramCaption,alt:nt.diagramAlt},nt.diagramParamsJson)try{mt.diagram.params=JSON.parse(nt.diagramParamsJson)}catch(xt){console.warn("Failed to parse diagramParamsJson:",xt)}}else d&&delete mt.diagram;ct&&mt.calculatorAllowed===void 0&&(mt.calculatorAllowed=!0),await db.updatePrompt(st.id,{question:nt.question,answers:nt.answers,hint:nt.hint,explanation:nt.explanation,meta:Object.keys(mt).length>0?mt:void 0}),g.updated++,b.add(at.id),h&&h({phase:"prompts",currentItem:`Updating: ${nt.question.substring(0,50)}...`,processed:rt+1,total:e.length,createdSubjects:g.createdSubjects,createdUnits:g.createdUnits,createdTopics:g.createdTopics,importedPrompts:g.imported,skippedPrompts:g.skipped});continue}await db.createPrompt({subjectId:at.id,unitId:ot.id,topicId:lt.id,type:nt.type,question:nt.question,answers:nt.answers,hint:nt.hint,explanation:nt.explanation,meta:Object.keys(ut).length>0?ut:void 0}),tt.set(it,{id:"",subjectId:at.id,unitId:ot.id,topicId:lt.id,type:nt.type,question:nt.question,answers:nt.answers,hint:nt.hint,explanation:nt.explanation,meta:ut}),g.imported++,b.add(at.id),h&&h({phase:"prompts",currentItem:`Importing: ${nt.question.substring(0,50)}...`,processed:rt+1,total:e.length,createdSubjects:g.createdSubjects,createdUnits:g.createdUnits,createdTopics:g.createdTopics,importedPrompts:g.imported,skippedPrompts:g.skipped})}catch(it){g.errors.push(`Row ${rt+1}: ${it}`)}}return g.affectedSubjectIds=Array.from(b),g}function calculateTimeLimits(e){return{timeLimit:e*30,grade9Target:e*15}}async function createTopicQuizzes(e,i){const o=await db.getTopics(e),d=[];let h=0;for(const g of o){const b=await db.getPromptsByTopic(g.id);if(b.length===0){h++;continue}i&&i({type:"topic",currentItem:`Creating topic quiz: ${g.name}`,processed:h,total:o.length});const{timeLimit:j,grade9Target:_}=calculateTimeLimits(b.length),$=await db.createQuiz({subjectId:e,scopeType:"topic",topicId:g.id,unitId:g.unitId,title:`${g.name} Quick Fire`,description:`Master ${g.name} with rapid recall questions`,timeLimitSec:j,grade9TargetSec:_,promptIds:b.map(_e=>_e.id)});d.push($),h++}return d}async function createUnitQuizzes(e,i){const o=await db.getUnits(e),d=await db.getTopics(e),h=[];let g=0;for(const b of o){const j=d.filter(tt=>tt.unitId===b.id),_=[];for(const tt of j){const rt=await db.getPromptsByTopic(tt.id);_.push(...rt)}if(_.length===0){g++;continue}i&&i({type:"unit",currentItem:`Creating unit quiz: ${b.name}`,processed:g,total:o.length});const{timeLimit:$,grade9Target:_e}=calculateTimeLimits(_.length),et=await db.createQuiz({subjectId:e,scopeType:"unit",unitId:b.id,title:`${b.name} Unit Test`,description:`Comprehensive test covering all ${b.name} topics`,timeLimitSec:$,grade9TargetSec:_e,promptIds:_.map(tt=>tt.id)});h.push(et),g++}return h}async function createFullGCSEQuiz(e,i){const o=await db.getSubject(e),d=await db.getPromptsBySubject(e);if(d.length===0)return null;i&&i({type:"full",currentItem:`Creating full GCSE quiz: ${o==null?void 0:o.name}`,processed:0,total:1});const{timeLimit:h,grade9Target:g}=calculateTimeLimits(d.length);return await db.createQuiz({subjectId:e,scopeType:"full",title:`${o==null?void 0:o.name} Full GCSE Challenge`,description:`Complete ${o==null?void 0:o.name} assessment covering all topics`,timeLimitSec:h,grade9TargetSec:g,promptIds:d.map(j=>j.id)})}const STORAGE_KEY="contentops_import_log";function ImportLogPage(){const[e,i]=reactExports.useState([]),[o,d]=reactExports.useState(null);reactExports.useEffect(()=>{h()},[]);const h=()=>{try{const j=localStorage.getItem(STORAGE_KEY);if(j){const _=JSON.parse(j);i(_)}}catch(j){console.error("Failed to load import log:",j)}},g=j=>{const _=[["Row","Error"],...j.errors.map(tt=>[tt.row,tt.message])].map(tt=>tt.join(",")).join(`
`),$=new Blob([_],{type:"text/csv"}),_e=URL.createObjectURL($),et=document.createElement("a");et.href=_e,et.download=`import-errors-${j.id}.csv`,et.click(),URL.revokeObjectURL(_e)},b=()=>{confirm("Clear all import logs?")&&(localStorage.removeItem(STORAGE_KEY),i([]),d(null))};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Import Log"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track import progress and dedupe results"})]}),e.length>0&&jsxRuntimeExports.jsx("button",{onClick:b,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Clear Log"})]}),e.length===0?jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-12 text-center",children:[jsxRuntimeExports.jsx(FileText,{size:48,className:"mx-auto text-gray-400 mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No import runs yet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Import logs will appear here after you import content"})]}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Import Runs"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:e.map(j=>jsxRuntimeExports.jsxs("button",{onClick:()=>d(j),className:`w-full text-left p-4 rounded-xl border transition-all ${(o==null?void 0:o.id)===j.id?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{size:16,className:"text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(j.ranAt).toLocaleString()})]}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:j.format})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Rows:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 font-semibold text-gray-900 dark:text-white",children:j.rowsIn})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Imported:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 font-semibold text-green-600 dark:text-green-400",children:j.imported})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Duplicates:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 font-semibold text-yellow-600 dark:text-yellow-400",children:j.skippedDuplicates})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Errors:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 font-semibold text-red-600 dark:text-red-400",children:j.errorsCount})]})]}),j.errorsCount===0&&j.skippedDuplicates===0&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-3 text-green-600 dark:text-green-400 text-sm",children:[jsxRuntimeExports.jsx(CheckCircle,{size:14}),jsxRuntimeExports.jsx("span",{children:"Clean import"})]})]},j.id))})]}),o&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Run Details"}),o.errorsCount>0&&jsxRuntimeExports.jsxs("button",{onClick:()=>g(o),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors",children:[jsxRuntimeExports.jsx(Download,{size:14}),"Export Errors"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Summary"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Created Subjects:"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:o.createdSubjects})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Created Units:"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:o.createdUnits})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Created Topics:"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:o.createdTopics})]})]})]}),o.errors.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:["Errors (",o.errors.length,")"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[o.errors.slice(0,200).map((j,_)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[jsxRuntimeExports.jsx(AlertCircle,{size:16,className:"text-red-500 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs font-medium text-red-600 dark:text-red-400 mb-1",children:["Row ",j.row]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-900 dark:text-white break-words",children:j.message})]})]},_)),o.errors.length>200&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-2",children:"Showing first 200 errors. Export to see all."})]})]}),o.duplicates.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:["Duplicates (",o.duplicates.length,")"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[o.duplicates.slice(0,200).map((j,_)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[jsxRuntimeExports.jsx(AlertCircle,{size:16,className:"text-yellow-500 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs font-medium text-yellow-600 dark:text-yellow-400 mb-1",children:["Row ",j.row]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-900 dark:text-white break-words",children:j.question})]})]},_)),o.duplicates.length>200&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-2",children:"Showing first 200 duplicates"})]})]})]})]})]})}function logImportRun(e){try{const i=localStorage.getItem(STORAGE_KEY),o=i?JSON.parse(i):[],d={...e,id:Date.now().toString(),ranAt:new Date().toISOString()};o.unshift(d),o.length>50&&o.splice(50),localStorage.setItem(STORAGE_KEY,JSON.stringify(o))}catch(i){console.error("Failed to log import run:",i)}}function ImportPage(){const[e,i]=reactExports.useState("input"),[o,d]=reactExports.useState("csv"),[h,g]=reactExports.useState(""),[b,j]=reactExports.useState([]),[_,$]=reactExports.useState([]),[_e,et]=reactExports.useState(new Map),[tt,rt]=reactExports.useState(!0),[nt,it]=reactExports.useState(!1),[st,at]=reactExports.useState(!1),[ot,lt]=reactExports.useState(!1),[ct,ut]=reactExports.useState({topic:!0,unit:!0,full:!1}),[dt,mt]=reactExports.useState(!1),[xt,ft]=reactExports.useState(null),[gt,pt]=reactExports.useState({phase:"prompts",currentItem:"",promptsProcessed:0,promptsTotal:0,quizzesProcessed:0,quizzesTotal:0,createdSubjects:[],createdUnits:[],createdTopics:[],importedPrompts:0,skippedPrompts:0}),yt=()=>{try{let wt=[];if(o==="json"){const jt=JSON.parse(h);wt=Array.isArray(jt)?jt:[jt]}else wt=parseCSV(h);const kt=validateImportRows(wt),Et=detectDuplicates(wt);j(wt),$(kt),et(Et),i("preview")}catch(wt){alert(`Parse error: ${wt}`)}},bt=async()=>{mt(!0),i("importing");try{pt({phase:"prompts",currentItem:"Starting import...",promptsProcessed:0,promptsTotal:b.length,quizzesProcessed:0,quizzesTotal:0,createdSubjects:[],createdUnits:[],createdTopics:[],importedPrompts:0,skippedPrompts:0});const wt=await importPrompts(b,tt,nt,st,kt=>{pt(Et=>({...Et,phase:"prompts",currentItem:kt.currentItem,promptsProcessed:kt.processed,promptsTotal:kt.total,createdSubjects:kt.createdSubjects,createdUnits:kt.createdUnits,createdTopics:kt.createdTopics,importedPrompts:kt.importedPrompts,skippedPrompts:kt.skippedPrompts}))});if(ot&&wt.imported>0&&wt.affectedSubjectIds.length>0){const{db:kt}=await __vitePreload(async()=>{const{db:Et}=await Promise.resolve().then(()=>client);return{db:Et}},void 0);for(const Et of wt.affectedSubjectIds){const jt=await kt.getSubject(Et);jt&&(ct.topic&&(pt(Rt=>({...Rt,phase:"topic-quizzes",currentItem:`Creating topic quizzes for ${jt.name}...`})),await createTopicQuizzes(jt.id,Rt=>{pt(At=>({...At,phase:"topic-quizzes",currentItem:Rt.currentItem,quizzesProcessed:Rt.processed,quizzesTotal:Rt.total}))})),ct.unit&&(pt(Rt=>({...Rt,phase:"unit-quizzes",currentItem:`Creating unit quizzes for ${jt.name}...`})),await createUnitQuizzes(jt.id,Rt=>{pt(At=>({...At,phase:"unit-quizzes",currentItem:Rt.currentItem,quizzesProcessed:Rt.processed,quizzesTotal:Rt.total}))})),ct.full&&(pt(Rt=>({...Rt,phase:"full-quizzes",currentItem:`Creating full quiz for ${jt.name}...`})),await createFullGCSEQuiz(jt.id,Rt=>{pt(At=>({...At,phase:"full-quizzes",currentItem:Rt.currentItem,quizzesProcessed:Rt.processed,quizzesTotal:Rt.total}))})))}}logImportRun({format:o,rowsIn:b.length,imported:wt.imported,skippedDuplicates:wt.skipped,createdSubjects:wt.createdSubjects||0,createdUnits:wt.createdUnits||0,createdTopics:wt.createdTopics||0,errorsCount:_.length,errors:_.map(kt=>({row:kt.row,message:kt.message})),duplicates:Array.from(_e.entries()).flatMap(([kt,Et])=>Et.map(jt=>({row:jt,question:kt})))}),ft(wt),i("complete")}catch(wt){alert(`Import error: ${wt}`)}finally{mt(!1)}},St=()=>{i("input"),g(""),j([]),$([]),et(new Map),ft(null)};if(e==="input")return jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Bulk Import Prompts"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Import multiple prompts at once using JSON or CSV format"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4 mb-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>d("csv"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${o==="csv"?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[jsxRuntimeExports.jsx(FileText,{size:20}),jsxRuntimeExports.jsx("span",{children:"CSV Format"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>d("json"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${o==="json"?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[jsxRuntimeExports.jsx(FileJson,{size:20}),jsxRuntimeExports.jsx("span",{children:"JSON Format"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o==="csv"?"Paste CSV Data":"Paste JSON Array"}),jsxRuntimeExports.jsx("textarea",{value:h,onChange:wt=>g(wt.target.value),placeholder:o==="csv"?`subject,examBoard,unit,topic,type,question,answers,hint,explanation,calculatorAllowed,drawingRecommended
Maths,Edexcel Higher,Number,Fractions,short,What is 1/2 + 1/4?,3/4|0.75,,Convert to common denominator,true,false`:'[{"subject":"Maths","examBoard":"Edexcel Higher","unit":"Number","topic":"Fractions","type":"short","question":"What is 1/2 + 1/4?","answers":["3/4","0.75"],"explanation":"Convert to common denominator","calculatorAllowed":true}]',className:"w-full h-64 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),jsxRuntimeExports.jsxs("button",{onClick:yt,disabled:!h,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg font-semibold transition-colors",children:[jsxRuntimeExports.jsx(Upload,{size:20}),jsxRuntimeExports.jsx("span",{children:"Parse & Preview"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Format Requirements"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" Required fields: subject, examBoard, unit, topic, type, question, answers"}),jsxRuntimeExports.jsx("li",{children:" Optional fields: hint, explanation, calculatorAllowed, drawingRecommended"}),jsxRuntimeExports.jsx("li",{children:' CSV answers: use pipe delimiter (e.g., "answer1|answer2")'}),jsxRuntimeExports.jsx("li",{children:" JSON answers: array of strings"}),jsxRuntimeExports.jsx("li",{children:" Valid types: short, mcq, fill, match, label"}),jsxRuntimeExports.jsx("li",{children:" Boolean fields: true/false, 1/0, yes/no, y/n (case-insensitive)"})]})]})]});if(e==="preview"){const wt=new Set(Array.from(_e.values()).flat()),kt=b.filter(jt=>jt.calculatorAllowed).length,Et=b.filter(jt=>jt.drawingRecommended).length;return jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Preview Import"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[b.length," rows parsed"]})]}),jsxRuntimeExports.jsx("button",{onClick:St,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors",children:"Back"})]}),_.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-4 border border-red-200 dark:border-red-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(AlertCircle,{size:20,className:"text-red-600 dark:text-red-400"}),jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-red-900 dark:text-red-100",children:[_.length," Validation Errors"]})]}),jsxRuntimeExports.jsxs("div",{className:"max-h-40 overflow-y-auto space-y-1",children:[_.slice(0,20).map((jt,Rt)=>jsxRuntimeExports.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:["Row ",jt.row,", ",jt.field,": ",jt.message]},Rt)),_.length>20&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["... and ",_.length-20," more errors"]})]})]}),_e.size>0&&jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(AlertCircle,{size:20,className:"text-yellow-600 dark:text-yellow-400"}),jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-yellow-900 dark:text-yellow-100",children:[wt.size," Duplicate Rows Detected"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-yellow-800 dark:text-yellow-200",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:tt,onChange:jt=>rt(jt.target.checked),className:"rounded"}),jsxRuntimeExports.jsx("span",{children:"Skip duplicate prompts"})]}),!tt&&jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-yellow-800 dark:text-yellow-200 ml-6",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:st,onChange:jt=>at(jt.target.checked),className:"rounded"}),jsxRuntimeExports.jsx("span",{children:"Force overwrite meta from CSV (even if blank)"})]})]})]}),(kt>0||Et>0)&&jsxRuntimeExports.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-green-900 dark:text-green-100 mb-2",children:"Meta Fields Summary"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-green-800 dark:text-green-200",children:"Calculator allowed prompts: "}),jsxRuntimeExports.jsx("span",{className:"font-bold text-green-900 dark:text-green-100",children:kt})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-green-800 dark:text-green-200",children:"Drawing recommended prompts: "}),jsxRuntimeExports.jsx("span",{className:"font-bold text-green-900 dark:text-green-100",children:Et})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"Import Options"}),jsxRuntimeExports.jsxs("label",{className:"flex items-start gap-3 text-sm text-blue-800 dark:text-blue-200",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:nt,onChange:jt=>it(jt.target.checked),className:"rounded mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Enable calculators for all Maths prompts"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-300 mt-1",children:"Automatically mark all Maths subject prompts as calculator-allowed"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"First 10 Rows Preview"}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("th",{className:"text-left p-2 font-semibold text-gray-900 dark:text-white",children:"Subject"}),jsxRuntimeExports.jsx("th",{className:"text-left p-2 font-semibold text-gray-900 dark:text-white",children:"Unit"}),jsxRuntimeExports.jsx("th",{className:"text-left p-2 font-semibold text-gray-900 dark:text-white",children:"Topic"}),jsxRuntimeExports.jsx("th",{className:"text-left p-2 font-semibold text-gray-900 dark:text-white",children:"Question"}),jsxRuntimeExports.jsx("th",{className:"text-left p-2 font-semibold text-gray-900 dark:text-white",children:"Answers"}),jsxRuntimeExports.jsx("th",{className:"text-left p-2 font-semibold text-gray-900 dark:text-white",children:"Calculator"}),jsxRuntimeExports.jsx("th",{className:"text-left p-2 font-semibold text-gray-900 dark:text-white",children:"Drawing"})]})}),jsxRuntimeExports.jsx("tbody",{children:b.slice(0,10).map((jt,Rt)=>jsxRuntimeExports.jsxs("tr",{className:`border-b border-gray-100 dark:border-gray-700 ${wt.has(Rt)?"bg-yellow-50 dark:bg-yellow-900/10":""}`,children:[jsxRuntimeExports.jsx("td",{className:"p-2 text-gray-700 dark:text-gray-300",children:jt.subject}),jsxRuntimeExports.jsx("td",{className:"p-2 text-gray-700 dark:text-gray-300",children:jt.unit}),jsxRuntimeExports.jsx("td",{className:"p-2 text-gray-700 dark:text-gray-300",children:jt.topic}),jsxRuntimeExports.jsxs("td",{className:"p-2 text-gray-700 dark:text-gray-300",children:[jt.question.slice(0,50),"..."]}),jsxRuntimeExports.jsx("td",{className:"p-2 text-gray-700 dark:text-gray-300",children:jt.answers.join(", ")}),jsxRuntimeExports.jsx("td",{className:"p-2",children:jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${jt.calculatorAllowed?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:jt.calculatorAllowed?"Allowed":"Not allowed"})}),jsxRuntimeExports.jsx("td",{className:"p-2",children:jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${jt.drawingRecommended?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:jt.drawingRecommended?"Recommended":"Not recommended"})})]},Rt))})]})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Batch Quiz Creation (Optional)"}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:ot,onChange:jt=>lt(jt.target.checked),className:"rounded"}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Auto-create quizzes after import"})]}),ot&&jsxRuntimeExports.jsxs("div",{className:"space-y-2 ml-6",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:ct.topic,onChange:jt=>ut({...ct,topic:jt.target.checked}),className:"rounded"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Create topic quizzes (1 per topic)"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:ct.unit,onChange:jt=>ut({...ct,unit:jt.target.checked}),className:"rounded"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Create unit quizzes (1 per unit)"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:ct.full,onChange:jt=>ut({...ct,full:jt.target.checked}),className:"rounded"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Create full GCSE quiz (1 per subject)"})]})]})]}),jsxRuntimeExports.jsxs("button",{onClick:bt,disabled:_.length>0||dt,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white rounded-lg font-semibold transition-colors",children:[jsxRuntimeExports.jsx(CheckCircle,{size:20}),jsxRuntimeExports.jsx("span",{children:"Confirm Import"})]})]})}if(e==="importing"){const wt=gt.promptsTotal>0?gt.promptsProcessed/gt.promptsTotal*100:0,kt=gt.quizzesTotal>0?gt.quizzesProcessed/gt.quizzesTotal*100:0;return jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx(Loader,{size:32,className:"animate-spin text-blue-500"}),jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[gt.phase==="prompts"&&"Importing Prompts...",gt.phase==="topic-quizzes"&&"Creating Topic Quizzes...",gt.phase==="unit-quizzes"&&"Creating Unit Quizzes...",gt.phase==="full-quizzes"&&"Creating Full Quizzes..."]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[jsxRuntimeExports.jsx("span",{children:"Prompts"}),jsxRuntimeExports.jsxs("span",{children:[gt.promptsProcessed," / ",gt.promptsTotal]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${wt}%`}})})]}),gt.phase!=="prompts"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[jsxRuntimeExports.jsx("span",{children:"Quizzes"}),jsxRuntimeExports.jsxs("span",{children:[gt.quizzesProcessed," / ",gt.quizzesTotal]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${kt}%`}})})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:gt.currentItem}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[jsxRuntimeExports.jsx(Database,{size:16}),jsxRuntimeExports.jsx("span",{children:"Imported"})]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:gt.importedPrompts})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[jsxRuntimeExports.jsx(AlertCircle,{size:16}),jsxRuntimeExports.jsx("span",{children:"Skipped"})]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:gt.skippedPrompts})]})]})]}),(gt.createdSubjects.length>0||gt.createdUnits.length>0||gt.createdTopics.length>0)&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 space-y-3",children:[gt.createdSubjects.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-blue-800 dark:text-blue-200 mb-1",children:[jsxRuntimeExports.jsx(BookOpen,{size:16}),jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:["Created Subjects (",gt.createdSubjects.length,")"]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 ml-6",children:gt.createdSubjects.join(", ")})]}),gt.createdUnits.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-blue-800 dark:text-blue-200 mb-1",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:["Created Units (",gt.createdUnits.length,")"]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 ml-6",children:gt.createdUnits.join(", ")})]}),gt.createdTopics.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-blue-800 dark:text-blue-200 mb-1",children:[jsxRuntimeExports.jsx(FolderTree,{size:16}),jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:["Created Topics (",gt.createdTopics.length,")"]})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 ml-6",children:[gt.createdTopics.slice(0,10).join(", "),gt.createdTopics.length>10&&` ... and ${gt.createdTopics.length-10} more`]})]})]})]})]})})}return e==="complete"&&xt?jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-2xl p-8 border border-green-200 dark:border-green-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx(CheckCircle,{size:32,className:"text-green-600 dark:text-green-400"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:"Import Complete!"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-green-800 dark:text-green-200 font-semibold",children:"Imported"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-green-900 dark:text-green-100",children:xt.imported})]}),xt.updated>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-green-800 dark:text-green-200 font-semibold",children:"Updated"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-green-900 dark:text-green-100",children:xt.updated})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-green-800 dark:text-green-200 font-semibold",children:"Skipped"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-green-900 dark:text-green-100",children:xt.skipped})]})]}),xt.createdSubjects.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:["Created Subjects: ",xt.createdSubjects.length]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:xt.createdSubjects.join(", ")})]}),xt.createdUnits.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:["Created Units: ",xt.createdUnits.length]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:xt.createdUnits.join(", ")})]}),xt.createdTopics.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:["Created Topics: ",xt.createdTopics.length]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:xt.createdTopics.join(", ")})]})]}),jsxRuntimeExports.jsx("button",{onClick:St,className:"w-full px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors",children:"Import More"})]}):null}function SubjectsPage(){const[e,i]=reactExports.useState([]),[o,d]=reactExports.useState(!0),[h,g]=reactExports.useState(!1),[b,j]=reactExports.useState(null),[_,$]=reactExports.useState({name:"",examBoard:"",description:"",icon:"",themeColor:"from-gray-500 to-gray-600"});reactExports.useEffect(()=>{_e()},[]);const _e=async()=>{try{const st=await db.getSubjects();i(st)}catch(st){console.error("Failed to load subjects:",st)}finally{d(!1)}},et=()=>{j(null),$({name:"",examBoard:"",description:"",icon:"",themeColor:"from-gray-500 to-gray-600"}),g(!0)},tt=st=>{j(st),$({name:st.name,examBoard:st.examBoard,description:st.description,icon:st.icon,themeColor:st.themeColor}),g(!0)},rt=async()=>{try{b?await db.updateSubject(b.id,_):await db.createSubject(_),g(!1),_e()}catch(st){console.error("Failed to save subject:",st)}},nt=async st=>{if(confirm("Are you sure you want to delete this subject? This will also delete all associated units, topics, prompts, and quizzes."))try{await db.deleteSubject(st),_e()}catch(at){console.error("Failed to delete subject:",at)}},it=[{value:"from-blue-500 to-cyan-500",label:"Blue"},{value:"from-green-500 to-emerald-500",label:"Green"},{value:"from-purple-500 to-pink-500",label:"Purple"},{value:"from-orange-500 to-red-500",label:"Orange"},{value:"from-yellow-500 to-orange-500",label:"Yellow"},{value:"from-red-500 to-pink-500",label:"Red"},{value:"from-gray-500 to-gray-600",label:"Gray"}];return o?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-96",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Subjects"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage GCSE subjects and exam boards"})]}),jsxRuntimeExports.jsxs("button",{onClick:et,className:"flex items-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold transition-colors",children:[jsxRuntimeExports.jsx(Plus,{size:20}),jsxRuntimeExports.jsx("span",{children:"New Subject"})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(st=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[jsxRuntimeExports.jsxs("div",{className:`bg-gradient-to-br ${st.themeColor} p-6 text-white`,children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-2",children:st.icon}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold",children:st.name}),jsxRuntimeExports.jsx("p",{className:"text-white/80 text-sm",children:st.examBoard})]}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:st.description}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>tt(st),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors",children:[jsxRuntimeExports.jsx(Pen,{size:16}),jsxRuntimeExports.jsx("span",{children:"Edit"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>nt(st.id),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors",children:[jsxRuntimeExports.jsx(Trash2,{size:16}),jsxRuntimeExports.jsx("span",{children:"Delete"})]})]})]})]},st.id))}),e.length===0&&jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-12 text-center",children:[jsxRuntimeExports.jsx(BookOpen,{size:48,className:"mx-auto text-gray-400 mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No subjects yet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first subject to get started"}),jsxRuntimeExports.jsxs("button",{onClick:et,className:"inline-flex items-center gap-2 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold transition-colors",children:[jsxRuntimeExports.jsx(Plus,{size:20}),jsxRuntimeExports.jsx("span",{children:"New Subject"})]})]}),h&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:b?"Edit Subject":"New Subject"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:_.name,onChange:st=>$({..._,name:st.target.value}),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Mathematics"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Exam Board"}),jsxRuntimeExports.jsx("input",{type:"text",value:_.examBoard,onChange:st=>$({..._,examBoard:st.target.value}),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Edexcel Higher"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),jsxRuntimeExports.jsx("textarea",{value:_.description,onChange:st=>$({..._,description:st.target.value}),rows:3,className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"GCSE Mathematics covering..."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Icon (emoji)"}),jsxRuntimeExports.jsx("input",{type:"text",value:_.icon,onChange:st=>$({..._,icon:st.target.value}),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:""})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Theme Color"}),jsxRuntimeExports.jsx("select",{value:_.themeColor,onChange:st=>$({..._,themeColor:st.target.value}),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:it.map(st=>jsxRuntimeExports.jsx("option",{value:st.value,children:st.label},st.value))})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-6",children:[jsxRuntimeExports.jsx("button",{onClick:rt,className:"flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold transition-colors",children:b?"Save Changes":"Create Subject"}),jsxRuntimeExports.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-xl font-semibold transition-colors",children:"Cancel"})]})]})})]})}const ToastContext=reactExports.createContext(void 0);function ToastProvider({children:e}){const[i,o]=reactExports.useState([]),d=reactExports.useCallback((_,$)=>{const _e=Math.random().toString(36).substr(2,9);o(et=>[...et,{id:_e,type:_,message:$}]),setTimeout(()=>{o(et=>et.filter(tt=>tt.id!==_e))},4e3)},[]),h=reactExports.useCallback(_=>d("success",_),[d]),g=reactExports.useCallback(_=>d("error",_),[d]),b=reactExports.useCallback(_=>d("info",_),[d]),j=_=>{o($=>$.filter(_e=>_e.id!==_))};return jsxRuntimeExports.jsxs(ToastContext.Provider,{value:{showToast:d,success:h,error:g,info:b},children:[e,jsxRuntimeExports.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-md",children:jsxRuntimeExports.jsx(AnimatePresence,{children:i.map(_=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:50,scale:.3},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.5,transition:{duration:.2}},className:`
                flex items-start gap-3 p-4 rounded-xl shadow-lg
                ${_.type==="success"?"bg-green-500 text-white":""}
                ${_.type==="error"?"bg-red-500 text-white":""}
                ${_.type==="info"?"bg-blue-500 text-white":""}
              `,children:[_.type==="success"&&jsxRuntimeExports.jsx(CheckCircle,{size:20}),_.type==="error"&&jsxRuntimeExports.jsx(AlertCircle,{size:20}),_.type==="info"&&jsxRuntimeExports.jsx(Info,{size:20}),jsxRuntimeExports.jsx("p",{className:"flex-1 font-medium",children:_.message}),jsxRuntimeExports.jsx("button",{onClick:()=>j(_.id),className:"hover:opacity-70 transition-opacity","aria-label":"Close",children:jsxRuntimeExports.jsx(X,{size:18})})]},_.id))})})]})}function useToast(){const e=reactExports.useContext(ToastContext);if(!e)throw new Error("useToast must be used within ToastProvider");return e}function UnitsPage(){const{showToast:e}=useToast(),{confirm:i}=useConfirm(),[o,d]=reactExports.useState(!0),[h,g]=reactExports.useState([]),[b,j]=reactExports.useState([]),[_,$]=reactExports.useState(""),[_e,et]=reactExports.useState(""),[tt,rt]=reactExports.useState(null);reactExports.useEffect(()=>{nt()},[]);const nt=async()=>{try{d(!0);const lt=await db.getSubjects();j(lt);const ct=lt.map(dt=>db.getUnits(dt.id)),ut=await Promise.all(ct);g(ut.flat())}catch(lt){console.error("Failed to load data:",lt),e("Failed to load units","error")}finally{d(!1)}},it=async lt=>{if(await i(`Delete unit "${lt.name}"? This will also delete all topics and prompts in this unit.`))try{await db.deleteUnit(lt.id),e("Unit deleted successfully","success"),await nt()}catch(ct){console.error("Failed to delete unit:",ct),e("Failed to delete unit","error")}},st=async()=>{if(tt)try{await db.updateUnit(tt.id,tt),e("Unit updated successfully","success"),rt(null),await nt()}catch(lt){console.error("Failed to update unit:",lt),e("Failed to update unit","error")}},at=h.filter(lt=>{var dt;const ct=!_||lt.name.toLowerCase().includes(_.toLowerCase())||((dt=lt.description)==null?void 0:dt.toLowerCase().includes(_.toLowerCase())),ut=!_e||lt.subjectId===_e;return ct&&ut}),ot=lt=>{var ct;return((ct=b.find(ut=>ut.id===lt))==null?void 0:ct.name)||"Unknown"};return o?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-96",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Units"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Manage units within subjects (",at.length," total)"]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-[200px]",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:_,onChange:lt=>$(lt.target.value),placeholder:"Search units...",className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]})}),jsxRuntimeExports.jsxs("select",{value:_e,onChange:lt=>et(lt.target.value),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Subjects"}),b.map(lt=>jsxRuntimeExports.jsx("option",{value:lt.id,children:lt.name},lt.id))]})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("tr",{className:"text-left text-sm font-medium text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Name"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Subject"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Description"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Order"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:at.map(lt=>jsxRuntimeExports.jsxs("tr",{className:"text-sm hover:bg-gray-50 dark:hover:bg-gray-700/30",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:lt.name})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:ot(lt.subjectId)}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 max-w-md",children:jsxRuntimeExports.jsx("div",{className:"truncate text-gray-700 dark:text-gray-300",children:lt.description||"-"})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:lt.orderIndex}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>rt(lt),className:"p-1.5 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded transition-colors",children:jsxRuntimeExports.jsx(Pen,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>it(lt),className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 rounded transition-colors",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})})]},lt.id))})]})}),at.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No units found"})]}),tt&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 p-6 flex items-center justify-between",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Edit Unit"}),jsxRuntimeExports.jsx("button",{onClick:()=>rt(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{size:20,className:"text-gray-600 dark:text-gray-400"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:tt.name,onChange:lt=>rt({...tt,name:lt.target.value}),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),jsxRuntimeExports.jsx("textarea",{value:tt.description||"",onChange:lt=>rt({...tt,description:lt.target.value||void 0}),rows:3,className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Order Index"}),jsxRuntimeExports.jsx("input",{type:"number",value:tt.orderIndex,onChange:lt=>rt({...tt,orderIndex:parseInt(lt.target.value)}),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 pt-4",children:[jsxRuntimeExports.jsx("button",{onClick:st,className:"flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold transition-colors",children:"Save Changes"}),jsxRuntimeExports.jsx("button",{onClick:()=>rt(null),className:"flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-xl font-semibold transition-colors",children:"Cancel"})]})]})]})})]})}function TopicsPage(){const{showToast:e}=useToast(),{confirm:i}=useConfirm(),[o,d]=reactExports.useState(!0),[h,g]=reactExports.useState([]),[b,j]=reactExports.useState([]),[_,$]=reactExports.useState([]),[_e,et]=reactExports.useState(""),[tt,rt]=reactExports.useState(""),[nt,it]=reactExports.useState(null);reactExports.useEffect(()=>{st()},[]);const st=async()=>{try{d(!0);const dt=await db.getSubjects();j(dt);const mt=dt.map(pt=>db.getUnits(pt.id)),xt=dt.map(pt=>db.getTopics(pt.id)),[ft,gt]=await Promise.all([Promise.all(mt),Promise.all(xt)]);$(ft.flat()),g(gt.flat())}catch(dt){console.error("Failed to load data:",dt),e("Failed to load topics","error")}finally{d(!1)}},at=async dt=>{if(await i(`Delete topic "${dt.name}"? This will also delete all prompts in this topic.`))try{await db.deleteTopic(dt.id),e("Topic deleted successfully","success"),await st()}catch(mt){console.error("Failed to delete topic:",mt),e("Failed to delete topic","error")}},ot=async()=>{if(nt)try{await db.updateTopic(nt.id,nt),e("Topic updated successfully","success"),it(null),await st()}catch(dt){console.error("Failed to update topic:",dt),e("Failed to update topic","error")}},lt=h.filter(dt=>{var ft;const mt=!_e||dt.name.toLowerCase().includes(_e.toLowerCase())||((ft=dt.description)==null?void 0:ft.toLowerCase().includes(_e.toLowerCase())),xt=!tt||dt.subjectId===tt;return mt&&xt}),ct=dt=>{var mt;return((mt=b.find(xt=>xt.id===dt))==null?void 0:mt.name)||"Unknown"},ut=dt=>{var mt;return((mt=_.find(xt=>xt.id===dt))==null?void 0:mt.name)||"Unknown"};return o?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-96",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Topics"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Manage topics within units (",lt.length," total)"]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-[200px]",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:_e,onChange:dt=>et(dt.target.value),placeholder:"Search topics...",className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]})}),jsxRuntimeExports.jsxs("select",{value:tt,onChange:dt=>rt(dt.target.value),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Subjects"}),b.map(dt=>jsxRuntimeExports.jsx("option",{value:dt.id,children:dt.name},dt.id))]})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("tr",{className:"text-left text-sm font-medium text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Name"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Subject"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Unit"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Description"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Order"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:lt.map(dt=>jsxRuntimeExports.jsxs("tr",{className:"text-sm hover:bg-gray-50 dark:hover:bg-gray-700/30",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:dt.name})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:ct(dt.subjectId)}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:ut(dt.unitId)}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 max-w-md",children:jsxRuntimeExports.jsx("div",{className:"truncate text-gray-700 dark:text-gray-300",children:dt.description||"-"})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:dt.orderIndex}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>it(dt),className:"p-1.5 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded transition-colors",children:jsxRuntimeExports.jsx(Pen,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>at(dt),className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 rounded transition-colors",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})})]},dt.id))})]})}),lt.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No topics found"})]}),nt&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 p-6 flex items-center justify-between",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Edit Topic"}),jsxRuntimeExports.jsx("button",{onClick:()=>it(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{size:20,className:"text-gray-600 dark:text-gray-400"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:nt.name,onChange:dt=>it({...nt,name:dt.target.value}),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),jsxRuntimeExports.jsx("textarea",{value:nt.description||"",onChange:dt=>it({...nt,description:dt.target.value||void 0}),rows:3,className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Order Index"}),jsxRuntimeExports.jsx("input",{type:"number",value:nt.orderIndex,onChange:dt=>it({...nt,orderIndex:parseInt(dt.target.value)}),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 pt-4",children:[jsxRuntimeExports.jsx("button",{onClick:ot,className:"flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold transition-colors",children:"Save Changes"}),jsxRuntimeExports.jsx("button",{onClick:()=>it(null),className:"flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-xl font-semibold transition-colors",children:"Cancel"})]})]})]})})]})}function DiagramParamsEditor({metadata:e,onChange:i}){const[o,d]=reactExports.useState((e==null?void 0:e.mode)||"none"),[h,g]=reactExports.useState((e==null?void 0:e.templateId)||""),[b,j]=reactExports.useState((e==null?void 0:e.placement)||"above"),[_,$]=reactExports.useState((e==null?void 0:e.caption)||""),[_e,et]=reactExports.useState((e==null?void 0:e.alt)||""),[tt,rt]=reactExports.useState((e==null?void 0:e.params)||{}),[nt,it]=reactExports.useState(!1),[st]=reactExports.useState(getAllTemplates()),[at,ot]=reactExports.useState(null);reactExports.useEffect(()=>{if(o==="auto"&&h){const gt=st.find(pt=>pt.templateId===h);if(ot(gt||null),gt&&!(e!=null&&e.params)){const pt={labels:{},positions:{},values:{},visibility:{}};gt.schema.labels&&Object.entries(gt.schema.labels).forEach(([yt,bt])=>{bt.default!==void 0&&(pt.labels[yt]=bt.default)}),gt.schema.positions&&Object.entries(gt.schema.positions).forEach(([yt,bt])=>{bt.default&&(pt.positions[yt]=bt.default)}),gt.schema.values&&Object.entries(gt.schema.values).forEach(([yt,bt])=>{bt.default!==void 0&&(pt.values[yt]=bt.default)}),gt.schema.visibility&&Object.entries(gt.schema.visibility).forEach(([yt,bt])=>{bt.default!==void 0&&(pt.visibility[yt]=bt.default)}),rt(pt)}}},[o,h,st]),reactExports.useEffect(()=>{i(o==="none"||o==="auto"&&!h?void 0:{mode:o,templateId:h,placement:b,caption:_||void 0,alt:_e||void 0,params:o==="auto"?tt:void 0})},[o,h,b,_,_e,tt]);const lt=(gt,pt)=>{rt(yt=>({...yt,labels:{...yt.labels,[gt]:pt}}))},ct=(gt,pt)=>{rt(yt=>({...yt,values:{...yt.values,[gt]:pt}}))},ut=(gt,pt)=>{rt(yt=>({...yt,visibility:{...yt.visibility,[gt]:pt}}))},dt=(gt,pt,yt)=>{rt(bt=>{var St;return{...bt,positions:{...bt.positions,[gt]:{...((St=bt.positions)==null?void 0:St[gt])||{x:0,y:0},[pt]:yt}}}})},mt={mode:o,templateId:h,placement:b,caption:_||void 0,alt:_e||void 0,params:tt},xt=o==="auto"&&h?validateDiagram(mt):null,ft=st.reduce((gt,pt)=>(gt[pt.category]||(gt[pt.category]=[]),gt[pt.category].push(pt),gt),{});return o==="none"?jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Diagram Configuration"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>d("auto"),className:"w-full px-4 py-3 text-left bg-indigo-50 hover:bg-indigo-100 border border-indigo-200 rounded-lg transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-indigo-900",children:"Auto-Render Diagram"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-indigo-700 mt-1",children:"Generate diagram from parameters (recommended)"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>d("template"),className:"w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900",children:"Use Template with Overrides"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-700 mt-1",children:"Apply overrides to stored SVG template"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>d("asset"),className:"w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900",children:"Use Static Asset"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-700 mt-1",children:"Link to existing diagram asset"})]})]})]}):o!=="auto"?jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Diagram Configuration"}),jsxRuntimeExports.jsx("button",{onClick:()=>d("none"),className:"text-sm text-gray-600 hover:text-gray-900",children:"Change Mode"})]}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600",children:['Mode "',o,'" is not yet fully supported in this editor. Use auto mode for now.']})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Auto-Render Diagram"}),jsxRuntimeExports.jsx("button",{onClick:()=>d("none"),className:"text-sm text-red-600 hover:text-red-700",children:"Remove Diagram"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template"}),jsxRuntimeExports.jsxs("select",{value:h,onChange:gt=>g(gt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select a template..."}),Object.entries(ft).map(([gt,pt])=>jsxRuntimeExports.jsx("optgroup",{label:gt.charAt(0).toUpperCase()+gt.slice(1),children:pt.map(yt=>jsxRuntimeExports.jsx("option",{value:yt.templateId,children:yt.title},yt.templateId))},gt))]}),at&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:at.description})]}),xt&&jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-lg ${xt.ok?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[xt.ok?jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-green-600"}):jsxRuntimeExports.jsx(AlertCircle,{className:"w-5 h-5 text-red-600"}),jsxRuntimeExports.jsx("span",{className:`font-medium ${xt.ok?"text-green-900":"text-red-900"}`,children:xt.ok?"Valid Configuration":"Validation Failed"})]}),xt.errors.length>0&&jsxRuntimeExports.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-red-700",children:xt.errors.map((gt,pt)=>jsxRuntimeExports.jsx("li",{children:gt},pt))}),xt.warnings.length>0&&jsxRuntimeExports.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-yellow-700",children:xt.warnings.map((gt,pt)=>jsxRuntimeExports.jsx("li",{children:gt},pt))})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-4",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Placement"}),jsxRuntimeExports.jsxs("select",{value:b,onChange:gt=>j(gt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[jsxRuntimeExports.jsx("option",{value:"above",children:"Above Question"}),jsxRuntimeExports.jsx("option",{value:"below",children:"Below Question"}),jsxRuntimeExports.jsx("option",{value:"side",children:"Side (Desktop)"}),jsxRuntimeExports.jsx("option",{value:"inline",children:"Inline"})]})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caption (optional)"}),jsxRuntimeExports.jsx("input",{type:"text",value:_,onChange:gt=>$(gt.target.value),placeholder:"Diagram is not to scale",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alt Text (optional)"}),jsxRuntimeExports.jsx("input",{type:"text",value:_e,onChange:gt=>et(gt.target.value),placeholder:"Description for screen readers",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),at&&jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Diagram Parameters"}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[at.schema.labels&&Object.keys(at.schema.labels).length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Labels"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(at.schema.labels).map(([gt,pt])=>{var yt;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[gt," ",pt.required&&jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"text",value:((yt=tt.labels)==null?void 0:yt[gt])||"",onChange:bt=>lt(gt,bt.target.value),maxLength:pt.maxLen,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]},gt)})})]}),at.schema.values&&Object.keys(at.schema.values).length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Values"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(at.schema.values).map(([gt,pt])=>{var yt;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[gt," ",pt.required&&jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:pt.type==="number"?"number":"text",value:((yt=tt.values)==null?void 0:yt[gt])??"",onChange:bt=>ct(gt,pt.type==="number"?parseFloat(bt.target.value):bt.target.value),min:pt.min,max:pt.max,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]},gt)})})]}),at.schema.visibility&&Object.keys(at.schema.visibility).length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Visibility"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:Object.entries(at.schema.visibility).map(([gt,pt])=>{var yt;return jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:((yt=tt.visibility)==null?void 0:yt[gt])??pt.default??!0,onChange:bt=>ut(gt,bt.target.checked),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700",children:gt})]},gt)})})]}),at.schema.positions&&Object.keys(at.schema.positions).length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Positions (Normalized 0-1)"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Object.entries(at.schema.positions).map(([gt,pt])=>{var yt,bt,St,wt,kt,Et;return jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[gt," X ",pt.required&&jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",value:((bt=(yt=tt.positions)==null?void 0:yt[gt])==null?void 0:bt.x)??((St=pt.default)==null?void 0:St.x)??0,onChange:jt=>dt(gt,"x",parseFloat(jt.target.value)),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[gt," Y"]}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",value:((kt=(wt=tt.positions)==null?void 0:wt[gt])==null?void 0:kt.y)??((Et=pt.default)==null?void 0:Et.y)??0,onChange:jt=>dt(gt,"y",parseFloat(jt.target.value)),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]},gt)})})]})]})]}),h&&jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Preview"}),jsxRuntimeExports.jsxs("button",{onClick:()=>it(!nt),className:"flex items-center gap-2 text-sm text-indigo-600 hover:text-indigo-700",children:[jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4"}),nt?"Hide":"Show"," Preview"]})]}),nt&&jsxRuntimeExports.jsx(DiagramRenderer,{metadata:mt,showWarnings:!0})]})]})}function PromptsPage(){var bt,St;const{showToast:e}=useToast(),{confirm:i}=useConfirm(),[o,d]=reactExports.useState(!0),[h,g]=reactExports.useState([]),[b,j]=reactExports.useState([]),[_,$]=reactExports.useState([]),[_e,et]=reactExports.useState([]),[tt,rt]=reactExports.useState([]),[nt,it]=reactExports.useState(""),[st,at]=reactExports.useState(""),[ot,lt]=reactExports.useState(""),[ct,ut]=reactExports.useState(null);reactExports.useEffect(()=>{dt()},[]);const dt=async()=>{try{d(!0);const[wt,kt,Et]=await Promise.all([db.getSubjects(),db.getAllPrompts(),supabase.from("diagrams").select("*").order("title")]);j(wt),g(kt),Et.data&&rt(Et.data.map(Nt=>({...Nt,tags:Nt.tags||[],canvasData:Nt.canvas_data||{elements:[]},svgData:Nt.svg_data,pngUrl:Nt.png_url,subjectId:Nt.subject_id,diagramType:Nt.diagram_type,storageMode:Nt.storage_mode,createdAt:Nt.created_at,updatedAt:Nt.updated_at})));const jt=wt.map(Nt=>db.getUnits(Nt.id)),Rt=wt.map(Nt=>db.getTopics(Nt.id)),[At,Dt]=await Promise.all([Promise.all(jt),Promise.all(Rt)]);$(At.flat()),et(Dt.flat())}catch(wt){console.error("Failed to load data:",wt),e("Failed to load prompts","error")}finally{d(!1)}},mt=async wt=>{if(await i(`Delete prompt: "${wt.question}"?`))try{await db.deletePrompt(wt.id),e("Prompt deleted successfully","success"),await dt()}catch(kt){console.error("Failed to delete prompt:",kt),e("Failed to delete prompt","error")}},xt=async()=>{if(!ct)return;const wt=ct.answers.filter(kt=>kt.trim());if(wt.length===0){e("At least one answer is required","error");return}try{await db.updatePrompt(ct.id,{...ct,answers:wt}),e("Prompt updated successfully","success"),ut(null),await dt()}catch(kt){console.error("Failed to update prompt:",kt),e("Failed to update prompt","error")}},ft=h.filter(wt=>{var Rt;const kt=!nt||wt.question.toLowerCase().includes(nt.toLowerCase())||((Rt=wt.explanation)==null?void 0:Rt.toLowerCase().includes(nt.toLowerCase())),Et=!st||wt.subjectId===st,jt=!ot||wt.type===ot;return kt&&Et&&jt}),gt=wt=>{var kt;return((kt=b.find(Et=>Et.id===wt))==null?void 0:kt.name)||"Unknown"},pt=wt=>{var kt;return((kt=_.find(Et=>Et.id===wt))==null?void 0:kt.name)||"Unknown"},yt=wt=>{var kt;return((kt=_e.find(Et=>Et.id===wt))==null?void 0:kt.name)||"Unknown"};return o?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-96",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Prompts"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Manage quiz questions and prompts (",ft.length," total)"]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-[200px]",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:nt,onChange:wt=>it(wt.target.value),placeholder:"Search prompts...",className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]})}),jsxRuntimeExports.jsxs("select",{value:st,onChange:wt=>at(wt.target.value),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Subjects"}),b.map(wt=>jsxRuntimeExports.jsx("option",{value:wt.id,children:wt.name},wt.id))]}),jsxRuntimeExports.jsxs("select",{value:ot,onChange:wt=>lt(wt.target.value),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Types"}),jsxRuntimeExports.jsx("option",{value:"short",children:"Short Answer"}),jsxRuntimeExports.jsx("option",{value:"long",children:"Long Answer"}),jsxRuntimeExports.jsx("option",{value:"multiple-choice",children:"Multiple Choice"}),jsxRuntimeExports.jsx("option",{value:"true-false",children:"True/False"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("tr",{className:"text-left text-sm font-medium text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Type"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Question"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Subject"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Unit"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Topic"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Answers"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3",children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:ft.map(wt=>jsxRuntimeExports.jsxs("tr",{className:"text-sm hover:bg-gray-50 dark:hover:bg-gray-700/30",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded text-xs font-medium",children:wt.type})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 max-w-md",children:jsxRuntimeExports.jsx("div",{className:"truncate text-gray-900 dark:text-white",children:wt.question})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:gt(wt.subjectId)}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:pt(wt.unitId)}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:yt(wt.topicId)}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:wt.answers.length}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>ut(wt),className:"p-1.5 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded transition-colors",children:jsxRuntimeExports.jsx(Pen,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>mt(wt),className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 rounded transition-colors",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})})]},wt.id))})]})}),ft.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No prompts found"})]}),ct&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 flex items-center justify-between",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Edit Prompt"}),jsxRuntimeExports.jsx("button",{onClick:()=>ut(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{size:20,className:"text-gray-600 dark:text-gray-400"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Question"}),jsxRuntimeExports.jsx("textarea",{value:ct.question,onChange:wt=>ut({...ct,question:wt.target.value}),rows:3,className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),jsxRuntimeExports.jsxs("select",{value:ct.type,onChange:wt=>ut({...ct,type:wt.target.value}),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[jsxRuntimeExports.jsx("option",{value:"short",children:"Short Answer"}),jsxRuntimeExports.jsx("option",{value:"long",children:"Long Answer"}),jsxRuntimeExports.jsx("option",{value:"multiple-choice",children:"Multiple Choice"}),jsxRuntimeExports.jsx("option",{value:"true-false",children:"True/False"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Correct Answers"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[ct.answers.map((wt,kt)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:wt,onChange:Et=>{const jt=[...ct.answers];jt[kt]=Et.target.value,ut({...ct,answers:jt})},className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:`Answer ${kt+1}`}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const Et=ct.answers.filter((jt,Rt)=>Rt!==kt);ut({...ct,answers:Et.length>0?Et:[""]})},className:"px-3 py-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]},kt)),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{ut({...ct,answers:[...ct.answers,""]})},className:"w-full px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),"Add Answer"]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hint (optional)"}),jsxRuntimeExports.jsx("textarea",{value:ct.hint||"",onChange:wt=>ut({...ct,hint:wt.target.value||void 0}),rows:2,className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Explanation"}),jsxRuntimeExports.jsx("textarea",{value:ct.explanation||"",onChange:wt=>ut({...ct,explanation:wt.target.value||void 0}),rows:3,className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:((bt=ct.meta)==null?void 0:bt.calculatorAllowed)===!0,onChange:wt=>ut({...ct,meta:{...ct.meta,calculatorAllowed:wt.target.checked}}),className:"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-blue-500 focus:ring-2 focus:ring-blue-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Calculator Allowed"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Show calculator in the Maths Toolkit for this prompt"})]})]})}),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:jsxRuntimeExports.jsx(DiagramParamsEditor,{metadata:(St=ct.meta)==null?void 0:St.diagram,onChange:wt=>{const kt={...ct.meta};wt?kt.diagram=wt:delete kt.diagram,ut({...ct,meta:kt})}})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 pt-4",children:[jsxRuntimeExports.jsx("button",{onClick:xt,className:"flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold transition-colors",children:"Save Changes"}),jsxRuntimeExports.jsx("button",{onClick:()=>ut(null),className:"flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-xl font-semibold transition-colors",children:"Cancel"})]})]})]})})]})}function DiagramsPage(){const e=useNavigate(),{showToast:i}=useToast(),{confirm:o}=useConfirm(),[d,h]=reactExports.useState([]),[g,b]=reactExports.useState([]),[j,_]=reactExports.useState(!0),[$,_e]=reactExports.useState(""),[et,tt]=reactExports.useState(""),[rt,nt]=reactExports.useState("");reactExports.useEffect(()=>{it()},[]);const it=async()=>{var ut;_(!0);try{const[dt,mt]=await Promise.all([supabase.from("diagrams").select("*").order("updated_at",{ascending:!1}),supabase.from("subjects").select("*").order("name")]);if(dt.error)throw dt.error;if(mt.error)throw mt.error;h(((ut=dt.data)==null?void 0:ut.map(xt=>({...xt,tags:xt.tags||[],canvasData:xt.canvas_data||{elements:[]},svgData:xt.svg_data,pngUrl:xt.png_url,subjectId:xt.subject_id,diagramType:xt.diagram_type,storageMode:xt.storage_mode,createdAt:xt.created_at,updatedAt:xt.updated_at})))||[]),b(mt.data||[])}catch(dt){console.error("Error loading data:",dt),i("Failed to load diagrams","error")}finally{_(!1)}},st=async ut=>{const{data:dt,error:mt}=await supabase.rpc("count_diagram_usage",{diagram_uuid:ut});return mt?(console.error("Error counting usage:",mt),0):dt||0},at=async ut=>{const dt=await st(ut.id),mt=dt>0?`This diagram is used by ${dt} prompt${dt>1?"s":""}. Delete anyway?`:`Delete "${ut.title}"?`;if(!await o(mt))return;const{error:ft}=await supabase.from("diagrams").delete().eq("id",ut.id);if(ft){i("Failed to delete diagram","error");return}i("Diagram deleted","success"),it()},ot=async ut=>{const{error:dt}=await supabase.from("diagrams").insert({title:`${ut.title} (Copy)`,subject_id:ut.subjectId,diagram_type:ut.diagramType,tags:ut.tags,storage_mode:ut.storageMode,canvas_data:ut.canvasData,svg_data:ut.svgData,png_url:ut.pngUrl,width:ut.width,height:ut.height});if(dt){i("Failed to duplicate diagram","error");return}i("Diagram duplicated","success"),it()},lt=d.filter(ut=>{const dt=ut.title.toLowerCase().includes($.toLowerCase())||ut.tags.some(ft=>ft.toLowerCase().includes($.toLowerCase())),mt=!et||ut.subjectId===et,xt=!rt||ut.diagramType===rt;return dt&&mt&&xt}),ct=Array.from(new Set(d.map(ut=>ut.diagramType)));return j?jsxRuntimeExports.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading diagrams..."}):jsxRuntimeExports.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Diagram Library"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create and manage reusable diagram templates"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>e("/admin/diagrams/new"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[jsxRuntimeExports.jsx(Plus,{className:"w-5 h-5"}),"New Diagram"]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search diagrams by title or tags...",value:$,onChange:ut=>_e(ut.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800"})]}),jsxRuntimeExports.jsxs("select",{value:et,onChange:ut=>tt(ut.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800",children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Subjects"}),g.map(ut=>jsxRuntimeExports.jsx("option",{value:ut.id,children:ut.name},ut.id))]}),jsxRuntimeExports.jsxs("select",{value:rt,onChange:ut=>nt(ut.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800",children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Types"}),ct.map(ut=>jsxRuntimeExports.jsx("option",{value:ut,children:ut},ut))]})]}),lt.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-16 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsx(Image$1,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No diagrams found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:$||et||rt?"Try adjusting your filters":"Get started by creating your first diagram"}),!$&&!et&&!rt&&jsxRuntimeExports.jsx("button",{onClick:()=>e("/admin/diagrams/new"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Diagram"})]}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:lt.map(ut=>jsxRuntimeExports.jsx(DiagramCard,{diagram:ut,subjects:g,onEdit:()=>e(`/admin/diagrams/${ut.id}`),onDelete:()=>at(ut),onDuplicate:()=>ot(ut)},ut.id))})]})}function DiagramCard({diagram:e,subjects:i,onEdit:o,onDelete:d,onDuplicate:h}){const[g,b]=reactExports.useState(null);reactExports.useEffect(()=>{j()},[e.id]);const j=async()=>{const{data:et}=await supabase.rpc("count_diagram_usage",{diagram_uuid:e.id});b(et||0)},_=i.find(et=>et.id===e.subjectId),$=new Date(e.updatedAt),_e=getRelativeTime($);return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow",children:[jsxRuntimeExports.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-gray-900 flex items-center justify-center p-4",children:e.svgData?jsxRuntimeExports.jsx("div",{className:"max-w-full max-h-full",dangerouslySetInnerHTML:{__html:e.svgData}}):jsxRuntimeExports.jsx(Image$1,{className:"w-16 h-16 text-gray-400"})}),jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-1 truncate",children:e.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sm text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded",children:e.diagramType}),_&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded",children:_.name})]}),e.tags.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.tags.slice(0,3).map((et,tt)=>jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 dark:bg-gray-700 rounded",children:et},tt)),e.tags.length>3&&jsxRuntimeExports.jsxs("span",{className:"text-xs px-2 py-0.5 text-gray-500",children:["+",e.tags.length-3]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),_e]}),g!==null&&jsxRuntimeExports.jsxs("div",{children:[g," use",g!==1?"s":""]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:o,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4"}),"Edit"]}),jsxRuntimeExports.jsx("button",{onClick:h,className:"flex items-center justify-center px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"Duplicate",children:jsxRuntimeExports.jsx(Copy,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:d,className:"flex items-center justify-center px-3 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded hover:bg-red-100 dark:hover:bg-red-900/50 transition-colors",title:"Delete",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})]})]})}function getRelativeTime(e){const o=new Date().getTime()-e.getTime(),d=Math.floor(o/6e4),h=Math.floor(o/36e5),g=Math.floor(o/864e5);return d<60?`${d}m ago`:h<24?`${h}h ago`:g<7?`${g}d ago`:e.toLocaleDateString()}function DiagramEditor(){var Lt;const{diagramId:e}=useParams(),i=useNavigate(),{showToast:o}=useToast(),{confirm:d}=useConfirm(),h=reactExports.useRef(null),[g,b]=reactExports.useState(!0),[j,_]=reactExports.useState(!1),[$,_e]=reactExports.useState([]),[et,tt]=reactExports.useState({title:"Untitled Diagram",diagramType:"general",tags:[],storageMode:"vector",width:800,height:600,canvasData:{elements:[]}}),[rt,nt]=reactExports.useState({canvasData:{elements:[]},zoom:1,panX:0,panY:0,selectedElementIds:[],currentTool:"select",strokeColor:"#000000",fillColor:"#ffffff",strokeWidth:2,dashed:!1,gridEnabled:!1,snapToGrid:!1}),[it,st]=reactExports.useState([]),[at,ot]=reactExports.useState(-1),[lt,ct]=reactExports.useState(!1),[ut,dt]=reactExports.useState(null),[mt,xt]=reactExports.useState(null),[ft,gt]=reactExports.useState([]),[pt,yt]=reactExports.useState(null),[bt,St]=reactExports.useState(null),[wt,kt]=reactExports.useState("");reactExports.useState(!1);const[Et,jt]=reactExports.useState(null),[Rt,At]=reactExports.useState(null),[Dt,Nt]=reactExports.useState(null),[zt,Vt]=reactExports.useState(null),[Gt,Mt]=reactExports.useState(null);reactExports.useEffect(()=>{Wt()},[e]),reactExports.useEffect(()=>{jr()},[rt,mt,ft,pt,Rt,Et,Dt]),reactExports.useEffect(()=>{const ht=vt=>{if(!zt){if(vt.key==="Escape"&&ft.length>0&&(ft.length>=2?$t(!1):(gt([]),yt(null))),(vt.key==="Delete"||vt.key==="Backspace")&&rt.selectedElementIds.length>0){const Tt=rt.canvasData.elements.filter(Pt=>!rt.selectedElementIds.includes(Pt.id)),_t={...rt.canvasData,elements:Tt};nt(Pt=>({...Pt,canvasData:_t,selectedElementIds:[]})),Ct(_t)}if(rt.selectedElementIds.length>0){let Tt=0,_t=0;const Pt=vt.shiftKey?10:1;if(vt.key==="ArrowLeft"||vt.key.toLowerCase()==="a"?Tt=-Pt:vt.key==="ArrowRight"||vt.key.toLowerCase()==="d"?Tt=Pt:vt.key==="ArrowUp"||vt.key.toLowerCase()==="w"?_t=-Pt:(vt.key==="ArrowDown"||vt.key.toLowerCase()==="s")&&(_t=Pt),Tt!==0||_t!==0){vt.preventDefault();const It=rt.canvasData.elements.map(Ot=>rt.selectedElementIds.includes(Ot.id)?Zt(Ot,Tt,_t):Ot),Bt={...rt.canvasData,elements:It};nt(Ot=>({...Ot,canvasData:Bt})),Ct(Bt)}}}};return window.addEventListener("keydown",ht),()=>window.removeEventListener("keydown",ht)},[ft,rt.selectedElementIds,rt.canvasData,zt]);const Wt=async()=>{b(!0);try{const[ht]=await Promise.all([supabase.from("subjects").select("*").order("name")]);if(ht.error)throw ht.error;if(_e(ht.data||[]),e&&e!=="new"){const{data:vt,error:Tt}=await supabase.from("diagrams").select("*").eq("id",e).single();if(Tt)throw Tt;const _t={...vt,tags:vt.tags||[],canvasData:vt.canvas_data||{elements:[]},svgData:vt.svg_data,pngUrl:vt.png_url,subjectId:vt.subject_id,diagramType:vt.diagram_type,storageMode:vt.storage_mode,createdAt:vt.created_at,updatedAt:vt.updated_at};tt(_t),nt(Pt=>({...Pt,canvasData:_t.canvasData,gridEnabled:_t.canvasData.gridEnabled||!1,snapToGrid:_t.canvasData.snapToGrid||!1})),st([_t.canvasData]),ot(0)}else st([{elements:[]}]),ot(0)}catch(ht){console.error("Error loading diagram:",ht),o("Failed to load diagram","error")}finally{b(!1)}},Zt=(ht,vt,Tt)=>{const _t={...ht,x:ht.x+vt,y:ht.y+Tt};return(ht.type==="line"||ht.type==="arrow")&&ht.x2!==void 0&&ht.y2!==void 0&&(_t.x2=ht.x2+vt,_t.y2=ht.y2+Tt),ht.type==="polygon"&&ht.points&&(_t.points=ht.points.map(Pt=>({x:Pt.x+vt,y:Pt.y+Tt}))),ht.type==="angle"&&ht.points&&(_t.points=ht.points.map(Pt=>({x:Pt.x+vt,y:Pt.y+Tt}))),_t},Ct=reactExports.useCallback(ht=>{const vt=it.slice(0,at+1);vt.push(ht),st(vt),ot(vt.length-1)},[it,at]),Ut=(ht,vt,Tt,_t)=>{const It=Math.atan2(vt.y-ht.y,vt.x-ht.x)+Tt*Math.PI/180;return{x:vt.x+_t*Math.cos(It),y:vt.y+_t*Math.sin(It)}},Kt=(ht,vt)=>{if(ft.length<2)return;const Tt=ft[ft.length-1],_t=ft[ft.length-2],Pt={id:crypto.randomUUID(),type:"angle",x:Tt.x,y:Tt.y,points:[_t,Tt],angleValue:ht,text:vt,arcRadius:30,strokeColor:rt.strokeColor,fillColor:"transparent",strokeWidth:1.5,zIndex:rt.canvasData.elements.length},It={...rt.canvasData,elements:[...rt.canvasData.elements,Pt]};nt(Bt=>({...Bt,canvasData:It})),Ct(It)},$t=ht=>{if(ft.length<2){gt([]),yt(null);return}const vt={id:crypto.randomUUID(),type:"polygon",x:ft[0].x,y:ft[0].y,points:[...ft],strokeColor:rt.strokeColor,fillColor:ht?rt.fillColor:"transparent",strokeWidth:rt.strokeWidth,dashed:rt.dashed,zIndex:rt.canvasData.elements.length},Tt={...rt.canvasData,elements:[...rt.canvasData.elements,vt]};nt(_t=>({..._t,canvasData:Tt})),Ct(Tt),gt([]),yt(null)},Jt=()=>{if(at>0){const ht=at-1;ot(ht),nt(vt=>({...vt,canvasData:it[ht]}))}},Qt=()=>{if(at<it.length-1){const ht=at+1;ot(ht),nt(vt=>({...vt,canvasData:it[ht]}))}},er=ht=>{const vt=h.current;if(!vt)return;const Tt=vt.getBoundingClientRect(),_t=(ht.clientX-Tt.left-rt.panX)/rt.zoom,Pt=(ht.clientY-Tt.top-rt.panY)/rt.zoom,It=mr(_t,Pt);if(It&&(rt.currentTool==="select"||rt.currentTool==="polygon")){jt({elementId:It.element.id,vertexIndex:It.vertexIndex}),rt.selectedElementIds.includes(It.element.id)||nt(Bt=>({...Bt,selectedElementIds:[It.element.id]}));return}if(rt.currentTool==="select"){const Bt=xr(_t,Pt);if(Bt)if(rt.selectedElementIds.includes(Bt.id)){const Ot=new Map;rt.selectedElementIds.forEach(Ft=>{const qt=rt.canvasData.elements.find(Ht=>Ht.id===Ft);qt&&Ot.set(Ft,{...qt})}),Mt({x:_t,y:Pt,originalElements:Ot})}else nt(Ot=>({...Ot,selectedElementIds:[Bt.id]}));else nt(Ot=>({...Ot,selectedElementIds:[]})),Nt({x1:_t,y1:Pt,x2:_t,y2:Pt})}else if(rt.currentTool==="polygon"){const Bt=10/rt.zoom;if(ft.length>0){const Ot=ft[0];if(Math.sqrt(Math.pow(_t-Ot.x,2)+Math.pow(Pt-Ot.y,2))<Bt){$t(!0);return}for(let qt=1;qt<ft.length;qt++){const Ht=ft[qt];if(Math.sqrt(Math.pow(_t-Ht.x,2)+Math.pow(Pt-Ht.y,2))<Bt){gt([...ft,Ht]),$t(!1);return}}}gt([...ft,{x:_t,y:Pt}])}else rt.currentTool!=="eraser"&&(ct(!0),dt({x:_t,y:Pt}))},Xt=ht=>{const vt=h.current;if(!vt)return;const Tt=vt.getBoundingClientRect(),_t=(ht.clientX-Tt.left-rt.panX)/rt.zoom,Pt=(ht.clientY-Tt.top-rt.panY)/rt.zoom;if(Et){const Ot=rt.canvasData.elements.find(Ft=>Ft.id===Et.elementId);if(Ot&&Ot.points){const Ft=[...Ot.points];Ft[Et.vertexIndex]={x:_t,y:Pt};const qt={...Ot,points:Ft},Ht=rt.canvasData.elements.map(Yt=>Yt.id===Et.elementId?qt:Yt);nt(Yt=>({...Yt,canvasData:{...Yt.canvasData,elements:Ht}}))}return}if(Gt){const Ot=_t-Gt.x,Ft=Pt-Gt.y,qt=rt.canvasData.elements.map(Ht=>{if(rt.selectedElementIds.includes(Ht.id)){const Yt=Gt.originalElements.get(Ht.id);if(Yt)return Zt(Yt,Ot,Ft)}return Ht});nt(Ht=>({...Ht,canvasData:{...Ht.canvasData,elements:qt}}));return}if(Dt){Nt({...Dt,x2:_t,y2:Pt});return}const It=mr(_t,Pt);if(It&&(rt.currentTool==="select"||rt.currentTool==="polygon")?At({elementId:It.element.id,vertexIndex:It.vertexIndex}):At(null),rt.currentTool==="polygon"&&ft.length>0){if(bt!==null&&ft.length>=2){const Ot=ft[ft.length-1],Ft=ft[ft.length-2],qt=Math.sqrt(Math.pow(_t-Ot.x,2)+Math.pow(Pt-Ot.y,2)),Ht=Ut(Ft,Ot,bt,qt);yt(Ht)}else yt({x:_t,y:Pt});return}if(!lt||!ut)return;const Bt=ir(rt.currentTool,ut.x,ut.y,_t,Pt);xt(Bt)},rr=()=>{if(Et){Ct(rt.canvasData),jt(null);return}if(Gt){Ct(rt.canvasData),Mt(null);return}if(Dt){const ht=rt.canvasData.elements.filter(vt=>dr(vt,Dt)).map(vt=>vt.id);nt(vt=>({...vt,selectedElementIds:ht})),Nt(null);return}if(mt&&lt){const ht={...rt.canvasData,elements:[...rt.canvasData.elements,mt]};nt(vt=>({...vt,canvasData:ht})),Ct(ht),xt(null)}ct(!1),dt(null)},nr=ht=>{if(rt.currentTool!=="select")return;const vt=h.current;if(!vt)return;const Tt=vt.getBoundingClientRect(),_t=(ht.clientX-Tt.left-rt.panX)/rt.zoom,Pt=(ht.clientY-Tt.top-rt.panY)/rt.zoom,It=xr(_t,Pt);It&&It.type==="text"&&Vt({elementId:It.id,value:It.text||""})},ir=(ht,vt,Tt,_t,Pt)=>{const It=crypto.randomUUID(),Bt=rt.canvasData.elements.length,Ot={id:It,strokeColor:rt.strokeColor,fillColor:rt.fillColor,strokeWidth:rt.strokeWidth,dashed:rt.dashed,zIndex:Bt};switch(ht){case"line":return{...Ot,type:"line",x:vt,y:Tt,x2:_t,y2:Pt};case"arrow":return{...Ot,type:"arrow",x:vt,y:Tt,x2:_t,y2:Pt,arrowhead:!0};case"rectangle":return{...Ot,type:"rectangle",x:Math.min(vt,_t),y:Math.min(Tt,Pt),width:Math.abs(_t-vt),height:Math.abs(Pt-Tt)};case"circle":const Ft=Math.sqrt(Math.pow(_t-vt,2)+Math.pow(Pt-Tt,2));return{...Ot,type:"circle",x:vt,y:Tt,radius:Ft};case"text":return{...Ot,type:"text",x:vt,y:Tt,text:"Text",fontSize:16,fontWeight:"normal",textAlign:"left"};case"point":return{...Ot,type:"point",x:vt,y:Tt,radius:4};default:return{...Ot,type:"line",x:vt,y:Tt,x2:_t,y2:Pt}}},dr=(ht,vt)=>{const Tt=Math.min(vt.x1,vt.x2),_t=Math.max(vt.x1,vt.x2),Pt=Math.min(vt.y1,vt.y2),It=Math.max(vt.y1,vt.y2);switch(ht.type){case"rectangle":const Bt=ht.x,Ot=ht.x+(ht.width||0),Ft=ht.y,qt=ht.y+(ht.height||0);return!(Ot<Tt||Bt>_t||qt<Pt||Ft>It);case"circle":const Ht=ht.radius||0;return!(ht.x+Ht<Tt||ht.x-Ht>_t||ht.y+Ht<Pt||ht.y-Ht>It);case"line":case"arrow":return pr(ht.x,ht.y,ht.x2||0,ht.y2||0,Tt,Pt,_t,It);case"polygon":if(!ht.points||ht.points.length===0)return!1;for(let Yt=0;Yt<ht.points.length;Yt++){const sr=ht.points[Yt],tr=ht.points[(Yt+1)%ht.points.length];if(pr(sr.x,sr.y,tr.x,tr.y,Tt,Pt,_t,It))return!0}return!1;case"text":case"point":return ht.x>=Tt&&ht.x<=_t&&ht.y>=Pt&&ht.y<=It;default:return!1}},pr=(ht,vt,Tt,_t,Pt,It,Bt,Ot)=>{if(ht>=Pt&&ht<=Bt&&vt>=It&&vt<=Ot||Tt>=Pt&&Tt<=Bt&&_t>=It&&_t<=Ot)return!0;const Ft=[{x1:Pt,y1:It,x2:Bt,y2:It},{x1:Bt,y1:It,x2:Bt,y2:Ot},{x1:Bt,y1:Ot,x2:Pt,y2:Ot},{x1:Pt,y1:Ot,x2:Pt,y2:It}];for(const qt of Ft)if(vr(ht,vt,Tt,_t,qt.x1,qt.y1,qt.x2,qt.y2))return!0;return!1},vr=(ht,vt,Tt,_t,Pt,It,Bt,Ot)=>{const Ft=(ht-Tt)*(It-Ot)-(vt-_t)*(Pt-Bt);if(Ft===0)return!1;const qt=((ht-Pt)*(It-Ot)-(vt-It)*(Pt-Bt))/Ft,Ht=-((ht-Tt)*(vt-It)-(vt-_t)*(ht-Pt))/Ft;return qt>=0&&qt<=1&&Ht>=0&&Ht<=1},mr=(ht,vt)=>{const Tt=8/rt.zoom,_t=[...rt.canvasData.elements].reverse();for(const Pt of _t)if(Pt.type==="polygon"&&Pt.points&&Pt.points.length>0)for(let It=0;It<Pt.points.length;It++){const Bt=Pt.points[It],Ot=ht-Bt.x,Ft=vt-Bt.y;if(Math.sqrt(Ot*Ot+Ft*Ft)<=Tt)return{element:Pt,vertexIndex:It}}return null},xr=(ht,vt)=>{const Tt=[...rt.canvasData.elements].reverse();for(const _t of Tt)if(br(ht,vt,_t))return _t;return null},br=(ht,vt,Tt)=>{switch(Tt.type){case"rectangle":return ht>=Tt.x-5&&ht<=Tt.x+(Tt.width||0)+5&&vt>=Tt.y-5&&vt<=Tt.y+(Tt.height||0)+5;case"circle":const Pt=ht-Tt.x,It=vt-Tt.y;return Math.sqrt(Pt*Pt+It*It)<=(Tt.radius||0)+5;case"line":case"arrow":return ar(ht,vt,Tt.x,Tt.y,Tt.x2||0,Tt.y2||0,5);default:return!1}},ar=(ht,vt,Tt,_t,Pt,It,Bt)=>{const Ot=Math.sqrt(Math.pow(Pt-Tt,2)+Math.pow(It-_t,2)),Ft=((ht-Tt)*(Pt-Tt)+(vt-_t)*(It-_t))/Math.pow(Ot,2),qt=Tt+Ft*(Pt-Tt),Ht=_t+Ft*(It-_t);return Math.sqrt(Math.pow(ht-qt,2)+Math.pow(vt-Ht,2))<=Bt},jr=()=>{const ht=h.current;if(!ht)return;const vt=ht.getContext("2d");if(vt){if(vt.clearRect(0,0,ht.width,ht.height),vt.fillStyle=rt.canvasData.backgroundColor||"#ffffff",vt.fillRect(0,0,ht.width,ht.height),vt.save(),vt.translate(rt.panX,rt.panY),vt.scale(rt.zoom,rt.zoom),rt.gridEnabled&&Er(vt,ht.width/rt.zoom,ht.height/rt.zoom),rt.canvasData.elements.forEach(Tt=>{or(vt,Tt,rt.selectedElementIds.includes(Tt.id))}),mt&&or(vt,mt,!1),ft.length>0){vt.strokeStyle=rt.strokeColor,vt.fillStyle=rt.fillColor,vt.lineWidth=rt.strokeWidth,rt.dashed&&vt.setLineDash([5,5]),vt.beginPath(),vt.moveTo(ft[0].x,ft[0].y);for(let Tt=1;Tt<ft.length;Tt++)vt.lineTo(ft[Tt].x,ft[Tt].y);if(pt&&vt.lineTo(pt.x,pt.y),vt.stroke(),ft.forEach((Tt,_t)=>{vt.fillStyle=_t===0?"#00ff00":rt.strokeColor;const Pt=Math.max(rt.strokeWidth*1.5,4);vt.beginPath(),vt.arc(Tt.x,Tt.y,Pt,0,2*Math.PI),vt.fill()}),pt&&ft.length>0){const Tt=ft[0],_t=Math.sqrt(Math.pow(pt.x-Tt.x,2)+Math.pow(pt.y-Tt.y,2)),Pt=10/rt.zoom;_t<Pt&&(vt.strokeStyle="#00ff00",vt.lineWidth=2,vt.setLineDash([]),vt.beginPath(),vt.arc(Tt.x,Tt.y,8,0,2*Math.PI),vt.stroke())}vt.setLineDash([])}if(Dt){vt.strokeStyle="#0066ff",vt.fillStyle="rgba(0, 102, 255, 0.1)",vt.lineWidth=2/rt.zoom,vt.setLineDash([5/rt.zoom,5/rt.zoom]);const Tt=Math.min(Dt.x1,Dt.x2),_t=Math.min(Dt.y1,Dt.y2),Pt=Math.abs(Dt.x2-Dt.x1),It=Math.abs(Dt.y2-Dt.y1);vt.fillRect(Tt,_t,Pt,It),vt.strokeRect(Tt,_t,Pt,It),vt.setLineDash([])}vt.restore()}},Er=(ht,vt,Tt)=>{ht.strokeStyle="#e0e0e0",ht.lineWidth=.5;for(let Pt=0;Pt<=vt;Pt+=20)ht.beginPath(),ht.moveTo(Pt,0),ht.lineTo(Pt,Tt),ht.stroke();for(let Pt=0;Pt<=Tt;Pt+=20)ht.beginPath(),ht.moveTo(0,Pt),ht.lineTo(vt,Pt),ht.stroke()},or=(ht,vt,Tt)=>{switch(ht.strokeStyle=vt.strokeColor,ht.fillStyle=vt.fillColor||"transparent",ht.lineWidth=vt.strokeWidth,ht.globalAlpha=vt.opacity||1,vt.dashed?ht.setLineDash([5,5]):ht.setLineDash([]),vt.type){case"line":case"arrow":ht.beginPath(),ht.moveTo(vt.x,vt.y),ht.lineTo(vt.x2||0,vt.y2||0),ht.stroke(),vt.arrowhead&&wr(ht,vt.x,vt.y,vt.x2||0,vt.y2||0);break;case"rectangle":ht.fillRect(vt.x,vt.y,vt.width||0,vt.height||0),ht.strokeRect(vt.x,vt.y,vt.width||0,vt.height||0);break;case"circle":ht.beginPath(),ht.arc(vt.x,vt.y,vt.radius||0,0,2*Math.PI),ht.fill(),ht.stroke();break;case"text":ht.font=`${vt.fontWeight||"normal"} ${vt.fontSize||16}px sans-serif`,ht.textAlign=vt.textAlign||"left",ht.fillStyle=vt.strokeColor,ht.fillText(vt.text||"",vt.x,vt.y);break;case"point":ht.beginPath(),ht.arc(vt.x,vt.y,vt.radius||4,0,2*Math.PI),ht.fill(),ht.stroke();break;case"polygon":if(vt.points&&vt.points.length>1){ht.beginPath(),ht.moveTo(vt.points[0].x,vt.points[0].y);for(let Pt=1;Pt<vt.points.length;Pt++)ht.lineTo(vt.points[Pt].x,vt.points[Pt].y);vt.fillColor&&vt.fillColor!=="transparent"&&(ht.closePath(),ht.fill()),ht.stroke();const _t=Math.max(vt.strokeWidth*1.5,4);vt.points.forEach((Pt,It)=>{const Bt=(Rt==null?void 0:Rt.elementId)===vt.id&&(Rt==null?void 0:Rt.vertexIndex)===It,Ot=(Et==null?void 0:Et.elementId)===vt.id&&(Et==null?void 0:Et.vertexIndex)===It;(Bt||Ot)&&(ht.fillStyle="#0066ff",ht.beginPath(),ht.arc(Pt.x,Pt.y,_t+2,0,2*Math.PI),ht.fill()),ht.fillStyle=vt.strokeColor,ht.beginPath(),ht.arc(Pt.x,Pt.y,_t,0,2*Math.PI),ht.fill()})}break;case"angle":if(vt.points&&vt.points.length>=2&&vt.angleValue!==void 0){const _t=vt.points[0],Pt=vt.points[1],It=vt.arcRadius||30,Bt=Math.atan2(_t.y-Pt.y,_t.x-Pt.x),Ot=Bt+vt.angleValue*Math.PI/180;if(ht.beginPath(),ht.arc(Pt.x,Pt.y,It,Bt,Ot,vt.angleValue<0),ht.stroke(),vt.text){const Ft=(Bt+Ot)/2,qt=It+15,Ht=Pt.x+qt*Math.cos(Ft),Yt=Pt.y+qt*Math.sin(Ft);ht.save(),ht.font=`${vt.fontWeight||"normal"} ${vt.fontSize||14}px sans-serif`,ht.textAlign="center",ht.textBaseline="middle",ht.fillStyle=vt.strokeColor,ht.fillText(vt.text,Ht,Yt),ht.restore()}}break}if(Tt){ht.strokeStyle="#0066ff",ht.lineWidth=2,ht.setLineDash([4,4]);const _t=Sr(vt);ht.strokeRect(_t.x-5,_t.y-5,_t.width+10,_t.height+10)}ht.globalAlpha=1,ht.setLineDash([])},wr=(ht,vt,Tt,_t,Pt)=>{const It=Math.atan2(Pt-Tt,_t-vt),Bt=10,Ot=Math.PI/6;ht.beginPath(),ht.moveTo(_t,Pt),ht.lineTo(_t-Bt*Math.cos(It-Ot),Pt-Bt*Math.sin(It-Ot)),ht.moveTo(_t,Pt),ht.lineTo(_t-Bt*Math.cos(It+Ot),Pt-Bt*Math.sin(It+Ot)),ht.stroke()},Sr=ht=>{switch(ht.type){case"rectangle":return{x:ht.x,y:ht.y,width:ht.width||0,height:ht.height||0};case"circle":case"point":const vt=ht.radius||0;return{x:ht.x-vt,y:ht.y-vt,width:vt*2,height:vt*2};case"line":case"arrow":const Tt=ht.x,_t=ht.y,Pt=ht.x2||0,It=ht.y2||0;return{x:Math.min(Tt,Pt),y:Math.min(_t,It),width:Math.abs(Pt-Tt),height:Math.abs(It-_t)};case"polygon":if(ht.points&&ht.points.length>0){const Ot=ht.points.map(tr=>tr.x),Ft=ht.points.map(tr=>tr.y),qt=Math.min(...Ot),Ht=Math.max(...Ot),Yt=Math.min(...Ft),sr=Math.max(...Ft);return{x:qt,y:Yt,width:Ht-qt,height:sr-Yt}}return{x:ht.x,y:ht.y,width:0,height:0};case"angle":const Bt=(ht.arcRadius||30)+20;return{x:ht.x-Bt,y:ht.y-Bt,width:Bt*2,height:Bt*2};default:return{x:ht.x,y:ht.y,width:0,height:0}}},Rr=()=>{const ht=rt.canvasData.elements,vt=et.width||800,Tt=et.height||600;let _t=`<svg width="${vt}" height="${Tt}" xmlns="http://www.w3.org/2000/svg">`;return _t+=`<rect width="100%" height="100%" fill="${rt.canvasData.backgroundColor||"#ffffff"}"/>`,ht.forEach(Pt=>{_t+=fr(Pt)}),_t+="</svg>",_t},fr=ht=>{const vt=ht.strokeColor,Tt=ht.fillColor||"none",_t=ht.strokeWidth,Pt=ht.dashed?"5,5":"none",It=ht.opacity||1;switch(ht.type){case"line":case"arrow":let Bt=`<line x1="${ht.x}" y1="${ht.y}" x2="${ht.x2}" y2="${ht.y2}" stroke="${vt}" stroke-width="${_t}" stroke-dasharray="${Pt}" opacity="${It}"/>`;if(ht.arrowhead){const Ot=Math.atan2((ht.y2||0)-ht.y,(ht.x2||0)-ht.x),Ft=10,qt=Math.PI/6,Ht=ht.x2||0,Yt=ht.y2||0;Bt+=`<polyline points="${Ht},${Yt} ${Ht-Ft*Math.cos(Ot-qt)},${Yt-Ft*Math.sin(Ot-qt)} ${Ht-Ft*Math.cos(Ot+qt)},${Yt-Ft*Math.sin(Ot+qt)}" stroke="${vt}" stroke-width="${_t}" fill="none"/>`}return Bt;case"rectangle":return`<rect x="${ht.x}" y="${ht.y}" width="${ht.width}" height="${ht.height}" stroke="${vt}" stroke-width="${_t}" fill="${Tt}" stroke-dasharray="${Pt}" opacity="${It}"/>`;case"circle":return`<circle cx="${ht.x}" cy="${ht.y}" r="${ht.radius}" stroke="${vt}" stroke-width="${_t}" fill="${Tt}" stroke-dasharray="${Pt}" opacity="${It}"/>`;case"text":return`<text x="${ht.x}" y="${ht.y}" font-size="${ht.fontSize}" font-weight="${ht.fontWeight}" text-anchor="${ht.textAlign==="center"?"middle":ht.textAlign==="right"?"end":"start"}" fill="${vt}" opacity="${It}">${ht.text}</text>`;case"point":return`<circle cx="${ht.x}" cy="${ht.y}" r="${ht.radius}" stroke="${vt}" stroke-width="${_t}" fill="${Tt}" opacity="${It}"/>`;case"polygon":return ht.points&&ht.points.length>1?`<polyline points="${ht.points.map(Ft=>`${Ft.x},${Ft.y}`).join(" ")}" stroke="${vt}" stroke-width="${_t}" fill="${Tt}" stroke-dasharray="${Pt}" opacity="${It}"/>`:"";case"angle":if(ht.points&&ht.points.length>=2&&ht.angleValue!==void 0){const Ot=ht.points[0],Ft=ht.points[1],qt=ht.arcRadius||30,Ht=Math.atan2(Ot.y-Ft.y,Ot.x-Ft.x),Yt=Ht+ht.angleValue*Math.PI/180,sr=Ft.x+qt*Math.cos(Ht),tr=Ft.y+qt*Math.sin(Ht),Ar=Ft.x+qt*Math.cos(Yt),$r=Ft.y+qt*Math.sin(Yt),Ir=Math.abs(ht.angleValue)>180?1:0,Dr=ht.angleValue>0?1:0;let Pr=`<path d="M ${sr} ${tr} A ${qt} ${qt} 0 ${Ir} ${Dr} ${Ar} ${$r}" stroke="${vt}" stroke-width="${_t}" fill="none" opacity="${It}"/>`;if(ht.text){const Tr=(Ht+Yt)/2,Nr=qt+15,Or=Ft.x+Nr*Math.cos(Tr),Mr=Ft.y+Nr*Math.sin(Tr);Pr+=`<text x="${Or}" y="${Mr}" font-size="${ht.fontSize||14}" font-weight="${ht.fontWeight||"normal"}" text-anchor="middle" dominant-baseline="middle" fill="${vt}" opacity="${It}">${ht.text}</text>`}return Pr}return"";default:return""}},hr=async()=>{_(!0);try{const ht=Rr(),vt={...rt.canvasData,gridEnabled:rt.gridEnabled,snapToGrid:rt.snapToGrid},Tt={title:et.title,subject_id:et.subjectId,diagram_type:et.diagramType,tags:et.tags,storage_mode:et.storageMode,canvas_data:vt,svg_data:ht,width:et.width,height:et.height};if(e&&e!=="new"){const{error:_t}=await supabase.from("diagrams").update(Tt).eq("id",e);if(_t)throw _t;const{error:Pt}=await supabase.from("diagram_versions").insert({diagram_id:e,version_number:Date.now(),canvas_data:vt,svg_data:ht});Pt&&console.error("Failed to save version:",Pt)}else{const{data:_t,error:Pt}=await supabase.from("diagrams").insert(Tt).select().single();if(Pt)throw Pt;i(`/admin/diagrams/${_t.id}`,{replace:!0})}o("Diagram saved successfully","success")}catch(ht){console.error("Error saving diagram:",ht),o("Failed to save diagram","error")}finally{_(!1)}},lr=async()=>{if(!e||e==="new"||!await d("Delete this diagram? This cannot be undone."))return;const{error:vt}=await supabase.from("diagrams").delete().eq("id",e);if(vt){o("Failed to delete diagram","error");return}o("Diagram deleted","success"),i("/admin/diagrams")},cr=()=>{if(!rt.selectedElementId)return;const ht={...rt.canvasData,elements:rt.canvasData.elements.filter(vt=>vt.id!==rt.selectedElementId)};nt(vt=>({...vt,canvasData:ht,selectedElementId:null})),Ct(ht)},gr=()=>{if(!rt.selectedElementId)return;const ht=rt.canvasData.elements.find(_t=>_t.id===rt.selectedElementId);if(!ht)return;const vt={...ht,id:crypto.randomUUID(),x:ht.x+20,y:ht.y+20,zIndex:rt.canvasData.elements.length},Tt={...rt.canvasData,elements:[...rt.canvasData.elements,vt]};nt(_t=>({..._t,canvasData:Tt,selectedElementId:vt.id})),Ct(Tt)};if(g)return jsxRuntimeExports.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading diagram..."});const yr=[{id:"select",icon:MousePointer,label:"Select"},{id:"line",icon:Minus,label:"Line"},{id:"arrow",icon:ArrowRight,label:"Arrow"},{id:"rectangle",icon:Square,label:"Rectangle"},{id:"circle",icon:Circle,label:"Circle"},{id:"polygon",icon:Pentagon,label:"Polygon"},{id:"text",icon:Type,label:"Text"},{id:"point",icon:Navigation,label:"Point"},{id:"eraser",icon:Eraser,label:"Eraser"}];return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>i("/admin/diagrams"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("input",{type:"text",value:et.title,onChange:ht=>tt({...et,title:ht.target.value}),className:"text-xl font-semibold bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",placeholder:"Diagram title"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:Jt,disabled:at<=0,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",title:"Undo",children:jsxRuntimeExports.jsx(Undo,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:Qt,disabled:at>=it.length-1,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",title:"Redo",children:jsxRuntimeExports.jsx(Redo,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600"}),jsxRuntimeExports.jsx("button",{onClick:()=>nt(ht=>({...ht,zoom:Math.min(ht.zoom+.1,3)})),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Zoom In",children:jsxRuntimeExports.jsx(ZoomIn,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-mono",children:[Math.round(rt.zoom*100),"%"]}),jsxRuntimeExports.jsx("button",{onClick:()=>nt(ht=>({...ht,zoom:Math.max(ht.zoom-.1,.1)})),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Zoom Out",children:jsxRuntimeExports.jsx(ZoomOut,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:()=>nt(ht=>({...ht,zoom:1,panX:0,panY:0})),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Fit to Screen",children:jsxRuntimeExports.jsx(Maximize,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600"}),jsxRuntimeExports.jsx("button",{onClick:()=>nt(ht=>({...ht,gridEnabled:!ht.gridEnabled})),className:`p-2 rounded-lg transition-colors ${rt.gridEnabled?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Toggle Grid",children:jsxRuntimeExports.jsx(Grid3x3,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600"}),jsxRuntimeExports.jsxs("button",{onClick:hr,disabled:j,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[jsxRuntimeExports.jsx(Save,{className:"w-5 h-5"}),j?"Saving...":"Save"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"w-20 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 p-2 space-y-2",children:yr.map(ht=>jsxRuntimeExports.jsxs("button",{onClick:()=>{nt(vt=>({...vt,currentTool:ht.id})),ht.id!=="polygon"&&ft.length>0&&(gt([]),yt(null))},className:`w-full aspect-square flex flex-col items-center justify-center gap-1 rounded-lg transition-colors ${rt.currentTool===ht.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:ht.label,children:[jsxRuntimeExports.jsx(ht.icon,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{className:"text-[10px]",children:ht.label})]},ht.id))}),jsxRuntimeExports.jsxs("div",{className:"flex-1 bg-gray-100 dark:bg-gray-900 p-8 overflow-auto",children:[ft.length>0&&jsxRuntimeExports.jsx("div",{className:"mb-4 text-center",children:jsxRuntimeExports.jsx("div",{className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg shadow-lg",children:"Click to add points  Click first point (green) to close  ESC to finish"})}),jsxRuntimeExports.jsxs("div",{className:"mx-auto relative",style:{width:et.width,height:et.height},children:[jsxRuntimeExports.jsx("canvas",{ref:h,width:et.width,height:et.height,onMouseDown:er,onMouseMove:Xt,onMouseUp:rr,onMouseLeave:rr,onDoubleClick:nr,className:`bg-white shadow-lg ${Rt||Et||Gt?"cursor-move":"cursor-crosshair"}`}),zt&&(()=>{const ht=rt.canvasData.elements.find(_t=>_t.id===zt.elementId);if(!ht)return null;const vt=ht.x*rt.zoom+rt.panX,Tt=ht.y*rt.zoom+rt.panY;return jsxRuntimeExports.jsx("div",{className:"absolute",style:{left:`${vt}px`,top:`${Tt}px`,transform:"translate(-50%, -50%)"},children:jsxRuntimeExports.jsx("input",{type:"text",value:zt.value,onChange:_t=>Vt({...zt,value:_t.target.value}),onBlur:()=>{const _t=rt.canvasData.elements.map(It=>It.id===zt.elementId?{...It,text:zt.value}:It),Pt={...rt.canvasData,elements:_t};nt(It=>({...It,canvasData:Pt})),Ct(Pt),Vt(null)},onKeyDown:_t=>{_t.key==="Enter"?_t.currentTarget.blur():_t.key==="Escape"&&Vt(null)},autoFocus:!0,className:"px-2 py-1 border-2 border-blue-500 rounded bg-white text-center",style:{fontSize:`${(ht.fontSize||16)*rt.zoom}px`,minWidth:"100px"}})})})()]})]}),jsxRuntimeExports.jsxs("div",{className:"w-80 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 p-4 overflow-y-auto",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-4",children:"Properties"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subject"}),jsxRuntimeExports.jsxs("select",{value:et.subjectId||"",onChange:ht=>tt({...et,subjectId:ht.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900",children:[jsxRuntimeExports.jsx("option",{value:"",children:"None"}),$.map(ht=>jsxRuntimeExports.jsx("option",{value:ht.id,children:ht.name},ht.id))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Diagram Type"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.diagramType,onChange:ht=>tt({...et,diagramType:ht.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900",placeholder:"e.g., math-geometry"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tags (comma separated)"}),jsxRuntimeExports.jsx("input",{type:"text",value:(Lt=et.tags)==null?void 0:Lt.join(", "),onChange:ht=>tt({...et,tags:ht.target.value.split(",").map(vt=>vt.trim()).filter(Boolean)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900",placeholder:"geometry, triangle"})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-3",children:"Drawing Tools"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Stroke Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:rt.strokeColor,onChange:ht=>nt(vt=>({...vt,strokeColor:ht.target.value})),className:"w-full h-10 rounded-lg cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fill Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:rt.fillColor,onChange:ht=>nt(vt=>({...vt,fillColor:ht.target.value})),className:"w-full h-10 rounded-lg cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Stroke Width"}),jsxRuntimeExports.jsx("input",{type:"range",min:"1",max:"10",value:rt.strokeWidth,onChange:ht=>nt(vt=>({...vt,strokeWidth:parseInt(ht.target.value)})),className:"w-full"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[rt.strokeWidth,"px"]})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:rt.dashed,onChange:ht=>nt(vt=>({...vt,dashed:ht.target.checked})),className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Dashed Line"})]})]})]}),rt.currentTool==="polygon"&&ft.length>=2&&jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-3",children:"Angle Constraint"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Angle (degrees)"}),jsxRuntimeExports.jsx("input",{type:"number",value:bt||"",onChange:ht=>St(ht.target.value?parseFloat(ht.target.value):null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900",placeholder:"e.g., 90, 45, -60"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for free drawing"})]}),bt!==null&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Angle Label"}),jsxRuntimeExports.jsx("input",{type:"text",value:wt,onChange:ht=>kt(ht.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900",placeholder:"e.g., 90, , "})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{bt!==null&&Kt(bt,wt||`${bt}`)},className:"w-full px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Add Angle Label"}),jsxRuntimeExports.jsx("button",{onClick:()=>{St(null),kt("")},className:"w-full px-3 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Clear Constraint"})]})]})]}),rt.selectedElementId&&jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-3",children:"Selected Element"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:gr,className:"flex-1 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/50",children:"Duplicate"}),jsxRuntimeExports.jsx("button",{onClick:cr,className:"flex-1 px-3 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50",children:"Delete"})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-3",children:"Layers"}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:rt.canvasData.elements.map((ht,vt)=>jsxRuntimeExports.jsxs("div",{onClick:()=>nt(Tt=>({...Tt,selectedElementId:ht.id})),className:`px-3 py-2 rounded cursor-pointer ${ht.id===rt.selectedElementId?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[ht.type," ",vt+1]},ht.id))})]}),e&&e!=="new"&&jsxRuntimeExports.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:jsxRuntimeExports.jsx("button",{onClick:lr,className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Diagram"})})]})]})]})]})}function extractDefaults(e){const i={labels:{},values:{},visibility:{},positions:{}};if(e.schema.labels)for(const[o,d]of Object.entries(e.schema.labels))d.default!==void 0&&(i.labels[o]=d.default);if(e.schema.values)for(const[o,d]of Object.entries(e.schema.values))d.default!==void 0&&(i.values[o]=d.default);if(e.schema.visibility)for(const[o,d]of Object.entries(e.schema.visibility))d.default!==void 0&&(i.visibility[o]=d.default);if(e.schema.positions)for(const[o,d]of Object.entries(e.schema.positions))d.default&&(i.positions[o]=d.default);return i}function generateTopicTags(e){const i=[],o=e.split(".");return o.length>=2&&i.push(o[1]),o.length>=3&&i.push(o[2]),i}function getSubjectKey(e){return{geometry:"math",graphs:"math",statistics:"math",algebra:"math",physics:"physics",chemistry:"chemistry",biology:"biology"}[e]||"math"}async function seedAllDiagramTemplates(){const e={success:!0,inserted:0,updated:0,errors:[]};try{const i=getAllTemplates();console.log(`Found ${i.length} templates to seed`);for(const o of i)try{const d=extractDefaults(o),h=generateTopicTags(o.templateId),g=getSubjectKey(o.category),{data:b}=await supabase.from("diagram_templates").select("id").eq("template_id",o.templateId).maybeSingle(),j={template_id:o.templateId,title:o.title,subject_key:g,topic_tags:h,engine_mode:"auto",base_canvas_data:null,base_svg_data:null,width:500,height:400,anchors:{},schema:o.schema,defaults:d,thumbnail_svg:null};if(b){const{error:_}=await supabase.from("diagram_templates").update(j).eq("id",b.id);_?e.errors.push(`Failed to update ${o.templateId}: ${_.message}`):(e.updated++,console.log(`Updated: ${o.templateId}`))}else{const{error:_}=await supabase.from("diagram_templates").insert(j);_?e.errors.push(`Failed to insert ${o.templateId}: ${_.message}`):(e.inserted++,console.log(`Inserted: ${o.templateId}`))}}catch(d){const h=d instanceof Error?d.message:"Unknown error";e.errors.push(`Error processing ${o.templateId}: ${h}`)}return e.success=e.errors.length===0,console.log(`Seeding complete: ${e.inserted} inserted, ${e.updated} updated, ${e.errors.length} errors`),e}catch(i){return e.success=!1,e.errors.push(`Fatal error: ${i instanceof Error?i.message:"Unknown error"}`),e}}function DiagramTemplatesPage(){const e=useNavigate(),{showToast:i}=useToast(),{confirm:o}=useConfirm(),[d,h]=reactExports.useState([]),[g,b]=reactExports.useState([]),[j,_]=reactExports.useState(!0),[$,_e]=reactExports.useState(!1),[et,tt]=reactExports.useState(""),[rt,nt]=reactExports.useState(""),[it,st]=reactExports.useState("");reactExports.useEffect(()=>{at()},[]);const at=async()=>{_(!0);try{const[pt,yt]=await Promise.all([supabase.from("diagram_templates").select("*").order("created_at",{ascending:!1}),supabase.from("subjects").select("*").order("name")]);if(pt.error)throw pt.error;if(yt.error)throw yt.error;const bt=(pt.data||[]).map(Et=>({id:Et.id,templateId:Et.template_id,title:Et.title,subjectId:Et.subject_id,subjectKey:Et.subject_key,topicTags:Et.topic_tags||[],engineMode:Et.engine_mode||"template",baseCanvasData:Et.base_canvas_data,baseSvgData:Et.base_svg_data,width:Et.width,height:Et.height,anchors:Et.anchors||{},schema:Et.schema||{},defaults:Et.defaults||{},createdAt:Et.created_at,updatedAt:Et.updated_at,isEngineTemplate:!1})),St=getAllTemplates(),wt=new Map(bt.map(Et=>[Et.templateId,Et])),kt=[...bt,...St.filter(Et=>!wt.has(Et.templateId)).map(Et=>ot(Et))];kt.sort((Et,jt)=>Et.title.localeCompare(jt.title)),h(kt),b(yt.data||[])}catch(pt){console.error("Error loading templates:",pt),i("error","Failed to load templates")}finally{_(!1)}},ot=pt=>{const yt=ct(pt.templateId),bt=ut(pt.category);return{id:`engine-${pt.templateId}`,templateId:pt.templateId,title:pt.title,subjectId:void 0,subjectKey:bt,topicTags:yt,engineMode:"auto",baseCanvasData:void 0,baseSvgData:void 0,width:500,height:400,anchors:{},schema:pt.schema,defaults:lt(pt),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isEngineTemplate:!0}},lt=pt=>{const yt={labels:{},values:{},visibility:{},positions:{}};if(pt.schema.labels)for(const[bt,St]of Object.entries(pt.schema.labels))St.default!==void 0&&(yt.labels[bt]=St.default);if(pt.schema.values)for(const[bt,St]of Object.entries(pt.schema.values))St.default!==void 0&&(yt.values[bt]=St.default);if(pt.schema.visibility)for(const[bt,St]of Object.entries(pt.schema.visibility))St.default!==void 0&&(yt.visibility[bt]=St.default);if(pt.schema.positions)for(const[bt,St]of Object.entries(pt.schema.positions))St.default&&(yt.positions[bt]=St.default);return yt},ct=pt=>{const yt=[],bt=pt.split(".");return bt.length>=2&&yt.push(bt[1]),bt.length>=3&&yt.push(bt[2]),yt},ut=pt=>({geometry:"math",graphs:"math",statistics:"math",algebra:"math",physics:"physics",chemistry:"chemistry",biology:"biology"})[pt]||"math",dt=async pt=>{if(pt.isEngineTemplate){i("error","Cannot delete engine templates. They are read-only.");return}if(await o({title:`Delete template "${pt.title}"?`,message:"This action cannot be undone. Prompts using this template will lose their diagrams.",destructive:!0}))try{const{error:bt}=await supabase.from("diagram_templates").delete().eq("id",pt.id);if(bt)throw bt;i("success","Template deleted"),at()}catch(bt){console.error("Error deleting template:",bt),i("error","Failed to delete template")}},mt=async pt=>{try{const yt=`${pt.templateId}.copy`,{error:bt}=await supabase.from("diagram_templates").insert({template_id:yt,title:`${pt.title} (Copy)`,subject_id:pt.subjectId||null,subject_key:pt.subjectKey,topic_tags:pt.topicTags,engine_mode:pt.engineMode,base_canvas_data:pt.baseCanvasData,base_svg_data:pt.baseSvgData,width:pt.width,height:pt.height,anchors:pt.anchors,schema:pt.schema,defaults:pt.defaults});if(bt)throw bt;i("success","Template duplicated"),at()}catch(yt){console.error("Error duplicating template:",yt),i("error","Failed to duplicate template")}},xt=async()=>{if(await o({title:"Sync Engine Templates?",message:"This will add/update all diagram templates from the engine registry to the database."})){_e(!0);try{const yt=await seedAllDiagramTemplates();yt.success?i("success",`Synced successfully: ${yt.inserted} added, ${yt.updated} updated`):(i("error",`Sync completed with errors: ${yt.errors.length} errors`),console.error("Sync errors:",yt.errors)),at()}catch(yt){console.error("Error syncing templates:",yt),i("error","Failed to sync templates")}finally{_e(!1)}}},ft=d.filter(pt=>{const yt=!et||pt.title.toLowerCase().includes(et.toLowerCase())||pt.templateId.toLowerCase().includes(et.toLowerCase()),bt=!rt||pt.subjectId===rt,St=!it||pt.topicTags.includes(it);return yt&&bt&&St}),gt=Array.from(new Set(d.flatMap(pt=>pt.topicTags)));return jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Diagram Templates"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[d.length," templates - Reusable diagram structures with override support"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:xt,disabled:$,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[jsxRuntimeExports.jsx(RefreshCw,{className:`w-5 h-5 ${$?"animate-spin":""}`}),$?"Syncing...":"Sync to Database"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>e("/admin/diagram-templates/new"),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[jsxRuntimeExports.jsx(Plus,{className:"w-5 h-5"}),"New Template"]})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search templates...",value:et,onChange:pt=>tt(pt.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),jsxRuntimeExports.jsxs("select",{value:rt,onChange:pt=>nt(pt.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Subjects"}),g.map(pt=>jsxRuntimeExports.jsx("option",{value:pt.id,children:pt.name},pt.id))]}),jsxRuntimeExports.jsxs("select",{value:it,onChange:pt=>st(pt.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Tags"}),gt.map(pt=>jsxRuntimeExports.jsx("option",{value:pt,children:pt},pt))]})]})}),j?jsxRuntimeExports.jsx("div",{className:"text-center py-12",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"})}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[ft.map(pt=>{const yt=g.find(bt=>bt.id===pt.subjectId);return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow",children:[jsxRuntimeExports.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:jsxRuntimeExports.jsx("div",{className:"w-full h-40 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 flex items-center justify-center overflow-hidden",children:pt.engineMode==="auto"?jsxRuntimeExports.jsx(DiagramRenderer,{metadata:{mode:"auto",templateId:pt.templateId,params:pt.defaults||{}},showWarnings:!1}):pt.baseSvgData?jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:pt.baseSvgData}}):jsxRuntimeExports.jsx("div",{className:"text-gray-400 text-sm",children:"No preview"})})}),jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 flex-1",children:pt.title}),jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium flex items-center gap-1 whitespace-nowrap ${pt.isEngineTemplate?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":pt.engineMode==="auto"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"}`,children:pt.isEngineTemplate?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Zap,{className:"w-3 h-3"}),"Engine"]}):pt.engineMode==="auto"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Zap,{className:"w-3 h-3"}),"Auto"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$1,{className:"w-3 h-3"}),"Template"]})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono mb-3 truncate",children:pt.templateId}),(yt||pt.subjectKey)&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:["Subject: ",(yt==null?void 0:yt.name)||pt.subjectKey]}),pt.topicTags.length>0&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:pt.topicTags.map(bt=>jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-indigo-50 text-indigo-700 rounded text-xs",children:[jsxRuntimeExports.jsx(Tag,{className:"w-3 h-3"}),bt]},bt))}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>e(`/admin/diagram-templates/view/${pt.id}`),className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm",children:[jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4"}),"View"]}),!pt.isEngineTemplate&&jsxRuntimeExports.jsx("button",{onClick:()=>e(`/admin/diagram-templates/${pt.id}`),className:"flex items-center justify-center gap-1 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>mt(pt),className:"flex items-center justify-center gap-1 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:jsxRuntimeExports.jsx(Copy,{className:"w-4 h-4"})}),!pt.isEngineTemplate&&jsxRuntimeExports.jsx("button",{onClick:()=>dt(pt),className:"flex items-center justify-center gap-1 px-3 py-1.5 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 text-sm",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})]})]},pt.id)}),ft.length===0&&jsxRuntimeExports.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"No templates found"})]})]})}function DiagramTemplateEditor(){const{templateId:e}=useParams(),i=useNavigate(),{showToast:o}=useToast(),[d,h]=reactExports.useState(!0),[g,b]=reactExports.useState(!1),[j,_]=reactExports.useState([]),[$,_e]=reactExports.useState(!1),[et,tt]=reactExports.useState({templateId:"",title:"",subjectId:"",topicTags:[],baseSvgData:"",width:800,height:600}),[rt,nt]=reactExports.useState({points:[],text:[],lines:[],marks:[],groups:[]}),[it,st]=reactExports.useState({labels:{},values:{},visibility:{},positions:{},styles:{highlight:[],muted:[]}}),[at,ot]=reactExports.useState("{}"),[lt,ct]=reactExports.useState(""),[ut,dt]=reactExports.useState(""),[mt,xt]=reactExports.useState("labels");reactExports.useEffect(()=>{ft()},[e]);const ft=async()=>{h(!0);try{const Et=await supabase.from("subjects").select("*").order("name");if(Et.error)throw Et.error;if(_(Et.data||[]),e&&e!=="new"){const{data:jt,error:Rt}=await supabase.from("diagram_templates").select("*").eq("id",e).single();if(Rt)throw Rt;tt({templateId:jt.template_id,title:jt.title,subjectId:jt.subject_id||"",topicTags:jt.topic_tags||[],baseSvgData:jt.base_svg_data,width:jt.width,height:jt.height}),nt(jt.anchors||{points:[],text:[],lines:[],marks:[],groups:[]}),st(jt.schema||{labels:{},values:{},visibility:{},positions:{},styles:{highlight:[],muted:[]}})}}catch(Et){console.error("Error loading data:",Et),o("Failed to load template","error")}finally{h(!1)}},gt=Et=>/^[a-z]+\.[a-z_]+\.[a-z_]+\.v\d+$/.test(Et),pt=async()=>{if(!et.templateId.trim()){o("Template ID is required","error");return}if(!gt(et.templateId)){o("Template ID must follow pattern: subject.topic.name.vN (e.g., math.circle_theorems.angle_in_semicircle.v1)","error");return}if(!et.title.trim()){o("Title is required","error");return}if(!et.baseSvgData.trim()){o("SVG data is required","error");return}b(!0);try{const Et={template_id:et.templateId,title:et.title,subject_id:et.subjectId||null,topic_tags:et.topicTags,base_svg_data:et.baseSvgData,width:et.width,height:et.height,anchors:rt,schema:it};if(e&&e!=="new"){const{error:jt}=await supabase.from("diagram_templates").update(Et).eq("id",e);if(jt)throw jt}else{const{error:jt}=await supabase.from("diagram_templates").insert(Et);if(jt)throw jt}o("Template saved successfully","success"),i("/admin/diagram-templates")}catch(Et){console.error("Error saving template:",Et),Et.code==="23505"?o("Template ID already exists","error"):o("Failed to save template","error")}finally{b(!1)}},yt=()=>{lt.trim()&&!et.topicTags.includes(lt.trim())&&(tt(Et=>({...Et,topicTags:[...Et.topicTags,lt.trim()]})),ct(""))},bt=Et=>{tt(jt=>({...jt,topicTags:jt.topicTags.filter(Rt=>Rt!==Et)}))},St=()=>{if(!ut.trim())return;const Et=ut.trim();mt==="labels"?st(jt=>({...jt,labels:{...jt.labels,[Et]:{default:"",maxLen:50}}})):mt==="values"?st(jt=>({...jt,values:{...jt.values,[Et]:{default:0,min:0,max:100,type:"number"}}})):mt==="visibility"?st(jt=>({...jt,visibility:{...jt.visibility,[Et]:{default:!0}}})):mt==="positions"&&st(jt=>({...jt,positions:{...jt.positions,[Et]:{default:{x:0,y:0}}}})),dt("")},wt=(Et,jt)=>{st(Rt=>{const At={...Rt};return Et==="labels"&&At.labels?delete At.labels[jt]:Et==="values"&&At.values?delete At.values[jt]:Et==="visibility"&&At.visibility?delete At.visibility[jt]:Et==="positions"&&At.positions&&delete At.positions[jt],At})},kt={mode:"template",templateId:et.templateId,placement:"above",overrides:at?JSON.parse(at):void 0};return d?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-screen",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto pb-12",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>i("/admin/diagram-templates"),className:"p-2 hover:bg-gray-100 rounded-lg",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e==="new"?"New Diagram Template":"Edit Diagram Template"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mt-1",children:"Configure reusable diagram with override schema"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>_e(!$),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[jsxRuntimeExports.jsx(Eye,{className:"w-5 h-5"}),$?"Hide":"Show"," Preview"]}),jsxRuntimeExports.jsxs("button",{onClick:pt,disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[jsxRuntimeExports.jsx(Save,{className:"w-5 h-5"}),g?"Saving...":"Save Template"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Template ID ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"text",value:et.templateId,onChange:Et=>tt(jt=>({...jt,templateId:Et.target.value})),placeholder:"math.circle_theorems.angle_in_semicircle.v1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: subject.topic.name.vN"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"text",value:et.title,onChange:Et=>tt(jt=>({...jt,title:Et.target.value})),placeholder:"Angle in a Semicircle",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),jsxRuntimeExports.jsxs("select",{value:et.subjectId,onChange:Et=>tt(jt=>({...jt,subjectId:Et.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"None"}),j.map(Et=>jsxRuntimeExports.jsx("option",{value:Et.id,children:Et.name},Et.id))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic Tags"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:lt,onChange:Et=>ct(Et.target.value),onKeyPress:Et=>Et.key==="Enter"&&(Et.preventDefault(),yt()),placeholder:"circle-theorems",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),jsxRuntimeExports.jsx("button",{onClick:yt,className:"px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:jsxRuntimeExports.jsx(Plus,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:et.topicTags.map(Et=>jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-700 rounded text-sm",children:[Et,jsxRuntimeExports.jsx("button",{onClick:()=>bt(Et),className:"hover:text-indigo-900",children:jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"})})]},Et))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width"}),jsxRuntimeExports.jsx("input",{type:"number",value:et.width,onChange:Et=>tt(jt=>({...jt,width:parseInt(Et.target.value)||800})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height"}),jsxRuntimeExports.jsx("input",{type:"number",value:et.height,onChange:Et=>tt(jt=>({...jt,height:parseInt(Et.target.value)||600})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["SVG Data ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("textarea",{value:et.baseSvgData,onChange:Et=>tt(jt=>({...jt,baseSvgData:Et.target.value})),placeholder:"<svg>...</svg>",rows:12,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use element IDs with prefixes: pt:, txt:, ln:, mk:, grp:"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Override Schema"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mb-4 border-b border-gray-200",children:["labels","values","visibility","positions"].map(Et=>jsxRuntimeExports.jsx("button",{onClick:()=>xt(Et),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${mt===Et?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:Et.charAt(0).toUpperCase()+Et.slice(1)},Et))}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:ut,onChange:Et=>dt(Et.target.value),onKeyPress:Et=>Et.key==="Enter"&&(Et.preventDefault(),St()),placeholder:`Enter ${mt} key...`,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"}),jsxRuntimeExports.jsx("button",{onClick:St,className:"px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:jsxRuntimeExports.jsx(Plus,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[mt==="labels"&&it.labels&&Object.entries(it.labels).map(([Et,jt])=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"font-mono text-sm font-medium",children:Et}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("labels",Et),className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("input",{type:"number",value:jt.maxLen||50,onChange:Rt=>st(At=>({...At,labels:{...At.labels,[Et]:{...jt,maxLen:parseInt(Rt.target.value)||50}}})),placeholder:"Max length",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]},Et)),mt==="values"&&it.values&&Object.entries(it.values).map(([Et,jt])=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"font-mono text-sm font-medium",children:Et}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("values",Et),className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:jt.min||0,onChange:Rt=>st(At=>({...At,values:{...At.values,[Et]:{...jt,min:parseFloat(Rt.target.value)||0}}})),placeholder:"Min",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"}),jsxRuntimeExports.jsx("input",{type:"number",value:jt.max||100,onChange:Rt=>st(At=>({...At,values:{...At.values,[Et]:{...jt,max:parseFloat(Rt.target.value)||100}}})),placeholder:"Max",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]})]},Et)),mt==="visibility"&&it.visibility&&Object.entries(it.visibility).map(([Et,jt])=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"font-mono text-sm font-medium",children:Et}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("visibility",Et),className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]},Et)),mt==="positions"&&it.positions&&Object.entries(it.positions).map(([Et,jt])=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"font-mono text-sm font-medium",children:Et}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("positions",Et),className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("input",{type:"text",value:jt.linkedText||"",onChange:Rt=>st(At=>({...At,positions:{...At.positions,[Et]:{...jt,linkedText:Rt.target.value}}})),placeholder:"Linked text ID (optional)",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]},Et))]})]})]}),$&&et.baseSvgData&&jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Preview"}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Overrides (JSON)"}),jsxRuntimeExports.jsx("textarea",{value:at,onChange:Et=>ot(Et.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm"})]}),et.templateId&&jsxRuntimeExports.jsx(DiagramRenderer,{metadata:kt})]})]})]})]})}function DiagramTemplateDetailPage(){const{id:e}=useParams(),i=useNavigate(),{showToast:o}=useToast(),[d,h]=reactExports.useState(null),[g,b]=reactExports.useState(!0),[j,_]=reactExports.useState(!1);reactExports.useEffect(()=>{$()},[e]);const $=async()=>{b(!0);try{if(!e)throw new Error("No template ID provided");if(e.startsWith("engine-")){const st=e.replace("engine-",""),ot=getAllTemplates().find(ct=>ct.templateId===st);if(!ot)throw new Error("Template not found");const lt=_e(ot);h(lt)}else{const{data:st,error:at}=await supabase.from("diagram_templates").select("*").eq("id",e).single();if(at)throw at;if(!st)throw new Error("Template not found");h({id:st.id,templateId:st.template_id,title:st.title,subjectId:st.subject_id,subjectKey:st.subject_key,topicTags:st.topic_tags||[],engineMode:st.engine_mode||"template",baseCanvasData:st.base_canvas_data,baseSvgData:st.base_svg_data,width:st.width,height:st.height,anchors:st.anchors||{},schema:st.schema||{},defaults:st.defaults||{},createdAt:st.created_at,updatedAt:st.updated_at,isEngineTemplate:!1})}}catch(st){console.error("Error loading template:",st),o("error","Failed to load template"),i("/admin/diagram-templates")}finally{b(!1)}},_e=st=>{const at=tt(st.templateId),ot=rt(st.category);return{id:`engine-${st.templateId}`,templateId:st.templateId,title:st.title,description:st.description,subjectId:void 0,subjectKey:ot,topicTags:at,engineMode:"auto",baseCanvasData:void 0,baseSvgData:void 0,width:500,height:400,anchors:{},schema:st.schema,defaults:et(st),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isEngineTemplate:!0}},et=st=>{const at={labels:{},values:{},visibility:{},positions:{}};if(st.schema.labels)for(const[ot,lt]of Object.entries(st.schema.labels))lt.default!==void 0&&(at.labels[ot]=lt.default);if(st.schema.values)for(const[ot,lt]of Object.entries(st.schema.values))lt.default!==void 0&&(at.values[ot]=lt.default);if(st.schema.visibility)for(const[ot,lt]of Object.entries(st.schema.visibility))lt.default!==void 0&&(at.visibility[ot]=lt.default);if(st.schema.positions)for(const[ot,lt]of Object.entries(st.schema.positions))lt.default&&(at.positions[ot]=lt.default);return at},tt=st=>{const at=[],ot=st.split(".");return ot.length>=2&&at.push(ot[1]),ot.length>=3&&at.push(ot[2]),at},rt=st=>({geometry:"math",graphs:"math",statistics:"math",algebra:"math",physics:"physics",chemistry:"chemistry",biology:"biology"})[st]||"math",nt=async()=>{if(d){_(!0);try{const st=`${d.templateId}.copy`,{error:at}=await supabase.from("diagram_templates").insert({template_id:st,title:`${d.title} (Copy)`,subject_id:d.subjectId||null,subject_key:d.subjectKey,topic_tags:d.topicTags,engine_mode:d.engineMode,base_canvas_data:d.baseCanvasData,base_svg_data:d.baseSvgData,width:d.width,height:d.height,anchors:d.anchors,schema:d.schema,defaults:d.defaults});if(at)throw at;o("success","Template duplicated"),i("/admin/diagram-templates")}catch(st){console.error("Error duplicating template:",st),o("error","Failed to duplicate template")}finally{_(!1)}}},it=async()=>{if(!(!d||d.engineMode!=="auto"))try{const at=(await __vitePreload(()=>Promise.resolve().then(()=>index),void 0).then(ut=>ut.renderDiagram({mode:"auto",templateId:d.templateId,params:d.defaults||{}}))).svg,ot=new Blob([at],{type:"image/svg+xml"}),lt=URL.createObjectURL(ot),ct=document.createElement("a");ct.href=lt,ct.download=`${d.templateId}.svg`,document.body.appendChild(ct),ct.click(),document.body.removeChild(ct),URL.revokeObjectURL(lt),o("success","SVG downloaded")}catch(st){console.error("Error downloading SVG:",st),o("error","Failed to download SVG")}};return g?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):d?jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>i("/admin/diagram-templates"),className:"flex items-center gap-2 px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 mb-6",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5"}),"Back to Templates"]}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"p-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:d.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-mono",children:d.templateId}),d.description&&jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:d.description})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[d.engineMode==="auto"&&jsxRuntimeExports.jsxs("button",{onClick:it,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Download SVG"]}),jsxRuntimeExports.jsxs("button",{onClick:nt,disabled:j,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[jsxRuntimeExports.jsx(Copy,{className:"w-4 h-4"}),j?"Copying...":"Duplicate"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-2",children:jsxRuntimeExports.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 p-8 flex items-center justify-center min-h-96",children:d.engineMode==="auto"?jsxRuntimeExports.jsx(DiagramRenderer,{metadata:{mode:"auto",templateId:d.templateId,params:d.defaults||{}},showWarnings:!0}):d.baseSvgData?jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:d.baseSvgData}}):jsxRuntimeExports.jsx("div",{className:"text-gray-400 text-center",children:jsxRuntimeExports.jsx("p",{className:"text-lg",children:"No preview available"})})})}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Subject"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d.subjectKey})]}),d.topicTags.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Topics"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:d.topicTags.map(st=>jsxRuntimeExports.jsx("span",{className:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-sm",children:st},st))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Type"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d.isEngineTemplate?"Engine Template":"Custom Template"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Mode"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d.engineMode==="auto"?"Auto-render":"Static"})]}),d.schema&&Object.keys(d.schema).length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Parameters"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[d.schema.labels&&Object.keys(d.schema.labels).length>0&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Labels:"})," ",Object.keys(d.schema.labels).join(", ")]})}),d.schema.values&&Object.keys(d.schema.values).length>0&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Values:"})," ",Object.keys(d.schema.values).join(", ")]})}),d.schema.visibility&&Object.keys(d.schema.visibility).length>0&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Visibility:"})," ",Object.keys(d.schema.visibility).join(", ")]})})]})]})]})]})]})})]}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Template not found"}),jsxRuntimeExports.jsx("button",{onClick:()=>i("/admin/diagram-templates"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Back to Templates"})]})})}function getCoverageStatus(e){return e.isValid?"complete":e.missingPromptIds.length>0&&e.extraPromptIds.length>0?"both":e.missingPromptIds.length>0?"missing":"extras"}async function validateQuizCoverage(e){let i=[];if(e.scopeType==="topic"&&e.topicId)i=(await db.getPromptsByTopic(e.topicId)).map(_=>_.id);else if(e.scopeType==="unit"&&e.unitId){const j=await db.getTopicsByUnit(e.unitId),_=[];for(const $ of j){const _e=await db.getPromptsByTopic($.id);_.push(..._e)}i=_.map($=>$.id)}else e.scopeType==="full"&&e.subjectId&&(i=(await db.getPromptsBySubject(e.subjectId)).map(_=>_.id));const o=e.promptIds,d=new Set(i),h=new Set(o),g=i.filter(j=>!h.has(j)),b=o.filter(j=>!d.has(j));return{isValid:g.length===0&&b.length===0,expectedCount:i.length,actualCount:o.length,missingPromptIds:g,extraPromptIds:b}}async function validateQuizCoverageWithDetails(e){const i=await validateQuizCoverage(e);if(!i.isValid){const o=[...i.missingPromptIds,...i.extraPromptIds];if(o.length>0){const d=await db.getPromptsByIds(o);i.missingPrompts=d.filter(h=>i.missingPromptIds.includes(h.id)),i.extraPrompts=d.filter(h=>i.extraPromptIds.includes(h.id))}}return i}async function syncQuizPromptCoverage(e){let i=[];if(e.scopeType==="topic"&&e.topicId)i=(await db.getPromptsByTopic(e.topicId)).map(d=>d.id);else if(e.scopeType==="unit"&&e.unitId){const o=await db.getTopicsByUnit(e.unitId),d=[];for(const h of o){const g=await db.getPromptsByTopic(h.id);d.push(...g)}i=d.map(h=>h.id)}else e.scopeType==="full"&&e.subjectId&&(i=(await db.getPromptsBySubject(e.subjectId)).map(d=>d.id));return i}async function generateSubjectCoverageReport(e){const i=await db.getSubject(e),o=await db.getQuizzesBySubject(e),h=(await db.getPromptsBySubject(e)).length,g=[],b=[],j=[];for(const _ of o){const $=await validateQuizCoverage(_),_e={quiz:_,validation:$,status:getCoverageStatus($)};_.scopeType==="full"?g.push(_e):_.scopeType==="unit"?b.push(_e):_.scopeType==="topic"&&j.push(_e)}return{subjectId:e,subjectName:(i==null?void 0:i.name)||"Unknown",totalPrompts:h,fullQuizzes:g,unitQuizzes:b,topicQuizzes:j}}async function syncAllQuizzesInSubject(e){const i=await db.getQuizzesBySubject(e);let o=0;for(const d of i){const h=await syncQuizPromptCoverage(d);await db.updateQuiz(d.id,{promptIds:h}),o++}return o}function QuizzesPage(){const[e,i]=reactExports.useState([]),[o,d]=reactExports.useState([]),[h,g]=reactExports.useState([]),[b,j]=reactExports.useState([]),[_,$]=reactExports.useState([]),[_e,et]=reactExports.useState(!0),[tt,rt]=reactExports.useState(null),[nt,it]=reactExports.useState(null),[st,at]=reactExports.useState("all"),[ot,lt]=reactExports.useState("all");reactExports.useEffect(()=>{ct()},[]);const ct=async()=>{et(!0);const bt=await db.getSubjects();d(bt);const St=[],wt=[],kt=[];for(const jt of bt){const[Rt,At,Dt]=await Promise.all([db.getQuizzesBySubject(jt.id),db.getUnits(jt.id),db.getTopics(jt.id)]);St.push(...Rt),wt.push(...At),kt.push(...Dt)}i(St),g(wt),j(kt);const Et=St.map(jt=>({quiz:jt,status:"loading"}));$(Et),et(!1);for(const jt of Et){const Rt=await validateQuizCoverage(jt.quiz),At=getCoverageStatus(Rt);$(Dt=>Dt.map(Nt=>Nt.quiz.id===jt.quiz.id?{...Nt,status:At,validation:Rt}:Nt))}},ut=async bt=>{rt(bt);try{const St=e.find(kt=>kt.id===bt);if(!St)return;const wt=await syncQuizPromptCoverage(St);await db.updateQuiz(bt,{promptIds:wt}),await ct(),alert("Quiz coverage synced successfully!")}catch(St){alert("Failed to sync quiz: "+St)}finally{rt(null)}},dt=async bt=>{var Et,jt;const St=e.find(Rt=>Rt.id===bt);if(!St)return;const wt=await validateQuizCoverageWithDetails(St);it(bt);let kt=`Quiz: ${St.title}

`;kt+=`Scope: ${St.scopeType}
`,kt+=`Expected: ${wt.expectedCount} prompts
`,kt+=`Actual: ${wt.actualCount} prompts

`,wt.missingPromptIds.length>0&&(kt+=`Missing ${wt.missingPromptIds.length} prompts:
`,(Et=wt.missingPrompts)==null||Et.slice(0,5).forEach(Rt=>{kt+=`- ${Rt.question.substring(0,50)}...
`}),wt.missingPromptIds.length>5&&(kt+=`... and ${wt.missingPromptIds.length-5} more
`),kt+=`
`),wt.extraPromptIds.length>0&&(kt+=`Extra ${wt.extraPromptIds.length} prompts:
`,(jt=wt.extraPrompts)==null||jt.slice(0,5).forEach(Rt=>{kt+=`- ${Rt.question.substring(0,50)}...
`}),wt.extraPromptIds.length>5&&(kt+=`... and ${wt.extraPromptIds.length-5} more
`)),alert(kt),it(null)},mt=async bt=>{if(confirm("Are you sure you want to delete this quiz?"))try{await db.deleteQuiz(bt),await ct()}catch(St){alert("Failed to delete quiz: "+St)}},xt=(bt,St)=>{if(bt==="loading")return jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Checking..."});const wt={complete:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",missing:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",extras:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",both:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"},kt={complete:" Complete",missing:` Missing ${(St==null?void 0:St.missingPromptIds.length)||0}`,extras:` Extras ${(St==null?void 0:St.extraPromptIds.length)||0}`,both:" Issues"};return jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${wt[bt]}`,children:kt[bt]})},ft=bt=>{if(bt.scopeType==="topic"){const St=b.find(wt=>wt.id===bt.topicId);return(St==null?void 0:St.name)||"Unknown Topic"}else if(bt.scopeType==="unit"){const St=h.find(wt=>wt.id===bt.unitId);return(St==null?void 0:St.name)||"Unknown Unit"}return"Full GCSE"},gt=_.filter(bt=>!(st!=="all"&&bt.quiz.scopeType!==st||ot!=="all"&&bt.quiz.subjectId!==ot)),pt={full:0,unit:1,topic:2},yt=[...gt].sort((bt,St)=>{const wt=pt[bt.quiz.scopeType]-pt[St.quiz.scopeType];return wt!==0?wt:bt.quiz.title.localeCompare(St.quiz.title)});return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Quizzes"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage quiz collections and validate coverage"})]}),jsxRuntimeExports.jsxs(Link,{to:"/admin/tools",className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold transition-colors",children:[jsxRuntimeExports.jsx(Plus,{size:20}),"Batch Create Quizzes"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs("select",{value:st,onChange:bt=>at(bt.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All Scopes"}),jsxRuntimeExports.jsx("option",{value:"full",children:"Full GCSE"}),jsxRuntimeExports.jsx("option",{value:"unit",children:"Unit"}),jsxRuntimeExports.jsx("option",{value:"topic",children:"Topic"})]}),jsxRuntimeExports.jsxs("select",{value:ot,onChange:bt=>lt(bt.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All Subjects"}),o.map(bt=>jsxRuntimeExports.jsx("option",{value:bt.id,children:bt.name},bt.id))]})]}),_e?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx(RefreshCw,{size:48,className:"mx-auto text-gray-400 animate-spin mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading quizzes..."})]}):yt.length===0?jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-12 text-center",children:[jsxRuntimeExports.jsx(Database,{size:48,className:"mx-auto text-gray-400 mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No quizzes yet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Use the batch tools to automatically create quizzes from your prompts."}),jsxRuntimeExports.jsx(Link,{to:"/admin/tools",className:"inline-flex items-center gap-2 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold transition-colors",children:"Go to Tools"})]}):jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Quiz"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Scope"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Subject"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Prompts"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:yt.map(({quiz:bt,status:St,validation:wt})=>{const kt=o.find(Rt=>Rt.id===bt.subjectId),Et=tt===bt.id,jt=nt===bt.id;return jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:bt.title}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:ft(bt)})]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx("span",{className:"capitalize text-sm text-gray-700 dark:text-gray-300",children:bt.scopeType})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:(kt==null?void 0:kt.name)||"Unknown"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:wt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:wt.isValid?"text-green-600":"text-red-600",children:bt.promptIds.length})," / ",wt.expectedCount]}):bt.promptIds.length})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:xt(St,wt)}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>dt(bt.id),disabled:jt||St==="loading",className:"p-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg disabled:opacity-50 transition-colors",title:"View Details",children:jsxRuntimeExports.jsx(Eye,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>ut(bt.id),disabled:Et||St==="loading",className:"p-2 text-gray-600 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg disabled:opacity-50 transition-colors",title:"Sync Coverage",children:jsxRuntimeExports.jsx(RefreshCw,{size:16,className:Et?"animate-spin":""})}),jsxRuntimeExports.jsx("button",{onClick:()=>mt(bt.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete Quiz",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})})]},bt.id)})})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Quiz Hierarchy Rules"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-200",children:[jsxRuntimeExports.jsxs("li",{children:[" ",jsxRuntimeExports.jsx("strong",{children:"Full GCSE:"})," Must include ALL prompts in the subject"]}),jsxRuntimeExports.jsxs("li",{children:[" ",jsxRuntimeExports.jsx("strong",{children:"Unit Quiz:"})," Must include ALL prompts in that unit"]}),jsxRuntimeExports.jsxs("li",{children:[" ",jsxRuntimeExports.jsx("strong",{children:"Topic Quiz:"})," Must include ALL prompts in that topic"]})]}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-sm text-blue-700 dark:text-blue-300",children:`Use "Sync Coverage" to automatically update a quiz's prompts to match its scope. Use "Coverage Audit" in the sidebar to check and fix all quizzes at once.`})]})]})}function PlaylistsPage(){const[e,i]=reactExports.useState([]),[o,d]=reactExports.useState([]),[h,g]=reactExports.useState(!0),[b,j]=reactExports.useState(null),[_,$]=reactExports.useState([]),[_e,et]=reactExports.useState(!1);reactExports.useEffect(()=>{tt()},[]);const tt=async()=>{try{const[ct,ut]=await Promise.all([db.getPlaylists(),db.getSubjects()]),dt=[];for(const mt of ut){const xt=await db.getQuizzesBySubject(mt.id);dt.push(...xt)}i(ct),d(dt)}catch(ct){console.error("Failed to load playlists:",ct)}finally{g(!1)}},rt=()=>{j({id:"",title:"",description:"",themeTag:"",isDaily:!1,isFeatured:!1,coverStyle:"gradient",orderIndex:e.length,createdAt:new Date().toISOString()}),$([]),et(!0)},nt=async ct=>{const ut=await db.getPlaylistQuizzes(ct.id);j(ct),$(ut),et(!0)},it=async()=>{if(b)try{let ct;b.id?(await db.updatePlaylist(b.id,{title:b.title,description:b.description,themeTag:b.themeTag,isDaily:b.isDaily,isFeatured:b.isFeatured,coverStyle:b.coverStyle,orderIndex:b.orderIndex}),ct=b,await db.removeAllQuizzesFromPlaylist(ct.id)):ct=await db.createPlaylist({title:b.title,description:b.description,themeTag:b.themeTag,isDaily:b.isDaily,isFeatured:b.isFeatured,coverStyle:b.coverStyle,orderIndex:b.orderIndex});for(let ut=0;ut<_.length;ut++)await db.addQuizToPlaylist(ct.id,_[ut].id,ut);await tt(),et(!1),j(null),$([])}catch(ct){console.error("Failed to save playlist:",ct),alert("Failed to save playlist")}},st=async ct=>{if(confirm("Are you sure you want to delete this playlist?"))try{await db.deletePlaylist(ct),await tt()}catch(ut){console.error("Failed to delete playlist:",ut),alert("Failed to delete playlist")}},at=ct=>{_.find(ut=>ut.id===ct.id)||$([..._,ct])},ot=ct=>{$(_.filter(ut=>ut.id!==ct))},lt=(ct,ut)=>{const dt=[..._],mt=ut==="up"?ct-1:ct+1;mt<0||mt>=dt.length||([dt[ct],dt[mt]]=[dt[mt],dt[ct]],$(dt))};return h?jsxRuntimeExports.jsx("div",{className:"p-6",children:"Loading playlists..."}):_e&&b?jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold",children:b.id?"Edit Playlist":"Create Playlist"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:it,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[jsxRuntimeExports.jsx(Save,{size:18}),"Save Playlist"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{et(!1),j(null),$([])},className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:[jsxRuntimeExports.jsx(X,{size:18}),"Cancel"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold",children:"Playlist Details"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Title"}),jsxRuntimeExports.jsx("input",{type:"text",value:b.title,onChange:ct=>j({...b,title:ct.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"Enter playlist title"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Description"}),jsxRuntimeExports.jsx("textarea",{value:b.description,onChange:ct=>j({...b,description:ct.target.value}),className:"w-full px-3 py-2 border rounded-lg",rows:3,placeholder:"Enter playlist description"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Theme Tag"}),jsxRuntimeExports.jsx("input",{type:"text",value:b.themeTag,onChange:ct=>j({...b,themeTag:ct.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"e.g., Speed Run, Exam Week"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:b.isFeatured,onChange:ct=>j({...b,isFeatured:ct.target.checked})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold",children:"Featured"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:b.isDaily,onChange:ct=>j({...b,isDaily:ct.target.checked})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold",children:"Daily"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Cover Style"}),jsxRuntimeExports.jsxs("select",{value:b.coverStyle,onChange:ct=>j({...b,coverStyle:ct.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"gradient",children:"Gradient"}),jsxRuntimeExports.jsx("option",{value:"minimal",children:"Minimal"}),jsxRuntimeExports.jsx("option",{value:"image",children:"Image"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Quizzes"}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:o.map(ct=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:ct.title}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:ct.description})]}),jsxRuntimeExports.jsx("button",{onClick:()=>at(ct),disabled:_.find(ut=>ut.id===ct.id)!==void 0,className:`px-3 py-1 rounded-lg text-sm font-semibold ${_.find(ut=>ut.id===ct.id)?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:_.find(ut=>ut.id===ct.id)?"Added":"Add"})]},ct.id))})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Playlist Quizzes (",_.length,")"]}),_.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-gray-500",children:"No quizzes added yet. Add quizzes from the left panel."}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:_.map((ct,ut)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>lt(ut,"up"),disabled:ut===0,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>lt(ut,"down"),disabled:ut===_.length-1,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:""})]}),jsxRuntimeExports.jsx(GripVertical,{size:18,className:"text-gray-400"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:ct.title}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:ct.description})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot(ct.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:jsxRuntimeExports.jsx(Trash2,{size:18})})]},ct.id))})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold",children:"Playlists"}),jsxRuntimeExports.jsxs("button",{onClick:rt,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[jsxRuntimeExports.jsx(Plus,{size:20}),"Create Playlist"]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(ct=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"h-32 flex items-center justify-center",style:{background:ct.coverStyle==="gradient"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#f3f4f6"},children:jsxRuntimeExports.jsx(PlayCircle,{size:48,className:"text-white"})}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-3",children:[ct.themeTag&&jsxRuntimeExports.jsx("span",{className:"inline-block px-2 py-1 bg-purple-100 text-purple-800 text-xs font-bold rounded-full",children:ct.themeTag}),jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg",children:ct.title}),ct.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:ct.description}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 text-xs",children:[ct.isFeatured&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded",children:"Featured"}),ct.isDaily&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded",children:"Daily"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 pt-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>nt(ct),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[jsxRuntimeExports.jsx(SquarePen,{size:16}),"Edit"]}),jsxRuntimeExports.jsx("button",{onClick:()=>st(ct.id),className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})]})]},ct.id))}),e.length===0&&jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[jsxRuntimeExports.jsx(PlayCircle,{size:64,className:"mx-auto mb-4 text-gray-400"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-2",children:"No playlists yet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first playlist to get started"}),jsxRuntimeExports.jsx("button",{onClick:rt,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Playlist"})]})]})}const templates=[{template_id:"math.circle_theorems.angle_in_semicircle.v1",title:"Angle in a Semicircle",topic_tags:["circle-theorems","geometry"],width:400,height:400,base_svg_data:`<svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
  <g id="grp:main">
    <!-- Circle -->
    <circle id="ln:circle" cx="200" cy="200" r="150" fill="none" stroke="#1e293b" stroke-width="2"/>

    <!-- Diameter -->
    <line id="ln:AB" x1="50" y1="200" x2="350" y2="200" stroke="#1e293b" stroke-width="2"/>

    <!-- Point C on circumference -->
    <line id="ln:AC" x1="50" y1="200" x2="200" y2="80" stroke="#3b82f6" stroke-width="2"/>
    <line id="ln:BC" x1="350" y1="200" x2="200" y2="80" stroke="#3b82f6" stroke-width="2"/>

    <!-- Points -->
    <circle id="pt:A" cx="50" cy="200" r="5" fill="#1e293b"/>
    <circle id="pt:B" cx="350" cy="200" r="5" fill="#1e293b"/>
    <circle id="pt:C" cx="200" cy="80" r="5" fill="#3b82f6"/>
    <circle id="pt:O" cx="200" cy="200" r="5" fill="#1e293b"/>

    <!-- Labels -->
    <text id="txt:A" x="35" y="205" font-size="18" font-weight="bold" fill="#1e293b">A</text>
    <text id="txt:B" x="360" y="205" font-size="18" font-weight="bold" fill="#1e293b">B</text>
    <text id="txt:C" x="205" y="70" font-size="18" font-weight="bold" fill="#3b82f6">C</text>
    <text id="txt:O" x="205" y="220" font-size="16" fill="#64748b">O</text>

    <!-- Angle mark -->
    <path id="mk:angleC" d="M 185 95 A 20 20 0 0 1 215 95" fill="none" stroke="#ef4444" stroke-width="2"/>
    <text id="txt:angleC" x="193" y="100" font-size="16" fill="#ef4444">90</text>
  </g>
</svg>`,anchors:{points:["pt:A","pt:B","pt:C","pt:O"],text:["txt:A","txt:B","txt:C","txt:O","txt:angleC"],lines:["ln:AB","ln:AC","ln:BC","ln:circle"],marks:["mk:angleC"]},schema:{labels:{A:{default:"A",maxLen:2},B:{default:"B",maxLen:2},C:{default:"C",maxLen:2},O:{default:"O",maxLen:2}},visibility:{"txt:O":{default:!0},"txt:angleC":{default:!0},"mk:angleC":{default:!0}},positions:{C:{default:{x:200,y:80},linkedText:"txt:C"}},styles:{}}},{template_id:"math.parallel_lines.fzc_angles.v1",title:"F, Z, C Angles (Parallel Lines)",topic_tags:["parallel-lines","angles","geometry"],width:450,height:350,base_svg_data:`<svg viewBox="0 0 450 350" xmlns="http://www.w3.org/2000/svg">
  <g id="grp:main">
    <!-- Parallel lines -->
    <line id="ln:L1" x1="50" y1="100" x2="400" y2="100" stroke="#1e293b" stroke-width="2"/>
    <line id="ln:L2" x1="50" y1="250" x2="400" y2="250" stroke="#1e293b" stroke-width="2"/>

    <!-- Transversal -->
    <line id="ln:T" x1="150" y1="50" x2="300" y2="300" stroke="#3b82f6" stroke-width="2"/>

    <!-- Angle marks -->
    <path id="mk:angle1" d="M 190 100 L 210 100 L 200 85" fill="#ef4444" fill-opacity="0.3"/>
    <path id="mk:angle2" d="M 230 250 L 250 250 L 240 235" fill="#22c55e" fill-opacity="0.3"/>

    <!-- Labels -->
    <text id="txt:L1" x="410" y="105" font-size="16" fill="#1e293b">L</text>
    <text id="txt:L2" x="410" y="255" font-size="16" fill="#1e293b">L</text>
    <text id="txt:angle1" x="205" y="75" font-size="18" font-weight="bold" fill="#ef4444">a</text>
    <text id="txt:angle2" x="245" y="225" font-size="18" font-weight="bold" fill="#22c55e">b</text>

    <!-- Parallel marks -->
    <g id="grp:parallel-marks">
      <line id="mk:par1a" x1="120" y1="95" x2="130" y2="95" stroke="#64748b" stroke-width="2"/>
      <line id="mk:par1b" x1="120" y1="105" x2="130" y2="105" stroke="#64748b" stroke-width="2"/>
      <line id="mk:par2a" x1="120" y1="245" x2="130" y2="245" stroke="#64748b" stroke-width="2"/>
      <line id="mk:par2b" x1="120" y1="255" x2="130" y2="255" stroke="#64748b" stroke-width="2"/>
    </g>
  </g>
</svg>`,anchors:{points:[],text:["txt:L1","txt:L2","txt:angle1","txt:angle2"],lines:["ln:L1","ln:L2","ln:T"],marks:["mk:angle1","mk:angle2"],groups:["grp:parallel-marks"]},schema:{labels:{angle1:{default:"a",maxLen:10},angle2:{default:"b",maxLen:10}},values:{"txt:angle1":{default:"a",type:"string"},"txt:angle2":{default:"b",type:"string"}},visibility:{"grp:parallel-marks":{default:!0},"mk:angle1":{default:!0},"mk:angle2":{default:!0}},styles:{}}},{template_id:"math.graphs.linear_axes.v1",title:"Linear Graph Axes",topic_tags:["graphs","coordinates","linear-functions"],width:500,height:500,base_svg_data:`<svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#1e293b"/>
    </marker>
  </defs>
  <g id="grp:main">
    <!-- Grid -->
    <g id="grp:grid" opacity="0.2">
      <line x1="50" y1="100" x2="450" y2="100" stroke="#94a3b8" stroke-width="1"/>
      <line x1="50" y1="150" x2="450" y2="150" stroke="#94a3b8" stroke-width="1"/>
      <line x1="50" y1="200" x2="450" y2="200" stroke="#94a3b8" stroke-width="1"/>
      <line x1="50" y1="250" x2="450" y2="250" stroke="#94a3b8" stroke-width="1"/>
      <line x1="50" y1="300" x2="450" y2="300" stroke="#94a3b8" stroke-width="1"/>
      <line x1="50" y1="350" x2="450" y2="350" stroke="#94a3b8" stroke-width="1"/>
      <line x1="50" y1="400" x2="450" y2="400" stroke="#94a3b8" stroke-width="1"/>
      <line x1="100" y1="50" x2="100" y2="450" stroke="#94a3b8" stroke-width="1"/>
      <line x1="150" y1="50" x2="150" y2="450" stroke="#94a3b8" stroke-width="1"/>
      <line x1="200" y1="50" x2="200" y2="450" stroke="#94a3b8" stroke-width="1"/>
      <line x1="250" y1="50" x2="250" y2="450" stroke="#94a3b8" stroke-width="1"/>
      <line x1="300" y1="50" x2="300" y2="450" stroke="#94a3b8" stroke-width="1"/>
      <line x1="350" y1="50" x2="350" y2="450" stroke="#94a3b8" stroke-width="1"/>
      <line x1="400" y1="50" x2="400" y2="450" stroke="#94a3b8" stroke-width="1"/>
    </g>

    <!-- Axes -->
    <line id="ln:xAxis" x1="50" y1="250" x2="450" y2="250" stroke="#1e293b" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line id="ln:yAxis" x1="250" y1="450" x2="250" y2="50" stroke="#1e293b" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Labels -->
    <text id="txt:xLabel" x="460" y="255" font-size="18" font-weight="bold" fill="#1e293b">x</text>
    <text id="txt:yLabel" x="255" y="40" font-size="18" font-weight="bold" fill="#1e293b">y</text>
    <text id="txt:origin" x="230" y="270" font-size="16" fill="#64748b">0</text>

    <!-- Sample line -->
    <line id="ln:sampleLine" x1="100" y1="350" x2="400" y2="150" stroke="#3b82f6" stroke-width="3" opacity="0"/>

    <!-- Points -->
    <circle id="pt:A" cx="150" cy="300" r="5" fill="#ef4444" opacity="0"/>
    <circle id="pt:B" cx="350" cy="200" r="5" fill="#ef4444" opacity="0"/>

    <text id="txt:A" x="155" y="295" font-size="16" fill="#ef4444" opacity="0">A</text>
    <text id="txt:B" x="355" y="195" font-size="16" fill="#ef4444" opacity="0">B</text>
  </g>
</svg>`,anchors:{points:["pt:A","pt:B"],text:["txt:xLabel","txt:yLabel","txt:origin","txt:A","txt:B"],lines:["ln:xAxis","ln:yAxis","ln:sampleLine"],groups:["grp:grid"]},schema:{labels:{xLabel:{default:"x",maxLen:10},yLabel:{default:"y",maxLen:10}},visibility:{"grp:grid":{default:!0},"ln:sampleLine":{default:!1},"pt:A":{default:!1},"pt:B":{default:!1},"txt:A":{default:!1},"txt:B":{default:!1}},positions:{A:{default:{x:150,y:300},linkedText:"txt:A"},B:{default:{x:350,y:200},linkedText:"txt:B"}},styles:{}}}];async function seedDiagramTemplates(){try{const{data:e,error:i}=await supabase.from("subjects").select("id").eq("name","Maths").single();if(i)return console.error("Error finding Maths subject:",i),{success:!1,error:"Maths subject not found"};const o=e.id;for(const d of templates){const h={...d,subject_id:o},{error:g}=await supabase.from("diagram_templates").upsert(h,{onConflict:"template_id"});if(g)return console.error(`Error seeding template ${d.template_id}:`,g),{success:!1,error:g.message}}return{success:!0,count:templates.length}}catch(e){return console.error("Error seeding diagram templates:",e),{success:!1,error:e.message}}}function ToolsPage(){const[e,i]=reactExports.useState(!1),[o,d]=reactExports.useState(""),[h,g]=reactExports.useState([]),[b,j]=reactExports.useState("");reactExports.useEffect(()=>{_()},[]);const _=async()=>{try{const tt=await db.getSubjects();g(tt),tt.length>0&&j(tt[0].id)}catch(tt){console.error("Failed to load subjects:",tt)}},$=async tt=>{if(!b){d("Error: Please select a subject");return}i(!0),d("");try{let rt=0;if(tt==="topic"){const it=await createTopicQuizzes(b);rt+=it.length}else if(tt==="unit"){const it=await createUnitQuizzes(b);rt+=it.length}else tt==="full"&&(await createFullGCSEQuiz(b),rt+=1);const nt=h.find(it=>it.id===b);d(`Successfully created ${rt} ${tt} quiz${rt!==1?"zes":""} for ${nt==null?void 0:nt.name}`)}catch(rt){d(`Error: ${rt}`)}finally{i(!1)}},et=[{id:"topic-quizzes",title:"Create Topic Quizzes",description:"Generate a quiz for each topic with all its prompts",icon:Zap,color:"from-blue-500 to-cyan-500",action:()=>$("topic")},{id:"unit-quizzes",title:"Create Unit Quizzes",description:"Generate a quiz for each unit combining all topic prompts",icon:Database,color:"from-green-500 to-emerald-500",action:()=>$("unit")},{id:"full-quizzes",title:"Create Full GCSE Quizzes",description:"Generate one comprehensive quiz per subject with all prompts",icon:CheckCircle,color:"from-purple-500 to-pink-500",action:()=>$("full")},{id:"seed-diagram-templates",title:"Seed Diagram Templates",description:"Load starter diagram templates for maths (circle theorems, parallel lines, graphs)",icon:PanelsTopLeft,color:"from-orange-500 to-red-500",action:async()=>{i(!0),d("");try{const tt=await seedDiagramTemplates();tt.success?d(`Successfully seeded ${tt.count} diagram templates`):d(`Error: ${tt.error}`)}catch(tt){d(`Error: ${tt}`)}finally{i(!1)}}}];return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Batch Tools"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Automated tools for batch operations"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Select Subject"}),jsxRuntimeExports.jsx("select",{value:b,onChange:tt=>j(tt.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",children:h.length===0?jsxRuntimeExports.jsx("option",{value:"",children:"No subjects available"}):h.map(tt=>jsxRuntimeExports.jsxs("option",{value:tt.id,children:[tt.name," (",tt.examBoard,")"]},tt.id))}),h.length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Please create subjects first before using batch tools"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:et.map(tt=>{const rt=tt.icon;return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[jsxRuntimeExports.jsxs("div",{className:`bg-gradient-to-br ${tt.color} p-6 text-white`,children:[jsxRuntimeExports.jsx(rt,{size:32,className:"mb-3"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-2",children:tt.title}),jsxRuntimeExports.jsx("p",{className:"text-white/90 text-sm",children:tt.description})]}),jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsx("button",{onClick:tt.action,disabled:e||!b,className:"w-full px-4 py-3 bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white rounded-xl font-semibold transition-colors",children:e?"Processing...":"Run Tool"})})]},tt.id)})}),o&&jsxRuntimeExports.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-2xl border p-6 ${o.startsWith("Error")?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-green-500 bg-green-50 dark:bg-green-900/20"}`,children:[jsxRuntimeExports.jsx("h3",{className:`text-lg font-bold mb-2 ${o.startsWith("Error")?"text-red-900 dark:text-red-400":"text-green-900 dark:text-green-400"}`,children:o.startsWith("Error")?"Error":"Success"}),jsxRuntimeExports.jsx("p",{className:o.startsWith("Error")?"text-red-700 dark:text-red-300":"text-green-700 dark:text-green-300",children:o})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-xl",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx(Wrench,{size:32,className:"flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-2",children:"How Batch Tools Work"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 text-white/90",children:[jsxRuntimeExports.jsxs("li",{children:[" ",jsxRuntimeExports.jsx("strong",{children:"Topic Quizzes:"})," Creates one quiz per topic (for the selected subject) with all prompts in that topic"]}),jsxRuntimeExports.jsxs("li",{children:[" ",jsxRuntimeExports.jsx("strong",{children:"Unit Quizzes:"})," Creates one quiz per unit (for the selected subject) combining all prompts from all topics in that unit"]}),jsxRuntimeExports.jsxs("li",{children:[" ",jsxRuntimeExports.jsx("strong",{children:"Full GCSE Quiz:"})," Creates one comprehensive quiz for the selected subject with ALL prompts"]}),jsxRuntimeExports.jsx("li",{children:" Time limits are auto-calculated: 30 seconds per prompt (15 for Grade 9 target)"}),jsxRuntimeExports.jsx("li",{children:" These tools will skip topics/units with no prompts"})]})]})]})})]})}function AuditPage(){const[e,i]=reactExports.useState([]),[o,d]=reactExports.useState(new Map),[h,g]=reactExports.useState(new Set),[b,j]=reactExports.useState(null);reactExports.useEffect(()=>{_()},[]);const _=async()=>{const nt=await db.getSubjects();i(nt)},$=async nt=>{const it=await generateSubjectCoverageReport(nt);d(st=>new Map(st).set(nt,it)),g(st=>new Set(st).add(nt))},_e=async nt=>{j(nt);try{await syncAllQuizzesInSubject(nt),await $(nt),alert("Successfully synced all quizzes in subject!")}catch(it){alert("Failed to sync quizzes: "+it)}finally{j(null)}},et=nt=>{h.has(nt)?g(it=>{const st=new Set(it);return st.delete(nt),st}):$(nt)},tt=nt=>{switch(nt){case"complete":return jsxRuntimeExports.jsx(CheckCircle,{className:"text-green-600",size:18});case"missing":return jsxRuntimeExports.jsx(AlertTriangle,{className:"text-yellow-600",size:18});case"extras":return jsxRuntimeExports.jsx(AlertTriangle,{className:"text-orange-600",size:18});case"both":return jsxRuntimeExports.jsx(XCircle,{className:"text-red-600",size:18})}},rt=(nt,it)=>{switch(nt){case"complete":return" Complete";case"missing":return` Missing ${it.missingPromptIds.length}`;case"extras":return` Has ${it.extraPromptIds.length} extras`;case"both":return` Missing ${it.missingPromptIds.length}, ${it.extraPromptIds.length} extras`}};return jsxRuntimeExports.jsxs("div",{className:"p-8",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Coverage Audit"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Verify and fix quiz prompt coverage across all subjects. Each quiz must contain exactly the prompts defined by its scope."})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:e.map(nt=>{const it=o.get(nt.id),st=h.has(nt.id),at=b===nt.id;return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>et(nt.id),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:st?jsxRuntimeExports.jsx(ChevronDown,{size:20}):jsxRuntimeExports.jsx(ChevronRight,{size:20})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:nt.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:nt.examBoard})]})]}),it&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[it.totalPrompts," total prompts"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>_e(nt.id),disabled:at,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[jsxRuntimeExports.jsx(RefreshCw,{size:16,className:at?"animate-spin":""}),at?"Syncing...":"Fix All"]})]})]}),st&&it&&jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-900/50 space-y-6",children:[it.fullQuizzes.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Full GCSE Quizzes"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:it.fullQuizzes.map(({quiz:ot,validation:lt,status:ct})=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[tt(ct),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:ot.title}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[lt.actualCount," / ",lt.expectedCount," prompts"]})]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:rt(ct,lt)})]},ot.id))})]}),it.unitQuizzes.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Unit Quizzes"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:it.unitQuizzes.map(({quiz:ot,validation:lt,status:ct})=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[tt(ct),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:ot.title}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[lt.actualCount," / ",lt.expectedCount," prompts"]})]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:rt(ct,lt)})]},ot.id))})]}),it.topicQuizzes.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Topic Quizzes"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:it.topicQuizzes.map(({quiz:ot,validation:lt,status:ct})=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[tt(ct),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:ot.title}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[lt.actualCount," / ",lt.expectedCount," prompts"]})]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:rt(ct,lt)})]},ot.id))})]})]})]},nt.id)})})]})}function calculateRequiredQuizCount(e,i){return e+i+1}function validateCoverage(e,i,o){const d=new Set(e.promptIds),h=new Set(i),g=i.filter(_=>!d.has(_)),b=e.promptIds.filter(_=>!h.has(_)),j=new Map(o.map(_=>[_.id,_]));return{quizId:e.id,expectedPromptIds:i,actualPromptIds:e.promptIds,isValid:g.length===0&&b.length===0,missingPrompts:g.map(_=>j.get(_)).filter(Boolean),extraPrompts:b.map(_=>j.get(_)).filter(Boolean)}}function getExpectedPromptsForQuiz(e,i){return e.scopeType==="topic"&&e.topicId?i.filter(o=>o.topicId===e.topicId).map(o=>o.id):e.scopeType==="unit"&&e.unitId?i.filter(o=>o.unitId===e.unitId).map(o=>o.id):e.scopeType==="full"?i.filter(o=>o.subjectId===e.subjectId).map(o=>o.id):[]}function calculateTargetRatio(e){const i=e.promptIds.length;return i===0?0:e.grade9TargetSec/i}function generateQuizTitle(e,i){return e==="full"?`${i}  Full GCSE Sprint`:e==="unit"?`${i}  Unit Sprint`:`${i}  Topic Sprint`}function calculateSubjectHealth(e,i,o,d,h){const g=o.length,b=i.length,j=d.filter(ot=>ot.subjectId===e.id).length,_=calculateRequiredQuizCount(g,b),$=h.filter(ot=>ot.subjectId===e.id).length,_e=Math.max(0,_-$),et=h.some(ot=>ot.subjectId===e.id&&ot.scopeType==="full"),tt=i.filter(ot=>h.some(lt=>lt.unitId===ot.id&&lt.scopeType==="unit")).length,rt=o.filter(ot=>h.some(lt=>lt.topicId===ot.id&&lt.scopeType==="topic")).length;let nt="good";(!et||tt<b||rt<g)&&(nt=_e>b?"error":"warning");const it=h.filter(ot=>ot.subjectId===e.id&&ot.grade9TargetSec>0&&ot.timeLimitSec>0).length,st=$>0?it/$:0;let at="good";return st<.5?at="error":st<1&&(at="warning"),{subject:e,promptCount:j,topicCount:g,unitCount:b,requiredQuizCount:_,existingQuizCount:$,missingQuizCount:_e,coverageStatus:nt,targetStatus:at}}const TARGET_PRESETS=[{name:"Conservative",topicSecondsPerQuestion:30,unitSecondsPerQuestion:25,fullSecondsPerQuestion:20,timeLimitMultiplier:1.8},{name:"Standard",topicSecondsPerQuestion:20,unitSecondsPerQuestion:18,fullSecondsPerQuestion:15,timeLimitMultiplier:1.5},{name:"Hard",topicSecondsPerQuestion:15,unitSecondsPerQuestion:12,fullSecondsPerQuestion:10,timeLimitMultiplier:1.3}];function applyTargetPreset(e,i){const o=e.promptIds.length;let d=i.fullSecondsPerQuestion;e.scopeType==="topic"?d=i.topicSecondsPerQuestion:e.scopeType==="unit"&&(d=i.unitSecondsPerQuestion);const h=Math.round(o*d),g=Math.round(h*i.timeLimitMultiplier);return{grade9TargetSec:h,timeLimitSec:g}}function ContentOpsHome(){const e=useNavigate(),[i,o]=reactExports.useState(!0),[d,h]=reactExports.useState([]),[g,b]=reactExports.useState([]),[j,_]=reactExports.useState([]),[$,_e]=reactExports.useState([]),[et,tt]=reactExports.useState([]),[rt,nt]=reactExports.useState([]),[it,st]=reactExports.useState("all"),[at,ot]=reactExports.useState("health");reactExports.useEffect(()=>{lt()},[]),reactExports.useEffect(()=>{d.length>0&&ct()},[d,g,j,$,et]);const lt=async()=>{try{o(!0);const[xt,ft]=await Promise.all([db.getSubjects(),db.getAllPrompts()]);h(xt),_e(ft);const gt=xt.map(kt=>db.getUnits(kt.id)),pt=xt.map(kt=>db.getTopics(kt.id)),yt=xt.map(kt=>db.getQuizzesBySubject(kt.id)),[bt,St,wt]=await Promise.all([Promise.all(gt),Promise.all(pt),Promise.all(yt)]);b(bt.flat()),_(St.flat()),tt(wt.flat())}catch(xt){console.error("Failed to load data:",xt)}finally{o(!1)}},ct=()=>{const xt=d.map(ft=>{const gt=g.filter(St=>St.subjectId===ft.id),pt=j.filter(St=>St.subjectId===ft.id),yt=$.filter(St=>St.subjectId===ft.id),bt=et.filter(St=>St.subjectId===ft.id);return calculateSubjectHealth(ft,gt,pt,yt,bt)});nt(xt)},ut={totalSubjects:d.length,totalPrompts:$.length,totalQuizzes:et.length,coverageHealthPct:rt.length>0?Math.round(rt.filter(xt=>xt.coverageStatus==="good").length/rt.length*100):0,missingQuizzes:rt.reduce((xt,ft)=>xt+ft.missingQuizCount,0),targetsSetPct:et.length>0?Math.round(et.filter(xt=>xt.grade9TargetSec>0&&xt.timeLimitSec>0).length/et.length*100):0},dt=rt.filter(xt=>it==="all"?!0:xt.coverageStatus===it).sort((xt,ft)=>{if(at==="health"){const gt={error:0,warning:1,good:2};return gt[xt.coverageStatus]-gt[ft.coverageStatus]}else return at==="prompts"?ft.promptCount-xt.promptCount:ft.missingQuizCount-xt.missingQuizCount}),mt=({status:xt})=>xt==="good"?jsxRuntimeExports.jsx(CheckCircle,{size:18,className:"text-green-500"}):xt==="warning"?jsxRuntimeExports.jsx(AlertTriangle,{size:18,className:"text-yellow-500"}):jsxRuntimeExports.jsx(AlertCircle,{size:18,className:"text-red-500"});return i?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-96",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Content Operations"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Scale and maintain your quiz library with confidence"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>e("/admin/ops/import-log"),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors",children:[jsxRuntimeExports.jsx(FileText,{size:18}),jsxRuntimeExports.jsx("span",{children:"Import Log"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx(Database,{size:20,className:"text-blue-500"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Subjects"})]}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ut.totalSubjects})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx(FileText,{size:20,className:"text-green-500"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Prompts"})]}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ut.totalPrompts})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx(TrendingUp,{size:20,className:"text-purple-500"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Quizzes"})]}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ut.totalQuizzes})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx(CheckCircle,{size:20,className:"text-green-500"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Coverage Health"})]}),jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[ut.coverageHealthPct,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx(AlertCircle,{size:20,className:"text-red-500"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Missing"})]}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ut.missingQuizzes})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx(Target,{size:20,className:"text-orange-500"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Targets Set"})]}),jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[ut.targetsSetPct,"%"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Subject Health"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("select",{value:it,onChange:xt=>st(xt.target.value),className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All Status"}),jsxRuntimeExports.jsx("option",{value:"good",children:"Good"}),jsxRuntimeExports.jsx("option",{value:"warning",children:"Warning"}),jsxRuntimeExports.jsx("option",{value:"error",children:"Error"})]}),jsxRuntimeExports.jsxs("select",{value:at,onChange:xt=>ot(xt.target.value),className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white",children:[jsxRuntimeExports.jsx("option",{value:"health",children:"Sort by Health"}),jsxRuntimeExports.jsx("option",{value:"prompts",children:"Sort by Prompts"}),jsxRuntimeExports.jsx("option",{value:"missing",children:"Sort by Missing"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("tr",{className:"text-left text-sm font-medium text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("th",{className:"pb-3 pr-4",children:"Subject"}),jsxRuntimeExports.jsx("th",{className:"pb-3 px-4",children:"Prompts"}),jsxRuntimeExports.jsx("th",{className:"pb-3 px-4",children:"Topics"}),jsxRuntimeExports.jsx("th",{className:"pb-3 px-4",children:"Units"}),jsxRuntimeExports.jsx("th",{className:"pb-3 px-4",children:"Required"}),jsxRuntimeExports.jsx("th",{className:"pb-3 px-4",children:"Existing"}),jsxRuntimeExports.jsx("th",{className:"pb-3 px-4",children:"Missing"}),jsxRuntimeExports.jsx("th",{className:"pb-3 px-4",children:"Coverage"}),jsxRuntimeExports.jsx("th",{className:"pb-3 px-4",children:"Targets"}),jsxRuntimeExports.jsx("th",{className:"pb-3 pl-4",children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:dt.map(xt=>jsxRuntimeExports.jsxs("tr",{className:"text-sm text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[jsxRuntimeExports.jsx("td",{className:"py-4 pr-4",children:jsxRuntimeExports.jsx("button",{onClick:()=>e(`/admin/ops/subjects/${xt.subject.id}`),className:"font-medium text-red-600 dark:text-red-400 hover:underline text-left",children:xt.subject.name})}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:xt.promptCount}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:xt.topicCount}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:xt.unitCount}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:xt.requiredQuizCount}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:xt.existingQuizCount}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:jsxRuntimeExports.jsx("span",{className:xt.missingQuizCount>0?"text-red-600 dark:text-red-400 font-semibold":"",children:xt.missingQuizCount})}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsx(mt,{status:xt.coverageStatus})})}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsx(mt,{status:xt.targetStatus})})}),jsxRuntimeExports.jsx("td",{className:"py-4 pl-4",children:jsxRuntimeExports.jsx("button",{onClick:()=>e(`/admin/ops/subjects/${xt.subject.id}`),className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-medium transition-colors",children:"Audit"})})]},xt.subject.id))})]})}),dt.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No subjects match the current filter"})]})]})}function SubjectSummary({subject:e,units:i,topics:o,prompts:d,quizzes:h,onCreateMissing:g,onFixAllCoverage:b,onBatchSetTargets:j}){const _=h.some(tt=>tt.scopeType==="full"),$=h.filter(tt=>tt.scopeType==="unit").length,_e=h.filter(tt=>tt.scopeType==="topic").length,et=({exists:tt,label:rt})=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[tt?jsxRuntimeExports.jsx(CheckCircle,{size:16,className:"text-green-500"}):jsxRuntimeExports.jsx(XCircle,{size:16,className:"text-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:rt})]});return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl",children:e.icon}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.examBoard})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:d.length}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"prompts"})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:i.length}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"units"})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:o.length}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"topics"})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:h.length}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"quizzes"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm font-medium transition-colors",children:[jsxRuntimeExports.jsx(Wrench,{size:16}),jsxRuntimeExports.jsx("span",{children:"Create Missing"})]}),jsxRuntimeExports.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors",children:[jsxRuntimeExports.jsx(RefreshCw,{size:16}),jsxRuntimeExports.jsx("span",{children:"Fix Coverage"})]}),jsxRuntimeExports.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-medium transition-colors",children:[jsxRuntimeExports.jsx(Target,{size:16}),jsxRuntimeExports.jsx("span",{children:"Set Targets"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Hierarchy Compliance"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[jsxRuntimeExports.jsx(et,{exists:_,label:`Full GCSE Quiz ${_?"exists":"missing"}`}),jsxRuntimeExports.jsx(et,{exists:$===i.length,label:`Unit Quizzes: ${$}/${i.length}`}),jsxRuntimeExports.jsx(et,{exists:_e===o.length,label:`Topic Quizzes: ${_e}/${o.length}`})]})]})]})}function HierarchyMatrix({units:e,topics:i,prompts:o,quizzes:d,subjectPromptCount:h}){const g=d.some(b=>b.scopeType==="full");return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Hierarchy Matrix"}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full border-collapse",children:[jsxRuntimeExports.jsxs("thead",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"border border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Full GCSE"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs font-normal text-gray-600 dark:text-gray-400",children:[h," prompts"]}),g?jsxRuntimeExports.jsx(CheckCircle,{size:16,className:"text-green-500"}):jsxRuntimeExports.jsx(XCircle,{size:16,className:"text-red-500"})]})]})}),e.map(b=>{const j=i.filter(_=>_.unitId===b.id);return jsxRuntimeExports.jsx("th",{colSpan:j.length||1,className:"border border-gray-300 dark:border-gray-600 bg-blue-50 dark:bg-blue-900/20 px-4 py-3 text-center text-sm font-semibold text-gray-900 dark:text-white",children:b.name},b.id)})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 px-4 py-2 text-left text-xs font-medium text-gray-600 dark:text-gray-400",children:"Unit Level"}),e.map(b=>{const j=i.filter(_e=>_e.unitId===b.id),_=o.filter(_e=>_e.unitId===b.id),$=d.some(_e=>_e.unitId===b.id&&_e.scopeType==="unit");return jsxRuntimeExports.jsx("td",{colSpan:j.length||1,className:"border border-gray-300 dark:border-gray-600 bg-blue-50 dark:bg-blue-900/20 px-4 py-2 text-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:[_.length," prompts"]}),$?jsxRuntimeExports.jsx(CheckCircle,{size:14,className:"text-green-500"}):jsxRuntimeExports.jsx(XCircle,{size:14,className:"text-red-500"})]})},b.id)})]})]}),jsxRuntimeExports.jsx("tbody",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 px-4 py-2 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Topics"}),e.map(b=>{const j=i.filter(_=>_.unitId===b.id);return j.length===0?jsxRuntimeExports.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 text-center text-xs text-gray-500 dark:text-gray-400",children:"No topics"},b.id):j.map(_=>{const $=o.filter(et=>et.topicId===_.id),_e=d.some(et=>et.topicId===_.id&&et.scopeType==="topic");return jsxRuntimeExports.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-center",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.name}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[$.length," prompts"]}),_e?jsxRuntimeExports.jsx(CheckCircle,{size:16,className:"text-green-500"}):jsxRuntimeExports.jsx(XCircle,{size:16,className:"text-red-500"})]})},_.id)})})]})})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-center gap-4 text-xs text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(CheckCircle,{size:14,className:"text-green-500"}),jsxRuntimeExports.jsx("span",{children:"Quiz exists"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(XCircle,{size:14,className:"text-red-500"}),jsxRuntimeExports.jsx("span",{children:"Quiz missing"})]})]})]})}function RequiredQuizzesChecklist({requirements:e,prompts:i,onViewQuiz:o,onSyncCoverage:d,onEditTargets:h,onCreateQuiz:g}){const b=e.filter(et=>et.type==="full"),j=e.filter(et=>et.type==="unit"),_=e.filter(et=>et.type==="topic"),$=({status:et})=>et==="valid"?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg text-xs font-medium",children:[jsxRuntimeExports.jsx(CheckCircle,{size:14}),"Valid"]}):et==="invalid"?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded-lg text-xs font-medium",children:[jsxRuntimeExports.jsx(AlertTriangle,{size:14}),"Invalid"]}):jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg text-xs font-medium",children:[jsxRuntimeExports.jsx(XCircle,{size:14}),"Missing"]}),_e=({req:et})=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:et.name}),jsxRuntimeExports.jsx($,{status:et.coverageStatus||"missing"})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:et.quiz?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Expected: ",et.expectedPromptCount," | Actual: ",et.quiz.promptIds.length,et.quiz.grade9TargetSec>0?jsxRuntimeExports.jsxs("span",{className:"ml-3",children:["Target: ",et.quiz.grade9TargetSec,"s"]}):jsxRuntimeExports.jsx("span",{className:"ml-3 text-yellow-600 dark:text-yellow-400",children:"No target set"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Expected: ",et.expectedPromptCount," prompts"]})})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:et.quiz?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:()=>o(et.quiz),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-medium transition-colors",children:[jsxRuntimeExports.jsx(Eye,{size:14}),"View"]}),et.coverageStatus==="invalid"&&jsxRuntimeExports.jsxs("button",{onClick:()=>d(et.quiz),className:"flex items-center gap-1.5 px-3 py-1.5 bg-green-500 hover:bg-green-600 text-white rounded-lg text-xs font-medium transition-colors",children:[jsxRuntimeExports.jsx(RefreshCw,{size:14}),"Sync"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>h(et.quiz),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-xs font-medium transition-colors",children:[jsxRuntimeExports.jsx(Target,{size:14}),"Targets"]})]}):jsxRuntimeExports.jsxs("button",{onClick:g,className:"flex items-center gap-1.5 px-3 py-1.5 bg-green-500 hover:bg-green-600 text-white rounded-lg text-xs font-medium transition-colors",children:[jsxRuntimeExports.jsx(Plus,{size:14}),"Create"]})})]});return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Required Quizzes"}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Full GCSE Quiz"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:b.map(et=>jsxRuntimeExports.jsx(_e,{req:et},et.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:["Unit Quizzes (",j.filter(et=>et.quiz).length,"/",j.length,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:j.map(et=>jsxRuntimeExports.jsx(_e,{req:et},et.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:["Topic Quizzes (",_.filter(et=>et.quiz).length,"/",_.length,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:_.map(et=>jsxRuntimeExports.jsx(_e,{req:et},et.id))})]})]})]})}function CoverageAuditDrawer({quiz:e,prompts:i,onClose:o,onSync:d}){const h=getExpectedPromptsForQuiz(e,i),g=validateCoverage(e,h,i);return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-end",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-2xl h-full overflow-y-auto shadow-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Coverage Audit"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.title})]}),jsxRuntimeExports.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{size:20,className:"text-gray-600 dark:text-gray-400"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[g.isValid?jsxRuntimeExports.jsx(CheckCircle,{size:24,className:"text-green-500"}):jsxRuntimeExports.jsx(AlertCircle,{size:24,className:"text-yellow-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:g.isValid?"Coverage is Valid":"Coverage Mismatch Detected"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.isValid?"This quiz correctly includes all prompts in its scope":"This quiz has missing or extra prompts"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Expected Prompts:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 font-semibold text-gray-900 dark:text-white",children:g.expectedPromptIds.length})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Actual Prompts:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 font-semibold text-gray-900 dark:text-white",children:g.actualPromptIds.length})]}),g.missingPrompts.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Missing:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 font-semibold text-red-600 dark:text-red-400",children:g.missingPrompts.length})]}),g.extraPrompts.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Extra:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 font-semibold text-yellow-600 dark:text-yellow-400",children:g.extraPrompts.length})]})]}),!g.isValid&&jsxRuntimeExports.jsxs("button",{onClick:d,className:"mt-4 w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors",children:[jsxRuntimeExports.jsx(RefreshCw,{size:16}),"Sync Coverage Now"]})]}),g.missingPrompts.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["Missing Prompts (",g.missingPrompts.length,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:g.missingPrompts.map(b=>jsxRuntimeExports.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(AlertCircle,{size:18,className:"text-red-500 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-red-600 dark:text-red-400 mb-1 uppercase",children:b.type}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-900 dark:text-white break-words",children:b.question})]})]})},b.id))})]}),g.extraPrompts.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["Extra Prompts (",g.extraPrompts.length,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:g.extraPrompts.map(b=>jsxRuntimeExports.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(AlertCircle,{size:18,className:"text-yellow-500 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-yellow-600 dark:text-yellow-400 mb-1 uppercase",children:b.type}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-900 dark:text-white break-words",children:b.question})]})]})},b.id))})]}),g.isValid&&jsxRuntimeExports.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 text-center",children:[jsxRuntimeExports.jsx(CheckCircle,{size:48,className:"text-green-500 mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"All prompts are correctly included"})]})]})]})})}function TargetTimeEditor({quiz:e,quizzes:i,onClose:o,onSave:d}){var ot,lt;const h=e===null,[g,b]=reactExports.useState(TARGET_PRESETS[1].name),[j,_]=reactExports.useState({}),[$,_e]=reactExports.useState(!1),[et,tt]=reactExports.useState(!1),rt=()=>{const ct=TARGET_PRESETS.find(mt=>mt.name===g);if(!ct)return;const ut={};(h?i:[e]).forEach(mt=>{const xt=applyTargetPreset(mt,ct);ut[mt.id]=xt}),_(ut),_e(!0)},nt=async()=>{try{tt(!0);const ct=Object.entries(j);for(const[ut,dt]of ct)await db.updateQuiz(ut,dt);d()}catch(ct){console.error("Failed to save targets:",ct)}finally{tt(!1)}},it=(ct,ut)=>{var dt,mt;e&&_({[e.id]:{grade9TargetSec:ct==="grade9TargetSec"?ut:((dt=j[e.id])==null?void 0:dt.grade9TargetSec)||e.grade9TargetSec,timeLimitSec:ct==="timeLimitSec"?ut:((mt=j[e.id])==null?void 0:mt.timeLimitSec)||e.timeLimitSec}})},st=ct=>{const ut=j[ct.id];return ut?ut.grade9TargetSec/ct.promptIds.length:calculateTargetRatio(ct)},at=ct=>ct>=5&&ct<=60;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h?"Batch Set Targets":"Edit Quiz Targets"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:h?`Setting targets for ${i.length} quizzes`:e==null?void 0:e.title})]}),jsxRuntimeExports.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{size:20,className:"text-gray-600 dark:text-gray-400"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[h&&jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Apply Preset"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-3 mb-4",children:TARGET_PRESETS.map(ct=>jsxRuntimeExports.jsxs("button",{onClick:()=>b(ct.name),className:`p-4 rounded-lg border-2 transition-all ${g===ct.name?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:ct.name}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[jsxRuntimeExports.jsxs("div",{children:["Topic: ",ct.topicSecondsPerQuestion,"s/q"]}),jsxRuntimeExports.jsxs("div",{children:["Unit: ",ct.unitSecondsPerQuestion,"s/q"]}),jsxRuntimeExports.jsxs("div",{children:["Full: ",ct.fullSecondsPerQuestion,"s/q"]})]})]},ct.name))}),jsxRuntimeExports.jsxs("button",{onClick:rt,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold transition-colors",children:[jsxRuntimeExports.jsx(Zap,{size:18}),"Apply Preset"]})]}),!h&&e&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Grade 9 Target (seconds)"}),jsxRuntimeExports.jsx("input",{type:"number",value:((ot=j[e.id])==null?void 0:ot.grade9TargetSec)||e.grade9TargetSec,onChange:ct=>it("grade9TargetSec",parseInt(ct.target.value)),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time Limit (seconds)"}),jsxRuntimeExports.jsx("input",{type:"number",value:((lt=j[e.id])==null?void 0:lt.timeLimitSec)||e.timeLimitSec,onChange:ct=>it("timeLimitSec",parseInt(ct.target.value)),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Target Ratio"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[st(e).toFixed(1),"s per question"]}),at(st(e))?jsxRuntimeExports.jsx(CheckCircle,{size:20,className:"text-green-500"}):jsxRuntimeExports.jsx(AlertTriangle,{size:20,className:"text-yellow-500"})]}),!at(st(e))&&jsxRuntimeExports.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-2",children:"Recommended ratio: 5-60 seconds per question"})]})]}),$&&h&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:["Preview Changes (",Object.keys(j).length," quizzes)"]}),jsxRuntimeExports.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:i.filter(ct=>j[ct.id]).map(ct=>{const ut=j[ct.id],dt=ut.grade9TargetSec/ct.promptIds.length;return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:ct.title}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[ct.promptIds.length," prompts"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Target: ",ut.grade9TargetSec,"s | Limit: ",ut.timeLimitSec,"s"]}),at(dt)?jsxRuntimeExports.jsx(CheckCircle,{size:16,className:"text-green-500"}):jsxRuntimeExports.jsx(AlertTriangle,{size:16,className:"text-yellow-500"})]})]},ct.id)})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("button",{onClick:nt,disabled:et||Object.keys(j).length===0,className:"flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-colors",children:et?"Saving...":"Save Targets"}),jsxRuntimeExports.jsx("button",{onClick:o,className:"flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-xl font-semibold transition-colors",children:"Cancel"})]})]})]})})}function SubjectOpsDetail(){const{subjectId:e}=useParams(),i=useNavigate(),{showToast:o}=useToast(),{confirm:d}=useConfirm(),[h,g]=reactExports.useState(!0),[b,j]=reactExports.useState(null),[_,$]=reactExports.useState([]),[_e,et]=reactExports.useState([]),[tt,rt]=reactExports.useState([]),[nt,it]=reactExports.useState([]),[st,at]=reactExports.useState(null),[ot,lt]=reactExports.useState(!1),[ct,ut]=reactExports.useState(!1);reactExports.useEffect(()=>{e&&dt()},[e]);const dt=async()=>{if(e)try{g(!0);const[pt,yt,bt,St,wt]=await Promise.all([db.getSubject(e),db.getUnits(e),db.getTopics(e),db.getPromptsBySubject(e),db.getQuizzesBySubject(e)]);j(pt||null),$(yt),et(bt),rt(St),it(wt)}catch(pt){console.error("Failed to load subject data:",pt),o("Failed to load subject data","error")}finally{g(!1)}},mt=async()=>{if(!(!b||!await d("Create missing quizzes for all topics, units, and full subject?")))try{const pt={topic:0,unit:0,full:0};if(!nt.some(bt=>bt.scopeType==="full")){const bt=tt.map(St=>St.id);await db.createQuiz({subjectId:b.id,scopeType:"full",topicId:null,unitId:null,title:generateQuizTitle("full",b.name),description:`Complete GCSE ${b.name} coverage`,timeLimitSec:bt.length*20,grade9TargetSec:bt.length*15,promptIds:bt}),pt.full=1}for(const bt of _)if(!nt.some(wt=>wt.unitId===bt.id&&wt.scopeType==="unit")){const wt=tt.filter(kt=>kt.unitId===bt.id);await db.createQuiz({subjectId:b.id,scopeType:"unit",topicId:null,unitId:bt.id,title:generateQuizTitle("unit",bt.name),description:`Complete ${bt.name} unit coverage`,timeLimitSec:wt.length*20,grade9TargetSec:wt.length*15,promptIds:wt.map(kt=>kt.id)}),pt.unit++}for(const bt of _e)if(!nt.some(wt=>wt.topicId===bt.id&&wt.scopeType==="topic")){const wt=tt.filter(kt=>kt.topicId===bt.id);await db.createQuiz({subjectId:b.id,scopeType:"topic",topicId:bt.id,unitId:bt.unitId,title:generateQuizTitle("topic",bt.name),description:`Complete ${bt.name} topic coverage`,timeLimitSec:wt.length*20,grade9TargetSec:wt.length*15,promptIds:wt.map(kt=>kt.id)}),pt.topic++}o(`Created ${pt.topic} topic, ${pt.unit} unit, and ${pt.full} full quiz(zes)`,"success"),await dt()}catch(pt){console.error("Failed to create quizzes:",pt),o("Failed to create quizzes","error")}},xt=async()=>{if(!(!b||!await d("Sync all quiz coverage to match their scope hierarchy?")))try{let pt=0;for(const yt of nt){const bt=getExpectedPromptsForQuiz(yt,tt);validateCoverage(yt,bt,tt).isValid||(await db.updateQuiz(yt.id,{promptIds:bt}),pt++)}o(`Fixed coverage for ${pt} quiz(zes)`,"success"),await dt()}catch(pt){console.error("Failed to fix coverage:",pt),o("Failed to fix coverage","error")}},ft=async pt=>{try{const yt=getExpectedPromptsForQuiz(pt,tt);await db.updateQuiz(pt.id,{promptIds:yt}),o("Coverage synced successfully","success"),await dt()}catch(yt){console.error("Failed to sync coverage:",yt),o("Failed to sync coverage","error")}},gt=[{type:"full",id:(b==null?void 0:b.id)||"",name:(b==null?void 0:b.name)||"",expectedPromptCount:tt.length,quiz:nt.find(pt=>pt.scopeType==="full")},..._.map(pt=>({type:"unit",id:pt.id,name:pt.name,expectedPromptCount:tt.filter(yt=>yt.unitId===pt.id).length,quiz:nt.find(yt=>yt.unitId===pt.id&&yt.scopeType==="unit")})),..._e.map(pt=>({type:"topic",id:pt.id,name:pt.name,expectedPromptCount:tt.filter(yt=>yt.topicId===pt.id).length,quiz:nt.find(yt=>yt.topicId===pt.id&&yt.scopeType==="topic")}))];return gt.forEach(pt=>{if(pt.quiz){const yt=getExpectedPromptsForQuiz(pt.quiz,tt),bt=validateCoverage(pt.quiz,yt,tt);pt.coverageStatus=bt.isValid?"valid":"invalid"}else pt.coverageStatus="missing"}),h?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-96",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}):b?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>i("/admin/ops"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(ArrowLeft,{size:20,className:"text-gray-600 dark:text-gray-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[b.name," Operations"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Content coverage and target tuning control room"})]})]}),jsxRuntimeExports.jsx(SubjectSummary,{subject:b,units:_,topics:_e,prompts:tt,quizzes:nt,onCreateMissing:mt,onFixAllCoverage:xt,onBatchSetTargets:()=>ut(!0)}),jsxRuntimeExports.jsx(HierarchyMatrix,{units:_,topics:_e,prompts:tt,quizzes:nt,subjectPromptCount:tt.length}),jsxRuntimeExports.jsx(RequiredQuizzesChecklist,{requirements:gt,prompts:tt,onViewQuiz:pt=>{at(pt),lt(!0)},onSyncCoverage:ft,onEditTargets:pt=>{at(pt),ut(!0)},onCreateQuiz:mt}),ot&&st&&jsxRuntimeExports.jsx(CoverageAuditDrawer,{quiz:st,prompts:tt,onClose:()=>{lt(!1),at(null)},onSync:async()=>{st&&(await ft(st),lt(!1),at(null))}}),ct&&jsxRuntimeExports.jsx(TargetTimeEditor,{quiz:st,quizzes:st?[st]:nt,onClose:()=>{ut(!1),at(null)},onSave:async()=>{await dt(),ut(!1),at(null),o("Targets updated successfully","success")}})]}):jsxRuntimeExports.jsx("div",{className:"text-center py-12",children:jsxRuntimeExports.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Subject not found"})})}function computeTopicCoverage(e,i,o,d,h){const g=o.filter(tt=>tt.topicId===e.id),b=new Map;g.forEach(tt=>{const rt=d.filter(nt=>{var it,st;return((it=nt.meta)==null?void 0:it.questionTypeId)===tt.id||((st=nt.meta)==null?void 0:st.typeId)===tt.typeId}).length;b.set(tt.id,rt)});const j=Array.from(b.values()).filter(tt=>tt>=h.minPromptsPerQuestionType).length,_=Array.from(b.values()).reduce((tt,rt)=>tt+rt,0),$=g.filter(tt=>(b.get(tt.id)||0)<h.minPromptsPerQuestionType).map(tt=>({questionTypeId:tt.id,typeId:tt.typeId,title:tt.title,unitId:i.id,unitName:i.name,topicId:e.id,topicName:e.name,paperId:tt.paperId,paperNumber:void 0,currentPromptsCount:b.get(tt.id)||0,requiredPromptsCount:h.minPromptsPerQuestionType,deficit:h.minPromptsPerQuestionType-(b.get(tt.id)||0)})),_e=g.length>0?j/g.length*100:0;let et="ok";return _e<50?et="missing":_e<80&&(et="warning"),{topicId:e.id,topicName:e.name,unitId:i.id,unitName:i.name,requiredQuestionTypesCount:g.length,populatedQuestionTypesCount:j,promptsCount:_,coveragePercentage:_e,status:et,missingTypes:$}}function computeUnitCoverage(e,i,o,d,h){const g=i.map(_e=>computeTopicCoverage(_e,e,o,d,h)),b=g.filter(_e=>_e.status==="ok").length,j=g.length>0?g.reduce((_e,et)=>_e+et.coveragePercentage,0)/g.length:0,_=g.reduce((_e,et)=>_e+et.promptsCount,0);let $="ok";return j<50?$="missing":j<80&&($="warning"),{unitId:e.id,unitName:e.name,topicsCount:i.length,topicsCoveredCount:b,averageCoveragePercentage:j,promptsCount:_,status:$,topics:g}}function computePaperCoverage(e,i,o,d,h,g){const b=d.filter(nt=>!nt.paperId||nt.paperId===e.id),j=o.filter(nt=>b.some(it=>it.topicId===nt.id)),_=i.filter(nt=>j.some(it=>it.unitId===nt.id)),$=_.map(nt=>{const it=j.filter(st=>st.unitId===nt.id);return computeUnitCoverage(nt,it,b,h,g)}),_e=$.filter(nt=>nt.status==="ok").length,et=$.length>0?$.reduce((nt,it)=>nt+it.averageCoveragePercentage,0)/$.length:0,tt=$.reduce((nt,it)=>nt+it.promptsCount,0);let rt="ok";return et<50?rt="missing":et<80&&(rt="warning"),{paperId:e.id,paperNumber:e.paperNumber,paperName:e.name,unitsCount:_.length,unitsCoveredCount:_e,averageCoveragePercentage:et,promptsCount:tt,status:rt,units:$}}function listMissingQuestionTypes(e,i,o,d,h,g){const b=[];return e.forEach(j=>{computePaperCoverage(j,i,o,d,h,g).units.forEach($=>{$.topics.forEach(_e=>{b.push(..._e.missingTypes)})})}),b}function computeSubjectCoverageSummary(e,i,o,d,h,g,b,j){const _=o.map(et=>computePaperCoverage(et,d,h,g,b,j)),$=listMissingQuestionTypes(o,d,h,g,b,j),_e=b.filter(et=>et.subjectId===e).length;return{subjectId:e,subjectName:i,papersCount:o.length,unitsCount:d.length,topicsCount:h.length,questionTypesCount:g.length,totalPromptsCount:_e,missingQuestionTypesCount:$.length,papers:_,settings:j}}function isTaxonomyMissing(e){return e.length===0}const MATHS_TAXONOMY={subject:{name:"Maths",examBoard:"Edexcel",description:"GCSE Mathematics",icon:"",themeColor:"#3B82F6"},papers:[{paperNumber:1,name:"Paper 1 (Non-Calculator)",calculatorAllowedDefault:!1},{paperNumber:2,name:"Paper 2 (Calculator)",calculatorAllowedDefault:!0},{paperNumber:3,name:"Paper 3 (Calculator)",calculatorAllowedDefault:!0}],units:[{name:"Number",orderIndex:1,topics:[{name:"Integers and Decimals",orderIndex:1,questionTypes:[{typeId:"num_int_add_sub",title:"Integer Addition & Subtraction",tags:["basic","p1","p2","p3"]},{typeId:"num_int_mult_div",title:"Integer Multiplication & Division",tags:["basic","p1","p2","p3"]},{typeId:"num_dec_operations",title:"Decimal Operations",tags:["basic","p1","p2","p3"]},{typeId:"num_order_compare",title:"Ordering & Comparing Numbers",tags:["basic","p1","p2","p3"]}]},{name:"Fractions",orderIndex:2,questionTypes:[{typeId:"num_frac_simplify",title:"Simplifying Fractions",tags:["basic","p1","p2","p3"]},{typeId:"num_frac_add_sub",title:"Adding & Subtracting Fractions",tags:["intermediate","p1","p2","p3"]},{typeId:"num_frac_mult_div",title:"Multiplying & Dividing Fractions",tags:["intermediate","p1","p2","p3"]},{typeId:"num_frac_decimal_percent",title:"Fractions, Decimals & Percentages",tags:["intermediate","p2","p3"]}]},{name:"Percentages",orderIndex:3,questionTypes:[{typeId:"num_percent_calc",title:"Percentage Calculations",tags:["basic","p1","p2","p3"]},{typeId:"num_percent_change",title:"Percentage Change",tags:["intermediate","p2","p3"]},{typeId:"num_percent_compound",title:"Compound Interest",tags:["advanced","p2","p3"]}]},{name:"Powers and Roots",orderIndex:4,questionTypes:[{typeId:"num_powers_basic",title:"Powers & Indices",tags:["basic","p1","p2","p3"]},{typeId:"num_roots",title:"Square Roots & Cube Roots",tags:["basic","p1","p2","p3"]},{typeId:"num_surds",title:"Surds",tags:["advanced","p1","p2","p3"]}]},{name:"Standard Form",orderIndex:5,questionTypes:[{typeId:"num_std_form_convert",title:"Converting to Standard Form",tags:["intermediate","p2","p3"]},{typeId:"num_std_form_calc",title:"Calculations with Standard Form",tags:["intermediate","p2","p3"]}]}]},{name:"Algebra",orderIndex:2,topics:[{name:"Expressions and Equations",orderIndex:1,questionTypes:[{typeId:"alg_expr_simplify",title:"Simplifying Expressions",tags:["basic","p1","p2","p3"]},{typeId:"alg_expr_expand",title:"Expanding Brackets",tags:["intermediate","p1","p2","p3"]},{typeId:"alg_expr_factor",title:"Factorising",tags:["intermediate","p1","p2","p3"]},{typeId:"alg_eq_linear",title:"Linear Equations",tags:["basic","p1","p2","p3"]},{typeId:"alg_eq_quadratic",title:"Quadratic Equations",tags:["advanced","p1","p2","p3"]}]},{name:"Sequences",orderIndex:2,questionTypes:[{typeId:"alg_seq_arithmetic",title:"Arithmetic Sequences",tags:["intermediate","p1","p2","p3"]},{typeId:"alg_seq_geometric",title:"Geometric Sequences",tags:["advanced","p2","p3"]},{typeId:"alg_seq_nth_term",title:"nth Term Formula",tags:["intermediate","p1","p2","p3"]}]},{name:"Inequalities",orderIndex:3,questionTypes:[{typeId:"alg_ineq_linear",title:"Linear Inequalities",tags:["intermediate","p1","p2","p3"]},{typeId:"alg_ineq_graphical",title:"Graphical Inequalities",tags:["intermediate","p2","p3"]}]},{name:"Graphs",orderIndex:4,questionTypes:[{typeId:"alg_graph_linear",title:"Linear Graphs",tags:["basic","p1","p2","p3"]},{typeId:"alg_graph_quadratic",title:"Quadratic Graphs",tags:["intermediate","p1","p2","p3"]},{typeId:"alg_graph_cubic",title:"Cubic & Reciprocal Graphs",tags:["advanced","p2","p3"]},{typeId:"alg_graph_exponential",title:"Exponential Graphs",tags:["advanced","p2","p3"]}]},{name:"Functions",orderIndex:5,questionTypes:[{typeId:"alg_func_notation",title:"Function Notation",tags:["intermediate","p2","p3"]},{typeId:"alg_func_composition",title:"Function Composition",tags:["advanced","p2","p3"]},{typeId:"alg_func_inverse",title:"Inverse Functions",tags:["advanced","p2","p3"]}]}]},{name:"Geometry",orderIndex:3,topics:[{name:"Angles and Lines",orderIndex:1,questionTypes:[{typeId:"geo_angles_basic",title:"Angle Properties",tags:["basic","p1","p2","p3"]},{typeId:"geo_angles_parallel",title:"Parallel Lines & Angles",tags:["basic","p1","p2","p3"]},{typeId:"geo_angles_triangle",title:"Triangle Angle Properties",tags:["basic","p1","p2","p3"]},{typeId:"geo_angles_polygon",title:"Polygon Angles",tags:["intermediate","p1","p2","p3"]}]},{name:"Triangles and Congruence",orderIndex:2,questionTypes:[{typeId:"geo_tri_pythagoras",title:"Pythagoras Theorem",tags:["intermediate","p1","p2","p3"]},{typeId:"geo_tri_trigonometry",title:"Trigonometry (SOHCAHTOA)",tags:["intermediate","p1","p2","p3"]},{typeId:"geo_tri_congruence",title:"Congruent Triangles",tags:["intermediate","p1","p2","p3"]},{typeId:"geo_tri_similarity",title:"Similar Triangles",tags:["advanced","p1","p2","p3"]}]},{name:"Circles",orderIndex:3,questionTypes:[{typeId:"geo_circle_properties",title:"Circle Properties",tags:["intermediate","p1","p2","p3"]},{typeId:"geo_circle_area",title:"Circle Area & Circumference",tags:["basic","p1","p2","p3"]},{typeId:"geo_circle_sector",title:"Sectors & Segments",tags:["intermediate","p2","p3"]},{typeId:"geo_circle_theorems",title:"Circle Theorems",tags:["advanced","p2","p3"]}]},{name:"Transformations",orderIndex:4,questionTypes:[{typeId:"geo_trans_reflection",title:"Reflection",tags:["basic","p1","p2","p3"]},{typeId:"geo_trans_rotation",title:"Rotation",tags:["basic","p1","p2","p3"]},{typeId:"geo_trans_translation",title:"Translation",tags:["basic","p1","p2","p3"]},{typeId:"geo_trans_enlargement",title:"Enlargement",tags:["intermediate","p1","p2","p3"]}]},{name:"Vectors",orderIndex:5,questionTypes:[{typeId:"geo_vec_notation",title:"Vector Notation",tags:["intermediate","p2","p3"]},{typeId:"geo_vec_operations",title:"Vector Operations",tags:["intermediate","p2","p3"]},{typeId:"geo_vec_geometry",title:"Vectors in Geometry",tags:["advanced","p2","p3"]}]}]},{name:"Statistics & Probability",orderIndex:4,topics:[{name:"Data Representation",orderIndex:1,questionTypes:[{typeId:"stat_data_tables",title:"Frequency Tables",tags:["basic","p1","p2","p3"]},{typeId:"stat_data_charts",title:"Charts & Graphs",tags:["basic","p1","p2","p3"]},{typeId:"stat_data_histograms",title:"Histograms",tags:["intermediate","p2","p3"]},{typeId:"stat_data_scatter",title:"Scatter Diagrams",tags:["intermediate","p2","p3"]}]},{name:"Averages and Spread",orderIndex:2,questionTypes:[{typeId:"stat_avg_mean",title:"Mean, Median, Mode",tags:["basic","p1","p2","p3"]},{typeId:"stat_avg_range",title:"Range & Quartiles",tags:["intermediate","p1","p2","p3"]},{typeId:"stat_avg_std_dev",title:"Standard Deviation",tags:["advanced","p2","p3"]}]},{name:"Probability",orderIndex:3,questionTypes:[{typeId:"prob_basic",title:"Basic Probability",tags:["basic","p1","p2","p3"]},{typeId:"prob_combined",title:"Combined Events",tags:["intermediate","p1","p2","p3"]},{typeId:"prob_conditional",title:"Conditional Probability",tags:["advanced","p2","p3"]},{typeId:"prob_tree_diagram",title:"Tree Diagrams",tags:["intermediate","p1","p2","p3"]}]}]}]};function CoveragePage({subjectId:e}){const[i,o]=reactExports.useState(null),[d,h]=reactExports.useState([]),[g,b]=reactExports.useState([]),[j,_]=reactExports.useState([]),[$,_e]=reactExports.useState([]),[et,tt]=reactExports.useState([]),[rt,nt]=reactExports.useState(null),[it,st]=reactExports.useState(null),[at,ot]=reactExports.useState(!1),[lt,ct]=reactExports.useState(new Set),[ut,dt]=reactExports.useState(new Set),[mt,xt]=reactExports.useState(!0),[ft,gt]=reactExports.useState(null),[pt,yt]=reactExports.useState(!1);reactExports.useEffect(()=>{bt()},[e]),reactExports.useEffect(()=>{if(i&&d.length>0&&rt){const Nt=computeSubjectCoverageSummary(i.id,i.name,d,g,j,$,et,rt);st(Nt)}},[i,d,g,j,$,et,rt]);async function bt(){try{xt(!0),gt(null);const Nt=await db.getSubjects(),zt=Nt.find(Ut=>Ut.name==="Maths")||Nt[0];if(!zt)throw new Error("No subject found");o(zt);const[Vt,Gt,Mt,Wt,Zt,Ct]=await Promise.all([db.getPapers(zt.id),db.getUnits(zt.id),db.getTopics(zt.id),db.getQuestionTypes(zt.id),db.getPromptsBySubject(zt.id),db.getCoverageSettings(zt.id)]);if(h(Vt),b(Gt),_(Mt),_e(Wt),tt(Zt),Ct)nt(Ct);else{const Ut=await db.createCoverageSettings({subjectId:zt.id,minPromptsPerQuestionType:10,minPromptsPerTopic:50,minPromptsPerUnit:200});nt(Ut)}}catch(Nt){gt(Nt instanceof Error?Nt.message:"Failed to load data"),console.error(Nt)}finally{xt(!1)}}async function St(){if(i)try{yt(!0),gt(null);const Nt=[];for(const Gt of MATHS_TAXONOMY.papers){const Mt=d.find(Wt=>Wt.paperNumber===Gt.paperNumber);if(Mt)Nt.push(Mt);else{const Wt=await db.createPaper({subjectId:i.id,paperNumber:Gt.paperNumber,name:Gt.name,calculatorAllowedDefault:Gt.calculatorAllowedDefault});Nt.push(Wt)}}const zt=[],Vt=[];for(const Gt of MATHS_TAXONOMY.units){const Mt=await db.createUnit({subjectId:i.id,name:Gt.name,orderIndex:Gt.orderIndex,description:`${Gt.name} unit for GCSE Maths`});zt.push(Mt);for(const Wt of Gt.topics){const Zt=await db.createTopic({subjectId:i.id,unitId:Mt.id,name:Wt.name,orderIndex:Wt.orderIndex,description:`${Wt.name} topic`});Vt.push(Zt);for(const Ct of Wt.questionTypes){const Ut=Nt.filter(Kt=>Ct.tags.includes(`p${Kt.paperNumber}`));if(Ut.length===Nt.length)await db.createQuestionType({subjectId:i.id,unitId:Mt.id,topicId:Zt.id,typeId:Ct.typeId,title:Ct.title,difficultyMin:1,difficultyMax:9,marksMin:1,marksMax:5,tags:Ct.tags});else for(const Kt of Ut)await db.createQuestionType({subjectId:i.id,paperId:Kt.id,unitId:Mt.id,topicId:Zt.id,typeId:`${Ct.typeId}_p${Kt.paperNumber}`,title:Ct.title,difficultyMin:1,difficultyMax:9,marksMin:1,marksMax:5,tags:Ct.tags})}}}await bt(),alert(" Maths taxonomy seeded successfully!")}catch(Nt){gt(Nt instanceof Error?Nt.message:"Failed to seed taxonomy"),console.error(Nt)}finally{yt(!1)}}const wt=Nt=>{const zt=new Set(lt);zt.has(Nt)?zt.delete(Nt):zt.add(Nt),ct(zt)},kt=Nt=>{const zt=new Set(ut);zt.has(Nt)?zt.delete(Nt):zt.add(Nt),dt(zt)},Et=Nt=>{switch(Nt){case"ok":return jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4 text-green-600"});case"warning":return jsxRuntimeExports.jsx(AlertTriangle,{className:"w-4 h-4 text-yellow-600"});case"missing":return jsxRuntimeExports.jsx(AlertCircle,{className:"w-4 h-4 text-red-600"})}},jt=Nt=>{switch(Nt){case"ok":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"missing":return"bg-red-50 border-red-200"}},Rt=Nt=>{switch(Nt){case"ok":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"missing":return"bg-red-100 text-red-800"}};if(mt)return jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-600",children:"Loading coverage data..."})]})});if(ft)return jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-red-800 font-semibold",children:"Error"}),jsxRuntimeExports.jsx("p",{className:"text-red-700",children:ft}),jsxRuntimeExports.jsx("button",{onClick:bt,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]})});if(!i||!it)return jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"No coverage data available"})});const At=isTaxonomyMissing($),Dt=listMissingQuestionTypes(d,g,j,$,et,rt);return jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[i.name," Coverage Dashboard"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mt-1",children:"Track content coverage across papers, units, and topics"})]}),At&&jsxRuntimeExports.jsxs("button",{onClick:St,disabled:pt,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4"}),pt?"Seeding...":"Seed Maths Taxonomy"]})]}),At&&jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex gap-3",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-yellow-800 font-semibold",children:" Taxonomy Missing"}),jsxRuntimeExports.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:'No question types defined yet. Click "Seed Maths Taxonomy" to load the default structure.'})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:it.papers.map(Nt=>jsxRuntimeExports.jsxs("div",{className:`rounded-lg border p-4 ${jt(Nt.status)}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-gray-600"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:Nt.paperName})]}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${Rt(Nt.status)}`,children:Nt.status.toUpperCase()})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Coverage"}),jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:[Nt.averageCoveragePercentage.toFixed(1),"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:`h-2 rounded-full ${Nt.averageCoveragePercentage>=80?"bg-green-500":Nt.averageCoveragePercentage>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(Nt.averageCoveragePercentage,100)}%`}})})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[jsxRuntimeExports.jsxs("p",{children:["Units: ",jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:[Nt.unitsCoveredCount,"/",Nt.unitsCount]})]}),jsxRuntimeExports.jsxs("p",{children:["Prompts: ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:Nt.promptsCount})]})]})]})]},Nt.paperId))}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"Total Question Types"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900",children:it.questionTypesCount})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"Missing Types"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-red-600",children:it.missingQuestionTypesCount})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"Total Prompts"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900",children:it.totalPromptsCount})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"Topics"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900",children:it.topicsCount})]})]}),Dt.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg border border-gray-200 p-4",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"showMissingOnly",checked:at,onChange:Nt=>ot(Nt.target.checked),className:"rounded"}),jsxRuntimeExports.jsxs("label",{htmlFor:"showMissingOnly",className:"text-gray-700 font-medium",children:["Show Missing Only (",Dt.length," types)"]})]}),Dt.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"w-5 h-5 text-red-600"}),"Missing Question Types"]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[Dt.length," question type",Dt.length!==1?"s":""," need",Dt.length===1?"s":""," more prompts"]})]}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"Type ID"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"Title"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"Unit"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"Topic"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"Prompts"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"Deficit"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-gray-200",children:Dt.map(Nt=>jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-sm font-mono text-gray-900",children:Nt.typeId}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-sm text-gray-900",children:Nt.title}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-sm text-gray-600",children:Nt.unitName}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-sm text-gray-600",children:Nt.topicName}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-sm",children:jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded text-xs font-semibold",children:[Nt.currentPromptsCount,"/",Nt.requiredPromptsCount]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-sm",children:jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded text-xs font-semibold",children:["-",Nt.deficit]})})]},Nt.questionTypeId))})]})})]}),it.papers.map(Nt=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>wt(Nt.paperId),className:"w-full px-6 py-4 border-b border-gray-200 bg-gray-50 hover:bg-gray-100 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Nt.paperName}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[Nt.averageCoveragePercentage.toFixed(1),"% coverage  ",Nt.promptsCount," prompts"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${Rt(Nt.status)}`,children:Nt.status.toUpperCase()}),jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:lt.has(Nt.paperId)?"":""})]})]}),lt.has(Nt.paperId)&&jsxRuntimeExports.jsx("div",{className:"divide-y divide-gray-200",children:Nt.units.map(zt=>jsxRuntimeExports.jsxs("div",{className:"px-6 py-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>kt(zt.unitId),className:"w-full flex justify-between items-start mb-3 hover:opacity-75",children:[jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[Et(zt.status),zt.unitName]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[zt.topicsCoveredCount,"/",zt.topicsCount," topics covered"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("span",{className:`px-2 py-1 rounded text-xs font-semibold ${Rt(zt.status)}`,children:[zt.averageCoveragePercentage.toFixed(0),"%"]}),jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:ut.has(zt.unitId)?"":""})]})]}),ut.has(zt.unitId)&&jsxRuntimeExports.jsx("div",{className:"space-y-2 mt-3",children:zt.topics.map(Vt=>jsxRuntimeExports.jsxs("div",{className:"ml-4 p-3 bg-gray-50 rounded border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"font-medium text-gray-900 flex items-center gap-2",children:[Et(Vt.status),Vt.topicName]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[Vt.populatedQuestionTypesCount,"/",Vt.requiredQuestionTypesCount," types  ",Vt.promptsCount," prompts"]})]}),jsxRuntimeExports.jsxs("span",{className:`px-2 py-1 rounded text-xs font-semibold ${Rt(Vt.status)}`,children:[Vt.coveragePercentage.toFixed(0),"%"]})]}),Vt.missingTypes.length>0&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-red-600 mt-2 bg-red-50 p-2 rounded",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold mb-1",children:"Missing types:"}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:Vt.missingTypes.map(Gt=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{children:Gt.typeId}),jsxRuntimeExports.jsxs("span",{className:"text-red-700 font-semibold",children:[Gt.currentPromptsCount,"/",Gt.requiredPromptsCount]})]},Gt.questionTypeId))})]})]},Vt.topicId))})]},zt.unitId))})]},Nt.paperId))]})}function CommandPalette(){const[e,i]=reactExports.useState(!1),[o,d]=reactExports.useState(""),[h,g]=reactExports.useState([]),[b,j]=reactExports.useState([]),[_,$]=reactExports.useState(0),_e=useNavigate();reactExports.useEffect(()=>{(async()=>{try{const at=await db.getSubjects();g(at);const ot=[];for(const lt of at){const ct=await db.getQuizzesBySubject(lt.id);ot.push(...ct)}j(ot)}catch(at){console.error("Failed to load command palette data:",at)}})()},[]),reactExports.useEffect(()=>{const st=at=>{(at.metaKey||at.ctrlKey)&&at.key==="k"&&(at.preventDefault(),i(ot=>!ot),d(""),$(0)),at.key==="Escape"&&e&&(i(!1),d(""),$(0))};return window.addEventListener("keydown",st),()=>window.removeEventListener("keydown",st)},[e]);const et=[{id:"home",label:"Home",description:"Return to dashboard",icon:Home,action:()=>{_e("/"),i(!1)}},{id:"discover",label:"Discover",description:"Browse playlists and featured content",icon:Compass,action:()=>{_e("/discover"),i(!1)}},{id:"subjects",label:"Subjects",description:"Browse all subjects",icon:BookOpen,action:()=>{_e("/subjects"),i(!1)}},{id:"library",label:"Library",description:"View saved quizzes",icon:Library,action:()=>{_e("/library"),i(!1)}},{id:"profile",label:"Profile",description:"View your stats and achievements",icon:User,action:()=>{_e("/profile"),i(!1)}},{id:"leaderboard",label:"Leaderboard",description:"See top performers",icon:Trophy,action:()=>{_e("/leaderboard"),i(!1)}}],tt=h.map(st=>({id:`subject-${st.id}`,label:st.name,description:`Open ${st.name} subject`,icon:BookOpen,action:()=>{_e(`/subjects/${st.id}`),i(!1)}})),rt=b.map(st=>({id:`quiz-${st.id}`,label:st.title,description:st.description,icon:BookOpen,action:()=>{_e(`/quiz/${st.id}`),i(!1)}})),nt=reactExports.useMemo(()=>{if(!o)return[...et,...tt.slice(0,3)];const st=o.toLowerCase();return[...et,...tt,...rt].filter(ot=>{var lt;return ot.label.toLowerCase().includes(st)||((lt=ot.description)==null?void 0:lt.toLowerCase().includes(st))}).slice(0,8)},[o,et,tt,rt]);reactExports.useEffect(()=>{$(0)},[o]);const it=st=>{st.key==="ArrowDown"?(st.preventDefault(),$(at=>Math.min(at+1,nt.length-1))):st.key==="ArrowUp"?(st.preventDefault(),$(at=>Math.max(at-1,0))):st.key==="Enter"&&nt[_]&&(st.preventDefault(),nt[_].action())};return e?jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-[1400]",children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>i(!1)}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-start justify-center pt-[20vh] px-4",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden",onClick:st=>st.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-4 border-b",children:[jsxRuntimeExports.jsx(Search,{size:20,className:"text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:o,onChange:st=>d(st.target.value),onKeyDown:it,placeholder:"Search for pages, subjects, or quizzes...",className:"flex-1 bg-transparent outline-none text-lg",autoFocus:!0}),jsxRuntimeExports.jsx("button",{onClick:()=>i(!1),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close",children:jsxRuntimeExports.jsx(X,{size:18,className:"text-gray-400"})})]}),jsxRuntimeExports.jsx("div",{className:"max-h-96 overflow-y-auto",children:nt.length===0?jsxRuntimeExports.jsxs("div",{className:"p-8 text-center text-gray-500",children:['No results found for "',o,'"']}):jsxRuntimeExports.jsx("div",{className:"p-2",children:nt.map((st,at)=>{const ot=st.icon;return jsxRuntimeExports.jsxs("button",{onClick:st.action,onMouseEnter:()=>$(at),className:`
                          w-full flex items-center gap-3 p-3 rounded-xl text-left
                          transition-colors
                          ${at===_?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}
                        `,children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg ${at===_?"bg-blue-100":"bg-gray-100"}`,children:jsxRuntimeExports.jsx(ot,{size:18})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold truncate",children:st.label}),st.description&&jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500 truncate",children:st.description})]})]},st.id)})})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border-t bg-gray-50 text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("kbd",{className:"px-2 py-1 bg-white border rounded",children:""}),jsxRuntimeExports.jsx("span",{children:"Navigate"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("kbd",{className:"px-2 py-1 bg-white border rounded",children:"Enter"}),jsxRuntimeExports.jsx("span",{children:"Select"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("kbd",{className:"px-2 py-1 bg-white border rounded",children:"Esc"}),jsxRuntimeExports.jsx("span",{children:"Close"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("kbd",{className:"px-2 py-1 bg-white border rounded",children:"K"}),jsxRuntimeExports.jsx("span",{children:"or"}),jsxRuntimeExports.jsx("kbd",{className:"px-2 py-1 bg-white border rounded",children:"Ctrl+K"})]})]})]})})]})}):null}function App(){return jsxRuntimeExports.jsx(ToastProvider,{children:jsxRuntimeExports.jsx(ConfirmProvider,{children:jsxRuntimeExports.jsxs(BrowserRouter,{children:[jsxRuntimeExports.jsx(CommandPalette,{}),jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/quiz/:quizId",element:jsxRuntimeExports.jsx(QuizPlayerPage,{})}),jsxRuntimeExports.jsxs(Route,{path:"/admin",element:jsxRuntimeExports.jsx(AdminLayout,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(AdminDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"subjects",element:jsxRuntimeExports.jsx(SubjectsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"units",element:jsxRuntimeExports.jsx(UnitsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"topics",element:jsxRuntimeExports.jsx(TopicsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"prompts",element:jsxRuntimeExports.jsx(PromptsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"diagrams",element:jsxRuntimeExports.jsx(DiagramsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"diagram-templates",element:jsxRuntimeExports.jsx(DiagramTemplatesPage,{})}),jsxRuntimeExports.jsx(Route,{path:"quizzes",element:jsxRuntimeExports.jsx(QuizzesPage,{})}),jsxRuntimeExports.jsx(Route,{path:"playlists",element:jsxRuntimeExports.jsx(PlaylistsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"coverage",element:jsxRuntimeExports.jsx(CoveragePage,{})}),jsxRuntimeExports.jsx(Route,{path:"ops",element:jsxRuntimeExports.jsx(ContentOpsHome,{})}),jsxRuntimeExports.jsx(Route,{path:"ops/subjects/:subjectId",element:jsxRuntimeExports.jsx(SubjectOpsDetail,{})}),jsxRuntimeExports.jsx(Route,{path:"ops/import-log",element:jsxRuntimeExports.jsx(ImportLogPage,{})}),jsxRuntimeExports.jsx(Route,{path:"import",element:jsxRuntimeExports.jsx(ImportPage,{})}),jsxRuntimeExports.jsx(Route,{path:"tools",element:jsxRuntimeExports.jsx(ToolsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"audit",element:jsxRuntimeExports.jsx(AuditPage,{})})]}),jsxRuntimeExports.jsx(Route,{path:"/admin/diagrams/:diagramId",element:jsxRuntimeExports.jsx(DiagramEditor,{})}),jsxRuntimeExports.jsx(Route,{path:"/admin/diagram-templates/:templateId",element:jsxRuntimeExports.jsx(DiagramTemplateEditor,{})}),jsxRuntimeExports.jsx(Route,{path:"/admin/diagram-templates/view/:id",element:jsxRuntimeExports.jsx(DiagramTemplateDetailPage,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(AppShell,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(HomePage,{})}),jsxRuntimeExports.jsx(Route,{path:"/discover",element:jsxRuntimeExports.jsx(DiscoverPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/playlists/:playlistId",element:jsxRuntimeExports.jsx(PlaylistDetailPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/library",element:jsxRuntimeExports.jsx(LibraryPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/subjects",element:jsxRuntimeExports.jsx(SubjectsPage$1,{})}),jsxRuntimeExports.jsx(Route,{path:"/subjects/:subjectId",element:jsxRuntimeExports.jsx(SubjectDetailPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/results/:attemptId",element:jsxRuntimeExports.jsx(ResultsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/profile",element:jsxRuntimeExports.jsx(ProfilePage,{})}),jsxRuntimeExports.jsx(Route,{path:"/profile/subjects",element:jsxRuntimeExports.jsx(SubjectBreakdownHub,{})}),jsxRuntimeExports.jsx(Route,{path:"/profile/subjects/:subjectId",element:jsxRuntimeExports.jsx(SubjectBreakdownDetail,{})}),jsxRuntimeExports.jsx(Route,{path:"/leaderboard",element:jsxRuntimeExports.jsx(LeaderboardPage,{})})]})})})]})]})})})}createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
